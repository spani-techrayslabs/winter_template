!function(){"use strict";var e={939:function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.UidSecureSignalProvider=void 0,i.isDebugModeOn=function(e){const i=new URLSearchParams(window.location.search).get("uid2_ss_debug");return"TRUE"===i?.toLocaleUpperCase()||document.currentScript?.src.startsWith(e)},i.UidSecureSignalProvider=class{debug;isEuid;hasRegisteredSecureSignals;constructor(e=!1,i=!1){this.debug=e,this.isEuid=i,this.hasRegisteredSecureSignals=!1,(!this.isEuid&&"function"==typeof window.getUid2AdvertisingToken||this.isEuid&&"function"==typeof window.getEuidAdvertisingToken)&&(this.logging("register SecureSignalProvider"),this.registerSecureSignalProvider())}registerSecureSignalProvider=()=>{const e=this.retrieveAdvertisingTokenHandler();e?(window.googletag=window.googletag||{cmd:[]},window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[],this.hasRegisteredSecureSignals||(this.hasRegisteredSecureSignals=!0,window.googletag.secureSignalProviders.push({id:this.isEuid?"euid.eu":"uidapi.com",collectorFunction:async()=>{this.logging("collectorFunction invoked");const i=await this.getUidAdvertisingTokenWithRetry(e);return this.logging(`collectorFunction pushes: ${i}`),i}}))):console.warn("UidSecureSignal: Please implement `getUidAdvertisingToken`")};logging=e=>{this.debug&&console.log(`UidSecureSignal: ${e}`)};retrieveAdvertisingTokenHandler=()=>{if(this.isEuid){if("function"==typeof window.getEuidAdvertisingToken)return window.getEuidAdvertisingToken;if(window.__euid&&"getAdvertisingTokenAsync"in window.__euid)return window.__euid.getAdvertisingTokenAsync.bind(window.__euid)}else{if("function"==typeof window.getUid2AdvertisingToken)return window.getUid2AdvertisingToken;if(window.__uid2&&"getAdvertisingTokenAsync"in window.__uid2)return window.__uid2.getAdvertisingTokenAsync.bind(window.__uid2)}};getUidAdvertisingTokenWithRetry=(e,i=3)=>{let n=this;return new Promise((async(t,r)=>{let d=0;!async function o(s){if(d>=i)return n.logging(`getUidAdvertisingTokenWithRetry failed with error after retry: ${s}`),void r(s);d++;try{const i=await e();n.logging(`getUidAdvertisingTokenWithRetry resolved with: ${i}`),t(i)}catch(s){n.logging(`getUidAdvertisingTokenWithRetry failed with error: ${s}`),o(s)}}()}))};resetProviderRegistration=()=>{this.hasRegisteredSecureSignals=!1}}}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var d=i[t]={exports:{}};return e[t](d,d.exports,n),d.exports}!function(){const e=n(939);window.__euidSecureSignalProvider=new e.UidSecureSignalProvider((0,e.isDebugModeOn)("https://cdn.integ.euid.eu/"),!0),window.__euid=window.__euid||{callbacks:[]},window.__euid.callbacks?.push((e=>{"InitCompleted"!==e&&"SdkLoaded"!==e&&"IdentityUpdated"!==e||"getIdentity"in window.__euid&&window.__euid.getIdentity()&&("IdentityUpdated"===e&&window.__euidSecureSignalProvider?.resetProviderRegistration(),window.__euidSecureSignalProvider?.registerSecureSignalProvider())}))}()}();