;window.pgDevice='Desktop';;window.pgGeo='IN';/*! For license information please see tooplatecom.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={2216:(e,t,n)=>{"use strict";var i,r,o=n(3821),s=n(6360),a=n(5675),d=n(2101),c=n(2703),l=n(8789);let u=(0,o.Q)()((r=class e extends s.Q{constructor(t){super(t),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t}),this.auctionRequestedMiddleware=this.auctionRequestedMiddleware.bind(this),this.addAuctionIdToRelevantComparisonGroups=this.addAuctionIdToRelevantComparisonGroups.bind(this),this.auctionSyncFinishedMiddleware=this.auctionSyncFinishedMiddleware.bind(this),this.modifyAuctionSyncFinishedEventPayload=this.modifyAuctionSyncFinishedEventPayload.bind(this),this.addCpmsToAdComparisonGroups=this.addCpmsToAdComparisonGroups.bind(this),this.addCompletedAuctionToAdComparisonGroups=this.addCompletedAuctionToAdComparisonGroups.bind(this),this.checkIfAnyAdComparisonGroupsAreReadyToBeCompleted=this.checkIfAnyAdComparisonGroupsAreReadyToBeCompleted.bind(this),this.completeAdComparison=this.completeAdComparison.bind(this),this.removeSlotsFromSlotToComparisonGroupMap=this.removeSlotsFromSlotToComparisonGroupMap.bind(this),this.emitAuctionSyncFinished=this.emitAuctionSyncFinished.bind(this),this.blockLosingSlotsFromUsage=this.blockLosingSlotsFromUsage.bind(this)}registerMiddlewaresHook(){this.eventBus.addMiddleware(e.PluginName,d.h.AdComparisonAuctionRequestedMiddleware,a.w.auctionRequested,this.auctionRequestedMiddleware),this.eventBus.addMiddleware(e.PluginName,d.h.AdComparisonAuctionSyncFinishedMiddleware,a.w.auctionSyncFinished,this.auctionSyncFinishedMiddleware)}registerEventListenersHook(){this.eventBus.on(a.w.completeAdComparisonRequested,this.completeAdComparison,!1,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),this.eventBus.detachAllForNamespace(e.PluginName),await super.deactivate()}auctionRequestedMiddleware(e){const t=e=>void 0!==typeof this.config.slotToComparisonGroupMap[e];return e.adUnitsElementIDs.some(t)&&this.addAuctionIdToRelevantComparisonGroups({adUnitsElementIDs:e.adUnitsElementIDs.filter(t),auctionID:e.auctionID}),e}addAuctionIdToRelevantComparisonGroups(t){t.adUnitsElementIDs.forEach((n=>{const i=this.config.slotToComparisonGroupMap[n],r=this.config.comparisonGroups.find((e=>e.name===i));r&&!r.auctions[t.auctionID]&&(r.auctions[t.auctionID]=!1,this.logger.log({message:"Auction with ID: ".concat(t.auctionID,' added to the list of auctions for Comparison Group "').concat(i,'".'),namespace:e.PluginName}))}))}auctionSyncFinishedMiddleware(t){const n=Object.keys(this.config.slotToComparisonGroupMap);if(0===n.length||!t.elementsIDs.some((e=>n.includes(e))))return this.logger.log({namespace:e.PluginName,message:"Element Ids not subject to ad comparison forwarding ".concat(a.w.auctionSyncFinished," without modifications."),payload:t}),t;const i=this.modifyAuctionSyncFinishedEventPayload(t);return this.logger.log({namespace:e.PluginName,message:"Forwarding ".concat(a.w.auctionSyncFinished),payload:i}),i}modifyAuctionSyncFinishedEventPayload(e){const t=e.elementsIDs.filter((e=>!Object.keys(this.config.slotToComparisonGroupMap).includes(e)));return this.addCpmsToAdComparisonGroups(e),this.addCompletedAuctionToAdComparisonGroups(e),this.checkIfAnyAdComparisonGroupsAreReadyToBeCompleted(),{elementsIDs:t,callback:e.callback,auctionID:e.auctionID,refreshBlockingAdSlots:e.refreshBlockingAdSlots?e.refreshBlockingAdSlots.filter((e=>t.includes(e))):[],winningBids:e.winningBids,finishedHeaderBidders:e.finishedHeaderBidders,isTimeout:e.isTimeout}}addCpmsToAdComparisonGroups(e){e.elementsIDs.filter((t=>Object.keys(this.config.slotToComparisonGroupMap).includes(t)&&e.winningBids.has(t))).forEach((t=>{const n=this.config.comparisonGroups.find((e=>e.name===this.config.slotToComparisonGroupMap[t]));n&&n.slotGroups.length>0&&n.slotGroups.forEach((n=>{var i;Object.keys(n.elementIdsCpms).includes(t)&&(n.elementIdsCpms[t]=e.winningBids.get(t)||0,n.finishedHeaderBidders=e.finishedHeaderBidders,n.isTimeout=e.isTimeout,null!==(i=e.refreshBlockingAdSlots)&&void 0!==i&&i.includes(t)&&n.refreshBlockingSlots.push(t))}))}))}addCompletedAuctionToAdComparisonGroups(e){this.config.comparisonGroups.filter((t=>t.auctions.hasOwnProperty(e.auctionID))).forEach((t=>t.auctions[e.auctionID]=!0))}checkIfAnyAdComparisonGroupsAreReadyToBeCompleted(){this.config.comparisonGroups.forEach((t=>{if(!0!==t.comparisonComplete&&Object.values(t.auctions).every((e=>!0===e))){const n={groupName:t.name,elementIds:Object.entries(this.config.slotToComparisonGroupMap).filter((e=>e[1]===t.name)).map((e=>e[0]))};this.logger.log({payload:n,namespace:e.PluginName,message:"Dispatching ".concat(a.w.completeAdComparisonRequested," event for group ").concat(t.name,".")}),this.eventBus.emit(a.w.completeAdComparisonRequested,n)}}))}completeAdComparison(t){const n=this.config.comparisonGroups.find((e=>e.name===t.groupName&&!e.comparisonComplete));if(!n)return void this.logger.error({namespace:e.PluginName,message:"".concat(a.w.completeAdComparisonRequested," event recieved for missing or already completed group."),verboseLevel:3,payload:t,type:l.f.RequestedCompletionOfAdComparisonGroupFailed});n.slotGroups.forEach((e=>{Object.entries(e.elementIdsCpms).forEach((n=>{let[i,r]=n;t.elementIds.includes(i)&&(e.cumulativeCpm+=r*e.cpmMultiplier)}))}));let i=n.slotGroups.reduce(((e,t)=>e.cumulativeCpm>t.cumulativeCpm?e:t));(i.cumulativeCpm=0)&&(i=n.slotGroups.reduce(((e,n)=>Object.keys(e.elementIdsCpms).filter((e=>t.elementIds.includes(e))).length>Object.keys(n.elementIdsCpms).filter((e=>t.elementIds.includes(e))).length?e:n)));const r=Object.keys(i.elementIdsCpms),o=Object.entries(this.config.slotToComparisonGroupMap).filter((e=>{let[t,i]=e;return i===n.name&&!r.includes(t)})).map((e=>e[0]));this.removeSlotsFromSlotToComparisonGroupMap(n.name),this.emitAuctionSyncFinished(i,n.name),this.blockLosingSlotsFromUsage(o),n.comparisonComplete=!0}removeSlotsFromSlotToComparisonGroupMap(e){for(const t in this.config.slotToComparisonGroupMap)this.config.slotToComparisonGroupMap[t]===e&&delete this.config.slotToComparisonGroupMap[t]}emitAuctionSyncFinished(t,n){const i={elementsIDs:Object.keys(t.elementIdsCpms),callback:()=>{},auctionID:n,refreshBlockingAdSlots:t.refreshBlockingSlots,winningBids:new Map(Object.entries(t.elementIdsCpms)),finishedHeaderBidders:t.finishedHeaderBidders,isTimeout:t.isTimeout};this.logger.log({namespace:e.PluginName,message:"Dispatching ".concat(a.w.auctionSyncFinished," event for winning slots after completing comparison."),payload:i}),this.eventBus.emit(a.w.auctionSyncFinished,i)}blockLosingSlotsFromUsage(t){this.logger.log({namespace:e.PluginName,message:"Dispatching ".concat(a.w.adUnitsBlockedFromUsage," event for losing slots after completing comparison."),payload:{elementsIDs:t}}),this.eventBus.emit(a.w.adUnitsBlockedFromUsage,{elementsIDs:t})}},r.PluginName=c.f.AdComparisonPlugin,i=r))||i;const p=u.PluginName;window.pgPluginManager.registerPlugin(p,u,(function(){return window.pgPluginManager.getConfig([{viewConfigurationID:1135,comparisonGroups:[],slotToComparisonGroupMap:{}}])}))},9789:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(6360),s=n(2703),a=n(5450),d=n(7018);let c=function(e){return e[e.GeoEdge=0]="GeoEdge",e[e.Confiant=1]="Confiant",e}({});var l,u,p=n(8789);let h=(0,i.Q)()((u=class e extends o.Q{constructor(t){super(t),this.confiantGlobal="confiant",this.confiantTimeout=1e3,this.confiantEventEmitted=!1,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.injectConfiantScript=this.injectConfiantScript.bind(this),this.emitConfiantReadyEvent=this.emitConfiantReadyEvent.bind(this)}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.injectConfiantScript(),await super.activate()}injectConfiantScript(){window[this.confiantGlobal]=window[this.confiantGlobal]||{},window[this.confiantGlobal][this.config.pluginSettings.propertyId]=window[this.confiantGlobal][this.config.pluginSettings.propertyId]||{clientSettings:{}};(window[this.confiantGlobal][this.config.pluginSettings.propertyId].clientSettings||(window[this.confiantGlobal][this.config.pluginSettings.propertyId].clientSettings={})).prebidNameSpace="pgPrebid";const t="https://cdn.confiant-integrations.net/".concat(this.config.pluginSettings.propertyId,"/gpt_and_prebid/config.js");if(document.querySelector('script[src="'.concat(t,'"]')))return void this.emitConfiantReadyEvent();const n=document.createElement("script");n.src=t,n.async=!1,n.onload=this.emitConfiantReadyEvent;const i=document.head;if(!i)return this.logger.error({message:"Attempting to inject Confiant in a document without head present.",namespace:e.PluginName,type:p.f.ConfiantDocumentHeadNotPresentError}),void this.emitConfiantReadyEvent();setTimeout((()=>{this.emitConfiantReadyEvent()}),this.confiantTimeout),i.appendChild(n)}emitConfiantReadyEvent(){if(this.confiantEventEmitted)return;const t={vendor:c.Confiant};this.logger.log({payload:t,namespace:e.PluginName,message:"Event: ".concat(r.w.adQualityVendorReady),verboseLevel:1}),this.eventBus.emit(r.w.adQualityVendorReady,t),this.confiantEventEmitted=!0}},u.PluginName=s.f.ConfiantPlugin,l=u))||l;var g,f;let m=(0,i.Q)()((f=class e extends o.Q{constructor(t){super(t),this.geoEdgeTimeout=1e3,this.geoEdgeEventEmitted=!1,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.injectGeoEdgeScript=this.injectGeoEdgeScript.bind(this),this.emitGeoEdgeReadyEvent=this.emitGeoEdgeReadyEvent.bind(this)}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.injectGeoEdgeScript(),await super.activate()}injectGeoEdgeScript(){window.grumi={key:this.config.pluginSettings.key};const t=document.createElement("script"),n="https://rumcdn.geoedge.be/grumi-ip.js";if(document.querySelector('script[src="'.concat(n,'"]')))return void this.emitGeoEdgeReadyEvent();t.src=n,t.async=!0,t.onload=this.emitGeoEdgeReadyEvent;const i=document.head;if(!i)return this.logger.error({message:"Attempting to inject GeoEdge in a document without head present.",namespace:e.PluginName,type:p.f.GeoEdgeDocumentHeadNotPresentError}),void this.emitGeoEdgeReadyEvent();setTimeout((()=>{this.emitGeoEdgeReadyEvent()}),this.geoEdgeTimeout),i.appendChild(t)}emitGeoEdgeReadyEvent(){if(this.geoEdgeEventEmitted)return;const t={vendor:c.GeoEdge};this.logger.log({payload:t,namespace:e.PluginName,message:"Event: ".concat(r.w.adQualityVendorReady),verboseLevel:1}),this.eventBus.emit(r.w.adQualityVendorReady,t),this.geoEdgeEventEmitted=!0}},f.PluginName=s.f.GeoEdgePlugin,g=f))||g;var v,b,y=n(2101);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let I=(0,i.Q)()((b=class e extends o.Q{constructor(t){super(t),this.adQualityEventEmitted=!1,this.clientTargetingService=void 0,this.vendorsLoadingStatus=new Map,this.mathRandom=Math.random(),this.plugins=[],this.eventBuffer=[],this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.clientTargetingService=this.config.clientTargetingService,this.initializeAdQualityVendorPlugins=this.initializeAdQualityVendorPlugins.bind(this),this.activateVendorsPlugins=this.activateVendorsPlugins.bind(this),this.handleAdQualityVendorReady=this.handleAdQualityVendorReady.bind(this),this.removeMiddleware=this.removeMiddleware.bind(this)}registerMiddlewaresHook(){this.logger.log({message:"Adding refresh blocking middleware.",namespace:e.PluginName,verboseLevel:2}),this.eventBus.addMiddleware(e.PluginName,y.h.AdQualityPluginAdUnitAdServerRefreshRequestedMiddleware,r.w.adUnitAdServerRefreshRequested,(e=>(this.eventBuffer.push(e),e)),!0)}registerEventListenersHook(){this.config.eventBus.on(r.w.adQualityVendorReady,this.handleAdQualityVendorReady,!1,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:1}),this.initializeAdQualityVendorPlugins(),this.adQualityEventEmitted||await this.activateVendorsPlugins(),await super.activate()}async deactivate(){return this.plugins=[],this.config.eventBus.detachAllForNamespace(e.PluginName),this.removeMiddleware(),await super.deactivate()}initializeAdQualityVendorPlugins(){0!==this.config.vendors.length?this.config.vendors.forEach((e=>{const t=e.percent/100;if(this.mathRandom>=t)return;const n={countryCodes:e.countries,state:d.b.Includes},i={deviceTypes:Object.values(a.b).filter((t=>e.devices.map((e=>e.toLowerCase())).includes(t))),state:d.b.Includes};if(this.clientTargetingService.meetsGeoTargetingRequirements(n)&&this.config.clientTargetingService.meetsDeviceTargetingRequirements(i)){this.vendorsLoadingStatus.set(e.type,!1);const t={logger:this.logger,eventBus:this.eventBus,taskQueue:this.taskQueue};switch(e.type){case c.Confiant:this.plugins.push(new h(w(w({},t),{},{pluginSettings:{propertyId:e.propertyId}})));break;case c.GeoEdge:this.plugins.push(new m(w(w({},t),{},{pluginSettings:{key:e.key}})))}}})):this.removeMiddleware()}async activateVendorsPlugins(){if(0===this.plugins.length)return void this.removeMiddleware();const e=this.plugins.filter((async e=>await e.activate()));await Promise.all(e)}handleAdQualityVendorReady(e){this.vendorsLoadingStatus.set(e.vendor,!0),Array.from(this.vendorsLoadingStatus.values()).every((e=>!!e))&&this.removeMiddleware()}removeMiddleware(){this.logger.log({message:"Removing refresh blocking middleware.",namespace:e.PluginName,verboseLevel:2}),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),this.logger.log({message:"Re-emitting ".concat(r.w.adUnitAdServerRefreshRequested," events."),namespace:e.PluginName,payload:this.eventBuffer,verboseLevel:3});for(const e of this.eventBuffer)this.eventBus.emit(r.w.adUnitAdServerRefreshRequested,e);this.eventBuffer=[]}},b.PluginName=s.f.AdQualityPlugin,v=b))||v;var E=n(9754);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=I.PluginName;window.pgPluginManager.registerPlugin(T,I,(function(){let e=window.pgPluginManager.getConfig([{viewConfigurationID:1135,vendors:[],clientTargetingService:!1}]);return e&&(e=x(x({},e),{},{clientTargetingService:E.Q})),e}))},5991:(e,t,n)=>{"use strict";var i={};n.r(i),n.d(i,{clearInterval:()=>B,clearTimeout:()=>j,setInterval:()=>N,setTimeout:()=>L});var r,o,s=n(3821),a=n(5675),d=n(6360),c=n(2703),l=n(8789);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let g=(0,s.Q)()((o=class e extends d.Q{constructor(t){super(t),this.smartReactPlugins=[],this.eventBasedPlugins=[],this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.handleAdUnitDisplayed=this.handleAdUnitDisplayed.bind(this),this.disableAdRefreshForAdUnits=this.disableAdRefreshForAdUnits.bind(this),this.handleAdUnitDestroyed=this.handleAdUnitDestroyed.bind(this),this.handleAdditionalAdSlotCreated=this.handleAdditionalAdSlotCreated.bind(this),this.handleCloneAdUnitsRequested=this.handleCloneAdUnitsRequested.bind(this)}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(a.w.adUnitAdditionalSlotCreated,this.handleAdditionalAdSlotCreated,!1,e.PluginName),this.eventBus.on(a.w.adUnitLoaded,this.handleAdUnitDisplayed,!1,e.PluginName),this.eventBus.on(a.w.adUnitEmptyRendered,this.handleAdUnitDisplayed,!1,e.PluginName),this.eventBus.on(a.w.adUnitDestroyed,this.handleAdUnitDestroyed,!1,e.PluginName),this.eventBus.on(a.w.adUnitElementRemoved,(e=>{this.handleAdUnitDestroyed({elementsIDs:[e]}).then((()=>{}))}),!1,e.PluginName),this.eventBus.on(a.w.disableAdRefreshRequested,this.disableAdRefreshForAdUnits,!0,e.PluginName),this.eventBus.on(a.w.cloneAdUnitsRequested,this.handleCloneAdUnitsRequested,!1,e.PluginName),this.eventBus.on(a.w.adSlotLoadedByAdServer,(e=>{const t=window.setTimeout((()=>{this.handleAdUnitDisplayed(e),window.clearTimeout(t)}),1500)}),!1,e.PluginName)}beforeActivate(){return this.logger.log({namespace:e.PluginName,message:"Before activate plugin.",verboseLevel:3}),super.beforeActivate()}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.createPlugins(),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.detachAllForNamespace(e.PluginName),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),await Promise.all(this.smartReactPlugins.map((e=>e.deactivate()))).then((e=>e.every((e=>e)))).catch((e=>!1)).finally((()=>{this.smartReactPlugins=[]}))&&await super.deactivate()}createPlugins(){for(const t of this.config.adUnitSettings){const n=this.config.adRefreshFactory.createSmartReactPlugin(p({logger:this.config.logger,eventBus:this.config.eventBus,taskQueue:this.config.taskQueue},t));if(!n){this.logger.error({message:"Missing factory for slot: ".concat(t.elementId),namespace:e.PluginName,payload:t,type:l.f.MissingFactory});break}this.smartReactPlugins.push(n)}for(const t of this.config.eventBasedAdUnitSettings){const n=this.config.adRefreshFactory.createEventBasedRefreshPlugin(p({logger:this.config.logger,eventBus:this.config.eventBus,taskQueue:this.config.taskQueue},t));if(!n){this.logger.error({message:"Missing factory for slot: ".concat(t.elementId),namespace:e.PluginName,payload:t,type:l.f.MissingFactory});break}this.eventBasedPlugins.push(n)}}async handleAdUnitDisplayed(e){const t=this.smartReactPlugins.find((t=>t.getElementId()===e));!t||t.isActive()||t.isForceDeactivated()||await t.activate();const n=this.eventBasedPlugins.find((t=>t.getElementId()===e));n&&!n.isActive()&&await n.activate()}async handleAdUnitDestroyed(e){const t=e.elementsIDs.map((async e=>{var t;return await(null===(t=this.smartReactPlugins.find((t=>t.getElementId()===e)))||void 0===t?void 0:t.deactivate())})),n=e.elementsIDs.map((async e=>{var t;return await(null===(t=this.eventBasedPlugins.find((t=>t.getElementId()===e)))||void 0===t?void 0:t.deactivate())}));await Promise.all([...t,...n])}async disableAdRefreshForAdUnits(e){const t=e.elementsIDs.length?this.smartReactPlugins.filter((t=>e.elementsIDs.includes(t.getElementId()))).map((e=>e.forceDeactivate())):this.smartReactPlugins.map((e=>e.forceDeactivate())),n=e.elementsIDs.length?this.eventBasedPlugins.filter((t=>e.elementsIDs.includes(t.getElementId()))).map((e=>e.deactivate())):this.eventBasedPlugins.map((e=>e.deactivate()));await Promise.all([...t,...n])}handleCloneAdUnitsRequested(e){e.ext&&(e.ext.isSmartSlotChild||e.ext.isCompanionAd)||e.newAdUnitsElementIds.forEach((t=>{const n=this.config.adUnitSettings.find((e=>e.elementId===t)),i=this.config.eventBasedAdUnitSettings.find((e=>e.elementId===t));n||i||this.handleAdditionalAdSlotCreated({adUnitElementId:e.cloneFromAdUnitElementId,newAdunitElementId:t,newSizes:[]})}))}handleAdditionalAdSlotCreated(t){const n=this.config.adUnitSettings.find((e=>e.elementId===t.adUnitElementId)),i=this.config.eventBasedAdUnitSettings.find((e=>e.elementId===t.adUnitElementId));if(n){const i=this.smartReactPlugins.find((e=>e.getElementId()===t.newAdunitElementId));if(i)return void i.deactivate().then((()=>{}));const r=this.config.adRefreshFactory.createSmartReactPlugin(p(p({},n),{},{logger:this.config.logger,eventBus:this.config.eventBus,taskQueue:this.config.taskQueue,elementId:t.newAdunitElementId}));r||this.logger.error({message:"Missing factory for slot: ".concat(n.elementId),namespace:e.PluginName,payload:n,type:l.f.MissingFactory}),r&&this.smartReactPlugins.push(r)}if(i){const n=this.eventBasedPlugins.find((e=>e.getElementId()===t.newAdunitElementId));if(n)return void n.deactivate().then((()=>{}));const r=this.config.adRefreshFactory.createEventBasedRefreshPlugin(p(p({},i),{},{logger:this.config.logger,eventBus:this.config.eventBus,taskQueue:this.config.taskQueue,elementId:t.newAdunitElementId}));r||this.logger.error({message:"Missing factory for slot: ".concat(i.elementId),namespace:e.PluginName,payload:i,type:l.f.MissingFactory}),r&&this.eventBasedPlugins.push(r)}}},o.PluginName=c.f.AdRefreshManagerPlugin,r=o))||r;var f=n(329);let m=function(e){return e[e.SmartReact=0]="SmartReact",e[e.TimeBased=1]="TimeBased",e[e.EventBased=2]="EventBased",e}({});var v,b;let y=(0,s.Q)()((b=class e extends d.Q{constructor(t){super(t),this.sessionId=void 0,this.adunitIdToAdUnitCodeMapping=new Map,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.sessionId="".concat(Date.now()).concat((0,f.$C)()),this.config.adunitIdToAdUnitCodeMapping.forEach((e=>this.adunitIdToAdUnitCodeMapping.set(e[0],e[1]))),this.handleOnAdRefresh=this.handleOnAdRefresh.bind(this),this.handleAdSlotDefined=this.handleAdSlotDefined.bind(this)}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.on(a.w.adUnitRefreshRequested,this.handleOnAdRefresh,!1,e.PluginName),this.eventBus.on(a.w.adSlotDefined,this.handleAdSlotDefined,!0,e.PluginName),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.detachAllForNamespace(e.PluginName),await super.deactivate()}handleAdSlotDefined(e){this.adunitIdToAdUnitCodeMapping.set(e.elementId,e.adUnitCode)}handleOnAdRefresh(t){const n=this.adunitIdToAdUnitCodeMapping.get(t.adUnitElementID);this.loggingIsDisabled()||t.refreshType!==m.SmartReact&&t.refreshType!==m.TimeBased||this.logger.log({message:"Ad Unit refreshed.",namespace:e.PluginName,verboseLevel:1,payload:{session_id:this.sessionId,adunit_id:n,site:window.location.hostname,r:1},type:l.f.SmartReactDataInfo})}loggingIsDisabled(){return(0,f.pc)("smartReactDisableLogging")}},b.PluginName=c.f.SmartReactLoggingPlugin,v=b))||v;var A=n(3916);class w extends A.A{constructor(e){super(e)}applyTargeting(e){if(!e||!e.adUnitSettings)return e;e.adUnitSettings=this.filterByTargeting(e.adUnitSettings),e.eventBasedAdUnitSettings=this.filterByTargeting(e.eventBasedAdUnitSettings);const t=e.adUnitSettings.filter((t=>e.eventBasedAdUnitSettings.map((e=>e.elementId)).includes(t.elementId))).map((e=>e.elementId));return t.length>0&&(e.adUnitSettings=e.adUnitSettings.filter((e=>t.some((t=>t!==e.elementId)))),e.eventBasedAdUnitSettings=e.eventBasedAdUnitSettings.filter((e=>t.some((t=>t!==e.elementId))))),e}}var S=n(9754),I=n(2166),E=n(4028),_=n(3081);class x{execute(e,t){return t.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.elementId===t.elementId))||e.push(t),e)),[])}}class P{execute(e,t){return t.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.elementId===t.elementId))||e.push(t),e)),[])}}var T=n(7165);class O{execute(e,t){let n=[];const i=Object.values(t);return t=Object.keys(t).map((e=>[e,t[e]])).filter((t=>e.map((e=>e.elementId)).includes(t[0]))).filter(((e,t)=>i.indexOf(e[1])===t)).reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),e.some((e=>Object.keys(t).includes(e.elementId)))?(e.forEach((e=>{if(Object.keys(t).includes(e.elementId)){const i=(0,T.A4)(e);i.elementId=t[e.elementId],n.push(i)}n.push(e)})),{updatedAdUnits:n,adUnitsUsingAmazonMultiFormatElementIdsMap:t}):{updatedAdUnits:e,adUnitsUsingAmazonMultiFormatElementIdsMap:t}}}class C{constructor(e,t){this.settingsTargetingServiceOnAdUnit=e,this.contextTypeStrategyFactory=t}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new x),n=this.contextTypeStrategyFactory.getContext(new P),i=(0,T.A4)(e.adUnitSettings),r=(0,T.A4)(e.eventBasedAdUnitSettings);e.adUnitSettings=t.executeTaskStrategy(e.adUnitSettings,this.settingsTargetingServiceOnAdUnit),e.eventBasedAdUnitSettings=n.executeTaskStrategy(e.eventBasedAdUnitSettings,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:g.PluginName,message:"Before activate task: ".concat(_.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{smartReactAdUnitsBefore:i,smartReactAdUnitsAfter:e.adUnitSettings,eventBasedAdUnitsBefore:r,eventBasedAdUnitsAfter:e.eventBasedAdUnitSettings}})}executeBusinessLogicForAdUnitsAmazonMultiFormat(e){const t=this.contextTypeStrategyFactory.getContext(new O),n=(0,T.A4)(e.adUnitSettings),{updatedAdUnits:i,adUnitsUsingAmazonMultiFormatElementIdsMap:r}=t.executeTaskStrategy(e.adUnitSettings,e.adUnitsUsingAmazonMultiFormatElementIdsMap||{});e.adUnitSettings=i,e.adUnitsUsingAmazonMultiFormatElementIdsMap=r,e.logger.log({namespace:g.PluginName,message:"Before activate task: ".concat(_.w.AD_UNITS_USING_AMAZON_MULTI_FORMAT,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnitSettings}})}}class R{constructor(e){this.config=e}createSmartReactPlugin(e){return this.config.smartReactFactory?this.config.smartReactFactory.create(e):null}createEventBasedRefreshPlugin(e){return this.config.eventBasedRefreshFactory?this.config.eventBasedRefreshFactory.create(e):null}}var U=n(4047),k=n(8389);const D=((e,t)=>{let n=null;return()=>{if(null!==n)return n;const i=new Blob([t],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(i);return n=e(r),setTimeout((()=>URL.revokeObjectURL(r))),n}})((e=>{const t=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),i=new Map,r=new Worker(e);r.addEventListener("message",(({data:e})=>{if(void 0!==(r=e).method&&"call"===r.method){const{params:{timerId:r,timerType:o}}=e;if("interval"===o){const e=t.get(r);if(void 0===typeof e)throw new Error("The timer is in an undefined state.");if("number"==typeof e){const t=i.get(e);if(void 0===t||t.timerId!==r||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else"function"==typeof e&&e()}else if("timeout"===o){const e=n.get(r);if(void 0===typeof e)throw new Error("The timer is in an undefined state.");if("number"==typeof e){const t=i.get(e);if(void 0===t||t.timerId!==r||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else"function"==typeof e&&(e(),n.delete(r))}}else{if(!(e=>"number"==typeof e.id&&"boolean"==typeof e.result)(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:r}=e,o=i.get(r);if(void 0===o)throw new Error("The timer is in an undefined state.");const{timerId:s,timerType:a}=o;i.delete(r),"interval"===a?t.delete(s):n.delete(s)}}var r}));return{clearInterval:e=>{if("function"==typeof t.get(e)){const n=(0,k.generateUniqueNumber)(i);i.set(n,{timerId:e,timerType:"interval"}),t.set(e,n),r.postMessage({id:n,method:"clear",params:{timerId:e,timerType:"interval"}})}},clearTimeout:e=>{if("function"==typeof n.get(e)){const t=(0,k.generateUniqueNumber)(i);i.set(t,{timerId:e,timerType:"timeout"}),n.set(e,t),r.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})}},setInterval:(e,n=0,...i)=>{const o=(0,k.generateUniqueNumber)(t);return t.set(o,(()=>{e(...i),"function"==typeof t.get(o)&&r.postMessage({id:null,method:"set",params:{delay:n,now:performance.timeOrigin+performance.now(),timerId:o,timerType:"interval"}})})),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.timeOrigin+performance.now(),timerId:o,timerType:"interval"}}),o},setTimeout:(e,t=0,...i)=>{const o=(0,k.generateUniqueNumber)(n);return n.set(o,(()=>e(...i))),r.postMessage({id:null,method:"set",params:{delay:t,now:performance.timeOrigin+performance.now(),timerId:o,timerType:"timeout"}}),o}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(({data:n})=>{try{if("clear"===n.method){const{id:e,params:{timerId:t,timerType:o}}=n;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error(\'The given type "\'.concat(o,\'" is not supported\'));postMessage({id:e,result:s(t)})}}else{if("set"!==n.method)throw new Error(\'The given method "\'.concat(n.method,\'" is not supported\'));{const{params:{delay:r,now:s,timerId:a,timerType:m}}=n;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,a,s);else{if("timeout"!==m)throw new Error(\'The given type "\'.concat(m,\'" is not supported\'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,a,s)}}}}catch(e){postMessage({error:{message:e.message},id:n.id,result:null})}}))})();'),B=e=>D().clearInterval(e),j=e=>D().clearTimeout(e),N=(...e)=>D().setInterval(...e),L=(...e)=>D().setTimeout(...e);var M,z;let F=(0,s.Q)()((z=class e{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.logger=e,this.callback=t,this.delayTime=n,this.isResumable=i,this.remainingTime=void 0,this.startTime=void 0,this.timerId=void 0,this.state=void 0,this.remainingTime=n,this.state=U.s.NotStarted}getState(){return this.state}getIsResumable(){return this.isResumable}start(){this.startTimer(!1)}resume(){this.startTimer(!0)}stop(){this.stopTimer(!1)}pause(){this.stopTimer(!0)}getRemainingTime(){const e=(this.state===U.s.Started&&this.startTime||Date.now())+this.remainingTime-Date.now();return e<0?0:e}startTimer(t){if(this.state===U.s.Started)return;this.startTime=Date.now(),this.timerId&&e.timerContext.clearTimeout(this.timerId);const n=t&&this.isResumable?this.remainingTime:this.delayTime;this.logger.log({message:"Start timer",namespace:e.PluginName,verboseLevel:3,payload:{delayTime:this.delayTime,remainingTime:n,timeStamp:(0,T.oS)()}}),this.timerId=e.timerContext.setTimeout((()=>{this.state=U.s.Triggered,this.callback()}),n),this.state=U.s.Started}stopTimer(t){if(this.state!==U.s.NotStarted&&this.state!==U.s.Paused)if(this.timerId&&e.timerContext.clearTimeout(this.timerId),t){const e=Date.now()-this.startTime;this.remainingTime-e>0?this.remainingTime-=e:this.remainingTime=0,this.state=U.s.Paused}else this.remainingTime=this.delayTime,this.state=U.s.NotStarted}},z.PluginName=c.f.JobScheduler,z.timerContext=void 0,(()=>{z.timerContext=window;try{L((()=>z.timerContext=i),0)}catch(e){}})(),M=z))||M;var q,H,V=n(6811),$=n(2541),G=n(7267);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Q=(0,s.Q)()((H=class e extends d.Q{constructor(t){super(t),this.storageKey="pg_smart_react_data",this.visibilityRefreshKey="viewability_refresh",this.visibilityRefreshValue="true",this.bigCreativeArea=G.W.LARGE_AD_AREA_THRESHOLD,this.intersectionOptions=void 0,this.bufferInterval=void 0,this.element=void 0,this.observer=void 0,this.viewabilityJob=void 0,this.refreshJob=void 0,this.bufferJob=void 0,this.refreshInterval=void 0,this.viewabilityInterval=void 0,this.bufferIntervalReached=!1,this.refreshIntervalReached=!1,this.viewabilityIntervalReached=!1,this.visibilityStateVisible=!1,this.forceDeactivated=!1,this.refreshCount=0,this.isFirstActivation=!0,this.fallbackTimer=0,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.intersectionOptions={root:null,rootMargin:"0px",threshold:this.config.minVisibility/100},this.refreshInterval=1e3*this.config.minimumRefreshInterval,this.viewabilityInterval=1e3*this.config.minViewabilityRefreshTime,this.bufferInterval=1e3*this.config.minVisibleSeconds,this.handleVisibilityStateChanges=this.handleVisibilityStateChanges.bind(this),this.handleIntersection=this.handleIntersection.bind(this),this.bufferJobCallback=this.bufferJobCallback.bind(this),this.refreshJobCallback=this.refreshJobCallback.bind(this),this.viewabilityJobCallback=this.viewabilityJobCallback.bind(this),this.removeAdUnits=this.removeAdUnits.bind(this),this.haltAndWaitForAuctionRequestedEvent=this.haltAndWaitForAuctionRequestedEvent.bind(this),this.readdAdUnits=this.readdAdUnits.bind(this),this.incrementRefreshCount=this.incrementRefreshCount.bind(this),this.attachRefreshCountKeyValue=this.attachRefreshCountKeyValue.bind(this),this.handleAdUnitRenderedBidder=this.handleAdUnitRenderedBidder.bind(this),this.handleAuctionRequested=this.handleAuctionRequested.bind(this),this.setProductInfo(),this.element=document.getElementById(this.config.elementId)||void 0,this.initMaximumRefreshesConstraintsInStorage()}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(a.w.adUnitsUnblockedFromUsage,this.readdAdUnits,this.isFirstActivation,e.PluginName),this.eventBus.on(a.w.adUnitsBlockedFromUsage,this.removeAdUnits,this.isFirstActivation,e.PluginName),this.eventBus.on(a.w.rerunAuctionInitiated,this.haltAndWaitForAuctionRequestedEvent,this.isFirstActivation,e.PluginName),this.eventBus.on(a.w.adUnitRenderingDelayed,this.haltAndWaitForAuctionRequestedEvent,this.isFirstActivation,e.PluginName),this.eventBus.on(a.w.adUnitRenderedBidder,this.handleAdUnitRenderedBidder,this.isFirstActivation,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.registerMiddlewares(),this.registerEventListeners(),this.start(),this.isFirstActivation=!1,await super.activate()}async deactivate(){var t,n,i;return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),null===(t=this.refreshJob)||void 0===t||t.stop(),null===(n=this.viewabilityJob)||void 0===n||n.stop(),null===(i=this.bufferJob)||void 0===i||i.stop(),this.observer&&this.element&&this.observer.unobserve(this.element),this.observer&&delete this.observer,this.element&&delete this.element,this.eventBus.detachAllForNamespace(e.PluginName),await super.deactivate()}async shutdown(){return this.deactivate()}getElementId(){return this.config.elementId}isForceDeactivated(){return this.forceDeactivated}async forceDeactivate(){return this.forceDeactivated=!0,await this.deactivate()}initMaximumRefreshesConstraintsInStorage(){this.isStorageAvailable()&&(this.config.refreshCapPerSession&&!window.sessionStorage.getItem(this.storageKey)&&window.sessionStorage.setItem(this.storageKey,JSON.stringify({})),this.config.refreshCapPer24Hours&&!window.localStorage.getItem(this.storageKey)&&window.localStorage.setItem(this.storageKey,JSON.stringify({})))}start(){this.maximumRefreshTimesReached()||(this.element=this.element||document.getElementById(this.config.elementId)||void 0,this.bufferJob=new F(this.config.logger,this.bufferJobCallback,this.bufferInterval),this.refreshJob=new F(this.config.logger,this.refreshJobCallback,this.refreshInterval),this.viewabilityJob=new F(this.config.logger,this.viewabilityJobCallback,this.viewabilityInterval,!0),this.eventBus.emit(a.w.adUnitTimeOnPageLimited,{elementId:this.getElementId(),ttls:[this.refreshJob,this.viewabilityJob]}),this.refreshJob.start(),this.fallbackTimer=window.setTimeout((()=>{this.handleAdUnitRenderedBidder({slotID:this.getElementId(),bidders:["google"],creativeWidth:1,creativeHeight:1})}),3e3))}handleAdUnitRenderedBidder(e){var t,n;if(e.slotID!==this.getElementId())return;window.clearTimeout(this.fallbackTimer);const i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.intersectionOptions);e.creativeWidth*e.creativeHeight>this.bigCreativeArea&&(i.threshold=this.config.bigCreativeMinVisibility/100),(0===(null===(t=this.element)||void 0===t?void 0:t.offsetHeight)||null!==(n=e.ext)&&void 0!==n&&n.handleRefreshAsTimeBased)&&(i.threshold=0),this.createIntersectionObserver(i),this.handleVisibilityStateChanges()}createIntersectionObserver(e){this.observer=new IntersectionObserver(this.handleIntersection,e)}handleVisibilityStateChanges(){var t,n;if(this.config.refreshOutOfFocus)return this.element&&(null===(t=this.observer)||void 0===t||t.observe(this.element)),this.visibilityStateVisible=!0,this.bufferIntervalReached=!0,void(this.viewabilityIntervalReached=!0);"visible"===document.visibilityState&&(this.element&&(null===(n=this.observer)||void 0===n||n.observe(this.element)),this.visibilityStateVisible=!0);document.addEventListener("visibilitychange",(()=>{var t,n,i,r;if("visible"===document.visibilityState)return this.element&&(null===(r=this.observer)||void 0===r||r.observe(this.element)),void(this.visibilityStateVisible=!0);const o=window.setInterval((()=>{if("visible"===document.visibilityState){var t;if(!this.visibilityStateVisible)this.element&&(null===(t=this.observer)||void 0===t||t.observe(this.element)),this.visibilityStateVisible=!0,this.logger.log({message:"Visibility fallback triggered. Resuming timers.",namespace:e.PluginName,verboseLevel:3,payload:{}});window.clearInterval(o)}}),1e3);this.element&&(null===(t=this.observer)||void 0===t||t.unobserve(this.element)),null===(n=this.bufferJob)||void 0===n||n.stop(),this.bufferIntervalReached=!1,null===(i=this.viewabilityJob)||void 0===i||i.pause(),this.visibilityStateVisible=!1}))}handleIntersection(e){var t,n,i;e[0].isIntersecting||0===this.config.minVisibility?null===(t=this.bufferJob)||void 0===t||t.start():(null===(n=this.viewabilityJob)||void 0===n||n.pause(),null===(i=this.bufferJob)||void 0===i||i.stop(),this.bufferIntervalReached=!1)}bufferJobCallback(){var t;this.bufferIntervalReached=!0,this.logger.log({message:"Buffer timer finished",namespace:e.PluginName,verboseLevel:3,payload:{elementId:this.config.elementId,timeStamp:(0,T.oS)()}}),null===(t=this.viewabilityJob)||void 0===t||t.resume()}refreshJobCallback(){this.refreshIntervalReached=!0,this.logger.log({message:"Refresh timer finished",namespace:e.PluginName,verboseLevel:3,payload:{elementId:this.config.elementId,timeStamp:(0,T.oS)()}}),this.triggerRefresh()}viewabilityJobCallback(){this.viewabilityIntervalReached=!0,this.logger.log({message:"Viewability timer finished",namespace:e.PluginName,verboseLevel:3,payload:{elementId:this.config.elementId,timeStamp:(0,T.oS)()}}),this.triggerRefresh()}haltAndWaitForAuctionRequestedEvent(t){var n,i,r,o;t.adUnitsElementIDs.includes(this.getElementId())&&(this.element&&(null===(n=this.observer)||void 0===n||n.unobserve(this.element)),null===(i=this.bufferJob)||void 0===i||i.stop(),null===(r=this.refreshJob)||void 0===r||r.stop(),null===(o=this.viewabilityJob)||void 0===o||o.stop(),this.bufferIntervalReached=!1,this.refreshIntervalReached=!1,this.viewabilityIntervalReached=!1,this.eventBus.on(a.w.auctionRequested,this.handleAuctionRequested,!1,e.PluginName))}incrementRefreshCount(){this.refreshCount+=1}attachRefreshCountKeyValue(){this.eventBus.emit(a.w.logAnalyticsDataRequested,{key:V.p.RefreshCount,value:"".concat(this.refreshCount),isPageLevel:!1,adUnitElementIds:[this.config.elementId]})}triggerRefresh(t){var n,i,r,o;let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.bufferIntervalReached||!this.refreshIntervalReached||!this.viewabilityIntervalReached)return;if(s&&this.incrementRefreshCount(),this.attachRefreshCountKeyValue(),this.logger.log({message:"Finish refresh process.",namespace:e.PluginName,verboseLevel:3,payload:{elementId:this.config.elementId,timeStamp:(0,T.oS)()}}),this.config.minVisibility>0){const t={adUnitElementId:this.config.elementId,key:this.visibilityRefreshKey,value:this.visibilityRefreshValue};this.logger.log({message:"Event: ".concat(a.w.attachKeyValueRequested,"."),namespace:e.PluginName,verboseLevel:3,payload:t}),this.eventBus.emit(a.w.attachKeyValueRequested,t)}const d=t||(0,f.$C)(),c={auctionID:d,adUnitElementID:this.config.elementId,refreshType:this.config.minVisibility?m.SmartReact:m.TimeBased,minimumRefreshInterval:this.refreshInterval};this.logger.log({message:"Event: ".concat(a.w.adUnitRefreshRequested,"."),namespace:e.PluginName,payload:c}),this.eventBus.emit(a.w.adUnitRefreshRequested,c);const l={auctionID:d,adUnitsElementIDs:[this.config.elementId]};this.logger.log({message:"Event: ".concat(a.w.auctionRequested,"."),namespace:e.PluginName,verboseLevel:1,payload:l}),this.eventBus.emit(a.w.auctionRequested,l),this.reduceRemainingRefreshTimes(),this.element&&(null===(n=this.observer)||void 0===n||n.unobserve(this.element)),null===(i=this.bufferJob)||void 0===i||i.stop(),null===(r=this.refreshJob)||void 0===r||r.stop(),null===(o=this.viewabilityJob)||void 0===o||o.stop(),this.bufferIntervalReached=!1,this.refreshIntervalReached=!1,this.viewabilityIntervalReached=!1,this.start()}reduceRemainingRefreshTimes(){this.config.maxRefreshTimes-=1,!this.areSessionAnd24HoursCapsDisabled()&&this.isStorageAvailable()&&(this.config.refreshCapPerSession&&this.updateRefreshesForSession(),this.config.refreshCapPer24Hours&&this.updateRefreshesFor24Hours())}updateRefreshesForSession(){const e=this.getSessionStorageSmartReactData();e[this.config.elementId].refreshesForSession=(this.getRefreshesForSession()+1).toString(),window.sessionStorage.setItem(this.storageKey,JSON.stringify(e))}areSessionAnd24HoursCapsDisabled(){return null===this.config.refreshCapPer24Hours&&null===this.config.refreshCapPerSession}maximumRefreshTimesReached(){if(this.config.maxRefreshTimes<=0)return!0;if(!this.isStorageAvailable())return!1;const e=this.config.refreshCapPerSession&&this.getRefreshesForSession()>=this.config.refreshCapPerSession,t=this.config.refreshCapPer24Hours&&this.getRefreshesFor24Hours()>=this.config.refreshCapPer24Hours;return!(!e&&!t)}updateRefreshesFor24Hours(){const e=this.getLocalStorageSmartReactData(),t=[],n=e[this.config.elementId].refreshDates,i=(new Date).setDate((new Date).getDate()-1);for(let e=0;e<n.length;e++)new Date(n[e]).getTime()>i&&t.push(n[e]);t.push((new Date).toISOString()),e[this.config.elementId].refreshDates=t,window.localStorage.setItem(this.storageKey,JSON.stringify(e))}getRefreshesForSession(){const e=this.getSessionStorageSmartReactData();return parseInt(e[this.config.elementId].refreshesForSession,10)||0}getRefreshesFor24Hours(){let e=0;const t=this.getLocalStorageSmartReactData()[this.config.elementId].refreshDates,n=(new Date).setDate((new Date).getDate()-1);for(let i=0;i<t.length;i++)new Date(t[i]).getTime()>n&&e++;return e}getLocalStorageSmartReactData(){var e;const t=JSON.parse(window.localStorage.getItem(this.storageKey));return null!==(e=t[this.config.elementId])&&void 0!==e&&e.refreshDates||(t[this.config.elementId]={refreshDates:[],refreshesForSession:"0"},window.localStorage.setItem(this.storageKey,JSON.stringify(t))),t}getSessionStorageSmartReactData(){const e=JSON.parse(window.sessionStorage.getItem(this.storageKey));return e[this.config.elementId]||(e[this.config.elementId]={},window.sessionStorage.setItem(this.storageKey,JSON.stringify(e))),e}isStorageAvailable(){return"localStorage"in window&&null!==window.localStorage&&"sessionStorage"in window&&null!==window.sessionStorage}handleAuctionRequested(t){t.adUnitsElementIDs.includes(this.config.elementId)&&(this.eventBus.detach(a.w.auctionRequested,this.handleAuctionRequested),this.logger.log({message:"Auction requested event processed",namespace:e.PluginName,verboseLevel:3,payload:{elementId:this.config.elementId,data:t,timeStamp:(0,T.oS)()}}),this.start())}removeAdUnits(t){t.elementsIDs.includes(this.config.elementId)&&(this.shutdown(),this.forceDeactivated=!0,this.eventBus.detach(a.w.auctionRequested,this.handleAuctionRequested),this.logger.log({namespace:e.PluginName,message:"Shutting down SmartReact for ad unit ".concat(this.config.elementId," triggered by ").concat(a.w.adUnitsBlockedFromUsage," event."),verboseLevel:1,payload:t}))}readdAdUnits(t){t.elementsIDs.includes(this.config.elementId)&&(this.forceDeactivated?super.activate().then((()=>{this.start(),this.logger.log({namespace:e.PluginName,message:"Re-enabling SmartReact for ad unit ".concat(this.config.elementId," triggered by ").concat(a.w.adUnitsUnblockedFromUsage," event."),verboseLevel:1,payload:t})})):this.isFirstActivation||this.activate().then((()=>{this.logger.log({namespace:e.PluginName,message:"Re-enabling SmartReact for ad unit ".concat(this.config.elementId," triggered by ").concat(a.w.adUnitsUnblockedFromUsage," event."),verboseLevel:1,payload:t})})))}setProductInfo(){this.eventBus.emit(a.w.logProductDataRequested,{key:V.p.ProductFeature,value:this.config.minVisibility?$.x.SmartReactRefresh:$.x.TimeBasedRefresh,adUnitElementId:this.config.elementId,macroValue:this.config.minimumRefreshInterval})}},H.PluginName=c.f.SmartReactPlugin,q=H))||q;class J{create(e){return new Q(e)}}const Y=new w(S.Q);try{const X=g.PluginName;function Z(){let e=window.pgPluginManager.getConfig([{adUnitSettings:[{elementId:"tooplatecom47398",maxRefreshTimes:9007199254740991,minimumRefreshInterval:28,minVisibility:50,bigCreativeMinVisibility:30,minVisibleSeconds:1,minViewabilityRefreshTime:1,refreshOutOfFocus:!1},{elementId:"tooplatecom47399",maxRefreshTimes:9007199254740991,minimumRefreshInterval:28,minVisibility:50,bigCreativeMinVisibility:30,minVisibleSeconds:1,minViewabilityRefreshTime:1,refreshOutOfFocus:!1},{elementId:"tooplatecom47400",maxRefreshTimes:9007199254740991,minimumRefreshInterval:28,minVisibility:50,bigCreativeMinVisibility:30,minVisibleSeconds:1,minViewabilityRefreshTime:1,refreshOutOfFocus:!1},{elementId:"tooplatecom47401",maxRefreshTimes:9007199254740991,minimumRefreshInterval:28,minVisibility:50,bigCreativeMinVisibility:30,minVisibleSeconds:1,minViewabilityRefreshTime:1,refreshOutOfFocus:!1},{elementId:"tooplatecom47402",maxRefreshTimes:9007199254740991,minimumRefreshInterval:28,minVisibility:50,bigCreativeMinVisibility:30,minVisibleSeconds:1,minViewabilityRefreshTime:1,refreshOutOfFocus:!1},{elementId:"tooplatecom47403",maxRefreshTimes:9007199254740991,minimumRefreshInterval:28,minVisibility:50,bigCreativeMinVisibility:30,minVisibleSeconds:1,minViewabilityRefreshTime:1,refreshOutOfFocus:!1},{elementId:"tooplatecom47404",maxRefreshTimes:9007199254740991,minimumRefreshInterval:20,minVisibility:0,bigCreativeMinVisibility:0,minVisibleSeconds:0,minViewabilityRefreshTime:0,refreshOutOfFocus:!1},{elementId:"tooplatecom47406",maxRefreshTimes:9007199254740991,minimumRefreshInterval:20,minVisibility:0,bigCreativeMinVisibility:0,minVisibleSeconds:0,minViewabilityRefreshTime:0,refreshOutOfFocus:!1}],eventBasedAdUnitSettings:[],taskHandler:{},adRefreshFactory:{},viewConfigurationID:1135}]),t=new E.G(S.Q);if(!e)return;const n={};return n.smartReactFactory=new J,e.adRefreshFactory=new R(n),e.taskHandler=new C(t,new I.W),e=Y.applyTargeting(e),e}if(window.pgPluginManager.registerPlugin(X,g,Z),Z()){const ee=y.PluginName;window.pgPluginManager.registerPlugin(ee,y,(function(){return window.pgPluginManager.getConfig([{adunitIdToAdUnitCodeMapping:[["tooplatecom47398","/8095840,22381294811/.2_A.47398.10_tooplate.com_tier1"],["tooplatecom47399","/8095840,22381294811/.2_A.47399.10_tooplate.com_tier1"],["tooplatecom47400","/8095840,22381294811/.2_A.47400.10_tooplate.com_tier1"],["tooplatecom47401","/8095840,22381294811/.2_A.47401.4_tooplate.com_tier1"],["tooplatecom47402","/8095840,22381294811/.2_A.47402.4_tooplate.com_tier1"],["tooplatecom47403","/8095840,22381294811/.2_A.47403.4_tooplate.com_tier1"],["tooplatecom47404","/8095840,22381294811/.2_A.47404.3_tooplate.com_tier1"],["tooplatecom47406","/8095840,22381294811/.2_A.47406.28_tooplate.com_tier1"]],viewConfigurationID:1135}])}))}}catch(te){window.pgPluginManager.baseConfig.logger.error({namespace:g.PluginName,message:"Error while Ad Refresh plugins creation.",type:l.f.AdRefreshPluginCreationError,verboseLevel:1,payload:te})}},2969:(e,t,n)=>{"use strict";var i,r,o=n(3081),s=n(5319),a=n(3821),d=n(5675),c=n(8789),l=n(6360),u=n(2703),p=n(3591);let h=(0,a.v)()((r=class e{constructor(e,t){this.eventBus=void 0,this.logger=void 0,this.resizeObserver=void 0,this.mutationObserversMap=new Map,this.observabilityMap=new Map,this.elementLineageMap=new Map,this.observerOptions={attributes:!0,attributeFilter:["class","style"]},this.processMutationEvent=this.processMutationEvent.bind(this),this.processResizeEvent=this.processResizeEvent.bind(this),this.resizeObserver=new(window.ResizeObserver||p.A)(this.processResizeEvent),this.eventBus=e,this.logger=t}addToPolicyObserver(t){if(this.elementLineageMap.has(t))return;const n=document.getElementById(t);if(!(n&&n instanceof HTMLElement))return void this.logger.log({namespace:e.ServiceName,message:"Failed to attach policy observer on ".concat(t,". Element invalid.")});this.resizeObserver.observe(n);let i=n;const r=[];for(;i instanceof HTMLElement;){const e=this.observabilityMap.get(i)||[],o=this.mutationObserversMap.get(t)||[],s=new MutationObserver(this.processMutationEvent);e.push(n),s.observe(i,this.observerOptions),o.push(s),r.push(i),this.mutationObserversMap.set(t,o),this.observabilityMap.set(i,e),i=i.parentNode}this.elementLineageMap.set(t,r),this.logger.log({namespace:e.ServiceName,message:"Policy observer attached on ".concat(t,".")})}processMutationEvent(e){for(const t of e){if("attributes"===t.type&&"style"===t.attributeName&&t.target instanceof HTMLElement&&("hidden"===t.target.style.visibility||!["","1"].includes(t.target.style.opacity))){for(const e of this.observabilityMap.get(t.target)||[])this.destroySlot(e);return}}}processResizeEvent(e){for(const t of e)if(0===t.contentRect.width&&0===t.contentRect.height&&t.target instanceof HTMLElement){const e=t.target.getBoundingClientRect();0===e.bottom&&0===e.right&&this.destroySlot(t.target)}}destroySlot(t){this.logger.log({namespace:e.ServiceName,message:"Requesting destroy on ".concat(t.id,".")}),this.eventBus.emit(d.w.adUnitDestroyRequested,{elementsIDs:[t.id]}),this.resizeObserver.unobserve(t);const n=this.mutationObserversMap.get(t.id)||[];for(const e of n)e.disconnect();this.mutationObserversMap.delete(t.id);for(const e of this.elementLineageMap.get(t.id)||[]){const n=this.observabilityMap.get(e)||[];n.splice(n.indexOf(t),1),0===n.length?this.observabilityMap.delete(e):this.observabilityMap.set(e,n)}this.elementLineageMap.delete(t.id)}},r.ServiceName="VisibilityPolicyService",i=r))||i;var g=n(2101),f=n(7165),m=n(3481),v=n(7267);class b{constructor(e){this.config=e,this.namespace="TargetingService",this.persistentKeyValues=new Map,this.logger=void 0,this.eventBus=void 0,this.slotKeyValueQueue={},this.handleAttachPageLevelKeyValueRequested=e=>{this.attachPageLevelKeyValue({key:e.key,value:e.value},e.fallbackToSlotLevel)},this.getDefaultPageLevelTargeting=()=>[...this.config.defaultPageLevelTargeting,...this.getReportingTargeting()],this.logger=this.config.logger,this.eventBus=this.config.eventBus,this.handleAttachKeyValueRequested=this.handleAttachKeyValueRequested.bind(this),this.handleClearOldKeyValuesAndAttachNewRequested=this.handleClearOldKeyValuesAndAttachNewRequested.bind(this),this.handleClearKeyValuesByKey=this.handleClearKeyValuesByKey.bind(this),this.handleAttachKeyValueToAllAdUnitsRequested=this.handleAttachKeyValueToAllAdUnitsRequested.bind(this),this.handleAttachKeyValuesToAll=this.handleAttachKeyValuesToAll.bind(this),this.handleAdSlotDefined=this.handleAdSlotDefined.bind(this),this.handleAttachPageLevelKeyValueRequested=this.handleAttachPageLevelKeyValueRequested.bind(this),this.eventBus.on(d.w.attachKeyValueRequested,this.handleAttachKeyValueRequested,!0,this.namespace),this.eventBus.on(d.w.clearOldKeyValuesAndAttachNewPairsRequested,this.handleClearOldKeyValuesAndAttachNewRequested,!0,this.namespace),this.eventBus.on(d.w.clearKeyValuesByKeyRequested,this.handleClearKeyValuesByKey,!0,this.namespace),this.eventBus.on(d.w.attachPageLevelKeyValueRequested,this.handleAttachPageLevelKeyValueRequested,!0,this.namespace),this.eventBus.on(d.w.attachKeyValueToAllAdUnitsRequested,this.handleAttachKeyValueToAllAdUnitsRequested,!0,this.namespace),this.eventBus.on(d.w.adSlotDefined,this.handleAdSlotDefined,!0,this.namespace),this.eventBus.on(d.w.attachKeyValuesToAll,this.handleAttachKeyValuesToAll,!0,this.namespace),this.setDefaultPageLevelTargeting()}attachPersistentKeyValuesForSlot(e){const t=this.config.adSlots.find((t=>t.adUnitElementId===e));if(!t)return;const n=this.config.adServerAdapterManager.getAdServerAdapter(t.adServerAdapterType);n&&n.addToQueue((()=>{[...this.persistentKeyValues].forEach((t=>{let[i,r]=t;return n.setSlotTargeting(e,i,r)}))}))}handleAttachKeyValueRequested(e){if(e.instreamVideoAdUnit)return;const t=this.config.adSlots.find((t=>t.adUnitElementId===e.adUnitElementId));if(!t)return void(this.slotKeyValueQueue[e.adUnitElementId]=[...this.slotKeyValueQueue[e.adUnitElementId]||[],e]);const n=this.config.adServerAdapterManager.getAdServerAdapter(t.adServerAdapterType);n&&n.addToQueue((()=>{if(!n.getSlots([t.adUnitElementId])[0])return this.logger.warn({namespace:this.namespace,message:"Setting key-value for ".concat(e.adUnitElementId," failed. Ad slot not found."),type:c.f.GPTFailedToAttachKeyValue,verboseLevel:1,payload:e}),this.slotKeyValueQueue[e.adUnitElementId]=this.slotKeyValueQueue[e.adUnitElementId]||[],void this.slotKeyValueQueue[e.adUnitElementId].push({key:e.key,value:e.value});this.logger.log({namespace:this.namespace,message:"Setting key-value for ".concat(e.adUnitElementId,"."),verboseLevel:3,payload:e}),this.slotKeyValueQueue[e.adUnitElementId]&&(this.slotKeyValueQueue[e.adUnitElementId].forEach((t=>{let{key:i,value:r}=t;n.setSlotTargeting(e.adUnitElementId,i,r)})),this.slotKeyValueQueue[e.adUnitElementId]=[]),n.setSlotTargeting(e.adUnitElementId,e.key,e.value)}))}handleAdSlotDefined(e){if(!this.slotKeyValueQueue[e.elementId]||!this.slotKeyValueQueue[e.elementId].length)return;const t=this.config.adSlots.find((t=>t.adUnitElementId===e.elementId));if(!t)return;const n=this.config.adServerAdapterManager.getAdServerAdapter(t.adServerAdapterType);n&&n.addToQueue((()=>{this.slotKeyValueQueue[e.elementId].forEach((t=>{let{key:i,value:r}=t;n.setSlotTargeting(e.elementId,i,r)})),this.slotKeyValueQueue[e.elementId]=[]}))}setDefaultPageLevelTargeting(){this.getDefaultPageLevelTargeting().forEach((e=>this.attachPageLevelKeyValue(e)))}attachPageLevelKeyValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{key:n,value:i}=e;this.config.adServerAdapterManager.getAdServerAdapters().forEach((e=>{e.addToQueue((()=>{if(!e.getConfig().pageLevelTargetingAvailable&&t)return this.persistentKeyValues.set(n,i),void this.config.adSlots.forEach((t=>e.setSlotTargeting(t.adUnitElementId,n,i,!0)));e.setTargeting(n,i)}))}))}handleClearOldKeyValuesAndAttachNewRequested(e){const t=this.config.adSlots.find((t=>t.adUnitElementId===e.adUnitElementId));if(!t)return;const n=this.config.adServerAdapterManager.getAdServerAdapter(t.adServerAdapterType);n&&n.addToQueue((()=>{const t=n.getSlots([e.adUnitElementId])[0];t&&e.keyValues.forEach((e=>{n.clearSlotTargeting(t.slotId,e.key),e.value&&n.setSlotTargeting(t.slotId,e.key,e.value)}))}))}handleClearKeyValuesByKey(e){const t=this.config.adSlots.find((t=>t.adUnitElementId===e.adUnitElementId));if(!t)return;const n=this.config.adServerAdapterManager.getAdServerAdapter(t.adServerAdapterType);n&&n.addToQueue((()=>{e.keys.forEach((e=>n.clearSlotTargeting(t.adUnitElementId,e)))}))}handleAttachKeyValueToAllAdUnitsRequested(e){this.persistentKeyValues.set(e.key,e.value),this.logger.log({namespace:this.namespace,message:"Setting persistent key-value for all Ad Units.",verboseLevel:1,payload:e}),this.config.adServerAdapterManager.getAdServerAdapters().forEach(((t,n)=>{t.addToQueue((()=>{this.config.adSlots.filter((e=>e.adServerAdapterType===n)).forEach((n=>t.setSlotTargeting(n.adUnitElementId,e.key,e.value)))}))}))}getPersistentKeyValues(){return[...this.persistentKeyValues].map((e=>{let[t,n]=e;return{key:t,value:n}}))}getReportingTargeting(){const e=[];return window[v.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]&&e.push({key:v.W.WRAPPER_ACTIVE_TARGETING_KEY_NAME,value:window[v.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]}),e}handleAttachKeyValuesToAll(e){for(let t in e)this.attachPageLevelKeyValue({key:t,value:e[t]},!0)}}var y=n(2541);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(e,t,n){this.logger=e,this.eventBus=t,this.targetingService=n,this.namespace="VastXmlBuilder",this.defaultParams={env:"vp",gdfp_req:1,output:"xml_vast4",unviewed_position_start:1,correlator:Date.now(),sz:"640x480|640x360",url:location.href},this.vastTagTargeting={},this.handleAttachKeyValueRequested=this.handleAttachKeyValueRequested.bind(this),this.eventBus.on(d.w.attachKeyValueRequested,this.handleAttachKeyValueRequested,!1,this.namespace)}buildVastXml(e,t,n,i){const r=new URL(e),o=[...Object.entries(this.getTargetingForSlot(t)).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)})),...Object.entries(this.isValidTargeting(i)||{}).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)}))],s=w(w(w({},this.defaultParams),n),{},{cust_params:o.join("&")});return Object.entries(s).forEach((e=>{let[t,n]=e;return r.searchParams.append(t,"".concat(n))})),this.logger.log({message:"Building VAST XML for slot ".concat(t.adUnitElementId,"."),namespace:this.namespace,verboseLevel:1,payload:s}),r.toString()}isValidTargeting(e){if("object"!=typeof e||null===e)return null;const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"string"==typeof e[n])t[n]=e[n];else{if(!Array.isArray(e[n])||!e[n].every((e=>"string"==typeof e)))return null;t[n]=e[n].join(",")}return t}handleAttachKeyValueRequested(e){e.instreamVideoAdUnit&&(this.vastTagTargeting[e.adUnitElementId]=this.vastTagTargeting[e.adUnitElementId]||{},this.vastTagTargeting[e.adUnitElementId][e.key]="string"==typeof e.value?e.value:e.value.join(","))}getTargetingForSlot(e){const t=w({},this.vastTagTargeting[e.adUnitElementId]||{});return this.targetingService.getDefaultPageLevelTargeting().forEach((e=>{let{key:n,value:i}=e;return t[n]=i})),this.targetingService.getPersistentKeyValues().forEach((e=>{let{key:n,value:i}=e;return t[n]=i})),e.targetingAB&&e.targetingAB.forEach((e=>{let{key:n,value:i}=e;return t[n]=i})),t.ow_format=[...t.ow_format||[],y._.Instream].join(","),t}}var E=n(4120);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T{constructor(e){this.config=e,this.namespace="SlotEventsService",this.previousCreativeAreas=new Map,this.registeredSlotEvents=new Map,this.firstAdSlotLoaded=!1,this.logger=void 0,this.eventBus=void 0,this.wrappedHandlersMap=new Map,this.rewardedSlotReadyCallback=e=>{this.eventBus.emit(d.w.rewardedSlotReady,e)},this.rewardedSlotGrantedCallback=e=>{this.eventBus.emit(d.w.rewardedSlotGranted,e)},this.rewardedSlotClosedCallback=e=>{this.eventBus.emit(d.w.rewardedSlotClosed,e)},this.customAdBlankedEventHandler=e=>{"detail"in e&&"adUnitElementId"in e.detail&&"string"==typeof e.detail.adUnitElementId&&this.eventBus.emit(d.w.customAdUnitEmptyRendered,e.detail.adUnitElementId)},this.wrapEventHandler=(e,t)=>{const n=n=>{try{return t(n)}catch(t){throw this.eventBus.emit(d.w.eventHandlerErrorOccurred,{error:t,context:{component:this.namespace,operation:E.eG.EventListenerExecution,eventName:e,eventArgs:(0,f.N1)(n),handlerContext:this.namespace},timestamp:(new Date).toISOString(),severity:E.MU.Critical}),this.logger.log({namespace:this.namespace,message:"Error in ".concat(e," handler: ").concat(t.message),verboseLevel:0}),t}};return this.wrappedHandlersMap.set(t,n),n},this.logger=this.config.logger,this.eventBus=this.config.eventBus,this.slotRenderEndedCallback=this.slotRenderEndedCallback.bind(this),this.slotOnLoadCallback=this.slotOnLoadCallback.bind(this),this.registerCustomAdBlankedEventHandler=this.registerCustomAdBlankedEventHandler.bind(this),this.registerRewardedSlotEventListeners=this.registerRewardedSlotEventListeners.bind(this),this.slotResponseReceivedCallback=this.slotResponseReceivedCallback.bind(this)}applySlotEventListeners(){this.config.adServerAdapterManager.getAdServerAdapters().forEach(((e,t)=>{this.registeredSlotEvents.get(t)||(this.registeredSlotEvents.set(t,!0),this.registerSlotRenderEndedEventListener(e),this.registerSlotOnLoadEventListener(e),this.registerRewardedSlotEventListeners(e),this.registerSlotResponseReceivedEventListener(e),this.registerCustomAdBlankedEventHandler())}))}removeSlotEventListeners(){this.config.adServerAdapterManager.getAdServerAdapters().forEach(((e,t)=>{this.registeredSlotEvents.get(t)&&(this.registeredSlotEvents.set(t,!1),e.removeEventListener("slotRenderEnded",this.wrappedHandlersMap.get(this.slotRenderEndedCallback)),e.removeEventListener("slotOnload",this.wrappedHandlersMap.get(this.slotOnLoadCallback)),e.removeEventListener("rewardedSlotReady",this.wrappedHandlersMap.get(this.rewardedSlotReadyCallback)),e.removeEventListener("rewardedSlotGranted",this.wrappedHandlersMap.get(this.rewardedSlotGrantedCallback)),e.removeEventListener("rewardedSlotClosed",this.wrappedHandlersMap.get(this.rewardedSlotClosedCallback)),e.removeEventListener("slotResponseReceived",this.wrappedHandlersMap.get(this.slotResponseReceivedCallback)),window.removeEventListener("pg_ad_blanked",this.wrappedHandlersMap.get(this.customAdBlankedEventHandler)),this.wrappedHandlersMap.clear())}))}registerSlotResponseReceivedEventListener(e){e.addEventListener("slotResponseReceived",this.wrapEventHandler("slotResponseReceived",this.slotResponseReceivedCallback))}registerSlotRenderEndedEventListener(e){e.addEventListener("slotRenderEnded",this.wrapEventHandler("slotRenderEnded",this.slotRenderEndedCallback))}registerSlotOnLoadEventListener(e){e.addEventListener("slotOnload",this.wrapEventHandler("slotOnload",this.slotOnLoadCallback))}registerRewardedSlotEventListeners(e){e.addEventListener("rewardedSlotReady",this.wrapEventHandler("rewardedSlotReady",this.rewardedSlotReadyCallback)),e.addEventListener("rewardedSlotGranted",this.wrapEventHandler("rewardedSlotGranted",this.rewardedSlotGrantedCallback)),e.addEventListener("rewardedSlotClosed",this.wrapEventHandler("rewardedSlotClosed",this.rewardedSlotClosedCallback))}registerCustomAdBlankedEventHandler(){window.addEventListener("pg_ad_blanked",this.wrapEventHandler("pg_ad_blanked",this.customAdBlankedEventHandler))}slotResponseReceivedCallback(e){const{slotId:t,responseIsNotNull:n}=e;this.eventBus.emit(d.w.adSlotResponseReceivedFromAdServer,{slotId:t,responseIsNotNull:n||!1})}slotRenderEndedCallback(e){const t=e.slotId;this.config.hptoCreativeIds&&this.checkForHpto(e);let n=[v.W.GOOGLE_BIDDER],i=e.isEmpty?(this.previousCreativeAreas.get(t)||[0,0])[0]:parseInt("".concat(((null==e?void 0:e.size)||["0","0"])[0]||"0"),10)||0,r=e.isEmpty?(this.previousCreativeAreas.get(t)||[0,0])[1]:parseInt("".concat(((null==e?void 0:e.size)||["0","0"])[1]||"0"),10)||0;if(this.config.amazonDisplayCreatives.includes(e.creativeId||-1)){n=[v.W.AMAZON_BIDDER];const t=e.targeting&&e.targeting.amznsz&&e.targeting.amznsz[0];if(t){const e=t.split("x");i=parseInt(e[0]||"0",10),r=parseInt(e[1]||"0",10)}}if(this.config.prebidDisplayCreatives.includes(e.creativeId||-1)){n=[e.targeting&&e.targeting.hb_bidder&&e.targeting.hb_bidder[0]||v.W.GOOGLE_BIDDER];const t=e.targeting&&e.targeting.hb_size&&e.targeting.hb_size[0];if(t){const e=t.split("x");i=parseInt(e[0]||"0",10),r=parseInt(e[1]||"0",10)}}this.eventBus.emit(d.w.adUnitRenderedBidder,x({bidders:n,creativeWidth:i,creativeHeight:r,slotID:t},e.isEmpty?{isEmpty:!0}:{})),this.eventBus.emit(d.w.adUnitAdRequestFinished,{bidder:n[0],creativeWidth:i,creativeHeight:r,slotID:t,isEmpty:!!e.isEmpty,auctionId:e.targeting&&e.targeting.auction_id&&e.targeting.auction_id[0]||""}),this.previousCreativeAreas.set(t,[i,r]);e.isEmpty?this.emitAdUnitEmptyRendered(t):this.emitAdUnitLoaded(t)}checkForHpto(e){var t,n;const i=[];e.creativeId&&i.push(e.creativeId),e.sourceAgnosticCreativeId&&i.push(e.sourceAgnosticCreativeId),i.length&&null!==(t=this.config)&&void 0!==t&&null!==(n=t.hptoCreativeIds)&&void 0!==n&&n.some((e=>i.includes(e)))&&(this.logger.log({namespace:this.namespace,message:"HPTO Creative detected for Slot: ".concat(e.slotId,"."),verboseLevel:1,payload:x(x({slotId:e.slotId},e.creativeId?{creativeId:e.creativeId}:null),e.sourceAgnosticCreativeId?{sourceAgnosticCreativeId:e.sourceAgnosticCreativeId}:null)}),this.eventBus.emit(d.w.skinAdRenderRequested,{elementsIDs:[e.slotId]}))}emitAdUnitLoaded(e){this.logger.log({namespace:this.namespace,message:"Event: ".concat(d.w.adUnitLoaded,"."),verboseLevel:1,payload:e}),this.eventBus.emit(d.w.adUnitLoaded,e)}emitAdUnitEmptyRendered(e){this.logger.warn({namespace:this.namespace,message:"No Ad was rendered for Slot: ".concat(e,"."),type:c.f.GPTEmptyRenderedAdSlotWarn,verboseLevel:1}),this.eventBus.emit(d.w.adUnitEmptyRendered,e)}slotOnLoadCallback(e){if(this.eventBus.emit(d.w.adSlotLoadedByAdServer,e.slotId),!this.firstAdSlotLoaded){this.firstAdSlotLoaded=!0;const t={elements:e.adapter.getSlots().map((e=>({id:e.slotId,sizes:e.sizes})))};this.logger.log({namespace:this.namespace,message:"All initially defined Ad slots when first slot loaded. Event: ".concat(d.w.initiallyDefinedAdSlots,"."),verboseLevel:3,payload:t}),this.eventBus.emit(d.w.initiallyDefinedAdSlots,t)}}}class O{constructor(e,t){this.config=e,this.targetingService=t,this.namespace="AdServerDataSetter",this.eventBus=void 0,this.audienceIds=new Set,this.lastEventAudienceIds=new Set,this.eventBus=this.config.eventBus,this.handleIncludeGoogleTagSecureSignalProviderRequested=this.handleIncludeGoogleTagSecureSignalProviderRequested.bind(this),this.setPpid=this.setPpid.bind(this),this.setFirstPartyData=this.setFirstPartyData.bind(this),this.setAudienceIds=this.setAudienceIds.bind(this),this.eventBus.on(d.w.setFirstPartyData,this.setFirstPartyData,!1,this.namespace),this.eventBus.on(d.w.includeGoogleTagSecureSignalProviderRequested,this.handleIncludeGoogleTagSecureSignalProviderRequested,!1,this.namespace),this.config.setPpidOnUserAudienceUpdate&&this.eventBus.on(d.w.userAudienceDataUpdated,this.setPpid,!1,this.namespace)}setAudienceIds(e){this.audienceIds=e;const t=Array.from(new Set([...this.lastEventAudienceIds,...this.audienceIds]));t.length&&this.targetingService.attachPageLevelKeyValue({key:"pps",value:t.join(",")},!0)}setFirstPartyData(e){if(!e.taxonomyIds)return;const t=Array.from(e.taxonomyIds);if(t.length&&this.targetingService.attachPageLevelKeyValue({key:"pps_c",value:t.join(",")},!0),e.audienceIds){this.lastEventAudienceIds=e.audienceIds;const t=Array.from(new Set([...e.audienceIds,...this.audienceIds]));t.length&&this.targetingService.attachPageLevelKeyValue({key:"pps",value:t.join(",")},!0)}}handleIncludeGoogleTagSecureSignalProviderRequested(e){this.config.adServerAdapterManager.getAdServerAdapters().forEach((t=>{t.addToQueue((()=>{t.includeSecureSignalProvider(e)}))}))}setPpid(e){this.config.adServerAdapterManager.getAdServerAdapters().forEach((t=>{t.addToQueue((()=>{var n;t.setPublisherProvidedId(null===(n=e.callback())||void 0===n?void 0:n.sha256HashedEmail)}))}))}}var C=n(329),R=n(6811);let U=function(e){return e.WebInterstitial="webInterstitial",e.Rewarded="rewarded",e}({});var k,D;function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let L=(0,a.Q)()((D=class e extends l.Q{constructor(t){super(t),this.targetingService=void 0,this.adSlotsDisplayed=new Set,this.processPublisherAdSlotsCount=0,this.targetingQueue=new Map,this.visibilityPolicyService=void 0,this.auctionIdToAdRefreshArguments=new Map,this.destroyedAndRemovedAdUnits=new Set,this.blockedUnits=new Map,this.hptoHiddenAdUnitIds=new Set,this.vastXmlBuilder=void 0,this.slotEventsService=void 0,this.adServerDataSetter=void 0,this.adUnitElementsOnPage=new Set,this.clonedAuctions=new Map,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),this.displayAdSlot=this.displayAdSlot.bind(this),this.handleOnRefreshRequested=this.handleOnRefreshRequested.bind(this),this.destroyAdUnitSlots=this.destroyAdUnitSlots.bind(this),this.destroyAndRemoveAdUnitSlots=this.destroyAndRemoveAdUnitSlots.bind(this),this.initializeOutOfPageAdUnits=this.initializeOutOfPageAdUnits.bind(this),this.initializeAdUnits=this.initializeAdUnits.bind(this),this.createAdSlot=this.createAdSlot.bind(this),this.handleAdditionalAddSlotCreated=this.handleAdditionalAddSlotCreated.bind(this),this.handleDefineAdSlotRequested=this.handleDefineAdSlotRequested.bind(this),this.initializeGoogleTagOptions=this.initializeGoogleTagOptions.bind(this),this.setKeyValuePair=this.setKeyValuePair.bind(this),this.handleSkinAdRenderRequested=this.handleSkinAdRenderRequested.bind(this),this.processPublisherAdSlots=this.processPublisherAdSlots.bind(this),this.refreshOutOfPageAdUnits=this.refreshOutOfPageAdUnits.bind(this),this.checkExternalAdSlots=this.checkExternalAdSlots.bind(this),this.completeAdComparisonMiddleware=this.completeAdComparisonMiddleware.bind(this),this.handleNonHptoUnblock=this.handleNonHptoUnblock.bind(this),this.handleBuildAndExecuteVastUrlRequested=this.handleBuildAndExecuteVastUrlRequested.bind(this),this.handleCloneAdUnitsRequested=this.handleCloneAdUnitsRequested.bind(this),this.addClonedAdUnitToExternallyHandledSlots=this.addClonedAdUnitToExternallyHandledSlots.bind(this),this.handleAdUnitDisplayed=this.handleAdUnitDisplayed.bind(this),this.handleAdUnitDestroyed=this.handleAdUnitDestroyed.bind(this),this.handleOnAdRefreshRequested=this.handleOnAdRefreshRequested.bind(this),this.recreateOutOfPageSlot=this.recreateOutOfPageSlot.bind(this),this.purgeRefreshEntriesForAuctionExpired=this.purgeRefreshEntriesForAuctionExpired.bind(this),this.handleAdUnitsRemovedFromUsage=this.handleAdUnitsRemovedFromUsage.bind(this),this.handleAdUnitsBlockedFromUsage=this.handleAdUnitsBlockedFromUsage.bind(this),this.handleAdUnitsDestroyRequested=this.handleAdUnitsDestroyRequested.bind(this),this.handleAuctionCloned=this.handleAuctionCloned.bind(this),this.visibilityPolicyService=new h(this.eventBus,this.logger),this.targetingService=new b(this.config),this.vastXmlBuilder=new I(this.logger,this.eventBus,this.targetingService),this.slotEventsService=new T(this.config),this.adServerDataSetter=new O(this.config,this.targetingService)}registerMiddlewaresHook(){this.eventBus.addMiddleware(e.PluginName,g.h.GptCompleteAdComparisonRequestedMiddleware,d.w.completeAdComparisonRequested,this.completeAdComparisonMiddleware)}registerEventListenersHook(){this.eventBus.on(d.w.adServerAddCallbackToQueRequested,(e=>{if(!this.config.adServerAdapterManager.hasAdapter(e.adServerAdapterType))return;this.config.adServerAdapterManager.getAdServerAdapter(e.adServerAdapterType).addToQueue(e.callback)}),!1,e.PluginName),this.eventBus.on(d.w.buildAndExecuteVastUrlRequested,this.handleBuildAndExecuteVastUrlRequested,!1,e.PluginName),this.eventBus.on(d.w.adUnitDisplayRequested,this.displayAdSlot,!1,e.PluginName),this.eventBus.on(d.w.adUnitDisplayed,this.handleAdUnitDisplayed,!1,e.PluginName),this.eventBus.on(d.w.adUnitRefreshRequested,this.handleOnAdRefreshRequested,!1,e.PluginName),this.eventBus.on(d.w.auctionCloned,this.handleAuctionCloned,!1,e.PluginName),this.eventBus.on(d.w.adUnitAdServerRefreshRequested,this.handleOnRefreshRequested,!1,e.PluginName),this.eventBus.on(d.w.adUnitDestroyRequested,this.destroyAdUnitSlots,!1,e.PluginName),this.eventBus.on(d.w.adUnitDestroyed,this.handleAdUnitDestroyed,!1,e.PluginName),this.eventBus.on(d.w.adUnitsBlockedFromUsage,this.destroyAndRemoveAdUnitSlots,!1,e.PluginName),this.eventBus.on(d.w.adUnitAdditionalSlotCreated,this.handleAdditionalAddSlotCreated,!1,e.PluginName),this.eventBus.on(d.w.adUnitDefineSlotRequested,this.handleDefineAdSlotRequested,!1,e.PluginName),this.eventBus.on(d.w.skinAdRenderRequested,this.handleSkinAdRenderRequested,!1,e.PluginName),this.eventBus.on(d.w.nonHptoAdUnitsUnblockedFromUsage,this.handleNonHptoUnblock,!1,e.PluginName),this.eventBus.on(d.w.cloneAdUnitsRequested,this.handleCloneAdUnitsRequested,!0,e.PluginName),this.eventBus.on(d.w.recreateOutOfPageSlotRequested,this.recreateOutOfPageSlot,!1,e.PluginName),this.eventBus.on(d.w.refreshEntriesForAuctionExpired,this.purgeRefreshEntriesForAuctionExpired,!1,e.PluginName),this.eventBus.on(d.w.adUnitElementAdded,(e=>{this.adUnitElementsOnPage.add(e)}),!0,e.PluginName),this.eventBus.on(d.w.adUnitElementRemoved,(e=>{this.adUnitElementsOnPage.delete(e),this.adSlotsDisplayed.delete(e),this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds([e])}),!0,e.PluginName),this.eventBus.on(d.w.adUnitsRemovedFromUsage,this.handleAdUnitsRemovedFromUsage,!0,e.PluginName),this.eventBus.on(d.w.adUnitsBlockedFromUsage,this.handleAdUnitsBlockedFromUsage,!0,e.PluginName),this.eventBus.on(d.w.adUnitDestroyRequested,this.handleAdUnitsDestroyRequested,!0,e.PluginName)}beforeActivate(){return this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.logger.log({namespace:e.PluginName,message:"Before activate event: ".concat(d.w.adUnitsRemovedFromUsage,"."),verboseLevel:3,payload:this.config.taskHandler.getRemovedAdUnits()}),super.beforeActivate()}async activate(){this.logger.log({namespace:e.PluginName,message:"Activate plugin.",verboseLevel:3});const t=this.config.taskHandler.getRemovedAdUnits();return t&&t.length>0&&this.eventBus.emit(d.w.adUnitsRemovedFromUsage,t),this.initializeOutOfPageAdUnits(),this.initializeAdUnits(),this.initializeGoogleTagOptions(),await super.activate()}afterActivate(){return this.logger.log({message:"After activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.taskQueue.getTasksByRunTime(s.s.AFTER_ACTIVATE).forEach((t=>{if(t.type===o.w.AD_UNITS_GOOGLETAG_TARGETING){const n=this.taskQueue.getInstanceOfTask(t);this.config.taskHandler.setAdUnitsTargeting(n.payload.targeting,this.setKeyValuePair,this.config.adServerAdapterManager),this.logger.log({namespace:e.PluginName,message:"After activate task: ".concat(o.w.AD_UNITS_GOOGLETAG_TARGETING,"."),verboseLevel:3,payload:n.payload.targeting})}})),super.afterActivate()}async deactivate(){this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3});const t=this.config.adSlots.map((e=>e.adUnitElementId));return t.length>0&&this.destroyAdUnitSlots({elementsIDs:t}),this.eventBus.detachAllForNamespace(e.PluginName),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),this.slotEventsService.removeSlotEventListeners(),await super.deactivate()}setKeyValuePair(e,t,n){this.targetingQueue.has(e)||this.targetingQueue.set(e,[]);const i=this.targetingQueue.get(e);i&&i.push({key:t,value:n})}getSlotAdServerAdapterType(e){const t=this.config.adSlots.find((t=>t.adUnitElementId===e));return(null==t?void 0:t.adServerAdapterType)||m.K.GOOGLETAG}setKeyValuePairsForSlot(e,t){const n=this.getSlotAdServerAdapterType(e),i=this.config.adServerAdapterManager.getAdServerAdapter(n);if(!i)return;t&&i.setSlotTargeting(e,"auction_id",t);const r=this.targetingQueue.get(e);if(r)for(;r.length;){const t=r.pop();t&&i.setSlotTargeting(e,t.key,t.value)}}handleOnAdRefreshRequested(e){this.auctionIdToAdRefreshArguments.set(e.auctionID,e)}initializeGoogleTagOptions(){this.config.adServerAdapterManager.getAdServerAdapters().forEach((e=>{e.configure(this.config),e.activate()})),this.slotEventsService.applySlotEventListeners(),this.logger.log({namespace:e.PluginName,message:"Plugin initialized.",verboseLevel:3}),this.config.handleExternalAdSlots&&("complete"===document.readyState?(this.processPublisherAdSlots(),this.refreshOutOfPageAdUnits(),this.checkExternalAdSlots()):document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&(this.processPublisherAdSlots(),this.refreshOutOfPageAdUnits(),this.checkExternalAdSlots())})),this.logger.log({namespace:e.PluginName,message:"Initialized external ad slots handler.",verboseLevel:3}))}initializeOutOfPageAdUnits(){this.config.outOfPageSlots.forEach((e=>{const t=this.config.adServerAdapterManager.getAdServerAdapter(m.K.GOOGLETAG);t&&t.defineOutOfPageSlot(e)}));const e=this.config.adSlots.filter((e=>{var t;return null===(t=e.googleInterstitial)||void 0===t?void 0:t.enabled}));for(const i of e){var t;const e=this.config.adServerAdapterManager.getAdServerAdapter(m.K.GOOGLETAG);if(!e)continue;const r={adUnitName:i.adUnitName,adUnitCode:i.adUnitPath,adSlotDefinitionType:U.WebInterstitial,targeting:i.targeting};var n;if(null!==(t=i.googleInterstitial)&&void 0!==t&&t.triggers)r.configuration={webInterstitial:{triggers:null===(n=i.googleInterstitial)||void 0===n?void 0:n.triggers}};e.defineOutOfPageSlot(r),this.adSlotsDisplayed.add(i.adUnitElementId)}}refreshOutOfPageAdUnits(){if(this.config.adServerAdapterManager.hasAdapter(m.K.GOOGLETAG)&&this.config.outOfPageSlots.length){const e=this.config.adServerAdapterManager.getAdServerAdapter(m.K.GOOGLETAG);if(!e)return;const t=this.config.adSlots.filter((e=>{var t;return null===(t=e.googleInterstitial)||void 0===t?void 0:t.enabled})).map((e=>e.adUnitPath)),n=this.config.outOfPageSlots.map((e=>e.adUnitCode)).filter((e=>!t.includes(e)));e.refreshOutOfPageSlots(n)}}processPublisherAdSlots(){if(!this.config.adServerAdapterManager.hasAdapter(m.K.GOOGLETAG))return;const t=this.config.adServerAdapterManager.getAdServerAdapter(m.K.GOOGLETAG);t&&t.addToQueue((()=>{const n=t.getSlots().filter((e=>!this.config.adSlots.find((t=>e.slotId===t.adUnitElementId||e.slotPath===t.adUnitPath)))).map((e=>e.slotId));if(n.length)if(this.processPublisherAdSlotsCount=n.length,this.config.shouldLoadPublisherAdSlotsInitially){var i;n.forEach((e=>{this.setKeyValuePairsForSlot(e)})),null!==(i=t.getConfig())&&void 0!==i&&i.isInitialLoadDisabled&&t.refreshSlots(n)}else{n.forEach((t=>{this.adSlotsDisplayed.add(t),this.logger.log({namespace:e.PluginName,message:"Event: ".concat(d.w.adUnitDisplayed,"."),verboseLevel:3,payload:t}),this.eventBus.emit(d.w.adUnitDisplayed,t)}));const t={slotIds:n};this.logger.log({namespace:e.PluginName,message:"Event: ".concat(d.w.publisherAdSlotsDetected,"."),verboseLevel:3,payload:t}),this.eventBus.emit(d.w.publisherAdSlotsDetected,t)}}))}checkExternalAdSlots(){this.logger.log({namespace:e.PluginName,message:"Waiting #".concat(this.config.adSlots.length-this.config.adSlotsExternallyHandled.length," Internal Ad Slots to be rendered."),payload:{adSlots:this.config.adSlots.map((e=>e.adUnitPath)),adSlotsExternallyHandled:this.config.adSlotsExternallyHandled}});const t=this.config.adSlots.filter((e=>!this.config.adSlotsExternallyHandled.some((t=>t===e.adUnitPath)))).filter((e=>document.getElementById(e.adUnitElementId))).length,n={elements:[]};(0===this.processPublisherAdSlotsCount&&this.config.adSlots.length===this.config.adSlotsExternallyHandled.length||0===t)&&this.config.adServerAdapterManager.getAdServerAdapters().forEach((t=>{t.addToQueue((()=>{t.getSlots().forEach((e=>n.elements.push({id:e.slotId,sizes:e.sizes}))),this.logger.log({namespace:e.PluginName,message:"All initially defined Ad slots when DOM loaded. Event: ".concat(d.w.initiallyDefinedAdSlots,"."),verboseLevel:3,payload:n}),this.eventBus.emit(d.w.initiallyDefinedAdSlots,n)}))}))}handleAdditionalAddSlotCreated(e){const t=this.config.adSlots.find((t=>t.adUnitElementId===e.adUnitElementId));if(t){if(e.adUnitElementId===e.newAdunitElementId)return e.newSizes.length&&(t.adUnitSize=e.newSizes),this.createAdSlot(t),void this.displayAdSlot({elementID:t.adUnitElementId});const n=(0,f.A4)(t);e.newSizes.length&&(n.adUnitSize=e.newSizes),n.adUnitElementId=e.newAdunitElementId,this.config.adSlots.push(n),this.createAdSlot(n),this.displayAdSlot({elementID:n.adUnitElementId})}}handleDefineAdSlotRequested(e){const t=this.config.adSlots.find((t=>t.adUnitElementId===e));t&&this.createAdSlot(t)}displayAdSlot(t){const n=this.config.adSlots.find((e=>e.adUnitElementId===t.elementID));if(!n)return;if(this.adSlotsDisplayed.has(n.adUnitElementId))return void this.logger.log({namespace:e.PluginName,message:"AdUnit #".concat(n.adUnitElementId," has already been displayed."),verboseLevel:2});const i=this.config.adServerAdapterManager.getAdServerAdapter(n.adServerAdapterType);i&&(this.adUnitElementsOnPage.has(n.adUnitElementId)||t.forceDisplay?i.displaySlot(n.adUnitElementId):this.logger.log({namespace:e.PluginName,message:"AdUnit #".concat(n.adUnitElementId," is not present on the page."),verboseLevel:2}))}handleAdUnitDisplayed(e){this.adSlotsDisplayed.add(e),this.processRefreshEntryForDisplayedElement(e)}handleOnRefreshRequested(e){const t=(0,f.A4)(e);t.callback=e.callback,t.auctionID=this.clonedAuctions.get(t.auctionID)||t.auctionID;const n=Array.from(this.adSlotsDisplayed).filter((e=>!this.destroyedAndRemovedAdUnits.has(e)));n.length?this.processRefreshEntry(t,n):this.config.adSlotsRefreshQueue.push(t)}processRefreshEntryForDisplayedElement(e){var t;let n=[e];const i=this.config.adSlotsRefreshQueue.findById(e);if(null!=i&&null!==(t=i.refreshBlockingAdSlots)&&void 0!==t&&t.length){const e=i.refreshBlockingAdSlots.filter((e=>this.adSlotsDisplayed.has(e)));if(e.length!==i.refreshBlockingAdSlots.length)return;n=e}i&&this.processRefreshEntry(i,n)}processRefreshEntry(e,t){const n=[],i=[];e.elementsIDs.forEach((r=>t.includes(r)?n.push(r):i.push({key:r,value:e.auctionID}))),this.addNotDisplayedAdSlotsForRefresh(i),this.config.adSlotsRefreshQueue.removeRefreshEntry(e),this.refreshAdUnits({elementsIDs:n,callback:e.callback,auctionID:e.auctionID,isTimeout:e.isTimeout,finishedHeaderBidders:e.finishedHeaderBidders})}refreshAdUnits(t){const n=t.elementsIDs.map((e=>({elementId:e,adapterType:this.getSlotAdServerAdapterType(e)})));t.callback(),[...new Set(n.map((e=>e.adapterType)))].forEach((i=>{const r=this.config.adServerAdapterManager.getAdServerAdapter(i);r&&r.addToQueue((()=>{const o=n.filter((e=>e.adapterType===i)).map((e=>e.elementId)),s=r.getSlots(o),a=s.map((e=>e.slotId));0!==s.length&&(s.forEach((e=>this.setKeyValuePairsForSlot(e.slotId,t.auctionID))),this.eventBus.emit(d.w.adUnitsBeforeApplyingAdServerRefresh,{auctionID:t.auctionID,elementsIDs:a}),this.logger.log({namespace:e.PluginName,message:"Ad Unit refresh applied.",verboseLevel:1,payload:a}),this.adServerDataSetter.setAudienceIds(new Set((0,C.DI)(this.logger))),this.setProductInfo(a),r.refreshSlots(a),this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds(a),this.config.collapseEmptyDivs||this.config.disableVisibilityPolicyService||a.forEach((e=>{const t=this.config.adSlots.find((t=>t.adUnitElementId===e));t&&!t.exemptFromVisibilityPolicy&&this.visibilityPolicyService.addToPolicyObserver(e)})))}))}))}addNotDisplayedAdSlotsForRefresh(e){if(!e.length)return;const t=e.map((e=>({elementsIDs:[e.key],callback:()=>{},auctionID:e.value,isTimeout:!1,finishedHeaderBidders:[]})));this.config.adSlotsRefreshQueue.unshiftArray(t),this.eventBus.emit(d.w.notDisplayedAdUnitsQueuedForRefresh,e.map((e=>e.key)))}handleSkinAdRenderRequested(t){for(const n of t.elementsIDs){const t=this.config.adSlots.filter((e=>e.hideOnHpto)).map((e=>e.adUnitElementId));if(0!==t.length){this.logger.log({namespace:e.PluginName,message:"".concat(d.w.skinAdRenderRequested," event handled, ad unit ").concat(n," is present. Dispatching ").concat(d.w.adUnitsBlockedFromUsage," event for slots."),verboseLevel:1,payload:{elementsIDs:t}});for(const e of t)this.hptoHiddenAdUnitIds.add(e);return void this.eventBus.emit(d.w.adUnitsBlockedFromUsage,{elementsIDs:t})}}}handleNonHptoUnblock(t){t.elementsIDs=t.elementsIDs.filter((e=>!this.hptoHiddenAdUnitIds.has(e))),this.logger.log({namespace:e.PluginName,message:"Filtered hpto hidden elements from ".concat(d.w.adUnitsUnblockedFromUsage," event payload."),verboseLevel:1,payload:t});for(const e of t.elementsIDs)this.blockedUnits.has(e)&&(this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds([e]),this.config.adSlots.push(this.blockedUnits.get(e)),this.blockedUnits.delete(e),this.destroyedAndRemovedAdUnits.delete(e),this.eventBus.emit(d.w.adUnitDefineSlotRequested,e));this.eventBus.emit(d.w.adUnitsUnblockedFromUsage,t)}destroyAndRemoveAdUnitSlots(t){this.destroyAdUnitSlots(t),this.logger.log({namespace:e.PluginName,message:"Destroying slots triggered by ".concat(d.w.adUnitsBlockedFromUsage," event."),verboseLevel:1,payload:t});const n=this.config.adSlots.filter((e=>t.elementsIDs.includes(e.adUnitElementId)));for(const e of n)this.blockedUnits.set(e.adUnitElementId,e);this.config.adSlots=this.config.adSlots.filter((e=>!t.elementsIDs.includes(e.adUnitElementId)));for(const n of t.elementsIDs)this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds([n]),this.logger.log({namespace:e.PluginName,message:"Removed refreshEntry for ad unit ".concat(n," triggered by ").concat(d.w.adUnitsBlockedFromUsage," event."),verboseLevel:3,payload:{}}),this.adSlotsDisplayed.delete(n),this.logger.log({namespace:e.PluginName,message:"Removed ad unit ".concat(n," from displayed set triggered by ").concat(d.w.adUnitsBlockedFromUsage," event."),verboseLevel:3,payload:{}}),this.destroyedAndRemovedAdUnits.add(n),this.logger.log({namespace:e.PluginName,message:"Added ad unit ".concat(n," to destroyed and removed set preventing future display triggered by ").concat(d.w.adUnitsBlockedFromUsage," event."),verboseLevel:3,payload:{}})}destroyAdUnitSlots(t){const n=t.elementsIDs.map((e=>({elementId:e,adapterType:this.getSlotAdServerAdapterType(e)})));n.length?[...new Set(n.map((e=>e.adapterType)))].forEach((e=>{const t=this.config.adServerAdapterManager.getAdServerAdapter(e);t&&t.destroySlots(n.filter((t=>t.adapterType===e)).map((e=>e.elementId)))})):this.logger.warn({namespace:e.PluginName,message:"No slots found to destroy.",type:c.f.GPTNoSlotsToDestroyWarn,payload:t})}handleAdUnitDestroyed(e){e.elementsIDs.forEach((e=>{this.adSlotsDisplayed.has(e)&&this.adSlotsDisplayed.delete(e)}))}initializeAdUnits(){this.config.adSlots.filter((e=>e.hasInitialSlotDefinition)).forEach((e=>this.createAdSlot(e)))}createAdSlot(e){var t;if(null!==(t=e.googleInterstitial)&&void 0!==t&&t.enabled)return;const n=this.config.adServerAdapterManager.getAdServerAdapter(e.adServerAdapterType);n&&(n.defineSlot(e),this.targetingService.attachPersistentKeyValuesForSlot(e.adUnitElementId))}completeAdComparisonMiddleware(t){const n={elementIds:t.elementIds.filter((e=>this.adSlotsDisplayed.has(e))),groupName:t.groupName};return this.logger.log({payload:n,namespace:e.PluginName,message:"Forwarding ".concat(d.w.completeAdComparisonRequested," event for group ").concat(t.groupName,".")}),n}handleBuildAndExecuteVastUrlRequested(t){if(!t.callbackVastURL)return void this.logger.error({namespace:e.PluginName,message:"Callback not provided. VAST URL cannot be executed.",payload:t,verboseLevel:1,type:c.f.VastUrlCallbackNotProvided});const n=this.config.adSlots.find((e=>t.elementIds.has(e.adUnitElementId)));n&&(t.videoParams.iu=n.adUnitPath,t.callbackVastURL(this.vastXmlBuilder.buildVastXml(this.config.baseVastUrl,n,t.videoParams,t.targeting.get(n.adUnitElementId))))}handleCloneAdUnitsRequested(t){const n=this.config.adSlots.find((e=>e.adUnitElementId===t.cloneFromAdUnitElementId));n&&(t.ext&&t.ext.handleAdSlotsExternally&&this.addClonedAdUnitToExternallyHandledSlots(n.adUnitPath),t.newAdUnitsElementIds.filter((e=>!this.config.adSlots.map((e=>e.adUnitElementId)).includes(e))).forEach((e=>{this.config.adSlots.push(j(j(j(j({},n),{},{adUnitElementId:e,hasInitialSlotDefinition:!1},t.ext&&t.ext.isSmartSlotChild?{sizeMappings:[]}:null),t.overrides&&t.overrides.sizes?{adUnitSize:t.overrides.sizes}:null),t.overrides&&t.overrides.sizeMapping?{sizeMappings:t.overrides.sizeMapping}:null))})),this.logger.log({namespace:e.PluginName,message:"Cloned ad units added to config.",verboseLevel:1,payload:{adSlots:this.config.adSlots}}))}addClonedAdUnitToExternallyHandledSlots(e){this.config.adSlotsExternallyHandled.includes(e)||this.config.adSlotsExternallyHandled.push(e)}setProductInfo(e){const t=this.config.adSlots.filter((t=>e.includes(t.adUnitElementId)&&t.hideOnHpto));for(const e of t)this.eventBus.emit(d.w.logProductDataRequested,{key:R.p.ProductFeature,value:y.x.HPTO,adUnitElementId:e.adUnitElementId})}recreateOutOfPageSlot(e){const t=this.config.adServerAdapterManager.getAdServerAdapter(m.K.GOOGLETAG);if(!t)return;const n=this.config.outOfPageSlots.find((t=>t.adUnitElementId===e.elementId));n&&(t.destroySlots([e.slot.getSlotElementId()]),t.defineOutOfPageSlot(n),t.refreshOutOfPageSlot(n))}purgeRefreshEntriesForAuctionExpired(t){const n=this.config.adSlotsRefreshQueue.getAll().filter((e=>e.auctionID===t));for(const e of n)this.config.adSlotsRefreshQueue.removeRefreshEntry(e);this.logger.log({namespace:e.PluginName,message:"Purged refresh entries for auction ".concat(t," due to expiration."),verboseLevel:1,payload:{auctionID:t}})}handleAdUnitsRemovedFromUsage(e){e.forEach((e=>{this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds([e])}))}handleAdUnitsBlockedFromUsage(e){e.elementsIDs.forEach((e=>{this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds([e])}))}handleAdUnitsDestroyRequested(e){e.elementsIDs.forEach((e=>{this.config.adSlotsRefreshQueue.removeRefreshEntriesByIds([e])}))}handleAuctionCloned(e){this.clonedAuctions.set(e.newAuctionId,e.originalAuctionId),window.setTimeout((()=>{this.clonedAuctions.delete(e.newAuctionId)}),v.W.CLONED_AUCTIONS_TTL)}},D.PluginName=u.f.AdServerPlugin,k=D))||k;var M=n(9754);class z{constructor(){this.adSlotsForRefresh=[]}getAll(){return this.adSlotsForRefresh}push(e){this.adSlotsForRefresh.push(e)}unshiftArray(e){this.adSlotsForRefresh.unshift(...e)}findById(e){return this.adSlotsForRefresh.find((t=>t.elementsIDs.includes(e)))}removeRefreshEntriesByIds(e){for(const t of this.adSlotsForRefresh){t.elementsIDs.every((t=>e.includes(t)))&&this.removeRefreshEntry(t)}}removeRefreshEntry(e){const t=this.adSlotsForRefresh.indexOf(e);-1!==t&&this.adSlotsForRefresh.splice(t,1)}}class F{constructor(e,t){this.logger=e,this.adapters=t,this.namespace="AdServerAdapterManager"}getAdServerAdapter(e){switch(e){case m.K.GOOGLETAG:case m.K.NO_AD_SERVER:return this.getAdapter(e);default:return void this.logAdapterNotFoundError(e)}}hasAdapter(e){return this.adapters.has(e)}getAdServerAdapters(){return this.adapters}getAdapter(e){const t=this.adapters.get(e);return t||this.logAdapterNotFoundError(e),t}logAdapterNotFoundError(e){this.logger.error({message:"No Adapter found for Ad Server Adapter Type ".concat(e,"."),namespace:this.namespace,type:c.f.AdServerAdapterNotFound,verboseLevel:1})}}var q=n(2166),H=n(4028),V=n(9527);class ${execute(e,t,n,i){const r=(0,f.A4)(e),o=n===V.b.INCLUDE;return r.filter((e=>{const n=t.includes(e.adUnitPath);return n?!!o||(i.push(e.adUnitElementId),!1):!(!n&&o)||(i.push(e.adUnitElementId),!1)}))}}class G{constructor(){this.name="GptTaskHandler"}execute(e,t,n){e&&Object.keys(e).length&&Object.keys(e).forEach((i=>{i.length&&e[i]&&"string"==typeof e[i]?t.adServerAdapterManager.getAdServerAdapters().forEach((t=>{t.setTargeting(i,e[i])})):n.error({namespace:this.name,message:"Your custom Key-Value pairs were not included in the request as their definition is incorrect.",verboseLevel:1,type:c.f.GptTaskHandlerSetGlobalTargetingError})}))}}class W{execute(e,t,n){return{adSlots:n.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.adUnitElementId===t.adUnitElementId))||e.push(t),e)),[]),outOfPageSlots:n.applyTargeting(t).reduce(((e,t)=>(e.find((e=>e.adUnitCode===t.adUnitCode))||e.push(t),e)),[])}}}class K{execute(e,t){let n=[];const i=Object.values(t);return t=Object.keys(t).map((e=>[e,t[e]])).filter((t=>e.map((e=>e.adUnitElementId)).includes(t[0]))).filter(((e,t)=>i.indexOf(e[1])===t)).reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),e.some((e=>Object.keys(t).includes(e.adUnitElementId)))?(e.forEach((e=>{if(Object.keys(t).includes(e.adUnitElementId)){const i=(0,f.A4)(e);i.adUnitElementId=t[e.adUnitElementId],n.push(i)}n.push(e)})),{updatedAdUnits:n,adUnitsUsingAmazonMultiFormatElementIdsMap:t}):{updatedAdUnits:e,adUnitsUsingAmazonMultiFormatElementIdsMap:t}}}class Q{constructor(e,t,n){this.settingsTargetingServiceOnAdUnit=e,this.logger=t,this.contextTypeStrategyFactory=n,this.removedAdUnits=[]}getRemovedAdUnits(){return this.removedAdUnits}setAdUnitsTargeting(e,t,n){n.getAdServerAdapters().forEach((n=>{n.getSlots().forEach((n=>{var i,r;const o=null!==(i=null===(r=e.find((e=>e.adUnitCode===n.slotPath)))||void 0===r?void 0:r.targeting)&&void 0!==i?i:{};o&&Object.keys(o).length&&Object.keys(o).forEach((e=>{var i;e.length&&null!==(i=o[e])&&void 0!==i&&i.length&&"string"==typeof o[e]?t(n.slotId,e,o[e]):this.logger.error({namespace:L.PluginName,message:"Your custom Key-Value pairs were not included in the request as their definition is incorrect.",verboseLevel:1,type:c.f.AdServerTaskHandlerSetAdUnitsTargetingError})}))}))}))}executeBusinessLogicForRemoveAdUnits(e){const t=this.contextTypeStrategyFactory.getContext(new $),n=(0,f.A4)(e.adSlots);let i;if(e.taskQueue.getTasksByRunTime(s.s.BEFORE_ACTIVATE).forEach((e=>{e.type===o.w.REMOVE_AD_UNITS&&(i=e)})),i){const r=e.taskQueue.getInstanceOfTask(i);e.adSlots=t.executeTaskStrategy(n,r.payload.adUnitCodes,r.payload.filterStrategy,this.removedAdUnits),this.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(o.w.REMOVE_AD_UNITS,"."),verboseLevel:3,payload:{adSlotsBefore:n,adSlotsAfter:e.adSlots}})}}executeBusinessLogicForGlobalGoogletagTargeting(e){const t=this.contextTypeStrategyFactory.getContext(new G);let n;if(e.taskQueue.getTasksByRunTime(s.s.BEFORE_ACTIVATE).forEach((e=>{e.type===o.w.GLOBAL_GOOGLETAG_TARGETING&&(n=e)})),n){const i=e.taskQueue.getInstanceOfTask(n);t.executeTaskStrategy(i.payload.targeting,e,this.logger),this.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(o.w.GLOBAL_GOOGLETAG_TARGETING,"."),verboseLevel:3,payload:i.payload.targeting})}}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new W),n=(0,f.A4)(e.adSlots),i=(0,f.A4)(e.adSlotsExternallyHandled),r=t.executeTaskStrategy(e.adSlots,e.outOfPageSlots,this.settingsTargetingServiceOnAdUnit);e.adSlots=r.adSlots,e.adSlotsExternallyHandled=e.adSlotsExternallyHandled.filter((t=>e.adSlots.some((e=>t===e.adUnitPath)))),e.outOfPageSlots=r.outOfPageSlots,this.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(o.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,externalAdUnitsBefore:i,adUnitsAfter:e.adSlots,externalAdUnitsAfter:e.adSlotsExternallyHandled}})}executeBusinessLogicForAdUnitsAmazonMultiFormat(e){const t=this.contextTypeStrategyFactory.getContext(new K),n=(0,f.A4)(e.adSlots),{updatedAdUnits:i,adUnitsUsingAmazonMultiFormatElementIdsMap:r}=t.executeTaskStrategy(e.adSlots,e.adUnitsUsingAmazonMultiFormatElementIdsMap||{});e.adSlots=i,e.adUnitsUsingAmazonMultiFormatElementIdsMap=r,this.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(o.w.AD_UNITS_USING_AMAZON_MULTI_FORMAT,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adSlots}})}}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z{constructor(e,t,n){this.logger=e,this.eventBus=t,this.context=n,this.namespace="GoogletagAdapter",this.serviceEnabled=!1,this.adServerRequestUriLength=8e3,this.eventListenerCallbacks=new Map}configure(e){this.addToQueue((()=>{this.context.pubads().disableInitialLoad(),e.collapseEmptyDivs&&this.context.pubads().collapseEmptyDivs(!0),e.enableSingleRequest&&this.context.pubads().enableSingleRequest(),e.googletagLazyLoadSettings&&this.context.pubads().enableLazyLoad(e.googletagLazyLoadSettings)}))}getConfig(){return{serviceEnabled:this.serviceEnabled,isInitialLoadDisabled:!!this.context.pubads&&this.context.pubads().isInitialLoadDisabled(),pageLevelTargetingAvailable:!this.serviceEnabled}}activate(){this.enableServices()}enableServices(){this.serviceEnabled||(this.logger.log({namespace:this.namespace,message:"Googletag services enabled.",verboseLevel:3}),this.addToQueue((()=>{this.serviceEnabled=!0,this.context.enableServices()})))}destroySlots(e){this.context.apiReady&&this.addToQueue((()=>{if(!e||!e.length)return void this.context.destroySlots();const t=this.getGoogletagSlots(e);if(t.length){this.context.destroySlots(t);const e={elementsIDs:t.map((e=>e.getSlotElementId()))};return this.logger.log({namespace:this.namespace,message:"Event: ".concat(d.w.adUnitDestroyed,"."),verboseLevel:3,payload:e}),void this.eventBus.emit(d.w.adUnitDestroyed,e)}this.logger.warn({namespace:this.namespace,message:"No slots found to destroy.",type:c.f.GPTNoSlotsToDestroyWarn,payload:e})}))}addEventListener(e,t){const n=e=>{t(this.mapAdServerAdapterEvent(e))};this.eventListenerCallbacks.set(t,n),this.addToQueue((()=>this.context.pubads().addEventListener(e,n)))}removeEventListener(e,t){const n=this.eventListenerCallbacks.get(t);n&&(this.eventListenerCallbacks.delete(t),this.addToQueue((()=>this.context.pubads().removeEventListener(e,n))))}mapAdServerAdapterEvent(e){const t=(0,f.A4)(e);return Y(Y(Y(Y(Y(Y(Y(Y(Y(Y({adapter:this,slotId:e.slot.getSlotElementId(),slotPath:e.slot.getAdUnitPath(),targeting:this.getSlotTargeting(e.slot),sizes:e.slot.getSizes()},t.isEmpty?{isEmpty:t.isEmpty}:null),t.creativeId?{creativeId:t.creativeId}:null),t.lineItemId?{lineItemId:t.lineItemId}:null),t.size?{size:t.size}:null),t.advertiserId?{advertiserId:t.advertiserId}:null),t.campaignId?{campaignId:t.campaignId}:null),t.sourceAgnosticCreativeId?{sourceAgnosticCreativeId:t.sourceAgnosticCreativeId}:null),t.sourceAgnosticLineItemId?{sourceAgnosticLineItemId:t.sourceAgnosticLineItemId}:null),"makeRewardedVisible"in e?{makeRewardedVisible:e.makeRewardedVisible}:null),e.slot.getResponseInformation()?{responseIsNotNull:!0}:{responseIsNotNull:!1})}setTargeting(e,t){this.serviceEnabled?this.logger.warn({namespace:this.namespace,message:"Cannot set page-level targeting after googletag services have been enabled.",type:c.f.PageLevelTargetingCannotBeSetAfterGoogletagEnableServices,verboseLevel:3}):this.addToQueue((()=>{this.logger.log({namespace:this.namespace,message:"Setting page-level targeting: ".concat(e,"=").concat(t,"."),verboseLevel:3}),this.context.pubads().setTargeting(e,t)}),!0)}setSlotTargeting(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.addToQueue((()=>{const r=this.getGoogletagSlots([e]);!r.length&&i||(r.length?(this.logger.log({namespace:this.namespace,message:"Setting slot-level targeting for slot ".concat(e,": ").concat(t,"=").concat(n,"."),verboseLevel:3,payload:{slotId:e,key:t,value:n}}),r.forEach((e=>e.setTargeting(t,n)))):this.logger.warn({namespace:this.namespace,message:"Setting key-value for ".concat(e," failed. Ad slot not found."),type:c.f.GPTFailedToAttachKeyValue,verboseLevel:1,payload:{slotId:e,key:t,value:n}}))}))}clearSlotTargeting(e,t){this.addToQueue((()=>{const n=this.getGoogletagSlots([e])[0];if(!n)return;this.getSlotTargeting(n)[t]&&n.clearTargeting(t)}))}defineSlot(e,t){this.addToQueue((()=>{let n=this.findSlot(e.adUnitElementId);n?this.logger.log({namespace:this.namespace,message:"Ad Slot #".concat(e.adUnitElementId," is already defined."),verboseLevel:1}):(n=this.context.defineSlot(e.adUnitPath,e.adUnitSize,e.adUnitElementId),n&&n.addService(this.context.pubads()),this.eventBus.emit(d.w.adSlotDefined,{elementId:e.adUnitElementId,adUnitCode:e.adUnitPath}),this.logger.log({namespace:this.namespace,message:"Ad Slot defined ID:".concat(e.adUnitElementId,"."),verboseLevel:1,payload:n})),n&&(t&&t.forEach((e=>n.setTargeting(e.key,e.value))),e.targetingAB.length&&e.targetingAB.forEach((e=>n.setTargeting(e.key,e.value))),e.sizeMappings.length&&this.defineSizeMapping(n,e.sizeMappings,e.adUnitSize))}))}defineOutOfPageSlot(e){switch(e.adSlotDefinitionType){case U.WebInterstitial:this.addToQueue((()=>{var t;const n=this.context.defineOutOfPageSlot(e.adUnitCode,this.context.enums.OutOfPageFormat.INTERSTITIAL);if(n){var i;if(this.setProductInfo(n,U.WebInterstitial),n.addService(this.context.pubads()),"function"==typeof n.setConfig&&null!==(t=e.configuration)&&void 0!==t&&t.webInterstitial)n.setConfig({interstitial:null===(i=e.configuration)||void 0===i?void 0:i.webInterstitial});this.eventBus.emit(d.w.outOfPageAdSlotDefined,{adUnitElementId:e.adUnitElementId,adUnitCode:e.adUnitCode,slot:n,type:U.WebInterstitial}),this.logger.log({namespace:this.namespace,message:"Interstitial Out-of-Page Ad Slot defined Ad Unit Path: ".concat(e.adUnitCode,"."),verboseLevel:1,payload:e})}else this.logger.log({namespace:this.namespace,message:"Interstitial Out-of-Page Ad Slot cannot be created for: ".concat(e.adUnitCode,"."),verboseLevel:1})}));break;case U.Rewarded:this.addToQueue((()=>{const t=this.context.defineOutOfPageSlot(e.adUnitCode,this.context.enums.OutOfPageFormat.REWARDED);t?(this.eventBus.emit(d.w.outOfPageAdSlotDefined,{adUnitElementId:e.adUnitElementId,adUnitCode:e.adUnitCode,slot:t,type:U.Rewarded}),this.setProductInfo(t,U.Rewarded),t.addService(this.context.pubads()),this.logger.log({namespace:this.namespace,message:"Rewarded Out-of-Page Ad Slot defined Ad Unit Path: ".concat(e.adUnitCode,"."),verboseLevel:1,payload:e})):this.logger.log({namespace:this.namespace,message:"Rewarded Out-of-Page Ad Slot cannot be created for: ".concat(e.adUnitCode,"."),verboseLevel:1})}));break;default:return void this.logger.error({namespace:this.namespace,message:"Ad Slot definition type ".concat(e.adSlotDefinitionType," is not supported."),type:c.f.GPTOutOfPageAdSlotDefinitionTypeNotSupportedError,verboseLevel:1})}}refreshOutOfPageSlots(e){this.addToQueue((()=>{if(!this.context.pubads().isInitialLoadDisabled())return;let t=this.getGoogletagSlots().filter((e=>e.getOutOfPage()));e&&e.length>0&&(t=t.filter((t=>!e.includes(t.getAdUnitPath())))),t.length&&(this.logger.log({namespace:this.namespace,message:"Out-of-Page Ad Slots refreshed.",verboseLevel:1,payload:t.map((e=>e.getSlotElementId()))}),this.context.pubads().refresh(t))}))}refreshOutOfPageSlot(e){if(!this.context.pubads().isInitialLoadDisabled())return;const t=this.getGoogletagSlots().find((t=>t.getAdUnitPath()===e.adUnitCode));t?this.context.pubads().refresh([t]):this.logger.log({namespace:this.namespace,message:"Rewarded Out-of-Page Ad Slot cannot be refreshed for: ".concat(e.adUnitCode,"."),verboseLevel:1})}defineSizeMapping(e,t,n){const i=this.context.sizeMapping();t.forEach((e=>{const t=(0,C.i0)(e.sizes,n);i.addSize(e.viewportSize,t.map((e=>1===e.length&&"fluid"===e[0]?"fluid":e)))})),e.defineSizeMapping(i.build())}displaySlot(e){this.addToQueue((()=>{this.context.pubads().getSlots().find((t=>t.getSlotElementId()===e))?(this.context.display(e),this.logger.log({namespace:this.namespace,message:"Event: ".concat(d.w.adUnitDisplayed,"."),payload:{slotId:e},verboseLevel:1}),this.eventBus.emit(d.w.adUnitDisplayed,e)):this.logger.error({namespace:this.namespace,message:"".concat(e," does not match any defined slots."),type:c.f.DisplayRequestedForUndefinedSlot,verboseLevel:1})}))}refreshSlots(e){this.addToQueue((()=>{this.splitSlotsIntoBatches(this.getGoogletagSlots(e)).forEach((e=>{e.length&&this.context.pubads().refresh(e)}))}))}splitSlotsIntoBatches(e){const t=[],n=this.context.pubads().getTargetingKeys().reduce(((e,t)=>(this.context.pubads().getTargeting(t).forEach((n=>{e+="".concat(t,"=").concat(n,"&")})),e)),"");let i=n,r=[];return e.forEach(((o,s)=>{i+=this.getAdSlotTargetingKeyValuePairsString(o),encodeURI(i).length<=this.adServerRequestUriLength||(r.length&&t.push(r),r=[],i=n+this.getAdSlotTargetingKeyValuePairsString(o)),r.push(o),s===e.length-1&&t.push(r)})),t}getAdSlotTargetingKeyValuePairsString(e){return Object.entries(this.getSlotTargeting(e)).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)})).join("&")}getSlots(e){return this.getGoogletagSlots(e).map((e=>({slotId:e.getSlotElementId(),slotPath:e.getAdUnitPath(),targeting:this.getSlotTargeting(e),sizes:e.getSizes()||[]})))}getGoogletagSlots(e){if(!e||!e.length)return this.context.pubads().getSlots();const t=[];return e.forEach((e=>{const n=this.findSlot(e);n&&t.push(n)})),t}getSlotTargeting(e){const t={};return e.getTargetingKeys().forEach((n=>{const i=e.getTargeting(n);i.length&&(t[n]=i)})),t}findSlot(e){return this.context.pubads().getSlots().find((t=>[t.getSlotElementId(),t.getAdUnitPath()].includes(e)))}setPublisherProvidedId(e){e&&this.addToQueue((()=>{this.context.pubads().setPublisherProvidedId(e)}))}includeSecureSignalProvider(e){this.logger.log({namespace:this.namespace,message:"Secure signal provider included.",verboseLevel:1,payload:e}),this.context.secureSignalProviders=this.context.secureSignalProviders||[],this.context.secureSignalProviders.push(e)}addToQueue(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&Array.isArray(this.context.cmd)?this.context.cmd.unshift(e):this.context.cmd.push(e)}setProductInfo(e,t){switch(t){case U.WebInterstitial:e.setTargeting("ow_format",y._.Interstitial);break;case U.Rewarded:e.setTargeting("ow_format",y._.Rewarded)}}}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie=L.PluginName;window.pgPluginManager.registerPlugin(ie,L,(function(){const e=window.pgPluginManager.getConfig([{adSlots:[{sizeMappings:[],adUnitName:"Interstitial",adUnitElementId:"/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1",adUnitPath:"/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1",adUnitSize:[[1,1]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["mobile","tablet","desktop","smarttv"],state:"includes"}},googleInterstitial:{enabled:!0,triggers:{navBar:!1,unhideWindow:!1}}},{sizeMappings:[{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[0,0],sizes:[]}],adUnitName:"Desktop Horizontal Top",adUnitElementId:"tooplatecom47398",adUnitPath:"/8095840,22381294811/.2_A.47398.10_tooplate.com_tier1",adUnitSize:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}}},{sizeMappings:[{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[0,0],sizes:[]}],adUnitName:"Desktop Horizontal Middle",adUnitElementId:"tooplatecom47399",adUnitPath:"/8095840,22381294811/.2_A.47399.10_tooplate.com_tier1",adUnitSize:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}}},{sizeMappings:[{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[0,0],sizes:[]}],adUnitName:"Desktop Horizontal Bottom",adUnitElementId:"tooplatecom47400",adUnitPath:"/8095840,22381294811/.2_A.47400.10_tooplate.com_tier1",adUnitSize:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}}},{sizeMappings:[],adUnitName:"Mobile Top",adUnitElementId:"tooplatecom47401",adUnitPath:"/8095840,22381294811/.2_A.47401.4_tooplate.com_tier1",adUnitSize:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}},{sizeMappings:[],adUnitName:"Mobile Middle",adUnitElementId:"tooplatecom47402",adUnitPath:"/8095840,22381294811/.2_A.47402.4_tooplate.com_tier1",adUnitSize:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}},{sizeMappings:[],adUnitName:"Mobile Bottom",adUnitElementId:"tooplatecom47403",adUnitPath:"/8095840,22381294811/.2_A.47403.4_tooplate.com_tier1",adUnitSize:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!1,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}},{sizeMappings:[{viewportSize:[980,0],sizes:[[728,90],[980,90],[970,250],[980,120],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[980,250],[970,120],[980,300]]},{viewportSize:[970,0],sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[970,120]]},{viewportSize:[930,0],sizes:[[728,90],[468,60],[930,180],[750,300],[750,200],[750,100]]},{viewportSize:[750,0],sizes:[[728,90],[468,60],[750,300],[750,200],[750,100]]},{viewportSize:[730,0],sizes:[[728,90],[468,60]]},{viewportSize:[468,0],sizes:[[468,60]]},{viewportSize:[0,0],sizes:[]}],adUnitName:"Desktop Anchor",adUnitElementId:"tooplatecom47404",adUnitPath:"/8095840,22381294811/.2_A.47404.3_tooplate.com_tier1",adUnitSize:[[468,60],[728,90],[970,90],[970,120],[970,250],[750,100],[750,200],[750,300],[930,180],[980,120],[980,250],[980,300],[980,90]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!0,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}}},{sizeMappings:[],adUnitName:"Mobile Anchor",adUnitElementId:"tooplatecom47406",adUnitPath:"/8095840,22381294811/.2_A.47406.28_tooplate.com_tier1",adUnitSize:[[300,100],[300,50],[320,100],[320,50]],adServerAdapterType:"googletag",hideOnHpto:!1,exemptFromVisibilityPolicy:!0,hasInitialSlotDefinition:!0,targetingAB:[],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}}],outOfPageSlots:[],adSlotsExternallyHandled:[],collapseEmptyDivs:!1,disableVisibilityPolicyService:!1,setPpidOnUserAudienceUpdate:!1,enableSingleRequest:!0,headerBiddingTimeout:1500,shouldLoadPublisherAdSlotsInitially:!0,targetingSymbolsInRequestUrlThreshold:1e3,bundleID:4400,viewConfigurationID:1135,stateKey:"8ebfa473-d6ee-48b2-a7ae-588e66bffda1",handleExternalAdSlots:!0,defaultPageLevelTargeting:[{key:"pgr",value:"0"},{key:"owat",value:"0"},{key:"pbjs_var",value:"pgPrebid"}],baseVastUrl:"https://securepubads.g.doubleclick.net/gampad/ads"}]);let t=new H.G(M.Q),n=e;const i=new Map;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],i.set("googletag",new Z(window.pgPluginManager.baseConfig.logger,window.pgPluginManager.baseConfig.eventBus,window.googletag));const r=new F(window.pgPluginManager.baseConfig.logger,i);return n&&(n=te(te({},n),{},{adServerAdapterManager:r,amazonDisplayCreatives:[138352520208,138352520205,138352492451,138352520202,138352493168,138352492448,138352520199,138352493165,138352520196,138352493162,138505620071,138505620074,138505620077,138505620080,138505620083,138506217220,138506217526,138506217529,138506217532,138506217541,138400103280,138400103268,138400103265,138400558705,138400103274,138400103271,138400557310,138400558702,138400557313,138400103262],prebidDisplayCreatives:[138352023560,138352023563,138352023566,138352023572,138352069872,138352069875,138352069878,138352069881,138352069884,138352069887,138352069890,138352069893,138352069896,138352069899,138352069902,138352069905,138352069908,138352069911,138352069914,138352069917,138352069920,138352069923,138352069926,138352069929,138352069938,138352069941,138352069947,138352069950,138352419466,138352419469,138425096123,138425096093,138425788438,138425096108,138425788513,138425788453,138425095988,138425788507,138425788510,138425095991,138425096102,138425096120,138425096111,138425788450,138425788465,138425788516,138425788504,138425788444,138425095997,138425788462,138425095994,138425788447,138425788441,138425096105,138425096114,138425788459,138425788456,138425096099,138425788501,138425788519,138503774075,138503774072,138503774069,138503774066,138504380137,138503770934,138503770931,138503770928,138504376294,138503770925,138503616435,138503616567,138503616564,138504373690,138503616432,138257998528,138257776079,138257998543,138257998534,138257733054,138257776652,138257776577,138257732658],adSlotsRefreshQueue:new z,taskHandler:new Q(t,window.pgPluginManager.baseConfig.logger,new q.W)})),n}))},6988:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(6360),s=n(2703);let a=function(e){return e.Top="top",e.Bottom="bottom",e.Both="both",e}({}),d=function(e){return e.Left="left",e.Right="right",e.Center="center",e}({});var c=n(2541),l=n(6811);let u=function(e){return e.Default="default",e.MobileSkin="mobileSkin",e.Companion="companion",e}({});var p,h;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let v=(0,i.Q)()((h=class e extends o.Q{constructor(t){super(t),this.selectedAdhesiveAdUnitsAndSettings=new Map,this.adhesiveAds=new Map,this.adhesiveAdReInitiationsCounter=new Map,this.canInitiateTop=!0,this.canInitiateBottom=!0,this.handleAdUnitsRemovedFromUsage=this.handleAdUnitsRemovedFromUsage.bind(this),this.blockAdUnits=this.blockAdUnits.bind(this),this.unblockAdUnits=this.unblockAdUnits.bind(this),this.handleTopSideOfViewportOccupied=this.handleTopSideOfViewportOccupied.bind(this),this.handleBottomSideOfViewportOccupied=this.handleBottomSideOfViewportOccupied.bind(this),this.handleAdhesiveDestroyed=this.handleAdhesiveDestroyed.bind(this),this.handleSlotCroppableStatusRequested=this.handleSlotCroppableStatusRequested.bind(this),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t})}beforeActivate(){return this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),super.beforeActivate()}registerEventListenersHook(){this.logger.log({message:"Registering event listeners.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.on(r.w.adUnitsRemovedFromUsage,this.handleAdUnitsRemovedFromUsage,!1,e.PluginName),this.eventBus.on(r.w.adUnitsBlockedFromUsage,this.blockAdUnits,!1,e.PluginName),this.eventBus.on(r.w.adUnitsUnblockedFromUsage,this.unblockAdUnits,!1,e.PluginName),this.eventBus.on(r.w.topSideOfViewportOccupied,this.handleTopSideOfViewportOccupied,!0,e.PluginName),this.eventBus.on(r.w.bottomSideOfViewportOccupied,this.handleBottomSideOfViewportOccupied,!0,e.PluginName),this.eventBus.on(r.w.adhesiveDestroyed,this.handleAdhesiveDestroyed,!1,e.PluginName),this.eventBus.on(r.w.slotCroppableStatusRequested,this.handleSlotCroppableStatusRequested,!1,e.PluginName)}registerMiddlewaresHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.selectAdhesiveAdUnitsAndSettings(),this.setProductInfo(),this.createAdhesiveAds(),this.initiateAdhesiveAds(),await super.activate()}async deactivate(){this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.detachAllForNamespace(e.PluginName);for(const e of this.adhesiveAds.values())e.destroy();return await super.deactivate()}handleTopSideOfViewportOccupied(e){this.canInitiateTop=!e,this.canInitiateTop&&this.initiateAdhesiveAds()}handleBottomSideOfViewportOccupied(e){this.canInitiateBottom=!e,this.canInitiateBottom&&this.initiateAdhesiveAds()}handleSlotCroppableStatusRequested(e){const t=this.selectedAdhesiveAdUnitsAndSettings.get(e.elementId);e.callback(!(null==t||!t.settings.container.parallaxHeight)||!(null==t||!t.settings.container.interactiveResize),(null==t?void 0:t.settings.container.parallaxHeight)||0)}selectAdhesiveAdUnitsAndSettings(){const e=this.config.adUnits.find((e=>e.settingsPerViewport[0].adhesiveSettings.some((e=>e.position===a.Both))));if(e){const t=e.settingsPerViewport[0].adhesiveSettings.find((e=>e.position===a.Both));this.selectedAdhesiveAdUnitsAndSettings.set(e.elementId,{hideAdhesiveComponentsForBidders:e.hideAdhesiveComponentsForBidders,viewportSize:e.settingsPerViewport[0].viewportSize,settings:f(f({},t),{},{position:a.Bottom})});const n="".concat(e.elementId,"-").concat(a.Top);return this.selectedAdhesiveAdUnitsAndSettings.set(n,{hideAdhesiveComponentsForBidders:e.hideAdhesiveComponentsForBidders,viewportSize:e.settingsPerViewport[0].viewportSize,settings:f(f({},t),{},{position:a.Top})}),void this.createAdUnitInstance(e.elementId,n)}const t=this.config.adUnits.find((e=>e.settingsPerViewport[0].adhesiveSettings.some((e=>e.position===a.Top)))),n=this.config.adUnits.find((e=>e.settingsPerViewport[0].adhesiveSettings.some((e=>e.position===a.Bottom))));if(t&&n&&(null==t?void 0:t.elementId)===(null==n?void 0:n.elementId)){const e="".concat(n.elementId,"-").concat(a.Top);return this.selectedAdhesiveAdUnitsAndSettings.set(n.elementId,{hideAdhesiveComponentsForBidders:n.hideAdhesiveComponentsForBidders,viewportSize:n.settingsPerViewport[0].viewportSize,settings:n.settingsPerViewport[0].adhesiveSettings.find((e=>e.position===a.Bottom))}),this.selectedAdhesiveAdUnitsAndSettings.set(e,{hideAdhesiveComponentsForBidders:t.hideAdhesiveComponentsForBidders,viewportSize:t.settingsPerViewport[0].viewportSize,settings:t.settingsPerViewport[0].adhesiveSettings.find((e=>e.position===a.Top))}),void this.createAdUnitInstance(n.elementId,e)}t&&this.selectedAdhesiveAdUnitsAndSettings.set(t.elementId,{hideAdhesiveComponentsForBidders:t.hideAdhesiveComponentsForBidders,viewportSize:t.settingsPerViewport[0].viewportSize,settings:t.settingsPerViewport[0].adhesiveSettings.find((e=>e.position===a.Top))}),n&&this.selectedAdhesiveAdUnitsAndSettings.set(n.elementId,{hideAdhesiveComponentsForBidders:n.hideAdhesiveComponentsForBidders,viewportSize:n.settingsPerViewport[0].viewportSize,settings:n.settingsPerViewport[0].adhesiveSettings.find((e=>e.position===a.Bottom))})}createAdUnitInstance(t,n){const i={cloneFromAdUnitElementId:t,newAdUnitsElementIds:[n],ext:{delegateToLoad:!0}};this.logger.log({payload:i,namespace:e.PluginName,message:"Event: ".concat(r.w.cloneAdUnitsRequested,"."),verboseLevel:3}),this.eventBus.emit(r.w.cloneAdUnitsRequested,i)}createAdhesiveAds(){for(const[e,t]of this.selectedAdhesiveAdUnitsAndSettings)this.adhesiveAds.set(e,this.config.adhesiveBuilderFactory.getBuilder(t.settings.design).build(e,t.hideAdhesiveComponentsForBidders,t.viewportSize,t.settings))}initiateAdhesiveAds(){for(const e of this.adhesiveAds.values())if(!e.getInfo().isInitiated&&!e.getInfo().isDestroyed&&(e.getInfo().position!==a.Top||this.canInitiateTop)&&(e.getInfo().position!==a.Bottom||this.canInitiateBottom)){switch(e.getInfo().position){case a.Top:this.eventBus.emit(r.w.topSideOfViewportOccupied,!0);break;case a.Bottom:this.eventBus.emit(r.w.bottomSideOfViewportOccupied,!0)}"complete"===document.readyState||"interactive"===document.readyState?e.initiate():document.addEventListener("DOMContentLoaded",(()=>e.initiate()))}}handleAdUnitsRemovedFromUsage(t){t.forEach((t=>{this.selectedAdhesiveAdUnitsAndSettings.has(t)&&(this.logger.log({namespace:e.PluginName,message:"Adhesive Ad Unit removed triggered by ".concat(r.w.adUnitsRemovedFromUsage," event."),verboseLevel:3,payload:this.selectedAdhesiveAdUnitsAndSettings.get(t)}),this.adhesiveAds.get(t)&&this.adhesiveAds.get(t).destroy(),this.adhesiveAds.delete(t),this.selectedAdhesiveAdUnitsAndSettings.delete(t))}))}blockAdUnits(t){t.elementsIDs.forEach((t=>{this.selectedAdhesiveAdUnitsAndSettings.has(t)&&(this.logger.log({namespace:e.PluginName,message:"Adhesive destroyed triggered by ".concat(r.w.adUnitsBlockedFromUsage," event."),verboseLevel:3,payload:this.selectedAdhesiveAdUnitsAndSettings.get(t)}),this.adhesiveAds.get(t)&&this.adhesiveAds.get(t).destroy(),this.adhesiveAds.delete(t))}))}unblockAdUnits(t){t.elementsIDs.forEach((t=>{if(!this.selectedAdhesiveAdUnitsAndSettings.has(t))return;this.logger.log({namespace:e.PluginName,message:"Adhesive reinitialized triggered by ".concat(r.w.adUnitsUnblockedFromUsage," event."),verboseLevel:3,payload:this.selectedAdhesiveAdUnitsAndSettings.get(t)});const n=this.selectedAdhesiveAdUnitsAndSettings.get(t);if(!n)return;const{settings:i,hideAdhesiveComponentsForBidders:o,viewportSize:s}=n;this.adhesiveAds.set(t,this.config.adhesiveBuilderFactory.getBuilder(i.design).build(t,o,s,i)),this.adhesiveAds.get(t).initiate()}))}handleAdhesiveDestroyed(t){var n,i,o,s,a,d,c,l,u,p,h,g;this.selectedAdhesiveAdUnitsAndSettings.has(t)&&null!==(n=this.selectedAdhesiveAdUnitsAndSettings.get(t))&&void 0!==n&&null!==(i=n.settings)&&void 0!==i&&i.reInitiateAdhesiveSettings&&null!==(o=this.selectedAdhesiveAdUnitsAndSettings.get(t))&&void 0!==o&&null!==(s=o.settings)&&void 0!==s&&null!==(a=s.reInitiateAdhesiveSettings)&&void 0!==a&&a.reInitiateAfter&&this.adhesiveAdReInitiationsCounter.get(t)!==(null===(d=this.selectedAdhesiveAdUnitsAndSettings.get(t))||void 0===d||null===(c=d.settings)||void 0===c||null===(l=c.reInitiateAdhesiveSettings)||void 0===l?void 0:l.maxNumberOfReInitiations)&&(this.adhesiveAdReInitiationsCounter.set(t,(this.adhesiveAdReInitiationsCounter.get(t)||0)+1),window.setTimeout((()=>{if(this.adhesiveAds.has(t))this.adhesiveAds.get(t).initiate();else{const e=this.selectedAdhesiveAdUnitsAndSettings.get(t);if(!e)return;const{settings:n,hideAdhesiveComponentsForBidders:i,viewportSize:r}=e;this.adhesiveAds.set(t,this.config.adhesiveBuilderFactory.getBuilder(n.design).build(t,i,r,n)),this.adhesiveAds.get(t).initiate()}this.logger.log({namespace:e.PluginName,message:"Adhesive reinitialized triggered by ".concat(r.w.adhesiveDestroyed," event."),verboseLevel:3,payload:this.selectedAdhesiveAdUnitsAndSettings.get(t)})}),1e3*((null===(u=this.selectedAdhesiveAdUnitsAndSettings)||void 0===u||null===(p=u.get(t))||void 0===p||null===(h=p.settings)||void 0===h||null===(g=h.reInitiateAdhesiveSettings)||void 0===g?void 0:g.reInitiateAfter)||0)),this.logger.log({namespace:e.PluginName,message:"Adhesive destroyed triggered by ".concat(r.w.adhesiveDestroyed," event."),verboseLevel:3,payload:this.selectedAdhesiveAdUnitsAndSettings.get(t)}),this.adhesiveAds.delete(t))}setProductInfo(){for(const[e,t]of this.selectedAdhesiveAdUnitsAndSettings)this.eventBus.emit(r.w.logProductDataRequested,{key:l.p.ProductFormat,value:t.settings.design===u.MobileSkin?c._.MobileSkin:c._.Adhesive,adUnitElementId:e}),this.eventBus.emit(r.w.logProductDataRequested,{key:l.p.ProductFeature,value:t.settings.design===u.Companion?c.x.CompanionAds:c.x.NoCompanionAds,adUnitElementId:e}),t.settings.container.parallaxHeight&&this.eventBus.emit(r.w.logProductDataRequested,{key:l.p.ProductFeature,value:c.x.Parallax,adUnitElementId:e}),this.eventBus.emit(r.w.logProductDataRequested,{key:l.p.ProductFeature,value:t.settings.button.enabled?c.x.CloseButtonOn:c.x.CloseButtonOff,adUnitElementId:e})}},h.PluginName=s.f.AdhesivePlugin,p=h))||p;class b{constructor(e,t){this.builders=e,this.defaultBuilder=t}getBuilder(e){return this.builders.find((t=>t.designType===e))||this.defaultBuilder}}var y=n(9754),A=n(2166),w=n(4028),S=n(7165),I=n(3081);class E{execute(e,t){return t.applyTargeting(e)}}class _{execute(e){const{innerWidth:t,innerHeight:n}=window;return e.forEach((e=>{e.settingsPerViewport=e.settingsPerViewport.filter((e=>{const[i,r]=e.viewportSize;return t>=i&&n>=r})),e.settingsPerViewport.sort(((e,t)=>{const[n,i]=e.viewportSize,[r,o]=t.viewportSize;return n*i-r*o}));const i=e.settingsPerViewport.pop();e.settingsPerViewport=i?[i]:[]})),e.filter((e=>e.settingsPerViewport[0].adhesiveSettings.length))}}class x{constructor(e,t){this.settingsTargetingServiceOnAdUnit=e,this.contextTypeStrategyFactory=t}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new E),n=(0,S.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:v.PluginName,message:"Before activate task: ".concat(I.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnits}})}executeBusinessLogicForSelectAdhesivePerViewportSettingsCommand(e){const t=this.contextTypeStrategyFactory.getContext(new _),n=(0,S.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:v.PluginName,message:"Before activate task: ".concat(I.w.NEW_ADHESIVE_SELECT_PER_VIEWPORT_SETTINGS,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnits}})}}var P=n(3591),T=n(329),O=n(8789);function C(e,t,n){if(t.disableMakeSpace||t.spacerElementQuerySelector&&document.querySelector(t.spacerElementQuerySelector))return;let i="";switch(t.position){case a.Bottom:i="marginBottom";break;case a.Top:i="marginTop";break;default:return}document.body.style[i]=e?"".concat(n,"px"):""}let R=function(e){return e.pixels="px",e.viewportHeight="vh",e}({});class U{constructor(e,t,n,i,o,s,d,c,l,u,p,h){var g;let f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:null;this.styleElement=e,this.containerWrapper=t,this.container=n,this.slotElement=i,this.settings=o,this.eventBus=s,this.logger=d,this.button=c,this.elementId=l,this.viewportSize=u,this.hideAdhesiveComponentsForBidders=p,this.parent=h,this.effect=f,this.azerionLogo=m,this.nameSpace=void 0,this.containerWrapperResizeObserver=null,this.creativeWrapperResizeObserver=void 0,this.adIsShown=!1,this.containerWrapperPadding=void 0,this.creativeWrapper=null,this.minAdWidth=1,this.creativeResizeObserverTimeout=0,this.adhesiveComponentsVisible=!0,this.initiated=!1,this.isDestroyed=!1,this.backgroundVisible=!1,this.customStyleElement=null,this.isBuilt=!1,this.emptyCreatives=new Set,this.delayMet=!1,this.scrollMet=!1,this.apiCalled=!1,this.activationTimeout=0,this.handleOnWindowResize=this.handleOnWindowResize.bind(this),this.handleAdUnitLoaded=this.handleAdUnitLoaded.bind(this),this.handleAdUnitRenderedBidder=this.handleAdUnitRenderedBidder.bind(this),this.toggleAdhesiveComponentsVisibility=this.toggleAdhesiveComponentsVisibility.bind(this),this.apiCalled=!this.settings.initiateViaApi,this.delayMet=!this.settings.initiateDelay,this.scrollMet=!(null!==(g=this.settings.initiateOnScroll)&&void 0!==g&&g.enabled),this.eventBus.on(r.w.adSlotLoadedByAdServer,this.handleAdUnitLoaded,!1,"BaseAdhesive"),this.eventBus.on(r.w.adUnitRenderedBidder,this.handleAdUnitRenderedBidder,!1,"BaseAdhesive"),this.containerWrapperPadding=this.settings.position===a.Bottom?"paddingTop":"paddingBottom",this.creativeWrapperResizeObserver=new(window.ResizeObserver||P.A)((e=>{const t=e.pop().contentRect;t.width<=this.minAdWidth?this.creativeResizeObserverTimeout=window.setTimeout((()=>{t.width<=this.minAdWidth&&(this.emptyCreatives.add(this.elementId),this.changeVisibilityState(!1))}),5e3):(window.clearTimeout(this.creativeResizeObserverTimeout),this.changeVisibilityState(!0))}))}initiate(){var e;if(!this.initiated)if(this.initiated=!0,this.isDestroyed=!1,null!==(e=this.settings.initiateOnScroll)&&void 0!==e&&e.enabled)this.triggerAdhesiveOnScroll();else{if(this.settings.initiateViaApi)return this.eventBus.on(r.w.initiateAdhesiveRequested,(e=>{this.elementId!==e||this.isBuilt||(this.isBuilt=!0,this.initiated=!0,this.isDestroyed=!1,this.apiCalled=!0,this.buildAdhesive())}),!0,this.nameSpace),void this.eventBus.on(r.w.destroyAdhesiveRequested,(e=>{this.elementId===e&&this.isBuilt&&this.destroy()}),!0,this.nameSpace);this.settings.initiateDelay&&(this.activationTimeout=window.setTimeout((()=>{this.delayMet=!0,this.buildAdhesive()}),this.settings.initiateDelay)),this.buildAdhesive()}}getInfo(){return{isInitiated:this.initiated,isDestroyed:this.isDestroyed,elementId:this.elementId,position:this.settings.position}}triggerAdhesiveOnScroll(){var e,t;const n=window.innerHeight,i=window.scrollY,r=(null===(e=this.settings.initiateOnScroll)||void 0===e?void 0:e.measure)===R.viewportHeight?n*this.settings.initiateOnScroll.offset/100:(null===(t=this.settings.initiateOnScroll)||void 0===t?void 0:t.offset)||0,o=(0,T.sg)((()=>{r<=Math.abs(i-window.scrollY)&&(window.removeEventListener("scroll",o),this.scrollMet=!0,this.buildAdhesive())}),50);window.addEventListener("scroll",o)}buildAdhesive(){var e;if(!this.apiCalled||!this.delayMet||!this.scrollMet)return;const t=document.querySelector(this.parent);t?(this.settings.customCss&&(this.customStyleElement=document.createElement("style"),this.customStyleElement.innerHTML=this.settings.customCss,document.head.appendChild(this.customStyleElement)),document.head.appendChild(this.styleElement),this.container.appendChild(this.slotElement),this.containerWrapper.appendChild(this.container),t.appendChild(this.containerWrapper),null===(e=this.effect)||void 0===e||e.addEffect(),this.eventBus.emit(r.w.adUnitDefineSlotRequested,this.elementId)):this.logger.error({namespace:this.nameSpace,type:O.f.AdhesiveParentNotFound,message:"Parent element with selector ".concat(this.parent," not found. Adhesive ad will not be displayed created."),verboseLevel:1})}destroy(){var e;if(this.eventBus.detachAllForNamespace(this.nameSpace),window.clearTimeout(this.activationTimeout),!this.initiated)return;this.isDestroyed=!0,this.initiated=!1,this.isBuilt=!1;const t={elementsIDs:[this.elementId]};switch(this.logger.log({namespace:this.nameSpace,message:"Event: ".concat(r.w.adUnitDestroyRequested,"."),verboseLevel:3,payload:t}),this.eventBus.emit(r.w.adUnitDestroyRequested,t),this.creativeWrapperResizeObserver&&this.creativeWrapperResizeObserver.disconnect(),this.containerWrapperResizeObserver&&this.containerWrapperResizeObserver.disconnect(),this.customStyleElement&&this.customStyleElement.remove(),window.removeEventListener("resize",this.handleOnWindowResize),window.clearTimeout(this.creativeResizeObserverTimeout),null===(e=this.effect)||void 0===e||e.destroy(),this.styleElement.remove(),this.containerWrapper.remove(),this.makeSpace(!1),this.settings.position){case a.Top:this.eventBus.emit(r.w.topSideOfViewportOccupied,!1);break;case a.Bottom:this.eventBus.emit(r.w.bottomSideOfViewportOccupied,!1)}this.eventBus.emit(r.w.adhesiveDestroyed,this.elementId)}toggleAdhesiveComponentsVisibility(e){this.container.classList.contains("pgAdhesiveHidden")===e&&this.container.classList.toggle("pgAdhesiveHidden"),this.containerWrapper.classList.contains("pgAdhesiveHidden")===e&&this.containerWrapper.classList.toggle("pgAdhesiveHidden"),this.containerWrapper.querySelector("div.pgAdhesiveBackground")&&this.containerWrapper.querySelector("div.pgAdhesiveBackground").classList.contains("pgAdhesiveHidden")===e&&this.containerWrapper.querySelector("div.pgAdhesiveBackground").classList.toggle("pgAdhesiveHidden"),this.button instanceof HTMLDivElement&&this.button.classList.contains("pgAdhesiveHidden")===e&&this.button.classList.toggle("pgAdhesiveHidden"),this.adhesiveComponentsVisible=e,this.logger.log({namespace:this.nameSpace,message:"".concat(r.w.adUnitRenderedBidder," Event received for SSP which ").concat(e?"has its own Adhesive Overlay. Hiding PG Adhesive Components":"does not have its own Adhesive Overlay. Showing PG Adhesive Components","."),verboseLevel:3})}changeVisibilityState(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.adIsShown=e,this.manageAdVisibility(e)}manageAdVisibility(e){e?this.showAd():(this.containerWrapper instanceof HTMLElement&&(this.containerWrapper.style[this.containerWrapperPadding]="",this.containerWrapper.style.maxWidth="1px",this.containerWrapper.style.maxHeight="1px"),this.button instanceof HTMLElement&&(this.button.style.visibility="hidden")),this.makeSpace(e),this.toggleAdhesiveFilledClass(e)}addButton(){this.button instanceof HTMLDivElement&&(this.settings.button.showAfter>0&&(this.button.style.display="none",setTimeout((()=>{this.button instanceof HTMLDivElement&&(this.button.style.display="")}),1e3*this.settings.button.showAfter)),this.button.addEventListener("click",(()=>this.destroy())),this.containerWrapper.prepend(this.button))}handleOnWindowResize(){const e=!(this.viewportSize[0]>window.innerWidth||this.viewportSize[1]>window.innerHeight);if(e&&!this.adIsShown){this.logger.log({namespace:this.nameSpace,message:"Event: ".concat(r.w.adUnitDefineSlotRequested,"."),verboseLevel:3,payload:this.elementId}),this.eventBus.emit(r.w.adUnitDefineSlotRequested,this.elementId);const e={elementID:this.elementId};this.logger.log({namespace:this.nameSpace,message:"Event: ".concat(r.w.adUnitDisplayRequested,"."),verboseLevel:3,payload:e}),this.eventBus.emit(r.w.adUnitDisplayRequested,e);const t={auctionID:(0,T.$C)(),adUnitsElementIDs:[this.elementId]};this.logger.log({namespace:this.nameSpace,message:"Event: ".concat(r.w.auctionRequested,"."),verboseLevel:1,payload:t}),this.eventBus.emit(r.w.auctionRequested,t)}this.changeVisibilityState(e)}makeSpace(e){this.settings.container.interactiveResize||C(e,this.settings,this.container.offsetHeight)}toggleAdhesiveFilledClass(e){this.containerWrapper.classList.toggle("ow-adhesive-filled",e)}}class k extends U{constructor(){super(...arguments),this.nameSpace="DefaultAdhesiveAd",this.adhesiveDimensionProperty="width",this.isButtonOutside=!1,this.buttonSpotSize=40,this.lastRenderedBidder="",this.lastRenderedAdIsMobileBottom=!1,this.forcedAvailableSpaceForButton=null,this.adUnitLoaded=!1}handleAdUnitRenderedBidder(e){let{slotID:t,bidders:n,creativeHeight:i,creativeWidth:r}=e;if(this.elementId!==t||!this.hideAdhesiveComponentsForBidders.length)return;const o=n.includes("improvedigital")&&300===i&&640===r;if(!o&&this.lastRenderedAdIsMobileBottom&&((0,T.LV)(!0),this.lastRenderedAdIsMobileBottom=!1),n.includes("ogury")&&"ogury"===this.lastRenderedBidder)return;if(n.includes("ogury")&&"ogury"!==this.lastRenderedBidder)return this.toggleExpandAdhesiveContainerAndMoveButtonToOutside(!0,n[0],i),void(this.lastRenderedBidder=n[0]);!n.some((e=>["ogury"].includes(e)))&&["ogury"].includes(this.lastRenderedBidder)&&this.toggleExpandAdhesiveContainerAndMoveButtonToOutside(!1,n[0]);const s=n.some((e=>this.hideAdhesiveComponentsForBidders.filter((e=>!["ogury"].includes(e))).includes(e))),a=!(o||s);this.adhesiveComponentsVisible!==a&&this.toggleAdhesiveComponentsVisibility(a),this.lastRenderedBidder=n[0],this.lastRenderedAdIsMobileBottom=o}toggleExpandAdhesiveContainerAndMoveButtonToOutside(e,t,n){var i;if(e)return this.isButtonOutside=!0,this.forcedAvailableSpaceForButton=0,void(this.container&&(this.container.style.minHeight="".concat("ogury"!==t?n||100:100-((null===(i=this.settings.container)||void 0===i?void 0:i.padding)||0),"px")));this.forcedAvailableSpaceForButton=null,this.container&&(this.container.style.minHeight="1px")}showAd(){var e,t,n;this.containerWrapper instanceof HTMLElement&&(this.containerWrapper.style[this.containerWrapperPadding]=this.isButtonOutside?"".concat((null===(e=this.settings.container)||void 0===e?void 0:e.padding)||0,"px"):"".concat(((null===(t=this.settings.container)||void 0===t?void 0:t.padding)||0)*((null===(n=this.settings.container)||void 0===n?void 0:n.paddingMultiplier)||0),"px"),this.containerWrapper.style.maxWidth="",this.containerWrapper.style.maxHeight="");this.button instanceof HTMLElement&&(this.button.style.visibility="visible")}handleAdUnitLoaded(e){if(e===this.elementId)if(this.adUnitLoaded=!0,this.creativeWrapper=this.container.querySelector("iframe"),this.creativeWrapper||this.settings.companionSettings){var t;if(!this.backgroundVisible)this.backgroundVisible=!0,null===(t=this.containerWrapper.querySelector(".pgAdhesiveBackground"))||void 0===t||t.classList.remove("notVisible");if(this.creativeWrapperResizeObserver&&this.creativeWrapperResizeObserver.disconnect(),this.changeVisibilityState(!0),this.creativeWrapper&&this.creativeWrapperResizeObserver&&this.creativeWrapperResizeObserver.observe(this.creativeWrapper),this.containerWrapperResizeObserver){var n;const e=Math.max(this.containerWrapper.offsetWidth,(null===(n=this.creativeWrapper)||void 0===n?void 0:n.offsetWidth)||0);this.setButtonPosition(e)}else this.addButton(),window.addEventListener("resize",this.handleOnWindowResize),setTimeout((()=>{this.handleContainerWrapperResize()}),0)}else this.logger.log({namespace:this.nameSpace,message:"".concat(this.settings.position," Adhesive creative wrapper did not load."),verboseLevel:3})}setButtonPosition(e){var t;const n=null!==(t=this.forcedAvailableSpaceForButton)&&void 0!==t?t:e-(0,T.em)(this.creativeWrapper,this.adhesiveDimensionProperty);this.isButtonOutside=n/2<=this.buttonSpotSize,this.button instanceof HTMLDivElement&&(this.isButtonOutside?this.button.classList.add("outside"):this.button.classList.remove("outside"))}handleContainerWrapperResize(){this.containerWrapperResizeObserver=new(window.ResizeObserver||P.A)((e=>{const t=e.pop().contentRect;this.setButtonPosition(t.width)})),this.containerWrapperResizeObserver&&this.containerWrapperResizeObserver.observe(this.containerWrapper)}}let D=function(e){return e.Left="left",e.Right="right",e}({}),B=function(e){return e.Expand="expand",e.Contract="contract",e}({}),j=function(e){return e.InsideLeftTop="insideLeftTop",e.InsideRightTop="insideRightTop",e.InsideLeftBottom="insideLeftBottom",e.InsideRightBottom="insideRightBottom",e}({});function N(e,t,n,i){var r;const o=[];let s,d;[D.Left,D.Right].includes(e.button.position)?(s=e.position===a.Top?"bottom":"top",d=e.button.position):(s=[j.InsideLeftTop,j.InsideRightTop].includes(e.button.position)?"top":"bottom",d=[j.InsideLeftTop,j.InsideLeftBottom].includes(e.button.position)?"left":"right");const c="".concat(s,"-").concat(d);["top-right","top-left","bottom-left","bottom-right"].forEach((e=>o.push(c===e?"15px":"0")));const l=e.design!==u.MobileSkin||[D.Left,D.Right].includes(e.button.position)?"10px":"5px",p="#".concat(t," .pg_close-ad-btn {\n    z-index: 1214748364;\n    cursor: pointer;\n    position: absolute;\n    ").concat(s,": 0;\n    ").concat(d,": 0;\n    width: 20px;\n    height: 20px;\n    padding: ").concat(l,";\n    box-sizing: content-box;\n  }\n\n  #").concat(t," .pg_close-ad-btn-content {\n    position: relative;\n    width: 20px;\n    height: 20px;\n    padding: 0;\n    background: ").concat(null!==(r=e.button.backgroundColor)&&void 0!==r?r:e.button.color,";\n    border-radius: 50%;\n    transform: rotate(45deg);\n    filter: invert(").concat(e.button.backgroundColor?0:1,");\n  }\n\n  #").concat(t," .pg_close-ad-btn-content:after, #").concat(t," .pg_close-ad-btn-content:before {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 2.5px;\n    height: 12px;\n    background: ").concat(e.button.color,";\n    transform: translate(-50%, -50%);\n    filter: invert(").concat(e.button.backgroundColor?0:1,");\n  }\n\n  #").concat(t," .pg_close-ad-btn-content:before {\n    transform: translate(-50%, -50%) rotate(90deg)\n  }\n\n  #").concat(t," .outside {\n    ").concat(s,": auto;\n    ").concat(s,": -30px;\n    width: 20px;\n    padding: 5px;\n    background-color: ").concat(e.container.backgroundColor,";\n    ").concat(e.container.opacity?"opacity: ".concat(e.container.opacity,";"):"","\n    border-radius: ").concat(o.join(" "),";\n  }\n  #").concat(t," .outside.vertical {\n    width: 20px;\n    padding: 5px;\n  }\n  #").concat(t," .outside>.pg_close-ad-btn-content {\n    background: transparent;\n    box-shadow: none;\n    margin: 0 auto;\n  }\n  #").concat(t," .outside>.pg_close-ad-btn-content:before, .outside>.pg_close-ad-btn-content:after {\n    background: ").concat(e.button.color,";\n  }\n\n  #").concat(t,".pgAdhesiveHidden {\n    ").concat(e.position,": -20px !important;\n    z-index: 0 !important;\n  }\n\n  .pgAdhesiveBackground.pgAdhesiveHidden, .pgAdhesiveBackground.notVisible {\n    visibility: hidden !important;\n  }\n\n  #").concat(n,"-").concat(e.position,".pgAdhesiveHidden {\n    margin-").concat(e.position,": -50vh !important;\n  }\n\n  .pg_close-ad-btn.pgAdhesiveHidden {\n    visibility: hidden !important;\n  }\n\n  #").concat(i,".pgAdhesiveHidden {\n    position: fixed !important;\n    left: 50% !important;\n    ").concat(e.position,': 0px !important;\n    transform: translate(-50%, 49%) !important;\n  }\n\n  div[id^="sas_closeButton_"], div[data-testid="close-button"] {\n    display: none;\n  }\n\n  .pg_azerion-logo {\n    display: none;\n  }\n\n  .ow-adhesive-filled .pg_azerion-logo {\n    display: block\n  }'),h=document.createElement("style");return h.innerHTML=p,h}const L=e=>{if(!e.button.enabled)return document.createDocumentFragment();const t=document.createElement("div");t.className="pg_close-ad-btn";const n=document.createElement("div");return n.className="pg_close-ad-btn-content",t.appendChild(n),t},M=(e,t)=>{const n=document.createElement("div"),i={position:"relative",textAlign:"center",minHeight:"1px",minWidth:"1px",clipPath:"inset(0px 0px)",alignSelf:"bottom"===t.position?"flex-end":"flex-start"};return n.id=e,(0,T.mj)(n.style,i),t.container.enabled||(n.style.pointerEvents="auto"),n};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=(e,t)=>{const n=document.createElement("div");n.id=e,n.classList.add("ow-adhesive-".concat(t.position));const i={minHeight:"1px",minWidth:"1px",position:"fixed",display:"flex",zIndex:"1214748363",textAlign:"center",width:"100%",alignItems:"top"===t.position?"flex-start":"flex-end",justifyContent:"center",left:"0",[t.position]:"".concat(t.margin,"px")||0};(0,T.mj)(n.style,i),t.container.enabled||(n.style.pointerEvents="none",n.style.backgroundColor="transparent");const r=document.createElement("div");r.classList.add("pgAdhesiveBackground"),r.classList.add("notVisible");const o=F(F({backgroundColor:t.container.backgroundColor},t.container.opacity?{opacity:t.container.opacity}:null),{},{position:"absolute",top:0,bottom:0,left:0,right:0});return(0,T.mj)(r.style,o),n.appendChild(r),n};class V{constructor(e,t,n,i){var r,o;this.slotElement=e,this.settings=t,this.container=n,this.logger=i,this.namespace="ParallaxEffect",this.adServerContainerResizeObserver=null,this.parallaxEffectEnabled=!1,this.lastVerticalPageOffset=window.scrollY||(null===(r=document.documentElement)||void 0===r?void 0:r.scrollTop)||(null===(o=document.body)||void 0===o?void 0:o.scrollTop)||0,this.scrollParallax=this.scrollParallax.bind(this)}destroy(){window.removeEventListener("scroll",(0,T.GR)(this.scrollParallax,5)),this.adServerContainerResizeObserver&&this.adServerContainerResizeObserver.disconnect()}addEffect(){var e;!this.settings.container.parallaxHeight||(null===(e=this.settings.container)||void 0===e?void 0:e.parallaxHeight)<=0||(this.adServerContainerResizeObserver=new(window.ResizeObserver||P.A)((()=>{var e;if(this.settings.container.parallaxHeight&&(null===(e=this.settings.container)||void 0===e?void 0:e.parallaxHeight)>0){const e=this.slotElement.getBoundingClientRect().height,t=this.settings.container.parallaxHeight;(e>t&&!this.parallaxEffectEnabled||e<=t&&this.parallaxEffectEnabled)&&this.toggleParallaxEffect()}})),this.adServerContainerResizeObserver&&this.slotElement&&this.adServerContainerResizeObserver.observe(this.slotElement))}toggleParallaxEffect(){this.parallaxEffectEnabled?this.disableParallaxEffect():this.enableParallaxEffect()}enableParallaxEffect(){this.container?(this.logger.log({namespace:this.namespace,message:"Parallax Effect for Adhesive is enabled."}),this.parallaxEffectEnabled=!0,this.container.style.maxHeight="".concat(this.settings.container.parallaxHeight,"px"),this.lastVerticalPageOffset=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0,window.addEventListener("scroll",(0,T.GR)(this.scrollParallax,5))):this.logger.error({namespace:this.namespace,type:O.f.AdhesiveContainerNotFound,message:"Cannot enable Parallax Effect. Adhesive Container not found."})}disableParallaxEffect(){this.logger.log({namespace:this.namespace,message:"Parallax Effect for Adhesive is disabled."}),this.parallaxEffectEnabled=!1,window.removeEventListener("scroll",(0,T.GR)(this.scrollParallax,5)),this.slotElement.style.marginTop=""}scrollParallax(){if(!this.parallaxEffectEnabled)return;const e=window.innerHeight,t=this.slotElement.getBoundingClientRect().height,n=isNaN(parseFloat(this.slotElement.style.marginTop.replace("px","")))?0:parseFloat(this.slotElement.style.marginTop.replace("px","")),i=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0,r=t/e,o=-1*(t-(this.settings.container.parallaxHeight||0)),s=this.lastVerticalPageOffset-i,a=Math.max(o,Math.min(n+s*r,0));this.lastVerticalPageOffset=i,a<=0&&(this.slotElement.style.marginTop="".concat(a,"px"))}}class ${constructor(e,t,n,i){this.slotElement=e,this.settings=t,this.container=n,this.logger=i,this.namespace="ResizeEffect",this.containerHeight=void 0,this.adServerContainerResizeObserver=null,this.maxScrollPosition=0,this.viewportHeight=0,this.startPosition=0,this.stopPosition=0,this.adServerContainerHeight=0,this.scrollCallback=null,this.enabled=!1,this.disable=this.disable.bind(this),this.enable=this.enable.bind(this),this.setAdServerContainerHeight=this.setAdServerContainerHeight.bind(this),this.containerHeight=this.settings.container.height-(this.settings.container.padding||0)}destroy(){this.logger.log({namespace:this.namespace,message:"Resize Effect for Adhesive is destroyed."}),this.adServerContainerResizeObserver&&this.adServerContainerResizeObserver.disconnect(),this.disable(),C(!1,this.settings,this.containerHeight)}addEffect(){this.logger.log({namespace:this.namespace,message:"Resize Effect for Adhesive is added. Waiting for Resize event"}),C(!0,this.settings,this.containerHeight+(this.settings.container.padding||0)),this.container.style.transitionDuration="0.2s",this.container.style.transitionProperty="max-height",this.adServerContainerResizeObserver=new(window.ResizeObserver||P.A)((()=>{this.adServerContainerHeight=this.slotElement.getBoundingClientRect().height,this.adServerContainerHeight<=this.containerHeight?this.disable():this.enable()})),this.adServerContainerResizeObserver&&this.slotElement&&this.adServerContainerResizeObserver.observe(this.slotElement)}disable(){this.enabled&&(this.logger.log({namespace:this.namespace,message:"Resize Effect for Adhesive is disabled."}),this.container.style.maxHeight="".concat(this.containerHeight,"px"),this.container.style.transitionDuration="0.2s",this.container.style.transitionProperty="max-height",this.scrollCallback&&window.removeEventListener("scroll",this.scrollCallback),C(!0,this.settings,this.containerHeight+(this.settings.container.padding||0)),this.enabled=!1)}enable(){var e,t,n;if(!this.container)return void this.logger.error({namespace:this.namespace,type:O.f.AdhesiveContainerNotFound,message:"Cannot enable Resize Effect. Adhesive Container not found."});this.enabled=!0;const i=(this.settings.container.padding||0)+((null===(e=this.settings.container.interactiveResize)||void 0===e?void 0:e.resizeMode)===B.Contract?this.containerHeight:this.adServerContainerHeight);C(!0,this.settings,i),this.logger.log({namespace:this.namespace,message:"Resize Effect for Adhesive is enabled."}),this.maxScrollPosition=((null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollHeight)||0)-(null===(n=document.documentElement)||void 0===n?void 0:n.clientHeight),this.viewportHeight=window.innerHeight,this.startPosition=Math.min(this.settings.container.interactiveResize.measure===R.viewportHeight?this.viewportHeight*this.settings.container.interactiveResize.resizeFromOffset/100:this.settings.container.interactiveResize.resizeFromOffset||0,this.maxScrollPosition),this.stopPosition=Math.min(this.settings.container.interactiveResize.measure===R.viewportHeight?this.viewportHeight*this.settings.container.interactiveResize.resizeToOffset/100:this.settings.container.interactiveResize.resizeToOffset||0,this.maxScrollPosition),this.setAdServerContainerHeight(),this.scrollCallback&&window.removeEventListener("scroll",this.scrollCallback),this.scrollCallback=(0,T.GR)(this.setAdServerContainerHeight,5),window.addEventListener("scroll",this.scrollCallback)}getCurrentScrollPPosition(){var e;return Math.min((null===(e=document.scrollingElement)||void 0===e?void 0:e.scrollTop)||0,this.maxScrollPosition)}setAdServerContainerHeight(){var e;const t=this.getCurrentScrollPPosition();if(t>=this.startPosition&&t<=this.stopPosition){var n;const e=(t-this.startPosition)/(this.stopPosition-this.startPosition),i=(null===(n=this.settings.container.interactiveResize)||void 0===n?void 0:n.resizeMode)===B.Contract?this.adServerContainerHeight-(this.adServerContainerHeight-this.containerHeight)*e:this.containerHeight+(this.adServerContainerHeight-this.containerHeight)*e;this.container.style.maxHeight="".concat(i,"px")}else{var i;if(t>this.stopPosition)this.container.style.maxHeight="".concat((null===(i=this.settings.container.interactiveResize)||void 0===i?void 0:i.resizeMode)===B.Contract?this.containerHeight:this.adServerContainerHeight,"px");else this.container.style.maxHeight="".concat((null===(e=this.settings.container.interactiveResize)||void 0===e?void 0:e.resizeMode)===B.Contract?this.adServerContainerHeight:this.containerHeight,"px")}}}class G{constructor(e,t,n,i,r){this.eventBus=e,this.logger=t,this.adhesiveContainerIdPrefix=n,this.adSlotElementContainerIdPrefix=i,this.parent=r,this.designType=u.Default}build(e,t,n,i){const r=N(i,"".concat(this.adhesiveContainerIdPrefix,"_").concat(i.position),"".concat(this.adSlotElementContainerIdPrefix,"_").concat(i.position),e),o=H("".concat(this.adhesiveContainerIdPrefix,"_").concat(i.position),i),s=M("".concat(this.adSlotElementContainerIdPrefix,"_").concat(i.position),i),a=document.createElement("div");a.id=e;const d=L(i);let c=null;switch(!0){case!!i.container.parallaxHeight:c=new V(a,i,s,this.logger);break;case!!i.container.interactiveResize:c=new $(a,i,s,this.logger)}return new k(r,o,s,a,i,this.eventBus,this.logger,d,e,n,t,this.parent,c)}}var W=n(2101),K=n(7267);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class X extends k{constructor(e,t,n,i,r,o,s,a,d,c,l,u){var p;let h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null;super(e,t,n,i,r,o,s,a,d,c,l,u,h),this.styleElement=e,this.containerWrapper=t,this.container=n,this.slotElement=i,this.settings=r,this.eventBus=o,this.logger=s,this.button=a,this.elementId=d,this.viewportSize=c,this.hideAdhesiveComponentsForBidders=l,this.parent=u,this.effect=h,this.nameSpace="CompanionAdhesiveAd",this.companionAdUnitElementIds=new Set,this.companionAdUnitElements=new Map,this.companionAdsCreated=!1,this.refreshEvent=null,null===(p=this.settings.notSupportedBidders)||void 0===p||p.push(...l),this.handleRunAuction=this.handleRunAuction.bind(this),this.handleAdUnitRefreshRequested=this.handleAdUnitRefreshRequested.bind(this)}initiate(){if(!this.settings.companionSettings)return;if(this.eventBus.addMiddleware(this.nameSpace,W.h.AdhesiveAuctionRequestedMiddleware,r.w.auctionRequested,this.handleRunAuction),this.eventBus.addMiddleware(this.nameSpace,W.h.AdhesiveAdUnitAdServerRefreshRequestedMiddleware,r.w.adUnitAdServerRefreshRequested,this.handleAdUnitRefreshRequested),!this.settings.companionSettings.numberOfCompanions)return;for(let e=0;e<this.settings.companionSettings.numberOfCompanions;e++){const t="".concat(this.elementId,"-companion-").concat(e);this.companionAdUnitElementIds.add(t),this.styleElement.append("#".concat(t," + .adSpinner { display: none; }"))}const e=new Set,t=[];for(const n of this.settings.companionSettings.sizeMapping)for(const i of n.sizes){const n=i.join("x");e.has(n)||(e.add(n),t.push(i))}const n={cloneFromAdUnitElementId:this.elementId,newAdUnitsElementIds:Array.from(this.companionAdUnitElementIds),overrides:{sizes:t,sizeMapping:this.settings.companionSettings.sizeMapping},ext:{delegateToLoad:!0,disableCLSFix:"center"!==this.settings.companionSettings.affinity,isCompanionAd:!0,biddersToRemove:this.settings.notSupportedBidders||[]}};this.logger.log({payload:n,namespace:this.nameSpace,message:"Event: ".concat(r.w.cloneAdUnitsRequested,"."),verboseLevel:2}),this.eventBus.emit(r.w.cloneAdUnitsRequested,n),super.initiate()}destroy(){this.eventBus.removeAllMiddlewareForPlugin(this.nameSpace),this.eventBus.emit(r.w.adUnitDestroyRequested,{elementsIDs:Array.from(this.companionAdUnitElementIds)}),this.eventBus.emit(r.w.stylingElementsDestroyed,Array.from(this.companionAdUnitElementIds)),super.destroy()}handleAdUnitRenderedBidder(e){if(e.slotID!==this.elementId)return void this.handleAdUnitRenderedCompanion(e);let t=!1;for(const n of this.settings.notSupportedBidders||[])if(e.bidders.map((e=>e.toLowerCase())).includes(n.toLowerCase())){t=!0;break}if(this.adUnitLoaded||e.isEmpty||this.handleAdUnitLoaded(this.elementId),t){this.eventBus.emit(r.w.adUnitDestroyRequested,{elementsIDs:Array.from(this.companionAdUnitElementIds)});for(const e of this.companionAdUnitElementIds){var n,i;null===(n=this.companionAdUnitElements.get(e))||void 0===n||null===(i=n.parentElement)||void 0===i||i.remove()}return this.companionAdsCreated=!1,super.handleAdUnitRenderedBidder(e)}if(!this.companionAdsCreated){let e=0;for(const t of this.companionAdUnitElementIds){var o,s,a,c;const n=document.createElement("div");n.id=t,n.setAttribute(K.W.NO_AUCTION_ATTRIBUTE,"true"),this.companionAdUnitElements.set(t,n),(e%2==0&&(null===(o=this.settings.companionSettings)||void 0===o?void 0:o.affinity)===d.Center||(null===(s=this.settings.companionSettings)||void 0===s?void 0:s.affinity)===d.Left)&&this.containerWrapper.append(n),(e%2!=0&&(null===(a=this.settings.companionSettings)||void 0===a?void 0:a.affinity)===d.Center||(null===(c=this.settings.companionSettings)||void 0===c?void 0:c.affinity)===d.Right)&&this.containerWrapper.insertBefore(n,this.container),e++}this.companionAdsCreated=!0}if(this.refreshEvent&&this.eventBus.emit(r.w.adUnitAdServerRefreshRequested,this.refreshEvent),super.handleAdUnitRenderedBidder(e),e.isEmpty&&!this.slotElement.querySelector("iframe"))return this.emptyCreatives.add(this.elementId),this.changeVisibilityState(!1),this.container.style.width="0",void(this.container.style.margin=d.Right?"0 0 0 -11px":"0 -11px 0 0");this.container.style.width="unset",this.container.style.margin="unset",this.changeVisibilityState(!0)}handleAdUnitRenderedCompanion(e){var t,n,i;if(!this.companionAdUnitElementIds.has(e.slotID))return;if((null===(t=this.settings.companionSettings)||void 0===t?void 0:t.affinity)===d.Center)return;const r=this.companionAdUnitElements.get(e.slotID);if(r){if(e.isEmpty&&(!this.companionAdUnitElements.get(e.slotID)||null===(n=this.companionAdUnitElements.get(e.slotID))||void 0===n||!n.querySelector("iframe")))return r.parentElement&&(r.parentElement.style.margin="0"),r.style.width="0",this.emptyCreatives.add(e.slotID),void this.changeVisibilityState(!1);this.changeVisibilityState(!0),this.adUnitLoaded||this.handleAdUnitLoaded(this.elementId),r.style.width="unset",r.parentElement&&(r.parentElement.style.margin=(null===(i=this.settings.companionSettings)||void 0===i?void 0:i.affinity)===d.Left?"0 0 0 10px":"0 10px 0 0")}}changeVisibilityState(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!t&&this.emptyCreatives.size<=((null===(e=this.settings.companionSettings)||void 0===e?void 0:e.numberOfCompanions)||0)||super.changeVisibilityState(t)}handleRunAuction(e){return e.adUnitsElementIDs.includes(this.elementId)?(e.adUnitsElementIDs.push(...this.companionAdUnitElementIds),e.adUnitsElementIDs=Array.from(new Set(e.adUnitsElementIDs)),e):e}handleAdUnitRefreshRequested(e){var t;return e.elementsIDs.includes(this.elementId)&&(null===(t=this.refreshEvent)||void 0===t?void 0:t.auctionID)!==e.auctionID?(e.elementsIDs=e.elementsIDs.filter((e=>!this.companionAdUnitElementIds.has(e))),e.elementsIDs.includes(this.elementId)&&(this.adUnitLoaded=!1,this.emptyCreatives=new Set),this.refreshEvent=J(J({},e),{},{elementsIDs:Array.from(this.companionAdUnitElementIds),auctionID:(0,T.$C)()}),this.eventBus.emit(r.w.auctionCloned,{originalAuctionId:e.auctionID,newAuctionId:this.refreshEvent.auctionID}),e):e}}class Z{constructor(e,t,n,i,r){this.eventBus=e,this.logger=t,this.adhesiveContainerIdPrefix=n,this.adSlotElementContainerIdPrefix=i,this.parent=r,this.designType=u.Companion}build(e,t,n,i){const r=N(i,"".concat(this.adhesiveContainerIdPrefix,"_").concat(i.position),"".concat(this.adSlotElementContainerIdPrefix,"_").concat(i.position),e),o=H("".concat(this.adhesiveContainerIdPrefix,"_").concat(i.position),i),s=M("".concat(this.adSlotElementContainerIdPrefix,"_").concat(i.position),i),a=document.createElement("div");a.id=e;const d=L(i);let c=null;if(!e.includes("-companion-"))switch(!0){case!!i.container.parallaxHeight:c=new V(a,i,s,this.logger);break;case!!i.container.interactiveResize:c=new $(a,i,s,this.logger)}return new X(r,o,s,a,i,this.eventBus,this.logger,d,e,n,t,this.parent,c)}}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie=v.PluginName;window.pgPluginManager.registerPlugin(ie,v,(function(){const e=window.pgPluginManager.getConfig([{viewConfigurationID:1135,adUnits:[{elementId:"tooplatecom47404",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},hideAdhesiveComponentsForBidders:["seedtag"],settingsPerViewport:[{viewportSize:[730,0],adhesiveSettings:[{position:"bottom",design:"companion",margin:0,button:{enabled:!0,showAfter:5,color:"#111111",position:"left"},container:{enabled:!0,padding:0,paddingMultiplier:1,width:"100%",height:5,backgroundColor:"rgba(255, 255, 255, 0.7)",parallaxHeight:100},companionSettings:{affinity:"center",numberOfCompanions:2,sizeMapping:[{viewportSize:[1620,0],sizes:[[300,50],[320,100],[300,100],[320,50]]}]},notSupportedBidders:["sovrn","sharethrough","sharethroughS2S","triplelift","tripleliftS2S"]}]}]},{elementId:"tooplatecom47406",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},hideAdhesiveComponentsForBidders:["seedtag"],settingsPerViewport:[{viewportSize:[320,0],adhesiveSettings:[{position:"bottom",design:"default",margin:0,button:{enabled:!0,showAfter:5,color:"#111111",position:"left"},container:{enabled:!0,padding:0,paddingMultiplier:1,width:"100%",height:5,backgroundColor:"rgba(255, 255, 255, 0.7)",parallaxHeight:100}}]}]}]}]);let t=new w.G(y.Q),n=e;const i=[];i.push(new G(window.pgPluginManager.baseConfig.eventBus,window.pgPluginManager.baseConfig.logger,"adhesive_container","adhesive_banner","body")),i.push(new Z(window.pgPluginManager.baseConfig.eventBus,window.pgPluginManager.baseConfig.logger,"adhesive_container","adhesive_banner","body"));const r=i.find((e=>"default"===e.designType))||i[0],o=new b(i,r);return n&&(n=te(te({},n),{},{adhesiveBuilderFactory:o,taskHandler:new x(t,new A.W)})),n}))},9986:(e,t,n)=>{"use strict";var i=n(5412),r=n(3821),o=n(5675),s=n(8789),a=n(2703),d=n(8752),c=n(7165),l=n(329);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g{constructor(e){this.logger=void 0,this.logger=e}static getInstance(e){return g.instance||(g.instance=new g(e)),g.instance}buildSiteData(e){const t={},n=[...e.mappedTaxonomyIds.audienceTaxonomyVersion1_1||[],...(0,l.DI)(this.logger)];if(e.mappedTaxonomyIds.contentTaxonomyVersion2_2&&e.mappedTaxonomyIds.contentTaxonomyVersion2_2.length&&(t.site=p(p({},t.site),{},{content:{data:[{name:e.rootDomain,segment:e.mappedTaxonomyIds.contentTaxonomyVersion2_2.map((e=>({id:"".concat(e)}))),ext:{segtax:6}}]}})),n.length&&(t.user=p(p({},t.user),{},{data:[{name:e.rootDomain,segment:n.map((e=>({id:"".concat(e)}))),ext:{segtax:4}}]})),e.mappedTaxonomyIds.contentTaxonomyVersion1_0&&e.mappedTaxonomyIds.contentTaxonomyVersion1_0.length&&(t.site=p(p({},t.site),{},{cattax:1,cat:e.mappedTaxonomyIds.contentTaxonomyVersion1_0,sectioncat:e.mappedTaxonomyIds.contentTaxonomyVersion1_0,pagecat:e.mappedTaxonomyIds.contentTaxonomyVersion1_0,domain:e.rootDomain,page:e.currentPage,name:e.siteName})),e.referer&&(t.site=p(p({},t.site),{},{ref:e.referer})),e.keywords.size&&(t.site=p(p({},t.site),{},{keywords:Array.from(e.keywords).join(",")})),0!==Object.keys(t.site||{}).length||0!==Object.keys(t.user||{}).length)return t}}g.BuilderName="OrtbFirstPartyDataBuilder",g.instance=void 0;var f,m,v=n(4744),b=n.n(v);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let S=(0,r.Q)()((m=class e extends d._{constructor(t){super(t),this.blockedUnits=new Map,this.amazonTokenConfig=void 0,this.amazonTokenUseCookie=!1,this.amazonTokenCookieKey="AMZN-Token",this.renewTokenCalled=!1,this.setTaxonomyIdsLength=0,this.setKeywordsLength=0,this.runAuction=e=>{const t=(0,c.A4)(e);e.callbackVastURL&&(t.callbackVastURL=e.callbackVastURL),this.applySizeMapping(t.adUnitsElementIDs),t.adUnitsElementIDs=t.adUnitsElementIDs.filter((e=>{var t,n;const i=this.config.adUnits.find((t=>t.slotID===e));return!i||(null===(t=i.sizes)||void 0===t?void 0:t.length)||(null===(n=i.multiFormatProperties)||void 0===n?void 0:n.display.sizes.length)})),this.config.auctionFactory.getAuction(t,this.config).setDynamicBidAdjustments(this.config.dynamicBidAdjustment||[]).run()},this.handleFilterAmazonAdUnits=e=>{this.filterAdUnits(e.adUnits),this.dispatchLoggerFilterEvent(e,o.w.filterAmazonAdUnitsRequested)},this.removeAdUnits=this.removeAdUnits.bind(this),this.readdAdUnits=this.readdAdUnits.bind(this),this.handleUserAudienceDataUpdated=this.handleUserAudienceDataUpdated.bind(this),this.updateAmazonToken=this.updateAmazonToken.bind(this),this.setAmazonTokenCookie=this.setAmazonTokenCookie.bind(this),this.amazonPublisherAudiencesCookiePresent=this.amazonPublisherAudiencesCookiePresent.bind(this),this.setFirstPartyData=this.setFirstPartyData.bind(this),this.handleConsentDataUpdated=this.handleConsentDataUpdated.bind(this),this.setDynamicBidAdjustments=this.setDynamicBidAdjustments.bind(this),this.handleAdRequested=this.handleAdRequested.bind(this),this.config.isApstagInitialized=!1,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(o.w.userAudienceDataUpdated,this.handleUserAudienceDataUpdated,!1,e.PluginName),this.eventBus.on(o.w.filterAmazonAdUnitsRequested,this.handleFilterAmazonAdUnits,!1,e.PluginName),this.eventBus.on(o.w.setFirstPartyData,this.setFirstPartyData,!1,e.PluginName),this.eventBus.on(o.w.adUnitsBlockedFromUsage,this.removeAdUnits,!1,e.PluginName),this.eventBus.on(o.w.adUnitsUnblockedFromUsage,this.readdAdUnits,!1,e.PluginName),this.eventBus.on(o.w.consentDataUpdated,this.handleConsentDataUpdated,!1,e.PluginName),this.eventBus.on(o.w.dynamicBidAdjustmentsRequested,this.setDynamicBidAdjustments,!0,e.PluginName)}async activate(){return super.activate()}beforeActivate(){return this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),super.beforeActivate()}afterActivate(){return this.eventBus.emit(o.w.headerBidderActivated,{headerBidder:i.q.Amazon}),super.afterActivate()}async deactivate(){return this.eventBus.emit(o.w.headerBidderDeactivated,{headerBidder:i.q.Amazon}),this.eventBus.detachAllForNamespace(e.PluginName),super.deactivate()}applySizeMapping(e){e.forEach((e=>{var t;const n=this.config.adUnits.find((t=>t.slotID===e));if(!n||!n.sizeMapping)return;const i=this.config.sizeMappingService.getHeaderBiddingSizesForCurrentViewport(n.sizeMapping);n.sizes&&(n.sizes=i),null!==(t=n.multiFormatProperties)&&void 0!==t&&t.display.sizes&&(n.multiFormatProperties.display.sizes=i)}))}setDynamicBidAdjustments(e){this.config.dynamicBidAdjustment=b()(this.config.dynamicBidAdjustment||[],e.amazon||[])}tryAddAdUnit(e){const t=this.config.adUnits.find((t=>t.slotID===e.adUnitElementId));if(t){const n=(0,c.A4)(t);return e.newSizes.length&&(n.sizes=e.newSizes),n.slotID=e.newAdunitElementId,this.config.adUnits.push(n),!0}return!1}removeAdUnits(e){const t=this.config.adUnits.filter((t=>e.elementsIDs.includes(t.slotID)));for(const e of t)this.blockedUnits.set(e.slotID,e);this.filterAdUnits(e.elementsIDs),this.dispatchLoggerFilterEvent(e,o.w.adUnitsBlockedFromUsage)}filterAdUnits(e){this.config.adUnits=this.config.adUnits.filter((t=>!e.includes(t.slotID)))}dispatchLoggerFilterEvent(t,n){this.logger.log({namespace:e.PluginName,message:"Filtered elements from config triggered by ".concat(n," event."),verboseLevel:1,payload:t})}readdAdUnits(e){for(const t of e.elementsIDs)this.blockedUnits.has(t)&&(this.config.adUnits.push(this.blockedUnits.get(t)),this.blockedUnits.delete(t))}handleUserAudienceDataUpdated(t){var n;if(!t.userAudienceDataChanged&&this.renewTokenCalled&&this.amazonPublisherAudiencesCookiePresent())return;const i=null===(n=t.callback())||void 0===n?void 0:n.sha256HashedEmail;i?(this.config.isApstagInitialized||(this.config.isApstagInitialized=!0,this.config.context.getInstance().init(this.config.init)),this.amazonTokenConfig={hashedRecords:[{type:"email",record:i}]},this.updateAmazonToken()):this.logger.log({namespace:e.PluginName,verboseLevel:1,message:"Hashed email not available in user audience data object. Amazon publisher audiences token config cannot be created.",payload:this.amazonTokenConfig})}updateAmazonToken(){if(this.config.amazonPublisherAudiencesEnabled)if(this.amazonTokenConfig){if(!this.renewTokenCalled)return this.logger.log({namespace:e.PluginName,verboseLevel:1,message:"Renewing Amazon publisher audiences token.",payload:this.amazonTokenConfig}),this.config.context.getInstance().rpa(this.amazonTokenConfig,this.setAmazonTokenCookie,this.amazonTokenUseCookie),void(this.renewTokenCalled=!0);this.logger.log({namespace:e.PluginName,verboseLevel:1,message:"Updating Amazon publisher audiences token.",payload:this.amazonTokenConfig}),this.config.context.getInstance().upa(this.amazonTokenConfig,this.setAmazonTokenCookie,this.amazonTokenUseCookie)}else this.logger.error({namespace:e.PluginName,verboseLevel:1,message:"Amazon publisher audiences token is undefined.",payload:this.amazonTokenConfig,type:s.f.AmazonPublisherAudiencesTokenIsUndefined});else this.logger.log({namespace:e.PluginName,verboseLevel:1,message:"Amazon publisher audiences is disabled for this bundle.",payload:this.config,type:s.f.AmazonPublisherAudiencesDisabled})}setAmazonTokenCookie(t){if(!t)return void this.logger.log({namespace:e.PluginName,verboseLevel:1,message:"AMZN-Token not provided.",payload:t});this.logger.log({namespace:e.PluginName,verboseLevel:1,message:"Setting AMZN-Token cookie.",payload:t});const n=new Date((new Date).getTime()+6048e5).toUTCString();document.cookie="".concat(this.amazonTokenCookieKey,"=").concat((null==t?void 0:t.AIPToken)||"","; expires=").concat((null==t?void 0:t.cookieExpiry)||n)}handleConsentDataUpdated(e){this.renewTokenCalled&&this.updateAmazonToken()}amazonPublisherAudiencesCookiePresent(){const e=document.cookie.split(";");for(const t of e)if(0===t.trim().indexOf("".concat(this.amazonTokenCookieKey,"=")))return!0;return!1}handleCloneAdUnitsRequested(t){const n=this.config.adUnits.find((e=>e.slotID===t.cloneFromAdUnitElementId));n&&(t.newAdUnitsElementIds.filter((e=>!this.config.adUnits.map((e=>e.slotID)).includes(e))).map((e=>{var i;const r=A(A({},n),{},{slotID:e});if(r.sizeMapping=(null===(i=t.overrides)||void 0===i?void 0:i.sizeMapping)||n.sizeMapping,t.ext&&t.ext.isSmartSlotChild&&(delete r.mediaType,delete r.multiFormatProperties,t.overrides&&t.overrides.sizes&&(r.mediaTypes=[{banner:{sizes:t.overrides.sizes}}],r.sizes=t.overrides.sizes),r.sizeMapping&&delete r.sizeMapping),t.overrides&&t.overrides.sizes&&r.mediaTypes&&(!t.ext||!t.ext.isSmartSlotChild)){var o;const e=r.mediaTypes.find((e=>!!e.banner&&!!e.banner.sizes));e&&null!=e&&null!==(o=e.banner)&&void 0!==o&&o.sizes&&(e.banner.sizes=t.overrides.sizes)}return r})).forEach((e=>{var n;t.ext&&!0===(null===(n=t.ext)||void 0===n?void 0:n.includeInInitialAuction)&&!this.config.adUnitsInitialLoadElementIDs.includes(e.slotID)&&this.config.adUnitsInitialLoadElementIDs.push(e.slotID),this.config.adUnits.push(e)})),this.logger.log({namespace:e.PluginName,message:"Cloned ad units added to config.",verboseLevel:1,payload:{adUnits:this.config.adUnits}}))}setFirstPartyData(t){var n;const i=[],r=[];for(const n of t.taxonomyIds||[]){if(encodeURIComponent([...i,n].join(",")).length+this.setTaxonomyIdsLength>75){this.logger.warn({namespace:e.PluginName,verboseLevel:1,message:"Amazon ortb setter is trying to set more than 75 bytes of taxonomy IDs.",payload:t,type:s.f.AmazonOrtbTooLong}),t.taxonomyIds=new Set(i),t.mappedTaxonomyIds.contentTaxonomyVersion2_2=Array.from(t.taxonomyIds),t.mappedTaxonomyIds.contentTaxonomyVersion1_0=t.mappedTaxonomyIds.contentTaxonomyVersion1_0.slice(0,t.taxonomyIds.size);break}i.push(n)}this.setTaxonomyIdsLength=this.setTaxonomyIdsLength+encodeURIComponent(i.join(",")+",").length;for(const n of t.keywords||[]){if(encodeURIComponent([...r,n].join(",")).length+this.setKeywordsLength>350){this.logger.warn({namespace:e.PluginName,verboseLevel:1,message:"Amazon ortb setter is trying to set more than 350 bytes of keywords.",payload:t,type:s.f.AmazonOrtbTooLong}),this.setKeywordsLength=this.setKeywordsLength+encodeURIComponent(r.join(",")+",").length,t.keywords=new Set(r);break}r.push(n)}const o=g.getInstance(this.logger).buildSiteData(t);o&&(this.config.init.signals={ortb2:b()((null===(n=this.config.init.signals)||void 0===n?void 0:n.ortb2)||{},o)})}handleAdRequested(e){this.eventBus.emit(o.w.bidsReceived,{bidder:i.q.Amazon,adRequestId:e.adRequestId,noBid:!0,slotId:e.slotId,format:"banner",size:[0,0]})}},m.PluginName=a.f.AmazonPlugin,f=m))||f;var I=n(3916);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P extends I.A{constructor(e){super(e)}applyTargeting(e){return _(_({},e),{},{taskHandler:{},auctionFactory:{},adUnits:e.adUnits.filter((e=>0!==this.filterByTargeting(e.setups).length)).map((e=>{var t,n;const i=new Set,r=new Set,o=this.filterByTargeting(e.setups),s=o.some((e=>"multi-format"===e.mediaType));return o.forEach((e=>{var t,n;null!=e&&e.sizes?e.sizes.forEach((e=>i.add(JSON.stringify(e)))):(null===(t=e.multiFormatProperties)||void 0===t||t.display.sizes.forEach((e=>i.add(JSON.stringify(e)))),null===(n=e.multiFormatProperties)||void 0===n||n.video.sizes.forEach((e=>r.add(JSON.stringify(e)))))})),_(_({slotID:e.slotID,slotName:e.slotName,targeting:e.targeting},e.sizeMapping?{sizeMapping:e.sizeMapping}:null),{},{setupConfigurationID:null!==(t=null===(n=o[0])||void 0===n?void 0:n.setupConfigurationID)&&void 0!==t?t:0},s?{mediaType:"multi-format",multiFormatProperties:{display:{sizes:Array.from(i).map((e=>JSON.parse(e)))},video:{sizes:Array.from(r).map((e=>JSON.parse(e)))}}}:{sizes:Array.from(i).map((e=>JSON.parse(e))),mediaTypes:e.setups.map((e=>e.mediaTypes))})}))})}}var T=n(8064);class O{constructor(e,t){this.event=e,this.config=t,this.context=void 0,this.auctionType=void 0,this.adUnits=void 0,this.eventBus=void 0,this.logger=void 0,this.bidAdjustments=new Map,this.winningBidDislayReverseMap=new Map,this.winningBidVideoReverseMap=new Map,this.successFinishAuctionCallback=this.successFinishAuctionCallback.bind(this),this.failFinishAuctionCallback=this.failFinishAuctionCallback.bind(this),this.eventBus=this.config.eventBus,this.logger=this.config.logger,this.context=this.config.context;for(const e of Object.keys(this.config.winningBidCpmMap||{}))this.isVideoBid(e)?this.winningBidVideoReverseMap.set(this.config.winningBidCpmMap[e],e):this.winningBidDislayReverseMap.set(this.config.winningBidCpmMap[e],e)}setDynamicBidAdjustments(e){for(const t of e)this.bidAdjustments.set(t.amznp,t.adjustment);return this}filterAdUnits(){return this.config.adUnits.filter((e=>!this.event.skipRunningAuction&&this.event.adUnitsElementIDs.includes(e.slotID)))}initApstag(){this.config.isApstagInitialized||(this.config.isApstagInitialized=!0,this.config.context.getInstance().init(this.config.init))}getWinningBids(e){const t=new Map;return e.forEach((n=>{var i;const r=this.getAdjustedCpmValue(n)||n.amznbid||(null===(i=n.targeting)||void 0===i?void 0:i.amznbid)||"";let o=this.config.winningBidCpmMap[r];var a;o&&!isNaN(o)||(o=0,""!==n.amzniid&&""!==(null===(a=n.targeting)||void 0===a?void 0:a.amzniid)&&this.logger.warn({namespace:this.auctionType,message:"Amazon winning bid ".concat(r," was not present is map."),type:s.f.AmazonMappingBidResponseError,payload:e}));t.set(n.slotID,o)})),t}emitAuctionFinished(e){this.logger.log({namespace:this.auctionType,message:"Auction finished. Event: ".concat(o.w.auctionFinished,"."),verboseLevel:1,payload:e}),this.eventBus.emit(o.w.auctionFinished,e)}successFinishAuctionCallback(e,t){this.config.context.getInstance().setDisplayBids();const n=[];for(const t of e){var i;const e=this.getAdjustedCpmValue(t),r=(0,c.A4)(t);r.amznp&&e&&(r.amznp=e),null!==(i=r.targeting)&&void 0!==i&&i.amznp&&(r.targeting.amznp=e),n.push(r),e&&this.eventBus.emit(o.w.clearOldKeyValuesAndAttachNewPairsRequested,{adUnitElementId:t.slotID,keyValues:[{key:"amznbid",value:e}]})}this.eventBus.emit(o.w.amazonBidsReceived,{auctionId:t,bids:n,winningBidCpmMap:this.config.winningBidCpmMap})}getAdjustedCpmValue(e){var t,n;const i=e.amznp||(null===(t=e.targeting)||void 0===t?void 0:t.amznp)||"",r=e.amznbid||(null===(n=e.targeting)||void 0===n?void 0:n.amznbid)||"",o=this.bidAdjustments.get(i);if(!o||1===o||!this.config.winningBidCpmMap[r])return"";const s=this.isVideoBid(r)?this.winningBidVideoReverseMap:this.winningBidDislayReverseMap;let a=0;for(const e of s.keys())e<=this.config.winningBidCpmMap[r]*o&&(a=e);return s.get(a)||""}failFinishAuctionCallback(){}forwardWithoutRunningAuction(){const e={auctionID:this.event.auctionID,headerBidder:i.q.Amazon,elementsIDs:this.event.adUnitsElementIDs,callback:()=>{},winningBids:new Map,targeting:new Map};this.logger.log({namespace:this.auctionType,message:"Forwarding without running auction. Event: ".concat(o.w.auctionFinished,"."),verboseLevel:1,payload:e}),this.eventBus.emit(o.w.auctionFinished,e)}runAuction(){this.initApstag(),this.logger.log({namespace:this.auctionType,message:"Run action.",verboseLevel:1,payload:{adUnits:this.adUnits,auctionID:this.event.auctionID,config:this.config.init,timeout:this.config.timeout}}),this.fetchBids(this.adUnits,this.event)}isVideoBid(e){return e.startsWith("o_")}}let C=function(e){return e.DefaultAmazonAuction="DefaultAmazonAuction",e.InstreamAmazonAuction="InstreamAmazonAuction",e}({});class R extends O{constructor(e,t,n){super(e,t),this.ortbObject=n,this.auctionType=C.DefaultAmazonAuction,this.adUnits=[],this.splitUpAuctionIdsMap=new Map,this.queuedAuctionFinishedEventArgs=new Map,this.adUnits=this.filterAdUnits()}filterAdUnits(){return super.filterAdUnits().filter((e=>{var t,n;return(null===(t=e.sizes)||void 0===t?void 0:t.length)||(null===(n=e.multiFormatProperties)||void 0===n?void 0:n.display.sizes.length)&&e.multiFormatProperties.video.sizes.length})).filter((e=>{var t;return null===(t=e.mediaTypes)||void 0===t?void 0:t.some((e=>{var t;return(null===(t=e.video)||void 0===t?void 0:t.context)!==T.$.Instream}))}))}run(){this.adUnits.length?this.runAuction():this.forwardWithoutRunningAuction()}fetchBids(e,t){let n=this.config.maxAdSlotUriLength;this.ortbObject&&(n-=encodeURIComponent(JSON.stringify(this.ortbObject)).length);const i=encodeURIComponent(JSON.stringify(e.map((e=>({sd:e.slotID,s:e.sizes,sn:e.slotName,ext:{gpid:e.slotName}}))))).length;if(i<n)return void this.apstagFetchBids(e,t.auctionID,!1,t.timeout);const r=[],o=Math.floor(e.length/Math.ceil(i/n))||1;for(let t=0;t<e.length;t+=o)r.push(e.slice(t,t+o));this.logger.log({namespace:this.auctionType,message:"Too many Ad Units in auction splitting into ".concat(r.length," smaller auctions."),verboseLevel:1}),r.forEach(((e,n)=>{const i="".concat(t.auctionID,"_part_").concat(n,"}");this.splitUpAuctionIdsMap.set(i,t.auctionID),this.apstagFetchBids(e,i,!0,t.timeout)}))}apstagFetchBids(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.config.timeout;if(!e.length)return this.logger.log({namespace:this.auctionType,message:"No ad units to fetch bids for.",verboseLevel:1}),void this.finishAuction(e,t,new Map,this.failFinishAuctionCallback,n);try{this.config.context.getInstance().fetchBids({slots:e,bidTimeout:i},(i=>{const r=this.getWinningBids(i);this.finishAuction(e,t,r,this.successFinishAuctionCallback.bind(this,i,t),n)}))}catch(i){this.logger.error({namespace:this.auctionType,message:"Error when fetching bids.",type:s.f.AmazonFetchingBidsError,verboseLevel:1,payload:i}),this.finishAuction(e,t,new Map,this.failFinishAuctionCallback,n)}}finishAuction(e,t,n,r,o){const a=e.map((e=>e.slotID));if(!o){const e={auctionID:t,callback:r,winningBids:n,elementsIDs:a,headerBidder:i.q.Amazon};return void this.emitAuctionFinished(e)}const d=this.splitUpAuctionIdsMap.get(t);if(!d)return this.logger.error({namespace:this.auctionType,message:'Could not find the Main Auction Id for Split Up Auction with ID: "'.concat(t,"\". Finishing auction with the split up auction's Id."),verboseLevel:1,type:s.f.AmazonPluginCouldNotFindSplitUpAuctionsMainAuctionId}),void this.emitAuctionFinished({auctionID:t,callback:r,winningBids:n,elementsIDs:a,headerBidder:i.q.Amazon});this.splitUpAuctionIdsMap.delete(t);let c=this.queuedAuctionFinishedEventArgs.get(d);c||this.queuedAuctionFinishedEventArgs.set(d,{callback:r,winningBids:n,elementsIDs:a,auctionID:d,headerBidder:i.q.Amazon}),c&&this.queuedAuctionFinishedEventArgs.set(d,{callback:r,auctionID:d,winningBids:new Map([...n,...c.winningBids]),headerBidder:i.q.Amazon,elementsIDs:[...new Set([...a,...c.elementsIDs])]}),c=this.queuedAuctionFinishedEventArgs.get(d),!Array.from(this.splitUpAuctionIdsMap.values()).some((e=>e===d))&&c&&(this.queuedAuctionFinishedEventArgs.delete(d),this.emitAuctionFinished(c))}}var U=n(1343);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends O{constructor(e,t){super(e,t),this.auctionType=C.InstreamAmazonAuction,this.adUnits=[],this.adUnitsInstreamVideo=[]}isInstreamSlot(e){return!!e.find((e=>e.video.context===T.$.Instream))}run(){const e=[];this.adUnits.forEach((e=>{if(this.isInstreamSlot(e.mediaTypes)){var t;const n=Number(null===(t=e.mediaTypes)||void 0===t?void 0:t.map((e=>{var t;return null===(t=e.video)||void 0===t?void 0:t.position}))),i=U.D[n];this.adUnitsInstreamVideo=[],this.adUnitsInstreamVideo.push({slotID:i,mediaType:"video",sizes:[],slotName:e.slotName,setupConfigurationID:0})}})),this.adUnitsInstreamVideo&&this.adUnitsInstreamVideo.forEach((t=>{e.push(t)})),e.length?this.runAuction():this.forwardWithoutRunningAuction()}fetchBids(e,t){this.apstagFetchBids(e,t.auctionID)}apstagFetchBids(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.config.timeout;try{this.config.context.getInstance().fetchBids({slots:e,bidTimeout:n},(t=>{const n=this.getWinningBids(t),i=t.length>0?this.getTargeting(t):new Map;this.finishInstreamAuction(e,this.event.auctionID,this.event.callbackVastURL,n,i,this.successFinishAuctionCallback.bind(this,t,this.event.auctionID))}))}catch(t){return this.logger.error({namespace:this.auctionType,message:"Error when fetching bids.",type:s.f.AmazonFetchingBidsError,verboseLevel:1,payload:t}),void this.finishInstreamAuction(e,this.event.auctionID,this.event.callbackVastURL,new Map,new Map,this.failFinishAuctionCallback)}}finishInstreamAuction(e,t,n,r,s,a){const d={auctionID:t,callback:a,winningBids:r,targeting:s,callbackVastURL:n,headerBidder:i.q.Amazon,elementsIDs:e.map((e=>e.slotID)),adUnitPaths:e.map((e=>e.slotName)),maxduration:e.map((e=>{var t,n,i;return null===(t=e.mediaTypes)||void 0===t||null===(n=t.find((e=>e.video)))||void 0===n||null===(i=n.video)||void 0===i?void 0:i.maxduration})).find((e=>void 0!==e)),playbackmethod:e.map((e=>{var t,n,i;return null===(t=e.mediaTypes)||void 0===t||null===(n=t.find((e=>e.video)))||void 0===n||null===(i=n.video)||void 0===i?void 0:i.playbackmethod})).find((e=>void 0!==e)),position:e.map((e=>{var t,n,i;return null===(t=e.mediaTypes)||void 0===t||null===(n=t.find((e=>e.video)))||void 0===n||null===(i=n.video)||void 0===i?void 0:i.position})).find((e=>void 0!==e))};this.logger.log({namespace:this.auctionType,message:"Auction finished. Event: ".concat(o.w.auctionInstreamFinished,"."),verboseLevel:1,payload:d}),this.eventBus.emit(o.w.auctionInstreamFinished,d)}getTargeting(e){const t=new Map,n=[],i={};return e.forEach((e=>{var r,o,s,a;const d=D(D(D(D({},e.amzniid?{amzniid:e.amzniid}:null!=e&&e.targeting&&null!==(r=e.targeting)&&void 0!==r&&r.amzniid?{amzniid:e.targeting.amzniid}:null),e.amznp?{amznp:e.amznp}:null!=e&&e.targeting&&null!==(o=e.targeting)&&void 0!==o&&o.amznp?{amznp:e.targeting.amznp}:null),e.amznbid?{amznbid:e.amznbid}:null!=e&&e.targeting&&null!==(s=e.targeting)&&void 0!==s&&s.amznbid?{amznbid:e.targeting.amznbid}:null),e.amznsz?{amznsz:e.amznsz}:null!=e&&e.targeting&&null!==(a=e.targeting)&&void 0!==a&&a.amznsz?{amznsz:e.targeting.amznsz}:null);for(const t in d)"amzniid"===t&&n.push({amzniid:e[t]}),"amznp"===t&&n.push({amznp:e[t]}),"amznbid"===t&&n.push({amznbid:e[t]});for(let e=0;e<n.length;e++)Object.assign(i,n[e]);t.set(e.slotID,i)})),t}}class N{constructor(){this.ortbObject=null}getAuction(e,t){var n;return null!==(n=t.init)&&void 0!==n&&n.signals&&(this.ortbObject=t.init.signals),e.isInstream?new j(e,t):new R(e,t,this.ortbObject)}}var L=n(3081),M=n(5319);class z{execute(e,t){return t.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.slotID===t.slotID))||e.push(t),e)),[])}}class F{execute(e,t,n){const i=Object.values(t);if(t=Object.keys(t).map((e=>[e,t[e]])).filter((t=>e.map((e=>e.slotID)).includes(t[0]))).filter(((e,t)=>i.indexOf(e[1])===t)).reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),!e.some((e=>Object.keys(t).includes(e.slotID))))return{updatedAdUnits:e,newAdUnitsInitialLoadElementIds:n};let r=[];const o=e=>{var t;let n=(0,c.A4)(e);return n.sizes=null===(t=e.multiFormatProperties)||void 0===t?void 0:t.display.sizes,delete n.mediaType,delete n.multiFormatProperties,n};e.forEach((e=>{if(Object.keys(t).includes(e.slotID)){const n=(0,c.A4)(e);n.slotID=t[e.slotID],r.push(n);const i=o(e);r.push(i)}else if(e.mediaType){const t=o(e);r.push(t)}else r.push(e)}));const s=n;return n.forEach((e=>Object.keys(t).includes(e)?s.push(t[e]):null)),{updatedAdUnits:r,newAdUnitsInitialLoadElementIds:s}}}class q{execute(e,t,n){return 0===t.length?(e.forEach((e=>n.push(e.slotID))),[]):e.filter((e=>!t.find((t=>t===e.slotName))||(n.push(e.slotID),!1)))}}class H{execute(e,t,n){return 0===t.length?(e.forEach((e=>n.push(e.slotID))),[]):e.filter((e=>!t.find((t=>t===e.slotName))||(n.push(e.slotID),!1)))}}var V=n(9527);class ${execute(e,t,n,i){const r=(0,c.A4)(e),o=n===V.b.INCLUDE;return r.filter((e=>{const n=t.find((t=>(0,l.FD)(t)===(0,l.FD)(e.slotName)));return n?!!o||(i.push(e.slotID),!1):!(!n&&o)||(i.push(e.slotID),!1)}))}}class G{constructor(e,t){this.settingsTargetingServiceOnAdUnit=e,this.contextTypeStrategyFactory=t,this.removedAdUnits=[]}getRemovedAdUnits(){return this.removedAdUnits}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new z),n=e.adUnits;e.adUnits=t.executeTaskStrategy(e.adUnits,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(L.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnits}})}executeBusinessLogicForRemoveAdUnits(e){const t=this.contextTypeStrategyFactory.getContext(new $);let n;if(e.taskQueue.getTasksByRunTime(M.s.BEFORE_ACTIVATE).forEach((e=>{e.type===L.w.REMOVE_AD_UNITS&&(n=e)})),n){const i=e.taskQueue.getInstanceOfTask(n),r=e.adUnits;e.adUnits=t.executeTaskStrategy(r,i.payload.adUnitCodes,i.payload.filterStrategy,this.removedAdUnits),e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(L.w.REMOVE_AD_UNITS,"."),verboseLevel:3,payload:{adUnitsBefore:r,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForDisableAdUnitHB(e){const t=this.contextTypeStrategyFactory.getContext(new q);let n;if(e.taskQueue.getTasksByRunTime(M.s.BEFORE_ACTIVATE).forEach((e=>{e.type===L.w.DISABLE_AD_UNIT_HEADER_BIDDING&&(n=e)})),n){const i=e.taskQueue.getInstanceOfTask(n),r=e.adUnits;e.adUnits=t.executeTaskStrategy(r,i.payload.adUnitCodes,this.removedAdUnits),e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(L.w.DISABLE_AD_UNIT_HEADER_BIDDING,"."),verboseLevel:3,payload:{adUnitsBefore:r,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForDisableAdUnitServer(e){const t=this.contextTypeStrategyFactory.getContext(new H);let n;if(e.taskQueue.getTasksByRunTime(M.s.BEFORE_ACTIVATE).forEach((e=>{e.type===L.w.DISABLE_AD_UNIT_SERVER_SIDE_HEADER_BIDDING&&(n=e)})),n){const i=e.taskQueue.getInstanceOfTask(n),r=e.adUnits;e.adUnits=t.executeTaskStrategy(r,i.payload.adUnitCodes,this.removedAdUnits),e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(L.w.DISABLE_AD_UNIT_SERVER_SIDE_HEADER_BIDDING,"."),verboseLevel:3,payload:{adUnitsBefore:r,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForAdUnitsAmazonMultiFormat(e){const t=this.contextTypeStrategyFactory.getContext(new F),n=(0,c.A4)(e.adUnits),{updatedAdUnits:i,newAdUnitsInitialLoadElementIds:r}=t.executeTaskStrategy(e.adUnits,e.adUnitsUsingAmazonMultiFormatElementIdsMap||{},e.adUnitsInitialLoadElementIDs);e.adUnitsInitialLoadElementIDs=r,e.adUnits=i,e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(L.w.AD_UNITS_USING_AMAZON_MULTI_FORMAT,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnits}})}}var W=n(4028),K=n(9754),Q=n(2166),J=n(4894);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ee=S.PluginName,te=new P(K.Q),ne=window.pgPluginManager.getConfig([{context:{},viewConfigurationID:1135,init:{pubID:"6d0c7ea7-f036-437d-be93-21fc59c890c2",adServer:"googletag",bidTimeout:1500,gdpr:{cmpTimeout:1e4},deals:!0,schain:{ver:"1.0",complete:1,nodes:[{asi:"pubgalaxy.com",hp:1,sid:"13454"}]}},adUnits:[{slotID:"tooplatecom47398",slotName:"/8095840/.2_A.47398.10_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],setups:[{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]],setupConfigurationID:13474,mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]}}}]},{slotID:"tooplatecom47399",slotName:"/8095840/.2_A.47399.10_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],setups:[{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]],setupConfigurationID:13475,mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]}}}]},{slotID:"tooplatecom47400",slotName:"/8095840/.2_A.47400.10_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],setups:[{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]],setupConfigurationID:13476,mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]}}}]},{slotID:"tooplatecom47401",slotName:"/8095840/.2_A.47401.4_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]],setupConfigurationID:13477,mediaTypes:{banner:{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]}}}]},{slotID:"tooplatecom47402",slotName:"/8095840/.2_A.47402.4_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]],setupConfigurationID:13478,mediaTypes:{banner:{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]}}}]},{slotID:"tooplatecom47403",slotName:"/8095840/.2_A.47403.4_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]],setupConfigurationID:13479,mediaTypes:{banner:{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]}}}]},{slotID:"tooplatecom47404",slotName:"/8095840/.2_A.47404.3_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[468,60]]},{viewportSize:[730,0],sizes:[[728,90],[468,60]]},{viewportSize:[750,0],sizes:[[728,90],[468,60],[750,300],[750,200],[750,100]]},{viewportSize:[930,0],sizes:[[728,90],[468,60],[930,180],[750,300],[750,200],[750,100]]},{viewportSize:[970,0],sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[980,90],[970,250],[980,120],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[980,250],[970,120],[980,300]]},{viewportSize:[0,0],sizes:[]}],setups:[{sizes:[[728,90],[970,250],[970,90],[468,60],[970,120],[980,90],[980,120],[930,180],[750,300],[750,200],[750,100],[980,250],[980,300]],setupConfigurationID:13480,mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[970,120],[980,90],[980,120],[930,180],[750,300],[750,200],[750,100],[980,250],[980,300]]}}}]},{slotID:"tooplatecom47406",slotName:"/8095840/.2_A.47406.28_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{sizes:[[320,50],[300,100],[320,100],[300,50]],setupConfigurationID:13481,mediaTypes:{banner:{sizes:[[320,50],[300,100],[320,100],[300,50]]}}}]}],adUnitsInitialLoadElementIDs:["/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1"],adUnitsDynamicallyInsertedElementIDs:[],timeout:1500,winningBidCpmMap:{o_7v6cjk:35,o_ggtreo:34,o_44btvk:33,o_bc19ts:32,o_4yam0w:31,o_ehnnk0:30,o_w7jsw:29,o_aqt4w0:28,o_6uytj4:27,o_h4jsow:26,o_2wmlts:25,o_d67kzk:24,o_6dhj40:23,o_dl6z28:22,o_1nofls:21,o_9fzjeo:20,o_m7gv0g:19.5,o_8m0r9c:19,o_wh1u68:18.5,o_ftq77k:18,o_igmccg:17.5,o_3h89og:17,o_sq7bi8:16.5,o_c2vojk:16,o_oud05c:15.5,o_52nxmo:15,o_yhgw74:14.5,o_fc8wsg:14,o_kw0sg0:13.5,o_cuu4g:13,o_uqmdj4:12.5,o_a7gf7k:12,o_ocvpq8:11.5,o_7pk2rk:11,o_vkl5og:10.5,o_h8x4ao:10,o_iwuolc:9.5,o_29j1mo:9,o_rii3gg:8.5,o_cj40sg:8,o_1uwwfsw:7.95,o_i2vwg0:7.9,o_18psx6o:7.85,o_6zc54w:7.8,o_1jtcohs:7.75,o_t6fnr4:7.7,o_15sx6o0:7.65,o_f605xc:7.6,o_1s00pa8:7.55,o_q9jx8g:7.5,o_1gwgxz4:7.45,o_42gem8:7.4,o_1mg8tmo:7.35,o_vtbsw0:7.3,o_1095b0g:7.25,o_9m8a9s:7.2,o_1xjskxs:7.15,o_kps1kw:7.1,o_1bcp2bk:7.05,o_5qdyww:7,o_1ikei9s:6.95,o_rxhhj4:6.9,o_17guqyo:6.85,o_gtxq80:6.8,o_1tny9kw:6.75,o_mdplvk:6.7,o_1d0mmm8:6.65,o_6m39c:6.6,o_1o46dxc:6.55,o_xh9d6o:6.5,o_11x2vb4:6.45,o_ba5ukg:6.4,o_1wptssg:6.35,o_jvt9fk:6.3,o_1aiqa68:6.25,o_8s9i4g:6.2,o_1lma1hc:6.15,o_uzd0qo:6.1,o_14yyeio:6.05,o_ec1ds0:6,o_1r61x4w:5.95,o_pfl534:5.9,o_1g2i5ts:5.85,o_38hmgw:5.8,o_1na7ls0:5.75,o_wnal1c:5.7,o_113435s:5.65,o_ag72f4:5.6,o_1ydrd34:5.55,o_ljqtq8:5.5,o_1c6nugw:5.45,o_4wf6rk:5.4,o_1hqfq4g:5.35,o_r3ipds:5.3,o_16mvytc:5.25,o_fzyy2o:5.2,o_1stzhfk:5.15,o_nz59ts:5.1,o_1em2akg:5.05,o_1s1r7k:5,o_1ppm1vk:4.95,o_z2p14w:4.9,o_13iij9c:4.85,o_cvliio:4.8,o_1v9dxj4:4.75,o_ifde68:4.7,o_192aeww:4.65,o_7btmv4:4.6,o_1k5u680:4.55,o_tix5hc:4.5,o_156g3k0:4.45,o_ejj2tc:4.4,o_1rdjm68:4.35,o_pn2u4g:4.3,o_1g9zuv4:4.25,o_3fzbi8:4.2,o_1ltrqio:4.15,o_v6ups0:4.1,o_zmo7wg:4.05,o_8zr75s:4,o_1wxbhts:3.95,o_k3aygw:3.9,o_1aq7z7k:3.85,o_6huups:3.8,o_1jbve2o:3.75,o_soydc0:3.7,o_188bmrk:3.65,o_hlem0w:3.6,o_1uff5ds:3.55,o_n56hog:3.5,o_1ds3if4:3.45,o_y2z28:3.4,o_1ovn9q8:3.35,o_y8q8zk:3.3,o_12ojr40:3.25,o_c1mqdc:3.2,o_1w3cpog:3.15,o_j9c6bk:3.1,o_19w9728:3.05,o_85sf0g:3,o_1yb9gqo:2.99,o_yspfr4:2.98,o_1gjzg8w:2.97,o_h1ff9c:2.96,o_1kzsydc:2.95,o_lh8xds:2.94,o_138ixvk:2.93,o_3pyww0:2.92,o_1tvfym8:2.91,o_ucvxmo:2.9,o_1c45y4g:2.89,o_cllx4w:2.88,o_1m3rbwg:2.87,o_ml7aww:2.86,o_14chbeo:2.85,o_4txaf4:2.84,o_1uzec5c:2.83,o_vgub5s:2.82,o_1d84bnk:2.81,o_dpkao0:2.8,o_1hnxts0:2.79,o_i5dssg:2.78,o_zwnta8:2.77,o_e3sao:2.76,o_1qjku0w:2.75,o_r10t1c:2.74,o_18satj4:2.73,o_99qsjk:2.72,o_1obo2yo:2.71,o_ot41z4:2.7,o_16ke2gw:2.69,o_71u1hc:2.68,o_1x7b37k:2.67,o_xor280:2.66,o_1fg12ps:2.65,o_fxh1q8:2.64,o_1jvuku8:2.63,o_kdajuo:2.62,o_124kkcg:2.61,o_2m0jcw:2.6,o_1srhl34:2.59,o_t8xk3k:2.58,o_1b07klc:2.57,o_bhnjls:2.56,o_1nmp3i8:2.55,o_o452io:2.54,o_15vf30g:2.53,o_6cv20w:2.52,o_1wic3r4:2.51,o_wzs2rk:2.5,o_1er239c:2.49,o_f8i29s:2.48,o_1j6vlds:2.47,o_jobke8:2.46,o_11flkw0:2.45,o_1x1jwg:2.44,o_1s2ilmo:2.43,o_sjykn4:2.42,o_1ab8l4w:2.41,o_asok5c:2.4,o_1pulukg:2.39,o_qc1tkw:2.38,o_183bu2o:2.37,o_8krt34:2.36,o_1yq8utc:2.35,o_z7otts:2.34,o_1gyyubk:2.33,o_hgetc0:2.32,o_1lescg0:2.31,o_lw8bgg:2.3,o_13niby8:2.29,o_44yayo:2.28,o_1uafcow:2.27,o_urvbpc:2.26,o_1cj5c74:2.25,o_d0lb7k:2.24,o_1miqpz4:2.23,o_n06ozk:2.22,o_14rgphc:2.21,o_58wohs:2.2,o_1vedq80:2.19,o_vvtp8g:2.18,o_1dn3pq8:2.17,o_e4joqo:2.16,o_1i2x7uo:2.15,o_ikd6v4:2.14,o_10bn7cw:2.13,o_t36dc:2.12,o_1qyk83k:2.11,o_rg0740:2.1,o_197a7ls:2.09,o_9oq6m8:2.08,o_1oqnh1c:2.07,o_p83g1s:2.06,o_16zdgjk:2.05,o_7gtfk0:2.04,o_1xmaha8:2.03,o_y3qgao:2.02,o_1fv0gsg:2.01,o_gcgfsw:2,o_1katyww:1.99,o_ks9xxc:1.98,o_12jjyf4:1.97,o_30zxfk:1.96,o_1t6gz5s:1.95,o_tnwy68:1.94,o_1bf6yo0:1.93,o_bwmxog:1.92,o_1n2pwqo:1.91,o_nk5vr4:1.9,o_15bfw8w:1.89,o_5svv9c:1.88,o_1vycwzk:1.87,o_wfsw00:1.86,o_1e72whs:1.85,o_eoivi8:1.84,o_1imwem8:1.83,o_j4cdmo:1.82,o_10vme4g:1.81,o_1d2d4w:1.8,o_1rijev4:1.79,o_rzzdvk:1.78,o_19r9edc:1.77,o_a8pdds:1.76,o_1pamnsw:1.75,o_ps2mtc:1.74,o_17jcnb4:1.73,o_80smbk:1.72,o_1y69o1s:1.71,o_ynpn28:1.7,o_1geznk0:1.69,o_gwfmkg:1.68,o_1kut5og:1.67,o_lc94ow:1.66,o_133j56o:1.65,o_3kz474:1.64,o_1tqg5xc:1.63,o_u7w4xs:1.62,o_1bz65fk:1.61,o_cgm4g0:1.6,o_1lyrj7k:1.59,o_mg7i80:1.58,o_147hips:1.57,o_4oxhq8:1.56,o_1uuejgg:1.55,o_vbuigw:1.54,o_1d34iyo:1.53,o_dkkhz4:1.52,o_1hiy134:1.51,o_i0e03k:1.5,o_zro0lc:1.49,o_93zls:1.48,o_1qel1c0:1.47,o_qw10cg:1.46,o_18nb0u8:1.45,o_94qzuo:1.44,o_1o6oa9s:1.43,o_oo49a8:1.42,o_16fe9s0:1.41,o_6wu8sg:1.4,o_1x2baio:1.39,o_xjr9j4:1.38,o_1fb1a0w:1.37,o_fsh91c:1.36,o_1jqus5c:1.35,o_k8ar5s:1.34,o_11zkrnk:1.33,o_2h0qo0:1.32,o_1smhse8:1.31,o_t3xreo:1.3,o_1av7rwg:1.29,o_bcnqww:1.28,o_1nwoow0:1.27,o_oe4nwg:1.26,o_165eoe8:1.25,o_6muneo:1.24,o_1wsbp4w:1.23,o_x9ro5c:1.22,o_1f11on4:1.21,o_fihnnk:1.2,o_1jgv6rk:1.19,o_jyb5s0:1.18,o_11pl69s:1.17,o_2715a8:1.16,o_1sci70g:1.15,o_sty60w:1.14,o_1al86io:1.13,o_b2o5j4:1.12,o_1q4lfy8:1.11,o_qm1eyo:1.1,o_18dbfgg:1.09,o_8uregw:1.08,o_1z08g74:1.07,o_zhof7k:1.06,o_1h8yfpc:1.05,o_hqeeps:1.04,o_1lorxts:1.03,o_m67wu8:1.02,o_13xhxc0:1.01,o_4exwcg:1,o_1ukey2o:.99,o_v1ux34:.98,o_1ct4xkw:.97,o_dakwlc:.96,o_1msqbcw:.95,o_na6adc:.94,o_151gav4:.93,o_5iw9vk:.92,o_1vodbls:.91,o_w5tam8:.9,o_1dx3b40:.89,o_eeja4g:.88,o_1icwt8g:.87,o_iucs8w:.86,o_10lmsqo:.85,o_132rr4:.84,o_1r8jthc:.83,o_rpzshs:.82,o_19h9szk:.81,o_9yps00:.8,o_1p0n2f4:.79,o_pi31fk:.78,o_179d1xc:.77,o_7qt0xs:.76,o_1xwa2o0:.75,o_ydq1og:.74,o_1g50268:.73,o_gmg16o:.72,o_1kktkao:.71,o_l29jb4:.7,o_12tjjsw:.69,o_3azitc:.68,o_1tggkjk:.67,o_txwjk0:.66,o_1bp6k1s:.65,o_c6mj28:.64,o_1ncpi4g:.63,o_nu5h4w:.62,o_15lfhmo:.61,o_62vgn4:.6,o_1w8cidc:.59,o_wpshds:.58,o_1eh2hvk:.57,o_eyigw0:.56,o_1iww000:.55,o_jebz0g:.54,o_115lzi8:.53,o_1n1yio:.52,o_1rsj08w:.51,o_s9yz9c:.5,o_1a18zr4:.49,o_aioyrk:.48,o_1pkm96o:.47,o_q22874:.46,o_17tc8ow:.45,o_8as7pc:.44,o_1yg99fk:.43,o_yxp8g0:.42,o_1goz8xs:.41,o_h6f7y8:.4,o_1l4sr28:.39,o_lm8q2o:.38,o_13diqkg:.37,o_3uypkw:.36,o_1u0frb4:.35,o_uhvqbk:.34,o_1c95qtc:.33,o_cqlpts:.32,o_1m8r4lc:.31,o_mq73ls:.3,o_14hh43k:.29,o_4yx340:.28,o_1v4e4u8:.27,o_vlu3uo:.26,o_1dd44cg:.25,o_duk3cw:.24,o_1hsxmgw:.23,o_iadlhc:.22,o_101nlz4:.21,o_j3kzk:.2,o_1qokmps:.19,o_r60lq8:.18,o_18xam80:.17,o_9eql8g:.16,o_1ognvnk:.15,o_oy3uo0:.14,o_16pdv5s:.13,o_76tu68:.12,o_1xcavwg:.11,o_xtquww:.1,o_1fl0veo:.09,o_g2guf4:.08,o_1k0udj4:.07,o_kiacjk:.06,o_129kd1c:.05,o_2r0c1s:.04,o_1swhds0:.03,o_tdxcsg:.02,o_1b57da8:.01,"1b57da8":.01,tdxcsg:.02,"1swhds0":.03,"2r0c1s":.04,"129kd1c":.05,kiacjk:.06,"1k0udj4":.07,g2guf4:.08,"1fl0veo":.09,xtquww:.1,"1xcavwg":.11,"76tu68":.12,"16pdv5s":.13,oy3uo0:.14,"1ognvnk":.15,"9eql8g":.16,"18xam80":.17,r60lq8:.18,"1qokmps":.19,j3kzk:.2,"101nlz4":.21,iadlhc:.22,"1hsxmgw":.23,duk3cw:.24,"1dd44cg":.25,vlu3uo:.26,"1v4e4u8":.27,"4yx340":.28,"14hh43k":.29,mq73ls:.3,"1m8r4lc":.31,cqlpts:.32,"1c95qtc":.33,uhvqbk:.34,"1u0frb4":.35,"3uypkw":.36,"13diqkg":.37,lm8q2o:.38,"1l4sr28":.39,h6f7y8:.4,"1goz8xs":.41,yxp8g0:.42,"1yg99fk":.43,"8as7pc":.44,"17tc8ow":.45,q22874:.46,"1pkm96o":.47,aioyrk:.48,"1a18zr4":.49,s9yz9c:.5,"1rsj08w":.51,"1n1yio":.52,"115lzi8":.53,jebz0g:.54,"1iww000":.55,eyigw0:.56,"1eh2hvk":.57,wpshds:.58,"1w8cidc":.59,"62vgn4":.6,"15lfhmo":.61,nu5h4w:.62,"1ncpi4g":.63,c6mj28:.64,"1bp6k1s":.65,txwjk0:.66,"1tggkjk":.67,"3azitc":.68,"12tjjsw":.69,l29jb4:.7,"1kktkao":.71,gmg16o:.72,"1g50268":.73,ydq1og:.74,"1xwa2o0":.75,"7qt0xs":.76,"179d1xc":.77,pi31fk:.78,"1p0n2f4":.79,"9yps00":.8,"19h9szk":.81,rpzshs:.82,"1r8jthc":.83,"132rr4":.84,"10lmsqo":.85,iucs8w:.86,"1icwt8g":.87,eeja4g:.88,"1dx3b40":.89,w5tam8:.9,"1vodbls":.91,"5iw9vk":.92,"151gav4":.93,na6adc:.94,"1msqbcw":.95,dakwlc:.96,"1ct4xkw":.97,v1ux34:.98,"1ukey2o":.99,"4exwcg":1,"13xhxc0":1.01,m67wu8:1.02,"1lorxts":1.03,hqeeps:1.04,"1h8yfpc":1.05,zhof7k:1.06,"1z08g74":1.07,"8uregw":1.08,"18dbfgg":1.09,qm1eyo:1.1,"1q4lfy8":1.11,b2o5j4:1.12,"1al86io":1.13,sty60w:1.14,"1sci70g":1.15,"2715a8":1.16,"11pl69s":1.17,jyb5s0:1.18,"1jgv6rk":1.19,fihnnk:1.2,"1f11on4":1.21,x9ro5c:1.22,"1wsbp4w":1.23,"6muneo":1.24,"165eoe8":1.25,oe4nwg:1.26,"1nwoow0":1.27,bcnqww:1.28,"1av7rwg":1.29,t3xreo:1.3,"1smhse8":1.31,"2h0qo0":1.32,"11zkrnk":1.33,k8ar5s:1.34,"1jqus5c":1.35,fsh91c:1.36,"1fb1a0w":1.37,xjr9j4:1.38,"1x2baio":1.39,"6wu8sg":1.4,"16fe9s0":1.41,oo49a8:1.42,"1o6oa9s":1.43,"94qzuo":1.44,"18nb0u8":1.45,qw10cg:1.46,"1qel1c0":1.47,"93zls":1.48,zro0lc:1.49,i0e03k:1.5,"1hiy134":1.51,dkkhz4:1.52,"1d34iyo":1.53,vbuigw:1.54,"1uuejgg":1.55,"4oxhq8":1.56,"147hips":1.57,mg7i80:1.58,"1lyrj7k":1.59,cgm4g0:1.6,"1bz65fk":1.61,u7w4xs:1.62,"1tqg5xc":1.63,"3kz474":1.64,"133j56o":1.65,lc94ow:1.66,"1kut5og":1.67,gwfmkg:1.68,"1geznk0":1.69,ynpn28:1.7,"1y69o1s":1.71,"80smbk":1.72,"17jcnb4":1.73,ps2mtc:1.74,"1pamnsw":1.75,a8pdds:1.76,"19r9edc":1.77,rzzdvk:1.78,"1rijev4":1.79,"1d2d4w":1.8,"10vme4g":1.81,j4cdmo:1.82,"1imwem8":1.83,eoivi8:1.84,"1e72whs":1.85,wfsw00:1.86,"1vycwzk":1.87,"5svv9c":1.88,"15bfw8w":1.89,nk5vr4:1.9,"1n2pwqo":1.91,bwmxog:1.92,"1bf6yo0":1.93,tnwy68:1.94,"1t6gz5s":1.95,"30zxfk":1.96,"12jjyf4":1.97,ks9xxc:1.98,"1katyww":1.99,gcgfsw:2,"1fv0gsg":2.01,y3qgao:2.02,"1xmaha8":2.03,"7gtfk0":2.04,"16zdgjk":2.05,p83g1s:2.06,"1oqnh1c":2.07,"9oq6m8":2.08,"197a7ls":2.09,rg0740:2.1,"1qyk83k":2.11,t36dc:2.12,"10bn7cw":2.13,ikd6v4:2.14,"1i2x7uo":2.15,e4joqo:2.16,"1dn3pq8":2.17,vvtp8g:2.18,"1vedq80":2.19,"58wohs":2.2,"14rgphc":2.21,n06ozk:2.22,"1miqpz4":2.23,d0lb7k:2.24,"1cj5c74":2.25,urvbpc:2.26,"1uafcow":2.27,"44yayo":2.28,"13niby8":2.29,lw8bgg:2.3,"1lescg0":2.31,hgetc0:2.32,"1gyyubk":2.33,z7otts:2.34,"1yq8utc":2.35,"8krt34":2.36,"183bu2o":2.37,qc1tkw:2.38,"1pulukg":2.39,asok5c:2.4,"1ab8l4w":2.41,sjykn4:2.42,"1s2ilmo":2.43,"1x1jwg":2.44,"11flkw0":2.45,jobke8:2.46,"1j6vlds":2.47,f8i29s:2.48,"1er239c":2.49,wzs2rk:2.5,"1wic3r4":2.51,"6cv20w":2.52,"15vf30g":2.53,o452io:2.54,"1nmp3i8":2.55,bhnjls:2.56,"1b07klc":2.57,t8xk3k:2.58,"1srhl34":2.59,"2m0jcw":2.6,"124kkcg":2.61,kdajuo:2.62,"1jvuku8":2.63,fxh1q8:2.64,"1fg12ps":2.65,xor280:2.66,"1x7b37k":2.67,"71u1hc":2.68,"16ke2gw":2.69,ot41z4:2.7,"1obo2yo":2.71,"99qsjk":2.72,"18satj4":2.73,r10t1c:2.74,"1qjku0w":2.75,e3sao:2.76,zwnta8:2.77,i5dssg:2.78,"1hnxts0":2.79,dpkao0:2.8,"1d84bnk":2.81,vgub5s:2.82,"1uzec5c":2.83,"4txaf4":2.84,"14chbeo":2.85,ml7aww:2.86,"1m3rbwg":2.87,cllx4w:2.88,"1c45y4g":2.89,ucvxmo:2.9,"1tvfym8":2.91,"3pyww0":2.92,"138ixvk":2.93,lh8xds:2.94,"1kzsydc":2.95,h1ff9c:2.96,"1gjzg8w":2.97,yspfr4:2.98,"1yb9gqo":2.99,"85sf0g":3,"19w9728":3.05,j9c6bk:3.1,"1w3cpog":3.15,c1mqdc:3.2,"12ojr40":3.25,y8q8zk:3.3,"1ovn9q8":3.35,y2z28:3.4,"1ds3if4":3.45,n56hog:3.5,"1uff5ds":3.55,hlem0w:3.6,"188bmrk":3.65,soydc0:3.7,"1jbve2o":3.75,"6huups":3.8,"1aq7z7k":3.85,k3aygw:3.9,"1wxbhts":3.95,"8zr75s":4,zmo7wg:4.05,v6ups0:4.1,"1ltrqio":4.15,"3fzbi8":4.2,"1g9zuv4":4.25,pn2u4g:4.3,"1rdjm68":4.35,ejj2tc:4.4,"156g3k0":4.45,tix5hc:4.5,"1k5u680":4.55,"7btmv4":4.6,"192aeww":4.65,ifde68:4.7,"1v9dxj4":4.75,cvliio:4.8,"13iij9c":4.85,z2p14w:4.9,"1ppm1vk":4.95,"1s1r7k":5,"1em2akg":5.05,nz59ts:5.1,"1stzhfk":5.15,fzyy2o:5.2,"16mvytc":5.25,r3ipds:5.3,"1hqfq4g":5.35,"4wf6rk":5.4,"1c6nugw":5.45,ljqtq8:5.5,"1ydrd34":5.55,ag72f4:5.6,"113435s":5.65,wnal1c:5.7,"1na7ls0":5.75,"38hmgw":5.8,"1g2i5ts":5.85,pfl534:5.9,"1r61x4w":5.95,ec1ds0:6,"14yyeio":6.05,uzd0qo:6.1,"1lma1hc":6.15,"8s9i4g":6.2,"1aiqa68":6.25,jvt9fk:6.3,"1wptssg":6.35,ba5ukg:6.4,"11x2vb4":6.45,xh9d6o:6.5,"1o46dxc":6.55,"6m39c":6.6,"1d0mmm8":6.65,mdplvk:6.7,"1tny9kw":6.75,gtxq80:6.8,"17guqyo":6.85,rxhhj4:6.9,"1ikei9s":6.95,"5qdyww":7,"1bcp2bk":7.05,kps1kw:7.1,"1xjskxs":7.15,"9m8a9s":7.2,"1095b0g":7.25,vtbsw0:7.3,"1mg8tmo":7.35,"42gem8":7.4,"1gwgxz4":7.45,q9jx8g:7.5,"1s00pa8":7.55,f605xc:7.6,"15sx6o0":7.65,t6fnr4:7.7,"1jtcohs":7.75,"6zc54w":7.8,"18psx6o":7.85,i2vwg0:7.9,"1uwwfsw":7.95,cj40sg:8,rii3gg:8.5,"29j1mo":9,iwuolc:9.5,h8x4ao:10,vkl5og:10.5,"7pk2rk":11,ocvpq8:11.5,a7gf7k:12,uqmdj4:12.5,cuu4g:13,kw0sg0:13.5,fc8wsg:14,yhgw74:14.5,"52nxmo":15,oud05c:15.5,c2vojk:16,sq7bi8:16.5,"3h89og":17,igmccg:17.5,ftq77k:18,wh1u68:18.5,"8m0r9c":19,m7gv0g:19.5,"9fzjeo":20,"1nofls":21,dl6z28:22,"6dhj40":23,d67kzk:24,"2wmlts":25,h4jsow:26,"6uytj4":27,aqt4w0:28,w7jsw:29,ehnnk0:30,"4yam0w":31,bc19ts:32,"44btvk":33,ggtreo:34,"7v6cjk":35},maxAdSlotUriLength:4e3,amazonPublisherAudiencesEnabled:!1,sizeMappingService:{}}]);let ie=new W.G(K.Q),re=ne&&te.applyTargeting(ne);re&&(re=X(X({},re),{},{context:{getInstance:()=>window.apstag},sizeMappingService:new J.A,taskHandler:new G(ie,new Q.W),auctionFactory:new N})),window.pgPluginManager.registerPlugin(ee,S,re)},8901:(e,t,n)=>{"use strict";var i,r,o=n(7165),s=n(6360),a=n(3821),d=n(5675),c=n(2703);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let h=(0,a.Q)()((r=class e extends s.Q{constructor(t){super(t),this.handleAdditionalAddSlotCreated=this.handleAdditionalAddSlotCreated.bind(this),this.handleCloneAdUnitsRequested=this.handleCloneAdUnitsRequested.bind(this),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}beforeActivate(){return this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),super.beforeActivate()}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(d.w.adUnitAdditionalSlotCreated,this.handleAdditionalAddSlotCreated,!1,e.PluginName),this.eventBus.on(d.w.cloneAdUnitsRequested,this.handleCloneAdUnitsRequested,!1,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.initiateGetters(),this.attachMiddleware(),this.attachEventListeners(),this.activateSetters(),await super.activate()}attachMiddleware(){this.logger.log({message:"Attach middleware.",namespace:e.PluginName,verboseLevel:3}),this.config.setters.forEach((e=>e.attachMiddleware()))}attachEventListeners(){this.logger.log({message:"Attach event listeners.",namespace:e.PluginName,verboseLevel:3}),this.config.setters.forEach((e=>e.attachEventListeners()))}initiateGetters(){this.logger.log({message:"Initiate getters.",namespace:e.PluginName,verboseLevel:3}),this.config.getters.forEach((e=>this.config.analyticsAdapters.forEach((t=>t.logData(e.getData())))))}activateSetters(){this.logger.log({message:"Activate setters.",namespace:e.PluginName,verboseLevel:3}),this.config.setters.forEach((e=>e.activate()))}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.detachMiddleware(),this.detachEventListeners(),this.deactivateSetters(),this.eventBus.detachAllForNamespace(e.PluginName),this.config.analyticsAdapters.forEach((e=>e.resetData())),await super.deactivate()}detachMiddleware(){this.logger.log({message:"Detach middleware.",namespace:e.PluginName,verboseLevel:3}),this.config.setters.forEach((e=>e.detachMiddleware()))}detachEventListeners(){this.logger.log({message:"Detach event listeners.",namespace:e.PluginName,verboseLevel:3}),this.config.setters.forEach((e=>e.detachEventListeners()))}deactivateSetters(){this.logger.log({message:"Deactivate setters.",namespace:e.PluginName,verboseLevel:3}),this.config.setters.forEach((e=>e.deactivate()))}handleAdditionalAddSlotCreated(e){const t=this.config.adSlots.find((t=>t.elementId===e.adUnitElementId));t&&this.config.adSlots.push(u(u({},(0,o.A4)(t)),{},{elementId:e.newAdunitElementId}))}handleCloneAdUnitsRequested(e){const t=this.config.adSlots.find((t=>t.elementId===e.cloneFromAdUnitElementId));t&&e.newAdUnitsElementIds.filter((e=>!this.config.adSlots.map((e=>e.elementId)).includes(e))).forEach((e=>{this.config.adSlots.push(u(u({},(0,o.A4)(t)),{},{elementId:e}))}))}},r.PluginName=c.f.AnalyticsPlugin,i=r))||i;var g=n(9754),f=n(2166);let m=function(e){return e.AdServer="AdServerAnalyticsAdapter",e.TrafficData="TrafficDataAnalyticsAdapter",e.AuctionAnalytics="AuctionAnalyticsAdapter",e}({});var v=n(6811);class b{constructor(e,t,n){this.config=e,this.logger=t,this.eventBus=n,this.adapterType=void 0}logSingleData(e){this.logger.log({namespace:this.adapterType,message:"Logging ".concat(e.key,"."),verboseLevel:3,payload:e})}}class y{}y.SUPPORTED_KEYS=[v.p.RefreshCount,v.p.ViewportSize,v.p.AuthenticatedTraffic,v.p.PageviewId,v.p.viewConfigurationId,v.p.BundleId,v.p.SetupConfigurationId,v.p.StateKey,v.p.ChromeThirdsPartyDeprecation,v.p.SmartSlotParentOrChild,v.p.PrebidRealBid,v.p.ProductFormat,v.p.ProductFeature,v.p.TrafficSource];v.p.PageviewId,v.p.DeviceType,v.p.PageUrl,v.p.SiteSlug,v.p.NavigationStart,v.p.PageType,v.p.Uid,v.p.StateKey,v.p.WrapperActiveId,v.p.Geo;v.p.PageviewId,v.p.Uid,v.p.PageUrl,v.p.PageType,v.p.WebViewName,v.p.DeviceType,v.p.Geo,v.p.StateKey,v.p.PingPollingInterval,v.p.ChromeThirdsPartyDeprecation,v.p.SessionId,v.p.UserAgent,v.p.CmpError,v.p.ConsentStatus,v.p.ConsentString,v.p.ConsentVersion,v.p.PrebidAliases;class A extends b{constructor(){super(...arguments),this.adapterType=m.AdServer,this.logData=e=>{e.forEach((e=>this.logSingleData(e)))}}resetData(){}logSingleData(e){if(!y.SUPPORTED_KEYS.includes(e.key))return;if(super.logSingleData(e),e.isPageLevel)return void this.eventBus.emit(d.w.attachPageLevelKeyValueRequested,{key:e.key,value:"".concat(e.value),fallbackToSlotLevel:!0});const t=Array.isArray(e.value)?e.value.map((e=>"".concat(e))):"".concat(e.value);if(e.adUnitElementIds)if(e.key===v.p.PrebidRealBid)e.adUnitElementIds.forEach((n=>{this.eventBus.emit(d.w.clearOldKeyValuesAndAttachNewPairsRequested,{adUnitElementId:n,keyValues:[{key:e.key,value:t}]})}));else e.adUnitElementIds.forEach((n=>{this.eventBus.emit(d.w.attachKeyValueRequested,{adUnitElementId:n,key:e.key,value:t})}))}}class w{constructor(e,t,n,i){this.config=e,this.logger=t,this.eventBus=n,this.analyticsAdapters=i,this.setterName=void 0,this.middlewareAttached=!1,this.eventListenersAttached=!1,this.isActive=!1}attachMiddleware(){this.middlewareAttached||(this.middlewareAttached=!0,this.logger.log({namespace:this.setterName,message:"Attaching middleware",verboseLevel:3}))}attachEventListeners(){this.eventListenersAttached||(this.eventListenersAttached=!0,this.logger.log({namespace:this.setterName,message:"Attaching event listeners",verboseLevel:3}))}activate(){this.isActive||(this.isActive=!0,this.logger.log({namespace:this.setterName,message:"Activating ".concat(this.setterName),verboseLevel:3}))}deactivate(){this.isActive&&(this.isActive=!1,this.logger.log({namespace:this.setterName,message:"Deactivating ".concat(this.setterName),verboseLevel:3}))}detachMiddleware(){this.middlewareAttached&&(this.middlewareAttached=!1,this.logger.log({namespace:this.setterName,message:"Detaching middleware",verboseLevel:3}))}detachEventListeners(){this.eventListenersAttached&&(this.eventListenersAttached=!1,this.logger.log({namespace:this.setterName,message:"Detaching event listeners",verboseLevel:3}))}}class S{constructor(e,t){this.config=e,this.logger=t,this.getterName=void 0}}var I=n(329);var E=n(8703);var _=n(2541);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=n(282);var C=n(7267);class R extends S{constructor(e,t){super(e,t),this.getterName="TrafficSourceGetter"}getData(){const e=this.determineTrafficSource(),t={key:v.p.TrafficSource,isPageLevel:!0,value:e};return this.logger.log({namespace:this.getterName,message:"Traffic Source: ".concat(t.value),verboseLevel:3,payload:t}),[t]}determineTrafficSource(){const e=new URL(window.location.href),t=document.referrer,n=this.getUtmTrafficSource(e);if(n)return n;const i=this.getAutoTaggedSource(e);if(i)return i;if(!t)return R.TRAFFIC_SOURCES.DIRECT;const r=(0,o.aX)(t);return(0,o.yf)(r)?R.TRAFFIC_SOURCES.AI_REFERRAL:(0,o.Ly)(r)?R.TRAFFIC_SOURCES.ORGANIC:(0,o.G4)(r)?R.TRAFFIC_SOURCES.SOCIAL:R.TRAFFIC_SOURCES.REFERRAL}getUtmTrafficSource(e){const t=e.searchParams.get("utm_medium"),n=e.searchParams.get("utm_source");if(!t){return Array.from(e.searchParams.keys()).some((e=>e.startsWith("utm_")))?R.TRAFFIC_SOURCES.PAID_OTHER:null}const i=t.toLowerCase();return"email"===i?R.TRAFFIC_SOURCES.EMAIL:"cpc"===i||"ppc"===i?n&&(0,o.Js)(n)?R.TRAFFIC_SOURCES.PAID_SOCIAL:R.TRAFFIC_SOURCES.PAID_SEARCH:"social"===i?R.TRAFFIC_SOURCES.SOCIAL:R.TRAFFIC_SOURCES.PAID_OTHER}getAutoTaggedSource(e){const t=e.searchParams.get("gclid"),n=e.searchParams.get("msclkid");return t||n?R.TRAFFIC_SOURCES.PAID_SEARCH:null}}R.TRAFFIC_SOURCES={EMAIL:"email",PAID_SEARCH:"paid_search",PAID_SOCIAL:"paid_social",PAID_OTHER:"paid_other",SOCIAL:"social",ORGANIC:"organic",AI_REFERRAL:"ai_referral",REFERRAL:"referral",DIRECT:"direct"};var U=n(4028),k=n(3081),D=n(5240);class B{execute(e,t){const n=t.applyTargeting(e);return n.forEach((e=>{e.headerBiddingSetups.length&&(e.headerBiddingSetups=t.applyTargeting(e.headerBiddingSetups))})),n}}class j{constructor(e,t){this.settingsTargetingServiceOnAdUnit=e,this.contextTypeStrategyFactory=t}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new B),n=(0,o.A4)(e.adSlots);e.adSlots=t.executeTaskStrategy(e.adSlots,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:D.A.PluginName,message:"Before activate task: ".concat(k.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adSlots}})}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z=[],F=[];F.push(class extends w{constructor(){super(...arguments),this.setterName="RefreshCountSetter",this.activate=()=>{super.activate()},this.deactivate=()=>{super.deactivate()},this.detachEventListeners=()=>{this.eventBus.detach(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested),super.detachEventListeners()},this.handleLogAnalyticsDataRequested=e=>{e.key===v.p.RefreshCount&&this.analyticsAdapters.forEach((t=>t.logData([e])))}}attachEventListeners(){this.eventBus.on(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested,!0,this.setterName),super.attachEventListeners()}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="SetupConfigurationIdGetter",this.getData=()=>{const e=this.getSetupConfigurationIdData();return this.logger.log({namespace:this.getterName,message:"Logging Setup Configuration Ids.",verboseLevel:3,payload:e}),e},this.getSetupConfigurationIdData=()=>{const e=[];return this.config.adSlots.forEach((t=>{var n;null!=t&&t.headerBiddingSetups&&null!==(n=t.headerBiddingSetups)&&void 0!==n&&n.length&&e.push({key:v.p.SetupConfigurationId,isPageLevel:!1,adUnitElementIds:[t.elementId],value:t.headerBiddingSetups[0].id})})),e}}}),F.push(class extends w{constructor(){super(...arguments),this.setterName="AuthenticatedTrafficSetter",this.activate=()=>{super.activate()},this.deactivate=()=>{super.deactivate()},this.detachEventListeners=()=>{this.eventBus.detach(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested),super.detachEventListeners()},this.handleLogAnalyticsDataRequested=e=>{e.key===v.p.AuthenticatedTraffic&&this.analyticsAdapters.forEach((t=>t.logData([e])))}}attachEventListeners(){this.eventBus.on(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested,!0,this.setterName),super.attachEventListeners()}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="ViewportSizeGetter",this.viewportSizeIncrement=100,this.getData=()=>{const e={key:v.p.ViewportSize,value:this.getViewportSize(),isPageLevel:!0};return this.logger.log({namespace:this.getterName,message:"Viewport size: ".concat(e.value),verboseLevel:3,payload:e}),[e]},this.roundDown=e=>Math.floor(e/this.viewportSizeIncrement)*this.viewportSizeIncrement,this.getViewportSize=()=>"".concat(this.roundDown(window.innerWidth),"x").concat(this.roundDown(window.innerHeight))}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="PageviewIdGetter",this.pageviewId=void 0,this.pageviewId=(0,I.$C)()}getData(){const e={key:v.p.PageviewId,isPageLevel:!0,value:this.pageviewId};return this.logger.log({namespace:this.getterName,message:"Pageview Id: ".concat(e.value),verboseLevel:3,payload:e}),[e]}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="ViewConfigurationIdGetter",this.getData=()=>{const e={key:v.p.viewConfigurationId,value:this.getViewConfigurationId(),isPageLevel:!0};return this.logger.log({namespace:this.getterName,message:"View Configuration Id: ".concat(e.value),verboseLevel:3,payload:e}),[e]},this.getViewConfigurationId=()=>"".concat(this.config.viewConfigurationID)}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="BundleIdGetter",this.getData=()=>{const e={key:v.p.BundleId,value:this.getBundleId(),isPageLevel:!0};return this.logger.log({namespace:this.getterName,message:"Bundle Id: ".concat(e.value),verboseLevel:3,payload:e}),[e]},this.getBundleId=()=>this.config.bundleId}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="BundleStateKeyGetter",this.getData=()=>{const e={key:v.p.StateKey,value:this.getBundleStateKey(),isPageLevel:!0};return this.logger.log({namespace:this.getterName,message:"Bundle State Key: ".concat(e.value),verboseLevel:3,payload:e}),[e]},this.getBundleStateKey=()=>this.config.bundleSateKey}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="PageLoadGetter",this.getData=()=>{var e,t;const n=[];return n.push({key:v.p.NavigationStart,value:Date.now(),isPageLevel:!0}),n.push({key:v.p.PageUrl,value:document.location.href,isPageLevel:!0}),n.push({key:v.p.PageType,value:this.config.viewType||"",isPageLevel:!0}),n.push({key:v.p.WebViewName,value:this.config.viewName||"",isPageLevel:!0}),n.push({key:v.p.DeviceType,value:(null===(e=window.pgDevice)||void 0===e?void 0:e.toLowerCase())||"",isPageLevel:!0}),n.push({key:v.p.SiteSlug,value:this.config.siteSlug||(0,o.SN)(),isPageLevel:!0}),n.push({key:v.p.Geo,value:(null===(t=window.pgGeo)||void 0===t?void 0:t.toLowerCase())||"",isPageLevel:!0}),this.logger.log({namespace:this.getterName,message:"Page load traffic data.",verboseLevel:3,payload:n}),n}}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="UserIdGetter",this.userId=void 0,this.userIdKey="3dc61b4e-87c3-4abd-9d4e-6f68cdc3303f";let n=window.localStorage.getItem(this.userIdKey);n||(n=window.localStorage.getItem("az_uid")||(0,I.$C)(),window.localStorage.setItem(this.userIdKey,n)),this.userId=n}getData(){const e={key:v.p.Uid,isPageLevel:!0,value:this.userId};return this.logger.log({namespace:this.getterName,message:"Pageview Id: ".concat(e.value),verboseLevel:3,payload:e}),[e]}}),F.push(class extends w{constructor(){super(...arguments),this.setterName="ChromeThirdsPartyDeprecationSetter",this.thirdPartyCookiesEnabled=E.kE.Enabled,this.activate=()=>{this.setChromeThirdsPartyDeprecation().then((()=>{})),super.activate()},this.setChromeThirdsPartyDeprecation=async()=>{if("cookieDeprecationLabel"in window.navigator&&"getValue"in window.navigator.cookieDeprecationLabel&&"function"==typeof window.navigator.cookieDeprecationLabel.getValue){switch(await window.navigator.cookieDeprecationLabel.getValue()){case"control_2":this.thirdPartyCookiesEnabled=E.kE.Control;break;case"treatment_1.1":this.thirdPartyCookiesEnabled=E.kE.Treatment1_1;break;case"treatment_1.2":this.thirdPartyCookiesEnabled=E.kE.Treatment1_2;break;case"treatment_1.3":this.thirdPartyCookiesEnabled=E.kE.Treatment1_3;break;default:this.thirdPartyCookiesEnabled=E.kE.Enabled}}this.analyticsAdapters.forEach((e=>e.logData([{key:v.p.ChromeThirdsPartyDeprecation,isPageLevel:!0,value:this.thirdPartyCookiesEnabled}])))}}}),F.push(class extends w{constructor(){super(...arguments),this.setterName="SmartSlotParentOrChildSetter",this.activate=()=>{super.activate()},this.deactivate=()=>{super.deactivate()},this.detachEventListeners=()=>{this.eventBus.detach(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested),super.detachEventListeners()},this.handleLogAnalyticsDataRequested=e=>{e.key===v.p.SmartSlotParentOrChild&&this.analyticsAdapters.forEach((t=>t.logData([e])))}}attachEventListeners(){this.eventBus.on(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested,!0,this.setterName),super.attachEventListeners()}}),F.push(class extends w{constructor(){super(...arguments),this.setterName="PrebidRealBidSetter",this.activate=()=>{super.activate()},this.deactivate=()=>{super.deactivate()},this.detachEventListeners=()=>{this.eventBus.detach(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested),super.detachEventListeners()},this.handleLogAnalyticsDataRequested=e=>{e.key===v.p.PrebidRealBid&&this.analyticsAdapters.forEach((t=>t.logData([e])))}}attachEventListeners(){this.eventBus.on(d.w.logAnalyticsDataRequested,this.handleLogAnalyticsDataRequested,!0,this.setterName),super.attachEventListeners()}}),F.push(class extends w{constructor(e,t,n,i){super(e,t,n,i),this.setterName="ProductReportSetter",this.mappedValues=new Map,this.clonedItems=new Map,this.handleLogProductDataRequested=this.handleLogProductDataRequested.bind(this),this.handleCloneProductDataRequested=this.handleCloneProductDataRequested.bind(this)}attachEventListeners(){this.eventBus.on(d.w.logProductDataRequested,this.handleLogProductDataRequested,!0,this.setterName),this.eventBus.on(d.w.cloneProductDataRequested,this.handleCloneProductDataRequested,!0,this.setterName),super.attachEventListeners()}activate(){super.activate()}deactivate(){super.deactivate(),this.mappedValues=new Map}detachEventListeners(){this.eventBus.detach(d.w.logAnalyticsDataRequested,this.handleLogProductDataRequested),super.detachEventListeners()}handleLogProductDataRequested(e){this.mappedValues.has(e.adUnitElementId)||this.mappedValues.set(e.adUnitElementId,new Map),this.mappedValues.get(e.adUnitElementId).has(e.key)||this.mappedValues.get(e.adUnitElementId).set(e.key,new Set);const t=this.mappedValues.get(e.adUnitElementId).get(e.key);if(e.key===v.p.ProductFormat&&e.value===_._.Banner&&t.size>0)return;e.key===v.p.ProductFormat&&e.value!==_._.Banner&&t.delete(_._.Banner),t.add(e.value.replace("%","".concat(e.macroValue||"")));const n={key:e.key,value:Array.from(t),adUnitElementIds:[e.adUnitElementId],isPageLevel:!1};if(e.key===v.p.ProductFormat&&this.eventBus.emit(d.w.productDataFormatUpdated,n),this.analyticsAdapters.forEach((e=>e.logData([n]))),this.clonedItems.has(e.adUnitElementId))for(const t of this.clonedItems.get(e.adUnitElementId)){if(t===e.adUnitElementId)continue;const n=P({},e);n.adUnitElementId=t,this.eventBus.emit(d.w.logProductDataRequested,n)}}handleCloneProductDataRequested(e){const t=this.mappedValues.get(e.from);if(this.clonedItems.has(e.from)||this.clonedItems.set(e.from,new Set),this.clonedItems.get(e.from).add(e.to),t)for(const n of t.keys()){this.mappedValues.has(e.to)||this.mappedValues.set(e.to,new Map),this.mappedValues.get(e.to).has(n)||this.mappedValues.get(e.to).set(n,new Set);const i=this.mappedValues.get(e.to).get(n);for(const e of t.get(n))i.add(e);const r={key:n,value:Array.from(t.get(n)),adUnitElementIds:[e.to],isPageLevel:!1};n===v.p.ProductFormat&&this.eventBus.emit(d.w.productDataFormatUpdated,r),this.analyticsAdapters.forEach((e=>e.logData([r])))}}}),F.push(class extends w{constructor(){super(...arguments),this.setterName="SessionIdSetter",this.sessionId=void 0,this.inactivityTimeout=18e5,this.inactivityTimer=void 0}activate(){this.generateSessionId(),this.resetInactivityTimer(),this.attachUserActionListeners(),super.activate()}generateSessionId(){this.sessionId=(0,I.$C)(),this.setData()}resetInactivityTimer(){this.inactivityTimer&&window.clearTimeout(this.inactivityTimer),this.inactivityTimer=window.setTimeout((()=>{this.generateSessionId()}),this.inactivityTimeout)}attachUserActionListeners(){["click","mousemove","keydown","scroll","touchstart"].forEach((e=>{window.addEventListener(e,this.resetInactivityTimer.bind(this))}))}setData(){this.analyticsAdapters.forEach((e=>e.logData([{key:v.p.SessionId,value:this.sessionId,isPageLevel:!0}])))}}),F.push(class extends w{constructor(){super(...arguments),this.setterName="UserAgentSetter",this.userAgent=void 0}async activate(){await this.setUserAgent(),super.activate()}async setUserAgent(){await(0,O.g)(["uaFullVersion"]),this.userAgent=navigator.userAgent,this.setData()}setData(){this.analyticsAdapters.forEach((e=>e.logData([{key:v.p.UserAgent,value:this.userAgent,isPageLevel:!0}])))}}),z.push(class extends S{constructor(e,t){super(e,t),this.getterName="WrapperActiveIdGetter",this.getData=()=>{const e={key:v.p.WrapperActiveId,value:this.getWrapperActiveId(),isPageLevel:!0};return this.logger.log({namespace:this.getterName,message:"Wrapper Active Id: ".concat(e.value),verboseLevel:3,payload:e}),[e]},this.getWrapperActiveId=()=>window[C.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]||""}}),z.push(R);const q=h.PluginName;window.pgPluginManager.registerPlugin(q,h,(function(){const{logger:e,eventBus:t}=window.pgPluginManager.baseConfig,n=window.pgPluginManager.getConfig([{bundleId:"4400",bundleSateKey:"8ebfa473-d6ee-48b2-a7ae-588e66bffda1",viewConfigurationID:1135,viewType:"sitewide",viewName:"sitewide",disableImpressionViewable:!1,adSlots:[{path:"/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1",elementId:"/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1",targeting:{deviceTypes:{deviceTypes:["mobile","tablet","desktop","smarttv"],state:"includes"}},headerBiddingSetups:[]},{path:"/8095840,22381294811/.2_A.47398.10_tooplate.com_tier1",elementId:"tooplatecom47398",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},headerBiddingSetups:[{id:"13474"}]},{path:"/8095840,22381294811/.2_A.47399.10_tooplate.com_tier1",elementId:"tooplatecom47399",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},headerBiddingSetups:[{id:"13475"}]},{path:"/8095840,22381294811/.2_A.47400.10_tooplate.com_tier1",elementId:"tooplatecom47400",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},headerBiddingSetups:[{id:"13476"}]},{path:"/8095840,22381294811/.2_A.47401.4_tooplate.com_tier1",elementId:"tooplatecom47401",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},headerBiddingSetups:[{id:"13477"}]},{path:"/8095840,22381294811/.2_A.47402.4_tooplate.com_tier1",elementId:"tooplatecom47402",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},headerBiddingSetups:[{id:"13478"}]},{path:"/8095840,22381294811/.2_A.47403.4_tooplate.com_tier1",elementId:"tooplatecom47403",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},headerBiddingSetups:[{id:"13479"}]},{path:"/8095840,22381294811/.2_A.47404.3_tooplate.com_tier1",elementId:"tooplatecom47404",targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},headerBiddingSetups:[{id:"13480"}]},{path:"/8095840,22381294811/.2_A.47406.28_tooplate.com_tier1",elementId:"tooplatecom47406",targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},headerBiddingSetups:[{id:"13481"}]}]}]);let i=new U.G(g.Q),r=n;if(r){const n=[];n.push(new A(r,e,t)),r=L(L({},r),{},{analyticsAdapters:n,getters:z.map((t=>new t(r,e))),setters:F.map((i=>new i(r,e,t,n))),taskHandler:new j(i,new f.W)})}return r}))},3767:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(6360),s=n(2703);var a=n(8789),d=n(3009),c=n.n(d),l=n(5471),u=n.n(l),p=n(4636),h=n.n(p);class g{constructor(e,t,n){this.config=e,this.eventBus=t,this.logger=n,this.namespace="LiveRampService",this.envelopeModuleReady=!1,this.queuedRequest=null,this.handleLiveRampEnvelopeModuleReady=this.handleLiveRampEnvelopeModuleReady.bind(this),this.handleUserAudienceDataUpdated=this.handleUserAudienceDataUpdated.bind(this),this.handleLiveRampDetectionModuleReady=this.handleLiveRampDetectionModuleReady.bind(this),this.emitAnalyticsEvent=this.emitAnalyticsEvent.bind(this),this.logger.log({message:"LiveRampService initialized in ".concat(this.config.configuration.directOperationMode?"Direct":"Detect"," Mode."),namespace:this.namespace,verboseLevel:3}),window.addEventListener("detectionModuleReady",this.handleLiveRampDetectionModuleReady),window.addEventListener("detected-identifier",this.emitAnalyticsEvent),this.config.configuration.directOperationMode&&(this.addEnvelopeModuleEventListener(),this.eventBus.on(r.w.userAudienceDataUpdated,this.handleUserAudienceDataUpdated,!0,this.namespace)),this.eventBus.emit(r.w.getConsentDataRequested,(e=>{var t,n,i,r,o,s;(null===(t=e.gdpr)||void 0===t||!t.gdprApplies||null!==(n=e.gdpr)&&void 0!==n&&n.specialFeatures&&e.gdpr.specialFeatures[1]&&e.gdpr.specialFeatures[2]&&null!==(i=e.gdpr)&&void 0!==i&&null!==(r=i.purpose)&&void 0!==r&&r.consents&&e.gdpr.purpose.consents[1]&&e.gdpr.purpose.consents[2]&&e.gdpr.purpose.consents[3]&&e.gdpr.purpose.consents[4]&&e.gdpr.purpose.consents[5]&&e.gdpr.purpose.consents[6]&&e.gdpr.purpose.consents[7]&&e.gdpr.purpose.consents[8]&&e.gdpr.purpose.consents[9]&&e.gdpr.purpose.consents[10]&&null!==(o=e.gdpr)&&void 0!==o&&null!==(s=o.vendor)&&void 0!==s&&s.consents&&e.gdpr.vendor.consents[97])&&this.injectScript()}))}injectScript(){const e="https://launchpad-wrapper.privacymanager.io/".concat(this.config.configuration.configurationId,"/launchpad-liveramp.js");if(document.querySelector('script[src="'.concat(e,'"]')))return;const t=document.createElement("script");t.src=e,t.async=!0,document.head.appendChild(t),this.logger.log({message:"LiveRamp ATS.js script injected.",namespace:this.namespace,verboseLevel:3})}addEnvelopeModuleEventListener(){window.addEventListener("envelopeModuleReady",this.handleLiveRampEnvelopeModuleReady)}handleLiveRampEnvelopeModuleReady(){this.envelopeModuleReady=!0,this.initiateLiveRampUserSync()}handleLiveRampDetectionModuleReady(){window.ats.triggerDetection(),this.emitIncludeGoogleTagSecureSignalProviderRequested()}emitAnalyticsEvent(e){if("string"!=typeof e.detail.identifier||"email"!==e.detail.type)return;const t={email:e.detail.identifier};this.eventBus.emit(r.w.setUserAudienceDataRequested,t)}handleUserAudienceDataUpdated(e){this.queuedRequest=e.callback(),this.envelopeModuleReady&&this.initiateLiveRampUserSync()}initiateLiveRampUserSync(){this.queuedRequest&&(this.setAdditionalDataInAtsEnvelopeModule(this.queuedRequest.sha1HashedEmail||"",this.queuedRequest.extraNormalizedSha256||"",this.queuedRequest.md5HashedEmail||""),this.emitIncludeGoogleTagSecureSignalProviderRequested())}setAdditionalDataInAtsEnvelopeModule(e,t,n){const i={type:"emailHashes",id:[e,t,n]};this.logger.log({namespace:this.namespace,message:"Setting additional data in ATS envelope module.",verboseLevel:1,payload:i}),window.atsenvelopemodule.setAdditionalData(i)}emitIncludeGoogleTagSecureSignalProviderRequested(){const e={id:"liveramp.com",collectorFunction:this.retrieveLiveRampEnvelope};this.logger.log({namespace:this.namespace,message:"Event: ".concat(r.w.includeGoogleTagSecureSignalProviderRequested,"."),verboseLevel:1,payload:e}),this.eventBus.emit(r.w.includeGoogleTagSecureSignalProviderRequested,e)}async retrieveLiveRampEnvelope(){const e=await window.ats.retrieveEnvelope();if(!e)return"";return JSON.parse(e).envelope||""}}class f{constructor(e,t){this.eventBus=e,this.logger=t,this.namespace="HadronService",this.handleUserAudienceDataUpdated=this.handleUserAudienceDataUpdated.bind(this),this.logger.log({message:"HadronService initialized.",namespace:this.namespace,verboseLevel:3}),this.eventBus.on(r.w.userAudienceDataUpdated,this.handleUserAudienceDataUpdated,!0,this.namespace)}handleUserAudienceDataUpdated(e){const t=e.callback();t&&t.sha256HashedEmail&&(window.au=window.au||[],window.au.push({fn:"addUserIdentity",args:{identityType:"hem_sha256",identityValue:t.sha256HashedEmail}}))}}var m,v,b=n(6811);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let S=(0,i.Q)()((v=class e extends o.Q{constructor(t){super(t),this.newUserAudienceDataObject={},this.currentUserAudienceDataObject=void 0,this.attachKeyValueRequestedEventEmitted=!1,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t}),this.handleSetUserAudienceDataRequested=this.handleSetUserAudienceDataRequested.bind(this),this.emitUserAudienceDataObjectUpdated=this.emitUserAudienceDataObjectUpdated.bind(this),this.hasUserAudienceDataChanged=this.hasUserAudienceDataChanged.bind(this),this.normalizeEmail=this.normalizeEmail.bind(this),this.setEmailInUserAudienceDataObject=this.setEmailInUserAudienceDataObject.bind(this),this.setHashedEmailInUserAudienceDataObject=this.setHashedEmailInUserAudienceDataObject.bind(this),this.setUserAudienceDataObject=this.setUserAudienceDataObject.bind(this),this.getCurrentUserAudienceDataObject=this.getCurrentUserAudienceDataObject.bind(this),this.getUserAudienceDataObjectCallback=this.getUserAudienceDataObjectCallback.bind(this),this.currentUserAudienceDataObject=this.getCurrentUserAudienceDataObject(),this.currentUserAudienceDataObject=this.currentUserAudienceDataObject&&this.currentUserAudienceDataObject.ttl&&this.currentUserAudienceDataObject.ttl>=(new Date).getTime()?this.currentUserAudienceDataObject:null,this.config.publisherProvidedDataSolutions&&(this.config.publisherProvidedDataSolutions.liveRamp&&this.config.publisherProvidedDataSolutions.liveRamp.enabled&&this.config.clientTargetingService.meetsGeoTargetingRequirements(this.config.publisherProvidedDataSolutions.liveRamp.geoTargeting)&&new g(this.config.publisherProvidedDataSolutions.liveRamp,this.eventBus,this.logger),this.config.publisherProvidedDataSolutions.hadron&&this.config.publisherProvidedDataSolutions.hadron.enabled&&new f(this.eventBus,this.logger))}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(r.w.setUserAudienceDataRequested,this.handleSetUserAudienceDataRequested,!0,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.currentUserAudienceDataObject&&(this.emitUserAudienceDataObjectUpdated(),this.emitAttachKeyValueToAllAdUnitsRequested()),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.detachAllForNamespace(e.PluginName),await super.deactivate()}handleSetUserAudienceDataRequested(e){e.sha256HashedEmail&&"string"==typeof e.sha256HashedEmail&&this.setHashedEmailInUserAudienceDataObject(e.sha256HashedEmail),!e.email||"string"!=typeof e.email||e.sha256HashedEmail&&"string"==typeof e.sha256HashedEmail||this.setEmailInUserAudienceDataObject(e.email),this.setUserAudienceDataObject()}emitUserAudienceDataObjectUpdated(t){const n={userAudienceDataChanged:t||this.hasUserAudienceDataChanged(),callback:this.getUserAudienceDataObjectCallback};this.logger.log({payload:n,message:"Event: ".concat(r.w.userAudienceDataUpdated),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(r.w.userAudienceDataUpdated,n)}hasUserAudienceDataChanged(){if(!this.currentUserAudienceDataObject)return!0;const e=["a"];for(const t of e)if(this.currentUserAudienceDataObject[t]!==this.newUserAudienceDataObject[t])return!0;return!1}normalizeEmail(e){const t=e.toLowerCase().trim().replace(/\+.+(?=@)/g,""),n=t.replace(/\.(?=[^@]+@)/g,"");return{normalizedEmail:t,extraNormalizedEmail:n}}setEmailInUserAudienceDataObject(t){const{error:n,value:i}=(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{value:e}:{error:"Invalid email format"})(t);if(n||!i)return void this.logger.error({namespace:e.PluginName,message:"Provided email is invalid.",verboseLevel:1,type:a.f.ProvidedEmailIsInvalid});const{normalizedEmail:r,extraNormalizedEmail:o}=this.normalizeEmail(i);this.setHashedEmailInUserAudienceDataObject(c()(r).toString(),u()(r).toString(),h()(r).toString(),c()(o).toString())}setHashedEmailInUserAudienceDataObject(e,t,n,i){this.newUserAudienceDataObject.a=e,t&&(this.newUserAudienceDataObject.b=t),n&&(this.newUserAudienceDataObject.c=n),i&&(this.newUserAudienceDataObject.d=i)}setUserAudienceDataObject(){0!==Object.keys(this.newUserAudienceDataObject).length?(this.newUserAudienceDataObject=A(A({},this.newUserAudienceDataObject),{},{ttl:(new Date).getTime()+this.config.userAudienceDataObjectTtl}),this.logger.log({namespace:e.PluginName,message:"Setting user audience data object in localStorage.",payload:this.newUserAudienceDataObject,verboseLevel:1}),window.localStorage.setItem(this.config.localStorageKey,JSON.stringify(this.newUserAudienceDataObject)),this.emitUserAudienceDataObjectUpdated(),this.emitAttachKeyValueToAllAdUnitsRequested(),this.currentUserAudienceDataObject=this.getCurrentUserAudienceDataObject()):this.logger.log({namespace:e.PluginName,message:"User audience data object is empty.",verboseLevel:1})}getCurrentUserAudienceDataObject(){const e=window.localStorage.getItem(this.config.localStorageKey);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}getUserAudienceDataObjectCallback(){const e=this.getCurrentUserAudienceDataObject();if(!e)return null;const{a:t,b:n,c:i,d:r}=e;return A(A(A(A({},t?{sha256HashedEmail:t}:null),n?{sha1HashedEmail:n}:null),i?{md5HashedEmail:i}:null),r?{extraNormalizedSha256:r}:null)}emitAttachKeyValueToAllAdUnitsRequested(){if(this.attachKeyValueRequestedEventEmitted)return;this.attachKeyValueRequestedEventEmitted=!0;const t={key:b.p.AuthenticatedTraffic,value:"1",isPageLevel:!0};this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.logAnalyticsDataRequested),verboseLevel:1,payload:t}),this.eventBus.emit(r.w.logAnalyticsDataRequested,t)}},v.PluginName=s.f.AudienceDataPlugin,m=v))||m;var I=n(9754);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=[{userAudienceDataObjectTtl:2592e6,localStorageKey:"pg_uado",viewConfigurationID:1135,clientTargetingService:{},publisherProvidedDataSolutions:{hadron:{enabled:!0}}}],T=S.PluginName;window.pgPluginManager.registerPlugin(T,S,(function(){let e=window.pgPluginManager.getConfig(P);return e&&(e=_(_({},e),{},{clientTargetingService:I.Q})),e}))},1102:(e,t,n)=>{"use strict";var i=n(329),r=n(6360),o=n(3821),s=n(5675),a=n(8789),d=n(2703);let c=function(e){return e.Google="google",e.Compliant="compliant",e.NonStandard="nonStandard",e}({}),l=function(e){return e.GDPR="gdpr",e.USP="usp",e}({}),u=function(e){return e.TC_LOADED="tcloaded",e.USER_ACTION_COMPLETE="useractioncomplete",e.CMP_UI_SHOWN="cmpuishown",e}({});var p,h,g=n(8703);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let v=(0,o.Q)()((h=class e extends r.Q{constructor(t){super(t),this.consentData=void 0,this.gdprAppliesBasedOnGeo=void 0,this.callbackQueue=[],this.applicableRegulations=void 0,this.initialConsentDataGathered=!1,this.eventListenersAttached=!1,this.maxRetriesPerApi=70,this.retryInterval=50,this.retries={},this.handleGetConsentDataRequested=this.handleGetConsentDataRequested.bind(this),this.attachNonStandardCmpTcfApiEventListener=this.attachNonStandardCmpTcfApiEventListener.bind(this),this.attachNonStandardCmpUspApiEventListener=this.attachNonStandardCmpUspApiEventListener.bind(this),this.attachCompliantCmpTcfApiEventListener=this.attachCompliantCmpTcfApiEventListener.bind(this),this.attachCompliantCmpUspApiEventListener=this.attachCompliantCmpUspApiEventListener.bind(this),this.tcfEventHandler=this.tcfEventHandler.bind(this),this.uspDataHandler=this.uspDataHandler.bind(this),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t}),this.gdprAppliesBasedOnGeo=this.config.gdprGeos.includes(window.pgGeo),this.consentData={gdprAppliesBasedOnGeo:this.gdprAppliesBasedOnGeo},this.applicableRegulations=new Set(this.config.privacyRegulations)}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(s.w.getConsentDataRequested,this.handleGetConsentDataRequested,!0,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:1}),await super.activate(),this.initiate(),!0}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:1}),this.eventBus.detachAllForNamespace(e.PluginName),this.detachTcfApiEventListener(),await super.deactivate()}initiate(){if(0===this.applicableRegulations.size)return this.initialConsentDataGathered=!0,this.executeCallbackQueue(),void this.emitConsentDataAvailable();this.logger.log({message:"Attaching event listeners.",namespace:e.PluginName,verboseLevel:3}),!this.eventListenersAttached&&this.applicableRegulations.has(l.GDPR)&&this.attachTcfApiEventListener(),!this.eventListenersAttached&&this.applicableRegulations.has(l.USP)&&this.attachUspApiEventListener(),this.eventListenersAttached=!0}attachTcfApiEventListener(){switch(this.config.cmpType){case c.Compliant:this.attachCompliantCmpTcfApiEventListener();break;case c.NonStandard:this.attachNonStandardCmpTcfApiEventListener();break;case c.Google:this.attachGoogleCmpTcfApiEventListener()}}attachCompliantCmpTcfApiEventListener(){if(!window.__tcfapi||"function"!=typeof window.__tcfapi)return this.logger.warn({message:"TCF API is not available. Falling back to non-standard CMP workflow.",namespace:e.PluginName,verboseLevel:1,type:a.f.TcfApiNotAvailableForCompliantCmpError}),this.eventBus.emit(s.w.tcfApiNotFound),void this.attachNonStandardCmpTcfApiEventListener();window.__tcfapi("addEventListener",2,this.tcfEventHandler)}attachNonStandardCmpTcfApiEventListener(){void 0===this.retries.tcfApi&&(this.retries.tcfApi=0),window.__tcfapi&&"function"==typeof window.__tcfapi?window.__tcfapi("addEventListener",2,this.tcfEventHandler):this.retries.tcfApi>=this.maxRetriesPerApi?this.eventBus.emit(s.w.tcfApiNotFound):(this.retries.tcfApi++,window.setTimeout((()=>this.attachNonStandardCmpTcfApiEventListener()),this.retryInterval))}attachGoogleCmpTcfApiEventListener(){window.googlefc=window.googlefc||{callbackQueue:[]},window.googlefc.callbackQueue.push({CONSENT_API_READY:()=>this.attachCompliantCmpTcfApiEventListener()})}attachUspApiEventListener(){switch(this.config.cmpType){case c.Compliant:this.attachCompliantCmpUspApiEventListener();break;case c.NonStandard:this.attachNonStandardCmpUspApiEventListener();break;case c.Google:this.attachGoogleCmpUspApiEventListener()}}attachCompliantCmpUspApiEventListener(){if(!window.__uspapi||"function"!=typeof window.__uspapi)return this.logger.warn({message:"USP API is not available. Falling back to non-standard CMP workflow.",namespace:e.PluginName,verboseLevel:1,type:a.f.UspApiNotAvailableForCompliantCmpError}),this.eventBus.emit(s.w.uspApiNotFound),void this.attachNonStandardCmpUspApiEventListener();window.__uspapi("getUSPData",1,this.uspDataHandler)}attachNonStandardCmpUspApiEventListener(){void 0===this.retries.uspApi&&(this.retries.uspApi=0),window.__uspapi&&"function"==typeof window.__uspapi?window.__uspapi("getUSPData",1,this.uspDataHandler):this.retries.uspApi>=this.maxRetriesPerApi?this.eventBus.emit(s.w.uspApiNotFound):(this.retries.uspApi++,window.setTimeout((()=>this.attachNonStandardCmpUspApiEventListener()),this.retryInterval))}attachGoogleCmpUspApiEventListener(){window.googlefc=window.googlefc||{callbackQueue:[]},window.googlefc.callbackQueue.push({CONSENT_API_READY:()=>this.attachCompliantCmpUspApiEventListener()})}detachTcfApiEventListener(){window.__tcfapi&&"function"==typeof window.__tcfapi&&this.config.privacyRegulations.includes(l.GDPR)&&window.__tcfapi("removeEventListener",2,this.tcfEventHandler),this.eventListenersAttached=!1}reAttachTcfApiEventListener(){this.detachTcfApiEventListener(),this.attachTcfApiEventListener()}tcfEventHandler(e,t){var n;if(null==e)return void this.reAttachTcfApiEventListener();if(!e)return;if(null!=e&&e.eventStatus&&![u.TC_LOADED,u.USER_ACTION_COMPLETE].includes(e.eventStatus)||!t)return;let i;switch(!0){case 1===e.tcfPolicyVersion&&e.gdprApplies:i=g.Uh.tcf1;break;case 2===e.tcfPolicyVersion&&e.gdprApplies:i=g.Uh.tcf2;break;case 3===e.tcfPolicyVersion&&e.gdprApplies:i=g.Uh.tcf2_1;break;case e.tcfPolicyVersion>=4&&e.gdprApplies:i=g.Uh.tcf2_2}const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({gdprApplies:e.gdprApplies||this.gdprAppliesBasedOnGeo,tcString:e.tcString,purpose:e.purpose,specialFeatures:e.specialFeatures||e.specialFeatureOptins,vendor:e.vendor,tcfVersion:i,purposeOneTreatment:e.purposeOneTreatment},this.mapToCustomConsentData(e));if(!this.initialConsentDataGathered)return this.consentData.gdpr=r,void this.setConsentDataAsAvailable(l.GDPR);r.tcString!==(null===(n=this.consentData.gdpr)||void 0===n?void 0:n.tcString)&&(this.consentData.gdpr=r,this.emitConsentDataUpdatedEvent())}mapToCustomConsentData(e){if(!this.config.customConsents||0===this.config.customConsents.length)return{};const t={};return this.config.customConsents.forEach((n=>{const r=(0,i.OR)(e,n.path);void 0!==r&&(t[n.key]=r)})),t}uspDataHandler(e,t){if(!t)return;const n="1---"!==e.uspString;this.consentData.usp={uspString:e.uspString,uspApplies:"1---"!==e.uspString,uspVersion:n?g.Uh.usp1:void 0},this.setConsentDataAsAvailable(l.USP)}setConsentDataAsAvailable(e){this.initialConsentDataGathered||(this.applicableRegulations.delete(e),this.applicableRegulations.size>0||(this.initialConsentDataGathered=!0,this.executeCallbackQueue(),this.emitConsentDataAvailable()))}executeCallbackQueue(){this.callbackQueue.forEach((e=>e(this.consentData))),this.callbackQueue=[]}emitConsentDataAvailable(){this.logger.log({message:"Event: ".concat(s.w.consentDataAvailable,"."),namespace:e.PluginName,verboseLevel:3,payload:this.consentData}),this.eventBus.emit(s.w.consentDataAvailable,this.consentData)}handleGetConsentDataRequested(e){this.initialConsentDataGathered?e(this.consentData):this.callbackQueue.push(e)}emitConsentDataUpdatedEvent(){this.logger.log({message:"Event: ".concat(s.w.consentDataUpdated,"."),namespace:e.PluginName,verboseLevel:3,payload:this.consentData}),this.eventBus.emit(s.w.consentDataUpdated,this.consentData)}},h.PluginName=d.f.ConsentManagementPlugin,p=h))||p;const b=v.PluginName;window.pgPluginManager.registerPlugin(b,v,(function(){return window.pgPluginManager.getConfig([{viewConfigurationID:1135,gdprGeos:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LI","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","IS","NO","CH"],privacyRegulations:["gdpr","usp"],cmpType:"nonStandard",customConsents:[]}])}));const y=window.pgPluginManager.getPlugin(b);y&&y.registerEventListeners(),window.pgPluginManager.activatePlugin(b)},9490:(e,t,n)=>{"use strict";var i,r,o=n(3821),s=n(8789),a=n(6360),d=n(2703);let c=(0,o.Q)()((r=class e extends a.Q{constructor(t){super(t),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3});const t=await super.activate();try{this.config.customScript()}catch(t){this.logger.error({namespace:e.PluginName,message:"Error while executing script.",type:s.f.CustomScriptExecutionError,verboseLevel:1,payload:t})}return t}},r.PluginName=d.f.CustomScriptPlugin,i=r))||i;const l={customScript:()=>{let e,t=0,n=!0;const i=3e4;let r=i;const o=()=>{if(!n)return;const o=()=>{const n=["tooplatecom47406","tooplatecom47404"].filter((e=>pgPluginManager.getPlugin("AdServerPlugin").adSlotsDisplayed.has(e)));pgPluginManager.baseConfig.eventBus.emit("auction_requested",{auctionID:[...Array(20)].map((()=>Math.random().toString(36)[2])).join(""),adUnitsElementIDs:n}),e=(new Date).getTime(),r=i,t=window.setTimeout(o,r)};t=window.setTimeout(o,r)};document.addEventListener("visibilitychange",(()=>{"visible"!==document.visibilityState?(n=!1,window.clearTimeout(t)):n=!0}));try{(()=>{const e=[596,602,603],t=new Map(Object.entries(pgPluginManager.getPlugin("FirstPartyDataPlugin").config.taxonomyMap));pgPluginManager.getPlugin("FirstPartyDataPlugin").keywords=new Set([...pgPluginManager.getPlugin("FirstPartyDataPlugin").keywords,"template html css","website design","create website for free"]);for(const n of e||[]){pgPluginManager.getPlugin("FirstPartyDataPlugin").mappedTaxonomyIds.contentTaxonomyVersion2_2.push("".concat(n)),pgPluginManager.getPlugin("FirstPartyDataPlugin").taxonomyIds.add(n);for(const e of t.get("".concat(n))||[])pgPluginManager.getPlugin("FirstPartyDataPlugin").mappedTaxonomyIds.contentTaxonomyVersion1_0.push(e)}})(),o()}catch(e){console.log(e)}window.pgPluginManager.activateAll()}},u=c.PluginName;window.pgPluginManager.registerPlugin(u,c,l),window.pgPluginManager.activatePlugin(u)},3137:(e,t,n)=>{"use strict";const i="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,r="9.30.0",o=globalThis;function s(){return a(o),o}function a(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||r,t[r]=t[r]||{}}function d(e,t,n=o){const i=n.__SENTRY__=n.__SENTRY__||{},s=i[r]=i[r]||{};return s[e]||(s[e]=t())}const c=["debug","info","warn","error","log","assert","trace"],l={};function u(e){if(!("console"in o))return e();const t=o.console,n={},i=Object.keys(l);i.forEach((e=>{const i=l[e];n[e]=t[e],t[e]=i}));try{return e()}finally{i.forEach((e=>{t[e]=n[e]}))}}const p=d("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return i?c.forEach((n=>{t[n]=(...t)=>{e&&u((()=>{o.console[n](`Sentry Logger [${n}]:`,...t)}))}})):c.forEach((e=>{t[e]=()=>{}})),t})),h=[];function g(e){const t=e.defaultIntegrations||[],n=e.integrations;let i;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))i=[...t,...n];else if("function"==typeof n){const e=n(t);i=Array.isArray(e)?e:[e]}else i=t;return function(e){const t={};return e.forEach((e=>{const{name:n}=e,i=t[n];i&&!i.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(i)}function f(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function m(e,t,n){if(n[t.name])i&&p.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===h.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),h.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,i)=>n(t,i,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),i=Object.assign(((t,i)=>n(t,i,e)),{id:t.name});e.addEventProcessor(i)}i&&p.log(`Integration installed: ${t.name}`)}}function v(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch(e){}return t}const b=Object.prototype.toString;function y(e){switch(b.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return O(e,Error)}}function A(e,t){return b.call(e)===`[object ${t}]`}function w(e){return A(e,"ErrorEvent")}function S(e){return A(e,"DOMError")}function I(e){return A(e,"String")}function E(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function _(e){return null===e||E(e)||"object"!=typeof e&&"function"!=typeof e}function x(e){return A(e,"Object")}function P(e){return"undefined"!=typeof Event&&O(e,Event)}function T(e){return Boolean(e?.then&&"function"==typeof e.then)}function O(e,t){try{return e instanceof t}catch(e){return!1}}function C(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const R=o;function U(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let o=0,s=0;const a=" > ",d=a.length;let c;const l=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&o++<i&&(c=k(n,l),!("html"===c||o>1&&s+r.length*d+c.length>=u));)r.push(c),s+=c.length,n=n.parentNode;return r.reverse().join(a)}catch(e){return"<unknown>"}}function k(e,t){const n=e,i=[];if(!n?.tagName)return"";if(R.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t?.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(r?.length)r.forEach((e=>{i.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&i.push(`#${n.id}`);const e=n.className;if(e&&I(e)){const t=e.split(/\s+/);for(const e of t)i.push(`.${e}`)}}const o=["aria-label","type","name","title","alt"];for(const e of o){const t=n.getAttribute(e);t&&i.push(`[${e}="${t}"]`)}return i.join("")}function D(){try{return R.document.location.href}catch(e){return""}}function B(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function j(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const i=e[t];try{C(i)?n.push("[VueViewModel]"):n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function N(e,t,n=!1){return!!I(e)&&(A(t,"RegExp")?t.test(e):!!I(t)&&(n?e===t:e.includes(t)))}function L(e,t=[],n=!1){return t.some((t=>N(e,t,n)))}function M(e,t,n){if(!(t in e))return;const r=e[t];if("function"!=typeof r)return;const o=n(r);"function"==typeof o&&F(o,r);try{e[t]=o}catch{i&&p.log(`Failed to replace method "${t}" in object`,e)}}function z(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){i&&p.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function F(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,z(e,"__sentry_original__",t)}catch(e){}}function q(e){return e.__sentry_original__}function H(e){if(y(e))return{message:e.message,name:e.name,stack:e.stack,...$(e)};if(P(e)){const t={type:e.type,target:V(e.target),currentTarget:V(e.currentTarget),...$(e)};return"undefined"!=typeof CustomEvent&&O(e,CustomEvent)&&(t.detail=e.detail),t}return e}function V(e){try{return t=e,"undefined"!=typeof Element&&O(t,Element)?U(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function $(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function G(e=function(){const e=o;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}function W(e){return e.exception?.values?.[0]}function K(e){const{message:t,event_id:n}=e;if(t)return t;const i=W(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function Q(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],o=r[0]=r[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function J(e,t){const n=W(e);if(!n)return;const i=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...i,...t},t&&"data"in t){const e={...i?.data,...t.data};n.mechanism.data=e}}function Y(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{z(e,"__sentry_captured__",!0)}catch(e){}return!1}const X=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Z=(e={})=>{let t;return{name:"EventFilters",setup(n){const i=n.getOptions();t=te(e,i)},processEvent(n,r,o){if(!t){const n=o.getOptions();t=te(e,n)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;const n=e.transaction;return!!n&&L(n,t)}(e,t.ignoreTransactions))return i&&p.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${K(e)}`),!0}else{if(function(e,t){if(!t?.length)return!1;return v(e).some((e=>L(e,t)))}(e,t.ignoreErrors))return i&&p.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${K(e)}`),!0;if(function(e){if(!e.exception?.values?.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return i&&p.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${K(e)}`),!0;if(function(e,t){if(!t?.length)return!1;const n=ne(e);return!!n&&L(n,t)}(e,t.denyUrls))return i&&p.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${K(e)}.\nUrl: ${ne(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;const n=ne(e);return!n||L(n,t)}(e,t.allowUrls))return i&&p.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${K(e)}.\nUrl: ${ne(e)}`),!0}return!1}(n,t)?null:n}}},ee=(e={})=>({...Z(e),name:"InboundFilters"});function te(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:X],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function ne(e){try{const t=[...e.exception?.values??[]].reverse().find((e=>void 0===e.mechanism?.parent_id&&e.stacktrace?.frames?.length)),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(t){return i&&p.error(`Cannot extract url for event ${K(e)}`),null}}function ie(){return Date.now()/1e3}const re=function(){const{performance:e}=o;if(!e?.now)return ie;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();function oe(e){const t=re(),n={sid:G(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};return e&&se(n,e),n}function se(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||re(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:G()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ae(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const i={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=ae(i[e],t[e],n-1));return i}const de="_sentrySpan";function ce(e,t){t?z(e,de,t):delete e[de]}function le(e){return e[de]}function ue(){return G()}function pe(){return G().substring(16)}class he{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ue(),sampleRand:Math.random()}}clone(){const e=new he;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ce(e,le(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&se(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof he?t.getScopeData():x(t)?e:void 0,{tags:i,extra:r,user:o,contexts:s,level:a,fingerprint:d=[],propagationContext:c}=n||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...r},this._contexts={...this._contexts,...s},o&&Object.keys(o).length&&(this._user=o),a&&(this._level=a),d.length&&(this._fingerprint=d),c&&(this._propagationContext=c),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ce(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ue(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const i={timestamp:ie(),...e,message:e.message?B(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:le(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ae(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||G();if(!this._client)return p.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},this),n}captureMessage(e,t,n){const i=n?.event_id||G();if(!this._client)return p.warn("No client configured on scope - will not capture message!"),i;const r=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:i},this),i}captureEvent(e,t){const n=t?.event_id||G();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(p.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class ge{constructor(e,t){let n,i;n=e||new he,i=t||new he,this._stack=[{scope:n}],this._isolationScope=i}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return T(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function fe(){const e=a(s());return e.stack=e.stack||new ge(d("defaultCurrentScope",(()=>new he)),d("defaultIsolationScope",(()=>new he)))}function me(e){return fe().withScope(e)}function ve(e,t){const n=fe();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function be(e){return fe().withScope((()=>e(fe().getIsolationScope())))}function ye(e){const t=a(e);return t.acs?t.acs:{withIsolationScope:be,withScope:me,withSetScope:ve,withSetIsolationScope:(e,t)=>be(t),getCurrentScope:()=>fe().getScope(),getIsolationScope:()=>fe().getIsolationScope()}}function Ae(){return ye(s()).getCurrentScope()}function we(){return ye(s()).getIsolationScope()}function Se(){return Ae().getClient()}function Ie(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t,o={trace_id:n,span_id:r||pe()};return i&&(o.parent_span_id=i),o}let Ee;const _e=new WeakMap,xe=()=>({name:"FunctionToString",setupOnce(){Ee=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=q(this),n=_e.has(Se())&&void 0!==t?t:this;return Ee.apply(n,e)}}catch{}},setup(e){_e.set(e,!0)}}),Pe="?",Te=/\(error: (.*)\)/,Oe=/captureMessage|captureException/;function Ce(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,i=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=Te.test(n)?n.replace(Te,"$1"):n;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){r.push(t);break}}if(r.length>=50+i)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Re(t).function||"")&&t.pop();t.reverse(),Oe.test(Re(t).function||"")&&(t.pop(),Oe.test(Re(t).function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||Re(t).filename,function:e.function||Pe})))}(r.slice(i))}}function Re(e){return e[e.length-1]||{}}const Ue="<anonymous>";function ke(e){try{return e&&"function"==typeof e&&e.name||Ue}catch(e){return Ue}}function De(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}const Be=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,i=t.message;if(!n&&!i)return!1;if(n&&!i||!n&&i)return!1;if(n!==i)return!1;if(!Ne(e,t))return!1;if(!je(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Le(t),i=Le(e);if(!n||!i)return!1;if(n.type!==i.type||n.value!==i.value)return!1;if(!Ne(e,t))return!1;if(!je(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return i&&p.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function je(e,t){let n=De(e),i=De(t);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(i.length!==n.length)return!1;for(let e=0;e<i.length;e++){const t=i[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function Ne(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;try{return!(n.join("")!==i.join(""))}catch(e){return!1}}function Le(e){return e.exception?.values&&e.exception.values[0]}function Me(e,t){!0===t.debug&&(i?p.enable():u((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})));Ae().update(t.initialScope);const n=new e(t);return function(e){Ae().setClient(e)}(n),n.init(),n}function ze(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Fe(e,t,n){return t||`${function(e){return`${ze(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}const qe="production",He=/^o(\d+)\./,Ve=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function $e(e,t=!1){const{host:n,path:i,pass:r,port:o,projectId:s,protocol:a,publicKey:d}=e;return`${a}://${d}${t&&r?`:${r}`:""}@${n}${o?`:${o}`:""}/${i?`${i}/`:i}${s}`}function Ge(e){const t=Ve.exec(e);if(!t)return void u((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,i,r="",o="",s="",a=""]=t.slice(1);let d="",c=a;const l=c.split("/");if(l.length>1&&(d=l.slice(0,-1).join("/"),c=l.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return We({host:o,pass:r,path:d,projectId:c,port:s,protocol:n,publicKey:i})}function We(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ke(e){const t="string"==typeof e?Ge(e):We(e);if(t&&function(e){if(!i)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(p.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(p.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(p.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(p.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function Qe(e,t=100,n=1/0){try{return Ye("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Je(e,t=3,n=102400){const i=Qe(e,t);return r=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?Je(e,t-1,n):i;var r}function Ye(e,t,n=1/0,i=1/0,r=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}()){const[o,s]=r;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(C(t))return"[VueViewModel]";if(x(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${ke(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const i=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(i)?`[HTMLElement: ${i}]`:`[object ${i}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const d="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===d)return a.replace("object ","");if(o(t))return"[Circular ~]";const c=t;if(c&&"function"==typeof c.toJSON)try{return Ye("",c.toJSON(),d-1,i,r)}catch(e){}const l=Array.isArray(t)?[]:{};let u=0;const p=H(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(u>=i){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=Ye(e,t,d-1,i,r),u++}return s(t),l}function Xe(e,t=[]){return[e,t]}function Ze(e,t){const[n,i]=e;return[n,[...i,t]]}function et(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function tt(e){const t=a(o);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function nt(e){const[t,n]=e;let i=JSON.stringify(t);function r(e){"string"==typeof i?i="string"==typeof e?i+e:[tt(i),e]:i.push("string"==typeof e?tt(e):e)}for(const e of n){const[t,n]=e;if(r(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)r(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Qe(n))}r(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let i=0;for(const t of e)n.set(t,i),i+=t.length;return n}(i)}function it(e){const t="string"==typeof e.data?tt(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const rt={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function ot(e){return rt[e]}function st(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function at(e,t,n,i){const r=st(n),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n?.sdk);const s=function(e,t,n,i){const r=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:$e(i)},...r&&{trace:r}}}(e,r,i,t);delete e.sdkProcessingMetadata;return Xe(s,[[{type:o},e]])}const dt="sentry.profile_id",ct="sentry.exclusive_time";function lt(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||Se()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}const ut="_sentryScope",pt="_sentryIsolationScope";function ht(e){return{scope:e[ut],isolationScope:e[pt]}}let gt=!1;function ft(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:yt(e).parent_span_id,o=ht(e).scope;return{parent_span_id:r,span_id:i?o?.getPropagationContext().propagationSpanId||pe():t,trace_id:n}}function mt(e){return e&&e.length>0?e.map((({context:{spanId:e,traceId:t,traceFlags:n,...i},attributes:r})=>({span_id:e,trace_id:t,sampled:1===n,attributes:r,...i}))):void 0}function vt(e){return"number"==typeof e?bt(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?bt(e.getTime()):re()}function bt(e){return e>9999999999?e/1e3:e}function yt(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:i,startTime:r,name:o,endTime:s,status:a,links:d}=e;return{span_id:t,trace_id:n,data:i,description:o,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:vt(r),timestamp:vt(s)||void 0,status:wt(a),op:i["sentry.op"],origin:i["sentry.origin"],links:mt(d)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function At(e){const{traceFlags:t}=e.spanContext();return 1===t}function wt(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}const St="_sentryRootSpan";function It(e){return e[St]||e}function Et(){gt||(u((()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")})),gt=!0)}const _t=/^sentry-/;function xt(e){const t=function(e){if(!e||!I(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=Pt(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return Pt(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(_t)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Pt(e){return e.split(",").map((e=>e.split("=").map((e=>{try{return decodeURIComponent(e.trim())}catch{return}})))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}const Tt="_frozenDsc";function Ot(e,t){const n=t.getOptions(),{publicKey:i,host:r}=t.getDsn()||{};let o;n.orgId?o=String(n.orgId):r&&(o=function(e){const t=e.match(He);return t?.[1]}(r));const s={environment:n.environment||qe,release:n.release,public_key:i,trace_id:e,org_id:o};return t.emit("createDsc",s),s}function Ct(e){const t=Se();if(!t)return{};const n=It(e),i=yt(n),r=i.data,o=n.spanContext().traceState,s=o?.get("sentry.sample_rate")??r["sentry.sample_rate"]??r["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof s&&"string"!=typeof s||(e.sample_rate=`${s}`),e}const d=n[Tt];if(d)return a(d);const c=o?.get("sentry.dsc"),l=c&&xt(c);if(l)return a(l);const u=Ot(e.spanContext().traceId,t),p=r["sentry.source"],h=i.description;return"url"!==p&&h&&(u.transaction=h),lt()&&(u.sampled=String(At(n)),u.sample_rand=o?.get("sentry.sample_rand")??ht(n).scope?.getPropagationContext().sampleRand.toString()),a(u),t.emit("createDsc",u,n),u}var Rt;function Ut(e){return new Dt((t=>{t(e)}))}function kt(e){return new Dt(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Rt||(Rt={}));class Dt{constructor(e){this._state=Rt.PENDING,this._handlers=[],this._runExecutor(e)}then(e,t){return new Dt(((n,i)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){i(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){i(e)}else i(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Dt(((t,n)=>{let i,r;return this.then((t=>{r=!1,i=t,e&&e()}),(t=>{r=!0,i=t,e&&e()})).then((()=>{r?n(i):t(i)}))}))}_executeHandlers(){if(this._state===Rt.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Rt.RESOLVED&&e[1](this._value),this._state===Rt.REJECTED&&e[2](this._value),e[0]=!0)}))}_runExecutor(e){const t=(e,t)=>{this._state===Rt.PENDING&&(T(t)?t.then(n,i):(this._state=e,this._value=t,this._executeHandlers()))},n=e=>{t(Rt.RESOLVED,e)},i=e=>{t(Rt.REJECTED,e)};try{e(n,i)}catch(e){i(e)}}}function Bt(e,t,n,r=0){return new Dt(((o,s)=>{const a=e[r];if(null===t||"function"!=typeof a)o(t);else{const d=a({...t},n);i&&a.id&&null===d&&p.log(`Event processor "${a.id}" dropped event`),T(d)?d.then((t=>Bt(e,t,n,r+1).then(o))).then(null,s):Bt(e,d,n,r+1).then(o).then(null,s)}}))}let jt,Nt,Lt;function Mt(e){const t=o._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Lt&&n.length===Nt||(Nt=n.length,Lt=n.reduce(((n,i)=>{jt||(jt={});const r=jt[i];if(r)n[r[0]]=r[1];else{const r=e(i);for(let e=r.length-1;e>=0;e--){const o=r[e],s=o?.filename,a=t[i];if(s&&a){n[s]=a,jt[i]=[s,a];break}}}return n}),{})),Lt}function zt(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:n,tags:i,user:r,contexts:o,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra});Object.keys(i).length&&(e.tags={...i,...e.tags});Object.keys(r).length&&(e.user={...r,...e.user});Object.keys(o).length&&(e.contexts={...o,...e.contexts});s&&(e.level=s);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),i&&function(e,t){e.contexts={trace:ft(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ct(t),...e.sdkProcessingMetadata};const n=It(t),i=yt(n).description;i&&!e.transaction&&"transaction"===e.type&&(e.transaction=i)}(e,i),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,r),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function Ft(e,t){const{extra:n,tags:i,user:r,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:d,fingerprint:c,eventProcessors:l,attachments:u,propagationContext:p,transactionName:h,span:g}=t;qt(e,"extra",n),qt(e,"tags",i),qt(e,"user",r),qt(e,"contexts",o),e.sdkProcessingMetadata=ae(e.sdkProcessingMetadata,a,2),s&&(e.level=s),h&&(e.transactionName=h),g&&(e.span=g),d.length&&(e.breadcrumbs=[...e.breadcrumbs,...d]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...p}}function qt(e,t,n){e[t]=ae(e[t],n,1)}function Ht(e,t,n,i,r,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||G(),timestamp:t.timestamp||ie()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:i,dist:r,maxValueLength:o=250}=t;e.environment=e.environment||n||qe,!e.release&&i&&(e.release=i);!e.dist&&r&&(e.dist=r);const s=e.request;s?.url&&(s.url=B(s.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),r&&r.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=Mt(t);e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.filename&&(e.debug_id=n[e.filename])}))}))}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new he;return n.update(t),n}(i,n.captureContext);n.mechanism&&J(c,n.mechanism);const p=r?r.getEventProcessors():[],h=d("globalScope",(()=>new he)).getScopeData();if(o){Ft(h,o.getScopeData())}if(u){Ft(h,u.getScopeData())}const g=[...n.attachments||[],...h.attachments];g.length&&(n.attachments=g),zt(c,h);return Bt([...p,...h.eventProcessors],c,n).then((e=>(e&&function(e){const t={};if(e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))})),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof s&&s>0?function(e,t,n){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Qe(e.data,t,n)}})))},...e.user&&{user:Qe(e.user,t,n)},...e.contexts&&{contexts:Qe(e.contexts,t,n)},...e.extra&&{extra:Qe(e.extra,t,n)}};e.contexts?.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=Qe(e.contexts.trace.data,t,n)));e.spans&&(i.spans=e.spans.map((e=>({...e,...e.data&&{data:Qe(e.data,t,n)}}))));e.contexts?.flags&&i.contexts&&(i.contexts.flags=Qe(e.contexts.flags,3,n));return i}(e,s,a):e)))}function Vt(e){if(e)return function(e){return e instanceof he||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>$t.includes(e)))}(e)?{captureContext:e}:e}const $t=["user","level","extra","contexts","tags","fingerprint","propagationContext"];const Gt="Not capturing exception because it's already been captured.",Wt="Discarded session because of missing or non-string release",Kt=Symbol.for("SentryInternalError"),Qt=Symbol.for("SentryDoNotSendEventError");function Jt(e){return{message:e,[Kt]:!0}}function Yt(e){return{message:e,[Qt]:!0}}function Xt(e){return!!e&&"object"==typeof e&&Kt in e}function Zt(e){return!!e&&"object"==typeof e&&Qt in e}class en{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ke(e.dsn):i&&p.warn("No DSN provided, client will not send events."),this._dsn){const t=Fe(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const r=G();if(Y(e))return i&&p.log(Gt),r;const o={event_id:r,...t};return this._process(this.eventFromException(e,o).then((e=>this._captureEvent(e,o,n)))),o.event_id}captureMessage(e,t,n,i){const r={event_id:G(),...n},o=E(e)?e:String(e),s=_(e)?this.eventFromMessage(o,t,r):this.eventFromException(e,r);return this._process(s.then((e=>this._captureEvent(e,r,i)))),r.event_id}captureEvent(e,t,n){const r=G();if(t?.originalException&&Y(t.originalException))return i&&p.log(Gt),r;const o={event_id:r,...t},s=e.sdkProcessingMetadata||{},a=s.capturedSpanScope,d=s.capturedSpanIsolationScope;return this._process(this._captureEvent(e,o,a||n,d)),o.event_id}captureSession(e){this.sendSession(e),se(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Ut(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];m(this,e,this._integrations),t||f(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=at(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Ze(n,it(e));const i=this.sendEnvelope(n);i&&i.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const{release:t,environment:n=qe}=this._options;if("aggregates"in e){const r=e.attrs||{};if(!r.release&&!t)return void(i&&p.warn(Wt));r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t)return void(i&&p.warn(Wt));e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);const r=function(e,t,n,i){const r=st(n);return Xe({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:$e(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){const r=`${e}:${t}`;i&&p.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(i&&p.error("Error while sending envelope:",e),e))):(i&&p.error("Transport disabled"),Ut({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&m(e,t,n)})),n}(this,e),f(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,i=!1;const r=t.exception?.values;if(r){i=!0;for(const e of r){const t=e.mechanism;if(!1===t?.handled){n=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&n)&&(se(e,{...n&&{status:"crashed"},errors:e.errors||Number(i||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Dt((t=>{let n=0;const i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),t(!0)):(n+=1,e&&n>=e&&(clearInterval(i),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,i){const r=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o?.length&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||i.setLastEventId(e.event_id||t.event_id),Ht(r,e,t,n,this,i).then((e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Ie(n),...e.contexts};const i=function(e,t){const n=t.getPropagationContext();return n.dsc||Ot(n.traceId,e)}(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:i,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n=Ae(),r=we()){return i&&tn(e)&&p.log(`Captured error event \`${v(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,r).then((e=>e.event_id),(e=>{i&&(Zt(e)?p.log(e.message):Xt(e)?p.warn(e.message):p.warn(e))}))}_processEvent(e,t,n,i){const r=this.getOptions(),{sampleRate:o}=r,s=nn(e),a=tn(e),d=e.type||"error",c=`before send for type \`${d}\``,l=void 0===o?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(o);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),kt(Yt(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const u="replay_event"===d?"replay":d;return this._prepareEvent(e,t,n,i).then((e=>{if(null===e)throw this.recordDroppedEvent("event_processor",u),Yt("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,i){const{beforeSend:r,beforeSendTransaction:o,beforeSendSpan:s}=t;let a=n;if(tn(a)&&r)return r(a,i);if(nn(a)){if(s){const e=s(function(e){const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:o,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:s?.[dt],exclusive_time:s?.[ct],measurements:e.measurements,is_segment:!0}}(a));if(e?a=ae(n,{type:"transaction",timestamp:(d=e).timestamp,start_timestamp:d.start_timestamp,transaction:d.description,contexts:{trace:{trace_id:d.trace_id,span_id:d.span_id,parent_span_id:d.parent_span_id,op:d.op,status:d.status,origin:d.origin,data:{...d.data,...d.profile_id&&{[dt]:d.profile_id},...d.exclusive_time&&{[ct]:d.exclusive_time}}}},measurements:d.measurements}):Et(),a.spans){const e=[];for(const t of a.spans){const n=s(t);n?e.push(n):(Et(),e.push(t))}a.spans=e}}if(o){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(a,i)}}var d;return a}(0,r,e,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(T(e))return e.then((e=>{if(!x(e)&&null!==e)throw Jt(n);return e}),(e=>{throw Jt(`${t} rejected with ${e}`)}));if(!x(e)&&null!==e)throw Jt(n);return e}(n,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",u),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw Yt(`${c} returned \`null\`, will not send event.`)}const o=n.getSession()||i.getSession();if(a&&o&&this._updateSessionFromEvent(o,r),s){const e=(r.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const d=r.transaction_info;if(s&&d&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...d,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(Zt(e)||Xt(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),Jt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,i]=e.split(":");return{reason:n,category:i,quantity:t}}))}_flushOutcomes(){i&&p.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(i&&p.log("No outcomes to send"));if(!this._dsn)return void(i&&p.log("No dsn provided, will not send outcomes"));i&&p.log("Sending outcomes:",e);const t=(n=e,Xe((r=this._options.tunnel&&$e(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||ie(),discarded_events:n}]]));var n,r,o;this.sendEnvelope(t)}}function tn(e){return void 0===e.type}function nn(e){return"transaction"===e.type}function rn(e,t){const n=t??on(e)??[];if(0===n.length)return;const i=e.getOptions(),r=function(e,t,n,i){const r={};return t?.sdk&&(r.sdk={name:t.sdk.name,version:t.sdk.version}),n&&i&&(r.dsn=$e(i)),Xe(r,[(o=e,[{type:"log",item_count:o.length,content_type:"application/vnd.sentry.items.log+json"},{items:o}])]);var o}(n,i._metadata,i.tunnel,e.getDsn());o._sentryClientToLogBufferMap?.set(e,[]),e.emit("flushLogs"),e.sendEnvelope(r)}function on(e){return o._sentryClientToLogBufferMap?.get(e)}function sn(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function an(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function dn(e,t){const n=un(e,t),i={type:gn(t),value:fn(t)};return n.length&&(i.stacktrace={frames:n}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function cn(e,t,n,i){const r=Se(),o=r?.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:Je(t,o)};if(s)return{exception:{values:[dn(e,s)]},extra:a};const d={exception:{values:[{type:P(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:bn(t,{isUnhandledRejection:i})}]},extra:a};if(n){const t=un(e,n);t.length&&(d.exception.values[0].stacktrace={frames:t})}return d}function ln(e,t){return{exception:{values:[dn(e,t)]}}}function un(e,t){const n=t.stacktrace||t.stack||"",i=function(e){if(e&&pn.test(e.message))return 1;return 0}(t),r=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,i,r)}catch(e){}return[]}o._sentryClientToLogBufferMap=new WeakMap;const pn=/Minified React error #\d+;/i;function hn(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function gn(e){const t=e?.name;if(!t&&hn(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function fn(e){const t=e?.message;return hn(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function mn(e,t,n,i,r){let o;if(w(t)&&t.error){return ln(e,t.error)}if(S(t)||A(t,"DOMException")){const r=t;if("stack"in t)o=ln(e,t);else{const t=r.name||(S(r)?"DOMError":"DOMException"),s=r.message?`${t}: ${r.message}`:t;o=vn(e,s,n,i),Q(o,s)}return"code"in r&&(o.tags={...o.tags,"DOMException.code":`${r.code}`}),o}if(y(t))return ln(e,t);if(x(t)||P(t)){return o=cn(e,t,n,r),J(o,{synthetic:!0}),o}return o=vn(e,t,n,i),Q(o,`${t}`,void 0),J(o,{synthetic:!0}),o}function vn(e,t,n,i){const r={};if(i&&n){const i=un(e,n);i.length&&(r.exception={values:[{value:t,stacktrace:{frames:i}}]}),J(r,{synthetic:!0})}if(E(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return r.logentry={message:e,params:n},r}return r.message=t,r}function bn(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(H(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return B(i,t);for(let e=n.length;e>0;e--){const i=n.slice(0,e).join(", ");if(!(i.length>t))return e===n.length?i:B(i,t)}return""}(e),i=t?"promise rejection":"exception";if(w(e))return`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``;if(P(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${i}`}return`Object captured as ${i} with keys: ${n}`}function yn(e,t){return Ae().captureException(e,Vt(t))}function An(e,t){const n="string"==typeof t?t:void 0,i="string"!=typeof t?{captureContext:t}:void 0;return Ae().captureMessage(e,n,i)}function wn(e,t){return Ae().captureEvent(e,t)}function Sn(e){const t=we(),n=Ae(),{userAgent:i}=o.navigator||{},r=oe({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return"ok"===s?.status&&se(s,{status:"exited"}),In(),t.setSession(r),r}function In(){const e=we(),t=Ae().getSession()||e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),se(e,n)}(t),En(),e.setSession()}function En(){const e=we(),t=Se(),n=e.getSession();n&&t&&t.captureSession(n)}function _n(e=!1){e?In():En()}const xn=o;let Pn=0;function Tn(){return Pn>0}function On(e,t={}){if(!function(e){return"function"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(q(e))return e}catch(t){return e}const n=function(...n){try{const i=n.map((e=>On(e,t)));return e.apply(this,i)}catch(e){throw Pn++,setTimeout((()=>{Pn--})),function(...e){const t=ye(s());if(2===e.length){const[n,i]=e;return n?t.withSetScope(n,i):t.withScope(i)}t.withScope(e[0])}((i=>{i.addEventProcessor((e=>(t.mechanism&&(Q(e,void 0,void 0),J(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),yn(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}F(n,e),z(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}class Cn extends en{constructor(e){const t=(n=e,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:xn.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...n});var n;!function(e,t,n=[t],i="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${i}:@sentry/${e}`,version:r}))),version:r}),e._metadata=o}(t,"browser",["browser"],xn.SENTRY_SDK_SOURCE||"npm"),super(t);const{sendDefaultPii:i,sendClientReports:o,_experiments:s}=this._options,a=s?.enableLogs;xn.document&&(o||a)&&xn.document.addEventListener("visibilitychange",(()=>{"hidden"===xn.document.visibilityState&&(o&&this._flushOutcomes(),a&&rn(this))})),a&&(this.on("flush",(()=>{rn(this)})),this.on("afterCaptureLog",(()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout((()=>{rn(this)}),5e3)}))),i&&(this.on("postprocessEvent",sn),this.on("beforeSendSession",an))}eventFromException(e,t){return function(e,t,n,i){const r=mn(e,t,n?.syntheticException||void 0,i);return J(r),r.level="error",n?.event_id&&(r.event_id=n.event_id),Ut(r)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",i,r){const o=vn(e,t,i?.syntheticException||void 0,r);return o.level=n,i?.event_id&&(o.event_id=i.event_id),Ut(o)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,i)}}const Rn={},Un={};function kn(e,t){Rn[e]=Rn[e]||[],Rn[e].push(t)}function Dn(e,t){if(!Un[e]){Un[e]=!0;try{t()}catch(t){i&&p.error(`Error while instrumenting ${e}`,t)}}}function Bn(e,t){const n=e&&Rn[e];if(n)for(const r of n)try{r(t)}catch(t){i&&p.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ke(r)}\nError:`,t)}}function jn(){"console"in o&&c.forEach((function(e){e in o.console&&M(o.console,e,(function(t){return l[e]=t,function(...t){Bn("console",{args:t,level:e});const n=l[e];n?.apply(o.console,t)}}))}))}const Nn=o;function Ln(){if(!("fetch"in Nn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Mn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function zn(e,t=!1){t&&!function(){if("string"==typeof EdgeRuntime)return!0;if(!Ln())return!1;if(Mn(Nn.fetch))return!0;let e=!1;const t=Nn.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Mn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){i&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}()||M(o,"fetch",(function(t){return function(...n){const i=new Error,{method:r,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:qn(t),method:Fn(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:qn(t),method:Fn(t,"method")?String(t.method).toUpperCase():"GET"}}(n),a={args:n,fetchData:{method:r,url:s},startTimestamp:1e3*re(),virtualError:i,headers:Hn(n)};return e||Bn("fetch",{...a}),t.apply(o,n).then((async t=>(e?e(t):Bn("fetch",{...a,endTimestamp:1e3*re(),response:t}),t)),(e=>{if(Bn("fetch",{...a,endTimestamp:1e3*re(),error:e}),y(e)&&void 0===e.stack&&(e.stack=i.stack,z(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(a.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e}))}}))}function Fn(e,t){return!!e&&"object"==typeof e&&!!e[t]}function qn(e){return"string"==typeof e?e:e?Fn(e,"url")?e.url:e.toString?e.toString():"":""}function Hn(e){const[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(i=t,"undefined"!=typeof Request&&O(i,Request))return new Headers(t.headers)}catch{}var i}const Vn=100;function $n(e,t){const n=Se(),i=we();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:o=Vn}=n.getOptions();if(o<=0)return;const s={timestamp:ie(),...e},a=r?u((()=>r(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),i.addBreadcrumb(a,o))}function Gn(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function Wn(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function Kn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}const Qn=o;let Jn,Yn,Xn;function Zn(){if(!Qn.document)return;const e=Bn.bind(null,"dom"),t=ei(e,!0);Qn.document.addEventListener("click",t,!1),Qn.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Qn,i=n[t]?.prototype;i?.hasOwnProperty?.("addEventListener")&&(M(i,"addEventListener",(function(t){return function(n,i,r){if("click"===n||"keypress"==n)try{const i=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=i[n]=i[n]||{refCount:0};if(!o.handler){const i=ei(e);o.handler=i,t.call(this,n,i,r)}o.refCount++}catch(e){}return t.call(this,n,i,r)}})),M(i,"removeEventListener",(function(e){return function(t,n,i){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},r=n[t];r&&(r.refCount--,r.refCount<=0&&(e.call(this,t,r.handler,i),r.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,i)}})))}))}function ei(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t?.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,i))return;z(n,"_sentryCaptured",!0),i&&!i._sentryId&&z(i,"_sentryId",G());const r="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Yn)return!1;try{if(!e.target||e.target._sentryId!==Xn)return!1}catch(e){}return!0}(n)){e({event:n,name:r,global:t}),Yn=n.type,Xn=i?i._sentryId:void 0}clearTimeout(Jn),Jn=Qn.setTimeout((()=>{Xn=void 0,Yn=void 0}),1e3)}}const ti="__sentry_xhr_v3__";function ni(){if(!Qn.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const i=new Error,r=1e3*re(),o=I(n[0])?n[0].toUpperCase():void 0,s=function(e){if(I(e))return e;try{return e.toString()}catch{}return}(n[1]);if(!o||!s)return e.apply(t,n);t[ti]={method:o,url:s,request_headers:{}},"POST"===o&&s.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[ti];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}Bn("xhr",{endTimestamp:1e3*re(),startTimestamp:r,xhr:t,virtualError:i})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(a(),e.apply(t,n))}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[i,r]=n,o=t[ti];return o&&I(i)&&I(r)&&(o.request_headers[i.toLowerCase()]=r),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const i=t[ti];if(!i)return e.apply(t,n);void 0!==n[0]&&(i.body=n[0]);return Bn("xhr",{startTimestamp:1e3*re(),xhr:t}),e.apply(t,n)}})}let ii;function ri(e){const t="history";kn(t,e),Dn(t,oi)}function oi(){function e(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const i=ii,r=function(e){try{return new URL(e,Qn.location.origin).toString()}catch{return e}}(String(n));if(ii=r,i===r)return e.apply(this,t);Bn("history",{from:i,to:r})}return e.apply(this,t)}}Qn.addEventListener("popstate",(()=>{const e=Qn.location.href,t=ii;if(ii=e,t===e)return;Bn("history",{from:t,to:e})})),"history"in Nn&&Nn.history&&(M(Qn.history,"pushState",e),M(Qn.history,"replaceState",e))}const si="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ai=1024,di=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){var n;t.console&&function(e){const t="console";kn(t,e),Dn(t,jn)}(function(e){return function(t){if(Se()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Gn(t.level),message:j(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${j(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}$n(n,{input:t.args,level:t.level})}}(e)),t.dom&&(n=function(e,t){return function(n){if(Se()!==e)return;let i,r,o="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>ai&&(si&&p.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=ai),"string"==typeof o&&(o=[o]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;i=U(t,{keyAttrs:o,maxStringLength:s}),r=function(e){if(!R.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(e){i="<unknown>"}if(0===i.length)return;const a={category:`ui.${n.name}`,message:i};r&&(a.data={"ui.component_name":r}),$n(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom),kn("dom",n),Dn("dom",Zn)),t.xhr&&function(e){kn("xhr",e),Dn("xhr",ni)}(function(e){return function(t){if(Se()!==e)return;const{startTimestamp:n,endTimestamp:i}=t,r=t.xhr[ti];if(!n||!i||!r)return;const{method:o,url:s,status_code:a,body:d}=r,c={method:o,url:s,status_code:a},l={xhr:t.xhr,input:d,startTimestamp:n,endTimestamp:i},u={category:"xhr",data:c,type:"http",level:Wn(a)};e.emit("beforeOutgoingRequestBreadcrumb",u,l),$n(u,l)}}(e)),t.fetch&&function(e,t){const n="fetch";kn(n,e),Dn(n,(()=>zn(void 0,t)))}(function(e){return function(t){if(Se()!==e)return;const{startTimestamp:n,endTimestamp:i}=t;if(i&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const r=t.fetchData,o={data:t.error,input:t.args,startTimestamp:n,endTimestamp:i},s={category:"fetch",data:r,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",s,o),$n(s,o)}else{const r=t.response,o={...t.fetchData,status_code:r?.status};t.fetchData.request_body_size,t.fetchData.response_body_size;const s={input:t.args,response:r,startTimestamp:n,endTimestamp:i},a={category:"fetch",data:o,type:"http",level:Wn(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,s),$n(a,s)}}}(e)),t.history&&ri(function(e){return function(t){if(Se()!==e)return;let n=t.from,i=t.to;const r=Kn(xn.location.href);let o=n?Kn(n):void 0;const s=Kn(i);o?.path||(o=r),r.protocol===s.protocol&&r.host===s.host&&(i=s.relative),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),$n({category:"navigation",data:{from:n,to:i}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){Se()===e&&$n({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:K(t)},{event:t})}}(e))}}};const ci=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],li=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&M(xn,"setTimeout",ui),t.setInterval&&M(xn,"setInterval",ui),t.requestAnimationFrame&&M(xn,"requestAnimationFrame",pi),t.XMLHttpRequest&&"XMLHttpRequest"in xn&&M(XMLHttpRequest.prototype,"send",hi);const e=t.eventTarget;if(e){(Array.isArray(e)?e:ci).forEach((e=>function(e,t){const n=xn,i=n[e]?.prototype;if(!i?.hasOwnProperty?.("addEventListener"))return;M(i,"addEventListener",(function(n){return function(i,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=On(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ke(r),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&function(e,t,n){e&&"object"==typeof e&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n)}(this,i,r),n.apply(this,[i,On(r,{mechanism:{data:{function:"addEventListener",handler:ke(r),target:e},handled:!1,type:"instrument"}}),o])}})),M(i,"removeEventListener",(function(e){return function(t,n,i){try{const r=n.__sentry_wrapped__;r&&e.call(this,t,r,i)}catch(e){}return e.call(this,t,n,i)}}))}(e,t)))}}}};function ui(e){return function(...t){const n=t[0];return t[0]=On(n,{mechanism:{data:{function:ke(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function pi(e){return function(t){return e.apply(this,[On(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ke(e)},handled:!1,type:"instrument"}})])}}function hi(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&M(n,e,(function(t){const n={mechanism:{data:{function:e,handler:ke(t)},handled:!1,type:"instrument"}},i=q(t);return i&&(n.mechanism.data.handler=ke(i)),On(t,n)}))})),e.apply(this,t)}}const gi=()=>({name:"BrowserSession",setupOnce(){void 0!==xn.document?(Sn({ignoreDuration:!0}),_n(),ri((({from:e,to:t})=>{void 0!==e&&e!==t&&(Sn({ignoreDuration:!0}),_n())}))):si&&p.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}});let fi=null;function mi(){fi=o.onerror,o.onerror=function(e,t,n,i,r){return Bn("error",{column:i,error:r,line:n,msg:e,url:t}),!!fi&&fi.apply(this,arguments)},o.onerror.__SENTRY_INSTRUMENTED__=!0}let vi=null;function bi(){vi=o.onunhandledrejection,o.onunhandledrejection=function(e){return Bn("unhandledrejection",e),!vi||vi.apply(this,arguments)},o.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const yi=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t="error";kn(t,e),Dn(t,mi)}((t=>{const{stackParser:n,attachStacktrace:i}=wi();if(Se()!==e||Tn())return;const{msg:r,url:o,line:s,column:a,error:d}=t,c=function(e,t,n,i){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},d=a.frames=a.frames||[],c=i,l=n,u=I(t)&&t.length>0?t:D();0===d.length&&d.push({colno:c,filename:u,function:Pe,in_app:!0,lineno:l});return e}(mn(n,d||r,void 0,i,!1),o,s,a);c.level="error",wn(c,{originalException:d,mechanism:{handled:!1,type:"onerror"}})}))}(e),Ai("onerror")),t.onunhandledrejection&&(!function(e){!function(e){const t="unhandledrejection";kn(t,e),Dn(t,bi)}((t=>{const{stackParser:n,attachStacktrace:i}=wi();if(Se()!==e||Tn())return;const r=function(e){if(_(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),o=_(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:mn(n,r,void 0,i,!0);o.level="error",wn(o,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Ai("onunhandledrejection"))}}};function Ai(e){si&&p.log(`Global Handler attached: ${e}`)}function wi(){const e=Se();return e?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Si=()=>({name:"HttpContext",preprocessEvent(e){if(!xn.navigator&&!xn.location&&!xn.document)return;const t=function(){const e=D(),{referrer:t}=xn.document||{},{userAgent:n}=xn.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});function Ii(e,t,n,i,r,o){if(!r.exception?.values||!o||!O(o.originalException,Error))return;const s=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;s&&(r.exception.values=Ei(e,t,i,o.originalException,n,r.exception.values,s,0))}function Ei(e,t,n,i,r,o,s,a){if(o.length>=n+1)return o;let d=[...o];if(O(i[r],Error)){_i(s,a);const o=e(t,i[r]),c=d.length;xi(o,r,c,a),d=Ei(e,t,n,i[r],r,[o,...d],o,c)}return Array.isArray(i.errors)&&i.errors.forEach(((i,o)=>{if(O(i,Error)){_i(s,a);const c=e(t,i),l=d.length;xi(c,`errors[${o}]`,l,a),d=Ei(e,t,n,i,r,[c,...d],c,l)}})),d}function _i(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function xi(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}const Pi=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,i,r){Ii(dn,r.getOptions().stackParser,n,t,e,i)}}};function Ti(e,t,n,i){const r={filename:e,function:"<anonymous>"===t?Pe:t,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==i&&(r.colno=i),r}const Oi=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ci=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ri=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ui=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ki=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Di=Ce(...[[30,e=>{const t=Oi.exec(e);if(t){const[,e,n,i]=t;return Ti(e,Pe,+n,+i)}const n=Ci.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=Ri.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Bi(n[1]||Pe,n[2]);return Ti(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{const t=Ui.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=ki.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Pe;return[n,e]=Bi(n,e),Ti(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),Bi=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return n||i?[-1!==e.indexOf("@")?e.split("@")[0]:Pe,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ji=Symbol.for("SentryBufferFullError");function Ni(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(i){if(!(void 0===e||t.length<e))return kt(ji);const r=i();return-1===t.indexOf(r)&&t.push(r),r.then((()=>n(r))).then(null,(()=>n(r).then(null,(()=>{})))),r},drain:function(e){return new Dt(((n,i)=>{let r=t.length;if(!r)return n(!0);const o=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Ut(e).then((()=>{--r||(clearTimeout(o),n(!0))}),i)}))}))}}}function Li(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},o=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,n,,,o]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))"metric_bucket"===e&&o&&!o.split(";").includes("custom")||(r[e]=i+a);else r.all=i+a}else s?r.all=i+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${e}`);return isNaN(i)?6e4:i-t}(s,i):429===t&&(r.all=i+6e4);return r}function Mi(e,t,n=Ni(e.bufferSize||64)){let r={};return{send:function(o){const s=[];if(et(o,((t,n)=>{const i=ot(n);!function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,i)?s.push(t):e.recordDroppedEvent("ratelimit_backoff",i)})),0===s.length)return Ut({});const a=Xe(o[0],s),d=t=>{et(a,((n,i)=>{e.recordDroppedEvent(t,ot(i))}))};return n.add((()=>t({body:nt(a)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&i&&p.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Li(r,e),e)),(e=>{throw d("network_error"),i&&p.error("Encountered error running transport request:",e),e})))).then((e=>e),(e=>{if(e===ji)return i&&p.error("Skipped sending event because buffer is full."),d("queue_overflow"),Ut({});throw e}))},flush:e=>n.drain(e)}}const zi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Fi={};function qi(e){const t=Fi[e];if(t)return t;let n=Qn[e];if(Mn(n))return Fi[e]=n.bind(Qn);const i=Qn.document;if(i&&"function"==typeof i.createElement)try{const t=i.createElement("iframe");t.hidden=!0,i.head.appendChild(t);const r=t.contentWindow;r?.[e]&&(n=r[e]),i.head.removeChild(t)}catch(t){zi&&p.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?Fi[e]=n.bind(Qn):n}function Hi(e){Fi[e]=void 0}function Vi(e,t=qi("fetch")){let n=0,i=0;return Mi(e,(function(r){const o=r.body.length;n+=o,i++;const s={body:r.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return Hi("fetch"),kt("No fetch implementation available");try{return t(e.url,s).then((e=>(n-=o,i--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Hi("fetch"),n-=o,i--,kt(e)}}))}function $i(){return!!function(){if(void 0===xn.window)return!1;const e=xn;if(e.nw)return!1;const t=e.chrome||e.browser;if(!t?.runtime?.id)return!1;const n=D(),i=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(xn===xn.top&&i.some((e=>n.startsWith(`${e}://`))))}()&&(si&&u((()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")})),!0)}function Gi(e,t){let n;return et(e,((e,i)=>(t.includes(i)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Wi(e,t){return n=>{const i=e(n),r=new Map;function o(t,i){const o=i?`${t}:${i}`:t;let s=r.get(o);if(!s){const a=Ge(t);if(!a)return;const d=Fe(a,n.tunnel);s=i?function(e,t){return n=>{const i=e(n);return{...i,send:async e=>{const n=Gi(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),i.send(e)}}}}(e,i)({...n,url:d}):e({...n,url:d}),r.set(o,s)}return[t,s]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){return Gi(e,t?.length?t:["event"])}}).map((e=>"string"==typeof e?o(e,void 0):o(e.dsn,e.release))).filter((e=>!!e)),r=n.length?n:[["",i]];return(await Promise.all(r.map((([t,n])=>n.send(function(e,t){return Xe(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...r.values(),i];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}var Ki,Qi,Ji=n(5675),Yi=n(6360),Xi=n(2703),Zi=n(3821),er=n(4120),tr=n(8789);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ir(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let rr=(0,Zi.Q)()((Qi=class e extends Yi.Q{constructor(e){super(e),this.auctionStartTimes=void 0,this.auctionData=void 0;const t=e.dsnRouting&&e.dsnRouting.length>0?Wi(Vi,(t=>{let{getEvent:n}=t;const i=n();if(null==i||!i.tags)return[];const r=i.tags.pluginName||i.tags.handlerContext;if(!r||"string"!=typeof r)return[];const o=e.dsnRouting.find((e=>e.identifiers.includes(r)));return o?[{dsn:o.dsn,release:e.release}]:[]})):void 0;!function(e={}){const t=!e.skipBrowserExtensionCheck&&$i(),n={...e,enabled:!t&&e.enabled,stackParser:(i=e.stackParser||Di,Array.isArray(i)?Ce(...i):i),integrations:g({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?[ee(),xe(),li(),di(),yi(),Pi(),Be(),Si(),gi()]:e.defaultIntegrations}),transport:e.transport||Vi};var i;Me(Cn,n)}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){ir(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dsn:e.dsn,environment:e.environment,release:e.release,sampleRate:e.sampleRate,tracesSampleRate:e.tracesSampleRate,defaultIntegrations:!1,debug:!1,attachStacktrace:!0},t&&{transport:t})),this.auctionStartTimes=new Map,this.auctionData=new Map}async activate(){return super.activate()}async deactivate(){return this.auctionStartTimes.clear(),this.auctionData.clear(),this.eventBus.detachAllForNamespace(e.PluginName),super.deactivate()}registerEventListenersHook(){this.eventBus.on(Ji.w.pluginErrorOccurred,this.handlePluginError.bind(this),!0,e.PluginName),this.eventBus.on(Ji.w.eventHandlerErrorOccurred,this.handleEventBusError.bind(this),!0,e.PluginName),this.eventBus.on(Ji.w.middlewareErrorOccurred,this.handleEventBusError.bind(this),!0,e.PluginName),this.eventBus.on(Ji.w.loggedErrorOccurred,this.handleLoggedError.bind(this),!0,e.PluginName),this.eventBus.on(Ji.w.adUnitRefreshAnomalyDetected,this.handleRefreshAnomaly.bind(this),!0,e.PluginName)}registerMiddlewaresHook(){}handlePluginError(e){yn(e.error,{tags:{pluginName:e.context.pluginName,operation:e.context.operation,severity:e.severity,component:"plugin"},extra:{config:e.context.config,bundleName:this.config.bundleName,url:window.location.href,bundleStateKey:this.config.bundleStateKey,timestamp:e.timestamp,device:window.pgDevice||"unknown"},fingerprint:["plugin-error-".concat(e.context.pluginName,"-").concat(e.context.operation)]})}handleEventBusError(e){yn(e.error,{tags:{component:e.context.component,operation:e.context.operation,eventName:e.context.eventName,handlerContext:e.context.handlerContext,severity:e.severity},extra:{eventName:e.context.eventName,handlerContext:e.context.handlerContext,eventArgs:e.context.eventArgs,bundleName:this.config.bundleName,url:window.location.href,bundleStateKey:this.config.bundleStateKey,timestamp:e.timestamp,device:window.pgDevice||"unknown"},fingerprint:["event-handler-error-".concat(e.context.eventName,"-").concat(e.context.handlerContext)]})}handleLoggedError(e){this.config.eventAdditionalThrottling&&this.config.eventAdditionalThrottling[e.type]&&Math.random()>this.config.eventAdditionalThrottling[e.type]||An(e.payload,{tags:{type:e.type,severity:er.MU.Medium},extra:{message:e.message,bundleName:this.config.bundleName,url:window.location.href,bundleStateKey:this.config.bundleStateKey,device:window.pgDevice||"unknown"},fingerprint:["logged-error-".concat(e.type)]})}handleRefreshAnomaly(e){var t;null!==(t=this.config.eventAdditionalThrottling)&&void 0!==t&&t[tr.f.AdUnitRefreshAnomaly]&&Math.random()>this.config.eventAdditionalThrottling[tr.f.AdUnitRefreshAnomaly]||An("Ad Unit Refresh Anomaly: ".concat(e.anomalyType),{tags:{component:"MonitoringService",anomalyType:e.anomalyType,severity:er.MU.Medium},extra:{auctionId:e.auctionId,adUnits:e.adUnits,context:e.context,bundleName:this.config.bundleName,url:window.location.href,bundleStateKey:this.config.bundleStateKey,timestamp:e.timestamp,device:window.pgDevice||"unknown"},fingerprint:["refresh-anomaly-".concat(e.anomalyType)]})}},Qi.PluginName=Xi.f.SentryPlugin,Ki=Qi))||Ki;window.pgPluginManager.registerPlugin(rr.PluginName,rr,{dsn:"https://fc7ae9f3201e77b868acf61b048c8344@o4504813552140288.ingest.us.sentry.io/4509530133430272",sampleRate:.01,tracesSampleRate:0,eventAdditionalThrottling:{36:.01,54:.01,67:.01,88:.01,92:.1},release:"10.18.0",environment:"production",bundleName:"live/pubgalaxy/publishers/tooplatecom.min.js",bundleStateKey:"8ebfa473-d6ee-48b2-a7ae-588e66bffda1"})},9687:(e,t,n)=>{"use strict";var i,r,o=n(3821),s=n(5675),a=n(6360),d=n(2703),c=n(7165),l=n(8789);let u=(0,o.Q)()((r=class e extends a.Q{constructor(t){super(t),this.taxonomyIds=void 0,this.keywords=void 0,this.mappedTaxonomyIds=void 0,this.rootDomain=void 0,this.siteName=void 0,this.que=[],this.taxonomyIds=new Set(t.taxonomyIds),this.keywords=new Set(t.keywords),this.mappedTaxonomyIds=t.mappedTaxonomyIds,this.handleSetIabTaxonomiesRequested=this.handleSetIabTaxonomiesRequested.bind(this),this.rootDomain=(0,c.SN)(),this.siteName=this.rootDomain.split(".")[0],this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(s.w.setIabTaxonomiesRequested,this.handleSetIabTaxonomiesRequested,!1,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.init(),await super.activate()}init(){for(const e of this.que)"function"==typeof e&&e.call(this);this.que.push=e=>("function"==typeof e&&e.call(this),0);const t=((document.querySelector('meta[name="keywords"]')||[]).content||"").split(",");for(const e of t)this.keywords.add(e.trim());const n={rootDomain:this.rootDomain,siteName:this.siteName,taxonomyIds:this.taxonomyIds,mappedTaxonomyIds:this.mappedTaxonomyIds,keywords:this.keywords,currentPage:window.location.href,referer:document.referrer};this.logger.log({payload:n,message:"Event ".concat(s.w.setFirstPartyData),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(s.w.setFirstPartyData,n)}handleSetIabTaxonomiesRequested(t){const n=new Set,i=new Set,r=new Set,o=new Map(Object.entries(this.config.taxonomyMap));for(const e of t.contentTaxonomy||[]){n.add("".concat(e));for(const t of o.get("".concat(e))||[])i.add(t)}for(const n of t.audienceTaxonomy||[])parseInt(n,10)<1||parseInt(n,10)>1679?this.logger.warn({payload:n,type:l.f.InvalidTaxonomyId,message:"Invalid audience taxonomy id detected. Skipping",namespace:e.PluginName,verboseLevel:1}):r.add("".concat(n));const a={rootDomain:this.rootDomain,siteName:this.siteName,taxonomyIds:n,audienceIds:r,mappedTaxonomyIds:{contentTaxonomyVersion1_0:Array.from(i),contentTaxonomyVersion2_2:Array.from(n),audienceTaxonomyVersion1_1:Array.from(r)},keywords:this.keywords,currentPage:window.location.href,referer:document.referrer};this.que.push((()=>{this.logger.log({payload:a,message:"Event ".concat(s.w.setFirstPartyData),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(s.w.setFirstPartyData,a)}))}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),await super.deactivate()}},r.PluginName=d.f.FirstPartyDataPlugin,i=r))||i;const p=u.PluginName;window.pgPluginManager.registerPlugin(p,u,(function(){return window.pgPluginManager.getConfig([{viewConfigurationID:1135,taxonomyIds:[],mappedTaxonomyIds:{contentTaxonomyVersion1_0:[],contentTaxonomyVersion2_2:[],audienceTaxonomyVersion1_1:[]},keywords:[],taxonomyMap:{1:["IAB2"],3:["IAB2-21"],4:["IAB2-20"],5:["IAB2-23"],8:["IAB2-6"],9:["IAB2-7"],10:["IAB2-8"],11:["IAB2-11"],13:["IAB2-14"],14:["IAB2-16"],15:["IAB2-18"],18:["IAB2-5"],19:["IAB2-22"],22:["IAB2-10","IAB2-12"],23:["IAB2-13"],24:["IAB2-17"],25:["IAB2-4"],27:["IAB2-15"],28:["IAB2-19"],30:["IAB2-3"],32:["IAB2-1"],34:["IAB2-2"],42:["IAB1-1"],52:["IAB13-3"],53:["IAB3"],55:["IAB3-9"],57:["IAB3-10"],58:["IAB3-1","IAB3-11"],77:["IAB3-7"],78:["IAB3-8"],102:["IAB3-2"],107:["IAB3-12"],119:["IAB3-3"],121:["IAB3-5"],123:["IAB4"],125:["IAB4-11"],126:["IAB4-1"],127:["IAB4-5"],128:["IAB4-4"],129:["IAB4-6"],130:["IAB4-9"],132:["IAB5"],133:["IAB5-2"],134:["IAB5-13"],135:["IAB5-1"],136:["IAB5-14"],137:["IAB5-5"],139:["IAB5-9"],145:["IAB5-10"],146:["IAB5-11"],147:["IAB5-8"],149:["IAB5-12"],151:["IAB20-25"],165:["IAB14-7"],186:["IAB6"],188:["IAB14-1"],189:["IAB14-2"],190:["IAB6-9"],191:["IAB14-4"],193:["IAB6-1"],194:["IAB6-3"],195:["IAB6-4"],196:["IAB6-2"],197:["IAB6-5"],198:["IAB6-6"],199:["IAB6-8"],201:["IAB1-3"],205:["IAB9-1"],210:["IAB8"],211:["IAB8-18","IAB8-5"],212:["IAB8-16"],213:["IAB8-17"],214:["IAB8-1","IAB8-11","IAB8-13","IAB8-14","IAB8-15","IAB8-3","IAB8-4","IAB8-7"],215:["IAB8-2"],217:["IAB8-8"],218:["IAB8-9"],219:["IAB8-10"],221:["IAB8-12"],222:["IAB8-6"],223:["IAB7","IAB7-35","IAB7-38"],225:["IAB7-1"],227:["IAB17-30"],228:["IAB7-31"],229:["IAB7-32"],231:["IAB7-44"],233:["IAB7-5"],234:["IAB7-25"],235:["IAB7-26"],236:["IAB7-36"],237:["IAB7-41"],238:["IAB7-45"],239:["IAB9"],241:["IAB9-20"],243:["IAB9-16"],244:["IAB15-5"],245:["IAB9-24"],246:["IAB9-26"],248:["IAB9-2"],249:["IAB9-3"],250:["IAB9-6"],251:["IAB9-12"],252:["IAB9-19"],253:["IAB9-21"],254:["IAB9-22"],255:["IAB9-23"],256:["IAB9-27"],257:["IAB9-31"],259:["IAB9-4"],260:["IAB9-9"],261:["IAB9-10"],262:["IAB9-11"],263:["IAB9-29"],264:["IAB9-15"],265:["IAB9-17"],266:["IAB9-13"],267:["IAB9-28"],270:["IAB9-5","IAB9-8"],271:["IAB9-7"],272:["IAB9-25"],273:["IAB9-14"],274:["IAB10"],275:["IAB10-4"],276:["IAB10-9"],278:["IAB10-1"],279:["IAB10-2"],280:["IAB10-5"],282:["IAB10-3"],283:["IAB10-7"],284:["IAB10-8"],286:["IAB7"],287:["IAB7-14"],288:["IAB7-4"],289:["IAB7-16"],290:["IAB7-20"],293:["IAB7-43"],296:["IAB7-24"],297:["IAB7-3"],300:["IAB7-7"],301:["IAB7-18","IAB7-2","IAB7-34","IAB7-37","IAB7-8","IAB7-9"],304:["IAB7-30"],305:["IAB6-7"],306:["IAB7-12"],307:["IAB7-39"],309:["IAB7-19"],310:["IAB7-40"],311:["IAB7-42"],312:["IAB7-33","IAB7-6","IAB7-10","IAB7-13","IAB7-21","IAB7-23"],314:["IAB7-11"],315:["IAB7-15"],316:["IAB7-17"],318:["IAB7-22","IAB7-27","IAB7-29"],324:["IAB1-5"],338:["IAB1-6"],379:["IAB11","IAB12"],382:["IAB12-1"],383:["IAB11-2"],384:["IAB12-3"],385:["IAB12-2"],386:["IAB11-4"],388:["IAB11-1"],390:["IAB15-10"],391:["IAB13"],395:["IAB4-3","IAB4-8"],396:["IAB13-4"],398:["IAB13-6"],405:["IAB13-2"],410:["IAB13-1","IAB13-7"],411:["IAB13-5"],412:["IAB13-8"],413:["IAB13-9"],414:["IAB13-11"],415:["IAB13-12"],416:["IAB13-10"],422:["IAB16"],423:["IAB16-2"],424:["IAB16-3"],425:["IAB16-4"],426:["IAB16-1"],427:["IAB16-5"],429:["IAB16-6"],430:["IAB16-7"],432:["IAB1-2"],440:["IAB1-4"],441:["IAB21"],442:["IAB21-1"],451:["IAB21-3"],453:["IAB23","IAB23-1","IAB23-10"],454:["IAB23-2"],456:["IAB15-1"],458:["IAB23-3"],459:["IAB23-4","IAB23-5","IAB23-9"],460:["IAB23-6"],461:["IAB23-7"],462:["IAB23-8"],464:["IAB15"],465:["IAB15-2","IAB15-9"],466:["IAB15-3"],469:["IAB15-8"],470:["IAB15-4"],471:["IAB15-6"],472:["IAB15-7"],473:["IAB22"],474:["IAB22-2"],481:["IAB22-1"],483:["IAB17"],484:["IAB17-12"],485:["IAB17-5"],486:["IAB17-7"],491:["IAB17-9"],492:["IAB17-21","IAB17-3"],496:["IAB17-17"],497:["IAB17-16"],499:["IAB17-6"],500:["IAB17-8"],501:["IAB17-24"],502:["IAB17-33"],503:["IAB17-34"],504:["IAB17-36"],505:["IAB17-37"],506:["IAB17-43"],510:["IAB17-10"],511:["IAB17-11","IAB17-13","IAB17-32"],512:["IAB17-15"],514:["IAB17-18"],515:["IAB17-27"],516:["IAB17-19"],518:["IAB17-1","IAB17-22"],519:["IAB17-25"],520:["IAB17-20"],521:["IAB17-23"],525:["IAB17-28"],527:["IAB17-29"],530:["IAB17-31"],531:["IAB17-35"],533:["IAB17-44"],537:["IAB17-38"],538:["IAB17-39"],539:["IAB17-40"],541:["IAB17-41"],542:["IAB17-42"],545:["IAB17-2"],547:["IAB17-26"],549:["IAB17-4"],552:["IAB18"],553:["IAB18-1"],560:["IAB18-3"],561:["IAB18-6"],565:["IAB18-4"],566:["IAB18-5"],574:["IAB18-2"],575:["IAB18-5"],576:["IAB18-5"],579:["IAB18-3"],580:["IAB18-6"],581:["IAB18-4"],582:["IAB18-5"],596:["IAB19"],600:["IAB19-8"],601:["IAB19-9"],602:["IAB3-4"],603:["IAB19-1"],605:["IAB19-30"],607:["IAB19-23"],608:["IAB19-3","IAB26-3"],610:["IAB19-2"],611:["IAB19-12"],612:["IAB19-13"],613:["IAB19-22"],614:["IAB19-16"],616:["IAB19-11"],618:["IAB19-25"],619:["IAB19-18"],623:["IAB19-15"],624:["IAB19-24"],627:["IAB19-35"],629:["IAB19-34"],631:["IAB19-19","IAB19-20","IAB19-32","IAB19-4"],633:["IAB19-5"],634:["IAB10-6","IAB19-17"],635:["IAB19-6"],636:["IAB19-26"],640:["IAB1-7"],653:["IAB20"],656:["IAB20-2"],657:["IAB20-20"],658:["IAB20-4"],659:["IAB20-13","IAB20-14","IAB20-15","IAB20-16","IAB20-19","IAB20-27"],660:["IAB20-10","IAB20-11","IAB20-8"],662:["IAB20-21","IAB20-23"],665:["IAB20-1"],666:["IAB20-26"],667:["IAB20-17"],668:["IAB20-18"],671:["IAB20-24"],672:["IAB20-3"],674:["IAB20-5"],675:["IAB20-6"],676:["IAB20-7"],677:["IAB20-9"],678:["IAB20-12"],680:["IAB9-30"]}}])}))},5764:(e,t,n)=>{"use strict";var i,r,o=n(3821),s=n(5675),a=n(8789),d=n(6360),c=n(1343),l=n(2703),u=n(7267),p=n(2101),h=n(329),g=n(5412);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let b=(0,o.Q)()((r=class e extends d.Q{constructor(t){super(t),this.initialAuctionEventPayload=void 0,this.vpmute=void 0,this.vpa=void 0,this.finishedEventActionsPerElement=new Map,this.finishedEventsTracker=new Set,this.headerBiddingFallBackTimers=new Map,this.headerBiddersActivated=new Set,this.tcString=void 0,this.dynamicBidAdjustmentsReady=void 0,this.adUnitClonesThatShouldNotBeInInitialAuction=new Set,this.dynamicBidAdjustmentsReady=!this.config.dynamicBidAdjustment,this.headerBidderActivated=this.headerBidderActivated.bind(this),this.headerBidderDeactivated=this.headerBidderDeactivated.bind(this),this.emitBuildAndExecuteVastUrlRequestedEvent=this.emitBuildAndExecuteVastUrlRequestedEvent.bind(this),this.onCloneAdUnitsRequested=this.onCloneAdUnitsRequested.bind(this),this.runInitialAuction=this.runInitialAuction.bind(this),this.runAuction=this.runAuction.bind(this),this.updateConsentData=this.updateConsentData.bind(this),this.runAuctionMiddlewareHandler=this.runAuctionMiddlewareHandler.bind(this),this.onAuctionSyncFinished=this.onAuctionSyncFinished.bind(this),this.onAuctionFinished=this.onAuctionFinished.bind(this),this.onAuctionInstreamFinished=this.onAuctionInstreamFinished.bind(this),this.runAuctionForAddedAdUnits=this.runAuctionForAddedAdUnits.bind(this),this.onAdUnitDisplayRequested=this.onAdUnitDisplayRequested.bind(this),this.initialAuctionEventPayload={adUnitsElementIDs:this.config.adUnitsInitialLoadElementIDs,auctionID:u.W.INITIAL_AUCTION_ID},this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){this.eventBus.addMiddleware(e.PluginName,p.h.HeaderBiddingManagerAuctionRequestedMiddleware,s.w.auctionRequested,this.runAuctionMiddlewareHandler,!0)}registerEventListenersHook(){this.eventBus.on(s.w.auctionFinished,this.onAuctionFinished,!1,e.PluginName),this.eventBus.on(s.w.auctionSyncFinished,this.onAuctionSyncFinished,!1,e.PluginName),this.eventBus.on(s.w.auctionInstreamFinished,this.onAuctionInstreamFinished,!1,e.PluginName),this.eventBus.on(s.w.headerBidderActivated,this.headerBidderActivated,!1,e.PluginName),this.eventBus.on(s.w.headerBidderDeactivated,this.headerBidderDeactivated,!1,e.PluginName),this.eventBus.on(s.w.cloneAdUnitsRequested,this.onCloneAdUnitsRequested,!1,e.PluginName),this.eventBus.on(s.w.consentDataAvailable,this.updateConsentData,!0,e.PluginName),this.eventBus.on(s.w.consentDataUpdated,this.updateConsentData,!1,e.PluginName),this.eventBus.on(s.w.adUnitAdditionalSlotCreated,this.runAuctionForAddedAdUnits,!1,e.PluginName),this.eventBus.on(s.w.adUnitDisplayRequested,this.onAdUnitDisplayRequested,!1,e.PluginName)}beforeActivate(){return this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),super.beforeActivate()}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.fetchDynamicBidAdjustments(),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.detachAllForNamespace(e.PluginName),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),this.finishedEventActionsPerElement.clear(),this.headerBiddingFallBackTimers.clear(),this.finishedEventsTracker.clear(),await super.deactivate()}onAuctionFinished(t){const n=t.auctionID;this.finishedEventActionsPerElement.has(n)||this.finishedEventActionsPerElement.set(n,{elementsIDs:new Set,callbacks:[],finishedHeaderBidders:[],winningBids:new Map,targeting:[],callbackInstream:void 0,adUnitPaths:[]});const i=this.getFinishedAuctionEventData(t);if(i.callbacks.length===this.config.headerBidders.length&&(this.headerBiddingFallBackTimers.has(n)&&(clearTimeout(this.headerBiddingFallBackTimers.get(n)),this.headerBiddingFallBackTimers.delete(n)),this.logger.log({namespace:e.PluginName,message:"All finished bidders are combined in common auction. Event: ".concat(s.w.auctionSyncFinished,"."),verboseLevel:1,payload:m(m({},i),{},{auctionID:n})}),this.emitAuctionSyncFinished(i,n)),!this.headerBiddingFallBackTimers.has(n)&&t.headerBidder===g.q.SpecialCase){const t=setTimeout((()=>{const t=this.finishedEventActionsPerElement.get(n);t&&(this.logger.warn({namespace:e.PluginName,message:"Only [".concat(t.finishedHeaderBidders.join(", "),"] finished Header Bidding!"),type:a.f.HeaderBiddingNotAllFinishedAuctionWarn,verboseLevel:1,payload:m(m({},t),{},{auctionID:n})}),this.emitAuctionSyncFinished(t,n,!0));const i=this.headerBiddingFallBackTimers.get(n);i&&(clearTimeout(i),this.headerBiddingFallBackTimers.delete(n))}),this.config.headerBiddingFallBackTimeout);this.headerBiddingFallBackTimers.set(n,t)}}async fetchDynamicBidAdjustments(){if(!this.config.dynamicBidAdjustment)return;const t=new AbortController,n=setTimeout((()=>t.abort()),this.config.dynamicBidAdjustment.timeout);try{const i=await fetch("".concat(this.config.dynamicBidAdjustment.endpoint),{method:"GET",mode:"cors",signal:t.signal});if(clearTimeout(n),!i.ok)return this.logger.error({namespace:e.PluginName,message:"Error fetching floor data. Response was not 200 OK",type:a.f.ErrorFetchingDynamicBidAdjustments,verboseLevel:1}),this.dynamicBidAdjustmentsReady=!0,void this.attemptToRunInitialAuction();const r=await i.json();this.eventBus.emit(s.w.dynamicBidAdjustmentsRequested,r),this.dynamicBidAdjustmentsReady=!0,this.attemptToRunInitialAuction()}catch(t){this.logger.error({namespace:e.PluginName,message:"Error fetching floor data.",type:a.f.ErrorFetchingDynamicBidAdjustments,verboseLevel:1}),this.dynamicBidAdjustmentsReady=!0,this.attemptToRunInitialAuction()}}onAuctionInstreamFinished(t){const n=t.auctionID;this.finishedEventActionsPerElement.has(n)||this.finishedEventActionsPerElement.set(n,{elementsIDs:new Set,callbacks:[],finishedHeaderBidders:[],winningBids:new Map,targeting:[],callbackInstream:void 0,adUnitPaths:[],maxduration:0,playbackmethod:[1],position:c.D.preroll});const i=this.getFinishedAuctionInstreamEventData(t);if(i.callbacks.length===this.config.headerBidders.length&&(void 0!==i.callbackInstream&&this.emitBuildAndExecuteVastUrlRequestedEvent(i),this.headerBiddingFallBackTimers.has(n)&&(clearTimeout(this.headerBiddingFallBackTimers.get(n)),this.headerBiddingFallBackTimers.delete(n)),this.logger.log({namespace:e.PluginName,message:"All finished bidders are combined in common auction. Event: ".concat(s.w.auctionSyncFinished,"."),verboseLevel:1,payload:m(m({},i),{},{auctionID:n})}),this.emitAuctionSyncFinished(i,n)),!this.headerBiddingFallBackTimers.has(n)&&t.headerBidder===g.q.SpecialCase){const t=setTimeout((()=>{const t=this.finishedEventActionsPerElement.get(n);t&&(this.logger.warn({namespace:e.PluginName,message:"Only [".concat(t.finishedHeaderBidders.join(", "),"] finished Header Bidding!"),type:a.f.HeaderBiddingNotAllFinishedAuctionWarn,verboseLevel:1,payload:m(m({},t),{},{auctionID:n})}),this.emitAuctionSyncFinished(t,n,!0));const i=this.headerBiddingFallBackTimers.get(n);i&&(clearTimeout(i),this.headerBiddingFallBackTimers.delete(n))}),this.config.headerBiddingFallBackTimeout);this.headerBiddingFallBackTimers.set(n,t)}}emitAuctionSyncFinished(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.finishedEventsTracker.has(t)||(this.eventBus.emit(s.w.auctionSyncFinished,{auctionID:t,isTimeout:n,finishedHeaderBidders:Array.from(e.finishedHeaderBidders),elementsIDs:Array.from(e.elementsIDs),winningBids:e.winningBids,callback:()=>{e.callbacks.forEach((e=>e())),this.finishedEventActionsPerElement.delete(t)}}),this.finishedEventsTracker.add(t))}onAuctionSyncFinished(t){const n={refreshBlockingAdSlots:t.refreshBlockingAdSlots,auctionID:t.auctionID,elementsIDs:t.elementsIDs,callback:t.callback,isTimeout:t.isTimeout,finishedHeaderBidders:t.finishedHeaderBidders};this.logger.log({namespace:e.PluginName,message:"Event: ".concat(s.w.adUnitAdServerRefreshRequested,"."),verboseLevel:1,payload:n}),this.eventBus.emit(s.w.adUnitAdServerRefreshRequested,n)}getFinishedAuctionEventData(e){const t=this.finishedEventActionsPerElement.get(e.auctionID);return e.elementsIDs.forEach((e=>t.elementsIDs.add(e))),e.winningBids.forEach(((e,n)=>{var i;t.winningBids.has(n)?t.winningBids.set(n,Math.max(e,null!==(i=t.winningBids.get(n))&&void 0!==i?i:0)):t.winningBids.set(n,isNaN(e)?0:e)})),t.callbacks.push(e.callback),t.finishedHeaderBidders.push(e.headerBidder),t}getFinishedAuctionInstreamEventData(e){var t;const n=this.finishedEventActionsPerElement.get(e.auctionID);e.elementsIDs.forEach((e=>n.elementsIDs.add(e))),e.winningBids.forEach(((e,t)=>{var i;n.winningBids.has(t)?n.winningBids.set(t,Math.max(e,null!==(i=n.winningBids.get(t))&&void 0!==i?i:0)):n.winningBids.set(t,isNaN(e)?0:e)}));const i=e.targeting.get(e.elementsIDs[0]);return null===(t=n.targeting)||void 0===t||t.push(new Map([[e.elementsIDs[0],i]])),n.adUnitPaths=e.adUnitPaths,n.callbackInstream=e.callbackVastURL,n.callbacks.push(e.callback),n.finishedHeaderBidders.push(e.headerBidder),n.maxduration=e.maxduration,n.playbackmethod=e.playbackmethod,n.position=e.position,n}emitBuildAndExecuteVastUrlRequestedEvent(t){let n;t.maxduration&&(n=1e3*t.maxduration),t.playbackmethod&&this.mapPlayBackMethodForVast(t.playbackmethod);const i=this.vpmute&&this.vpa,r=m(m({elementIds:t.elementsIDs,targeting:t.targeting?t.targeting.filter((e=>!!e)).reduce(((e,t)=>new Map([...e,...t])),new Map):new Map},t.callbackInstream?{callbackVastURL:t.callbackInstream}:null),{},{videoParams:m(m(m({iu:"".concat(t.adUnitPaths),description_url:encodeURIComponent(location.href),max_ad_duration:"".concat(n)},i?{vpmute:this.vpmute,vpa:this.vpa}:null),this.tcString?{gdpr_consent:this.tcString}:null),t.position?4===t.position?{vpos:c.D[2]}:{vpos:c.D[t.position]}:null)});this.logger.log({payload:r,namespace:e.PluginName,message:"Event: ".concat(s.w.buildAndExecuteVastUrlRequested,"."),verboseLevel:1}),this.eventBus.emit(s.w.buildAndExecuteVastUrlRequested,r)}mapPlayBackMethodForVast(e){switch(e[0]){case 1:this.vpmute=0,this.vpa="auto";break;case 2:this.vpmute=1,this.vpa="auto";break;case 3:this.vpmute=0,this.vpa="click"}}headerBidderActivated(e){this.headerBiddersActivated.add(e.headerBidder),this.attemptToRunInitialAuction()}attemptToRunInitialAuction(){this.headerBiddersActivated.size===this.config.headerBidders.length&&this.dynamicBidAdjustmentsReady&&(this.eventBus.emit(s.w.headerBiddersReady,{}),this.eventBus.removeMiddleware(e.PluginName,s.w.auctionRequested,this.runAuctionMiddlewareHandler),this.runInitialAuction())}headerBidderDeactivated(e){this.headerBiddersActivated.delete(e.headerBidder),this.headerBiddersActivated.size!==this.config.headerBidders.length&&this.eventBus.emit(s.w.headerBiddersNotReady,{})}onCloneAdUnitsRequested(e){var t;if(this.config.adUnitsInitialLoadElementIDs.find((t=>t===e.cloneFromAdUnitElementId))){for(const t of e.newAdUnitsElementIds)this.config.adUnitsInitialLoadElementIDs.push(t),!this.initialAuctionEventPayload.adUnitsElementIDs.includes(t)&&this.initialAuctionEventPayload.adUnitsElementIDs.push(t);null!==(t=e.ext)&&void 0!==t&&t.removeFromInitialAuction&&(this.initialAuctionEventPayload.adUnitsElementIDs=this.initialAuctionEventPayload.adUnitsElementIDs.filter((t=>t!==e.cloneFromAdUnitElementId)))}else e.newAdUnitsElementIds.forEach((e=>this.adUnitClonesThatShouldNotBeInInitialAuction.add(e)))}runInitialAuction(){this.config.runInitialAuctionOnActivate?(this.logger.log({namespace:e.PluginName,message:"Starting initial auction.",verboseLevel:1,payload:this.initialAuctionEventPayload}),this.runAuction()):(this.logger.log({namespace:e.PluginName,message:"Initial auction waiting on event.",verboseLevel:1,payload:this.initialAuctionEventPayload}),this.eventBus.on(s.w.initialHeaderBiddingAuctionRequested,this.runAuction,!0,e.PluginName))}runAuction(){this.eventBus.detach(s.w.initialHeaderBiddingAuctionRequested,this.runAuction),this.eventBus.emit(s.w.auctionRequested,this.initialAuctionEventPayload)}updateConsentData(e){var t;null!=e&&null!==(t=e.gdpr)&&void 0!==t&&t.tcString&&(this.tcString=e.gdpr.tcString)}runAuctionForAddedAdUnits(e){e.doNotAuction||this.eventBus.emit(s.w.auctionRequested,{adUnitsElementIDs:[e.newAdunitElementId],auctionID:(0,h.$C)()})}runAuctionMiddlewareHandler(e){return this.initialAuctionEventPayload.adUnitsElementIDs.push(...e.adUnitsElementIDs),this.initialAuctionEventPayload.adUnitsElementIDs=[...new Set(this.initialAuctionEventPayload.adUnitsElementIDs)],null}onAdUnitDisplayRequested(e){!this.initialAuctionEventPayload.adUnitsElementIDs.includes(e.elementID)&&!this.config.adUnitsWithExternallyHandledInitialAuction.includes(e.elementID)&&!this.adUnitClonesThatShouldNotBeInInitialAuction.has(e.elementID)&&this.initialAuctionEventPayload.adUnitsElementIDs.push(e.elementID)}},r.PluginName=l.f.HeaderBiddingManagerPlugin,i=r))||i;var y=n(2166);class A{executeBusinessLogicForAdUnitsAmazonMultiFormat(e){}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=b.PluginName;window.pgPluginManager.registerPlugin(E,b,(function(){return S(S({},window.pgPluginManager.getConfig([{runInitialAuctionOnActivate:!1,adUnitsInitialLoadElementIDs:["/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1"],adUnitsWithExternallyHandledInitialAuction:[],headerBidders:["prebid","amazon","specialCase"],headerBiddingFallBackTimeout:3e3,dynamicBidAdjustment:{endpoint:"https://d1zndhgj5c3q5g.cloudfront.net/tooplate.com.json",timeout:400},viewConfigurationID:1135}])),{},{taskHandler:new A(new y.W)})}))},8917:(e,t,n)=>{"use strict";var i,r,o=n(3821),s=n(5675),a=n(6360),d=n(2703);let c=(0,o.Q)()((r=class e extends a.Q{constructor(t){super(t),this.scriptInjected=!1,this.scriptTag=void 0,this.activate=async()=>(this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:1}),await super.activate()),this.deactivate=async()=>(this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:1}),this.eventBus.detachAllForNamespace(e.PluginName),this.removeScriptTag(),await super.deactivate()),this.handleConsentDataUpdated=e=>{this.removeScriptTag(),this.initiateHybridTheory(e)},this.removeScriptTag=()=>{this.scriptTag&&this.scriptTag.remove(),this.scriptInjected=!1,this.scriptTag=void 0},this.initiateHybridTheory=e=>{var t,n;const i=(null==e||null===(t=e.gdpr)||void 0===t?void 0:t.gdprApplies)||e.gdprAppliesBasedOnGeo;null!=e&&null!==(n=e.gdpr)&&void 0!==n&&n.tcString?this.injectScript(i,e.gdpr.tcString):this.injectScript(i)},this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(s.w.consentDataAvailable,this.initiateHybridTheory,!1,e.PluginName),this.eventBus.on(s.w.consentDataUpdated,this.handleConsentDataUpdated,!1,e.PluginName)}injectScript(t,n){if(this.scriptInjected)return;const i=new URL("".concat(this.config.baseUrl).concat(this.config.key));i.searchParams.append("gdpr",t?"1":"0"),n&&i.searchParams.append("gdpr_consent",n),i.searchParams.append("referer_url_enc",encodeURIComponent(window.location.href)),this.scriptTag=document.createElement("script"),this.scriptTag.type="text/javascript",this.scriptTag.async=!0,this.scriptTag.src=i.toString(),document.head.appendChild(this.scriptTag),this.scriptInjected=!0,this.logger.log({message:"Injected script.",namespace:e.PluginName,payload:i.toString(),verboseLevel:1})}},r.PluginName=d.f.HybridTheoryPlugin,i=r))||i;const l=c.PluginName;window.pgPluginManager.registerPlugin(l,c,(function(){return window.pgPluginManager.getConfig([{key:"659e648e04b78dce2b402db5",baseUrl:"https://go.affec.tv/j/",viewConfigurationID:1135,gdprGeos:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LI","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","IS","NO","CH"]}])}))},9659:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(6360),s=n(2703),a=n(8789);let d=function(e){return e.OK="ok",e.RESPONSE_ERROR="f_resp",e.IVJS_ERROR="f_ivjs",e.TIMEOUT_ERROR="f_timo",e.FETCH_NOT_IMPLEMENTED="f_fcni",e}({}),c=function(e){return e.HB_AUCTION="hbAuction",e.AD_REQUEST="adRequest",e.AD_SERVER="adServer",e}({});var l,u,p=n(2101);let h=(0,i.Q)()((u=class e extends o.Q{constructor(t){super(t),this.riskLevel=0,this.responseKeyword=d.RESPONSE_ERROR,this.eventBufferRunAuction=[],this.eventBufferRefreshRequested=[],this.activate=async()=>(this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:1}),await this.setRiskLevel(),await super.activate()),this.deactivate=async()=>(this.eventBufferRunAuction=[],this.eventBufferRefreshRequested=[],this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),this.riskLevel=0,this.responseKeyword=d.RESPONSE_ERROR,await super.deactivate()),this.runAuctionMiddlewareHandler=this.runAuctionMiddlewareHandler.bind(this),this.refreshRequestedMiddlewareHandler=this.refreshRequestedMiddlewareHandler.bind(this),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){this.config.blockingType===c.HB_AUCTION?this.eventBus.addMiddleware(s.f.InvalidTrafficPlugin,p.h.InvalidTrafficAuctionRequestedMiddleware,r.w.auctionRequested,this.runAuctionMiddlewareHandler,!0):this.eventBus.addMiddleware(s.f.InvalidTrafficPlugin,p.h.InvalidTrafficAdUnitAdServerRefreshRequestedMiddleware,r.w.adUnitAdServerRefreshRequested,this.refreshRequestedMiddlewareHandler,!0)}registerEventListenersHook(){}async setRiskLevel(){const t=new AbortController,n=setTimeout((()=>t.abort()),this.config.fetchTimeout);try{fetch(this.config.serviceUrl,{method:"GET",signal:t.signal}).then((t=>{if(!t.ok)return this.logger.error({namespace:e.PluginName,message:"Error fetching IVT data. Continuing with risk level fail f_resp. Response ".concat(t),type:a.f.ErrorFetchingIvtData,verboseLevel:1}),this.responseKeyword=d.RESPONSE_ERROR,void this.handleRiskLevel();t.json().then((t=>{this.logger.log({message:"IVT data fetched.",namespace:e.PluginName,verboseLevel:3,payload:{data:t}}),this.riskLevel=parseInt(t.riskLevel),this.responseKeyword=d.OK,this.handleRiskLevel()})).catch((t=>{this.logger.error({namespace:e.PluginName,message:"Error resolving IVT data. Continuing with risk level fail f_resp. Error ".concat(t),type:a.f.ErrorFetchingIvtData,verboseLevel:1}),this.responseKeyword=d.IVJS_ERROR,this.handleRiskLevel()})),clearTimeout(n)})).catch((t=>{this.logger.error({namespace:e.PluginName,message:"Error fetching IVT data. Continuing with risk level fail f_timo. Error ".concat(t),type:a.f.ErrorFetchingIvtData,verboseLevel:1}),this.responseKeyword=d.TIMEOUT_ERROR,this.handleRiskLevel()}))}catch(t){this.logger.error({namespace:e.PluginName,message:"Fetch not implemented. Continuing with risk level fail f_fcni",type:a.f.ErrorFetchingIvtData,verboseLevel:1}),this.responseKeyword=d.FETCH_NOT_IMPLEMENTED,this.handleRiskLevel()}}handleRiskLevel(){if(this.config.blockingType!==c.AD_SERVER&&this.shouldBlock())return this.logger.log({message:"IVT data fetched. IVT Detected. Blocking ".concat(this.config.blockingType,"."),namespace:e.PluginName,verboseLevel:3}),this.eventBufferRunAuction=[],void(this.eventBufferRefreshRequested=[]);this.config.blockingType===c.AD_SERVER&&this.eventBus.emit(r.w.attachKeyValueToAllAdUnitsRequested,{key:this.config.key,value:this.responseKeyword===d.OK?"".concat(this.riskLevel):this.responseKeyword}),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName);for(const e of this.eventBufferRunAuction)this.eventBus.emit(r.w.auctionRequested,e);this.eventBufferRunAuction=[];for(const e of this.eventBufferRefreshRequested)this.eventBus.emit(r.w.adUnitAdServerRefreshRequested,e);this.eventBufferRefreshRequested=[]}shouldBlock(){return!(this.responseKeyword===d.OK||!this.config.blockOnError)||this.riskLevel>=this.config.blockOnLevel}runAuctionMiddlewareHandler(e){return this.eventBufferRunAuction.push(e),e}refreshRequestedMiddlewareHandler(e){return this.eventBufferRefreshRequested.push(e),e}},u.PluginName=s.f.InvalidTrafficPlugin,l=u))||l;const g=h.PluginName;window.pgPluginManager.registerPlugin(g,h,(function(){return window.pgPluginManager.getConfig([{viewConfigurationID:1135,blockingType:"adServer",fetchTimeout:2e3,serviceUrl:"https://ivt.fms.azerion.com/",blockOnError:!1,blockOnLevel:0,key:"pg_ivt"}])}))},9564:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(6360),s=n(7267),a=n(2703),d=n(329);let c=function(e){return e.TOP_CENTER="top-center",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e}({});function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h{constructor(e,t,n){this.eventBus=t,this.logger=n,this.floatingStyleTop="position: fixed; top: 0; left: 0; width: 100% !important; padding: 5px; transition: all 0.3s ease-in-out; display: flex; justify-content: center; align-items: center;",this.floatingStyleBottom="position: fixed; bottom: 0; left: 0; width: 100% !important; padding: 5px; transition: all 0.3s ease-in-out; display: flex; justify-content: center; align-items: center;",this.headerScrolls=void 0,this.addedElements=new Set,this.headerScrollingElement=null,this.headerScrollQue=[],this.elementsAlreadyCloned=new Set,this.canUseTop=!0,this.canUseBottom=!0,this.hptoBidSignals=new Set,this.blockedHeaderScrolls=new Set,this.handleAUnitAdditionalSlotCreated=this.handleAUnitAdditionalSlotCreated.bind(this),this.handleAdUnitRenderedBidder=this.handleAdUnitRenderedBidder.bind(this),this.handleSlotViewabilityChanged=this.handleSlotViewabilityChanged.bind(this),this.setTopSideOfViewportOccupied=this.setTopSideOfViewportOccupied.bind(this),this.setBottomSideOfViewportOccupied=this.setBottomSideOfViewportOccupied.bind(this),this.handleSkinAdRenderRequested=this.handleSkinAdRenderRequested.bind(this),this.headerScrolls=new Map;for(const t of e)t.headerScroll&&this.headerScrolls.set(t.current,u(u({},t.headerScroll),{},{elementId:t.current,timeout:0,hasScrolled:!1,loaded:!1,isVisible:!1}))}activate(){this.logger.log({message:"Activate service.",namespace:h.ServiceName,verboseLevel:3}),this.eventBus.on(r.w.adUnitAdditionalSlotCreated,this.handleAUnitAdditionalSlotCreated,!0,h.ServiceName),this.eventBus.on(r.w.skinAdRenderRequested,this.handleSkinAdRenderRequested,!0,h.ServiceName),this.eventBus.on(r.w.adUnitRenderedBidder,this.handleAdUnitRenderedBidder,!0,h.ServiceName),this.eventBus.on(r.w.slotViewabilityChanged,this.handleSlotViewabilityChanged,!0,h.ServiceName),this.eventBus.on(r.w.topSideOfViewportOccupied,this.setTopSideOfViewportOccupied,!0,h.ServiceName),this.eventBus.on(r.w.bottomSideOfViewportOccupied,this.setBottomSideOfViewportOccupied,!0,h.ServiceName),0===this.headerScrolls.size&&(this.logger.log({message:"No header scrolls, freeing up top position of the viewport for usage.",namespace:h.ServiceName,verboseLevel:1}),this.eventBus.emit(r.w.topSideOfViewportOccupied,!1)),0!==this.headerScrolls.size&&Array.from(this.headerScrolls.values()).filter((e=>e.position!==c.TOP_CENTER)).length===this.headerScrolls.size&&(this.logger.log({message:"Only non ".concat(c.TOP_CENTER," positioned header scrolls found, freeing up top position of the viewport for usage."),namespace:h.ServiceName,verboseLevel:1}),this.eventBus.emit(r.w.topSideOfViewportOccupied,!1))}deactivate(){for(const e of this.addedElements)this.headerScrolls.delete(e);this.headerScrollingElement=null,this.headerScrollQue=[],this.elementsAlreadyCloned=new Set,this.addedElements=new Set,this.eventBus.detachAllForNamespace(h.ServiceName)}handleAUnitAdditionalSlotCreated(e){this.headerScrolls.has(e.adUnitElementId)&&!this.elementsAlreadyCloned.has(e.adUnitElementId)&&(this.headerScrolls.set(e.newAdunitElementId,this.headerScrolls.get(e.adUnitElementId)),this.addedElements.add(e.newAdunitElementId),this.elementsAlreadyCloned.add(e.adUnitElementId))}handleAdUnitRenderedBidder(e){if(!this.headerScrolls.has(e.slotID)||e.isEmpty)return;const t=e.slotID,n=this.headerScrolls.get(t);if(n.maxHeight&&e.creativeHeight>n.maxHeight)return void(n.hasScrolled=!0);n.loaded=!0,this.logger.log({message:"Clearing timeout for slot ".concat(t,", because a load event has been emitted."),namespace:h.ServiceName,verboseLevel:1}),window.clearTimeout(n.timeout);const i=e.bidders.filter((e=>"amazon"!==e&&"google"!==e)).length>0;if(this.hptoBidSignals.has(t)&&i)return this.logger.log({message:"HPTO was flagged for ".concat(t," and a prebid served. Aborting header scroll."),namespace:h.ServiceName,verboseLevel:1}),this.hptoBidSignals.delete(t),void this.blockedHeaderScrolls.add(t);for(const i of e.bidders)if((n.bidderCodeExceptions||[]).includes(i))return this.logger.log({message:"Bidder ".concat(i," rendered for ").concat(t," and it's in the list of excluded bidders. Aborting header scroll."),namespace:h.ServiceName,verboseLevel:1}),void this.blockedHeaderScrolls.add(t);this.blockedHeaderScrolls.delete(t),this.initiateHeaderScroll(n)}handleSlotViewabilityChanged(e){if(!this.headerScrolls.has(e.elementId)||this.blockedHeaderScrolls.has(e.elementId))return;const t=this.headerScrolls.get(e.elementId);t.isVisible=e.isVisible,t.isVisible||t.hasScrolled||!t.loaded||(this.logger.log({message:"Clearing timeout for slot ".concat(e.elementId,", because visibility has changed."),namespace:h.ServiceName,verboseLevel:1}),window.clearTimeout(t.timeout)),this.initiateHeaderScroll(t)}initiateHeaderScroll(e){this.shouldScroll(e)&&(this.logger.log({message:"Enabling header scroll for slot ".concat(e.elementId,"."),namespace:h.ServiceName,verboseLevel:1}),this.triggerHeaderScroll(e)),this.shouldQue(e)&&(this.logger.log({message:"Queuing header scroll for slot ".concat(e.elementId,"."),namespace:h.ServiceName,verboseLevel:1}),this.headerScrollQue.push(e)),e.isVisible&&!e.hasScrolled&&e.loaded&&(e.timeout=window.setTimeout((()=>{this.logger.log({message:"Setting hasScrolled for ".concat(e.elementId," to true due to viewable time criteria being met."),namespace:h.ServiceName,verboseLevel:1}),e.hasScrolled=!0}),1e3*e.viewableTime))}setTopSideOfViewportOccupied(e){this.canUseTop=!e}setBottomSideOfViewportOccupied(e){this.canUseBottom=!e}shouldScroll(e){return!e.isVisible&&!e.hasScrolled&&!this.headerScrollingElement&&e.loaded}shouldQue(e){return!e.isVisible&&!e.hasScrolled&&!!this.headerScrollingElement&&this.headerScrollingElement!=e.elementId&&e.loaded&&!this.headerScrollQue.some((t=>t.elementId===e.elementId))}triggerHeaderScroll(e){const t=document.getElementById(e.elementId);if(!this.canUseBottom&&!this.canUseTop&&e.position===c.TOP_CENTER)return this.logger.log({message:"Both top and bottom positions are used and position is ".concat(c.TOP_CENTER,". Shutting down header scroll service."),namespace:h.ServiceName,verboseLevel:3}),void this.deactivate();if(!t)return void this.logger.log({message:"Cannot find element for ".concat(e.elementId,"."),namespace:h.ServiceName,verboseLevel:3});if(null==t||!t.parentElement||null==t||!t.parentElement.classList.contains(s.W.AD_WRAPPER_CLASS))return void this.logger.log({message:"Cannot find wrapping element for ".concat(e.elementId,"."),namespace:h.ServiceName,verboseLevel:3});const n=t.parentElement;if(n.getBoundingClientRect().top>0)return void this.logger.log({message:"Element ".concat(e.elementId," is below the viewport. Skipping header scroll."),namespace:h.ServiceName,verboseLevel:3});const i=document.createElement("div");if(this.headerScrollingElement=e.elementId,i.style.cssText=n.style.cssText,this.applyStyles(n,i,e),window.setTimeout((()=>{const t=n.getBoundingClientRect();switch(e.position){case c.TOP_LEFT:n.style.top="-".concat(t.height,"px"),n.style.left="calc(50% - ".concat(t.width/2,"px)");break;case c.TOP_RIGHT:n.style.top="-".concat(t.height,"px"),n.style.right="calc(50% - ".concat(t.width/2,"px)");break;case c.BOTTOM_LEFT:n.style.bottom="-".concat(t.height,"px"),n.style.left="calc(50% - ".concat(t.width/2,"px)");break;case c.BOTTOM_RIGHT:n.style.bottom="-".concat(t.height,"px"),n.style.right="calc(50% - ".concat(t.width/2,"px)");break;default:this.canUseTop?n.style.top="-".concat(t.height,"px"):n.style.bottom="-".concat(t.height,"px")}window.setTimeout((()=>{this.revertStyles(n,i,e)}),300)}),1e3*e.floatFor),!this.canUseTop||!e.floatingMenu)return;const r=document.querySelector(e.floatingMenu.selector);if(!r||e.position!==c.TOP_CENTER)return void this.logger.log({message:"Floating menu was defined for element ".concat(e.elementId,", but could not be found in the DOM or position is not TOP_CENTER."),namespace:h.ServiceName,verboseLevel:3});this.adjustFloatingMenu(n,r,e);const o=new MutationObserver((t=>{this.adjustFloatingMenu(n,r,e)}));o.observe(r,{attributes:!0,childList:!1,characterData:!1}),window.setTimeout((()=>{o.disconnect()}),1e3*e.floatFor)}adjustFloatingMenu(e,t,n){n.floatingMenu&&(t.matches(n.floatingMenu.contractedSelector)?e.style.top="0":e.style.top="".concat(t.getBoundingClientRect().height,"px"))}revertStyles(e,t,n){e.style.cssText=t.style.cssText;for(const e of n.zIndexFixes||[]){const t=document.querySelector(e.selector);t&&t instanceof HTMLElement&&(t.style.cssText="".concat(e.oldStyles))}if(this.headerScrollingElement=null,this.canUseTop&&this.eventBus.emit(r.w.topSideOfViewportOccupied,!1),n.hasScrolled=!0,t.remove(),this.headerScrollQue.length>0){const e=this.headerScrollQue.shift();this.triggerHeaderScroll(e)}}applyStyles(e,t,n){var i,r,o,s,a;e.insertAdjacentElement("beforebegin",t);const d=(n.scaling||100)/100,l=1/d;switch(n.position){case c.TOP_LEFT:e.style.cssText="position: fixed; padding: ".concat(Math.round(5*l),"px;transition: all 0.3s ease-in-out 0s;display: flex;justify-content: center;align-items: center;top: ").concat(n.offset?"".concat(n.offset,"px"):0,"; left: 0;transform-origin: top left; transform: scale(").concat(d,"); z-index: ").concat(null!==(i=n.zIndex)&&void 0!==i?i:9999," !important;");break;case c.TOP_RIGHT:e.style.cssText="position: fixed; padding: ".concat(Math.round(5*l),"px;transition: all 0.3s ease-in-out 0s;display: flex;justify-content: center;align-items: center;top: ").concat(n.offset?"".concat(n.offset,"px"):0,"; right: 0;transform-origin: top right; transform: scale(").concat(d,"); z-index: ").concat(null!==(r=n.zIndex)&&void 0!==r?r:9999," !important;");break;case c.BOTTOM_LEFT:e.style.cssText="position: fixed; padding: ".concat(Math.round(5*l),"px;transition: all 0.3s ease-in-out 0s;display: flex;justify-content: center;align-items: center;bottom: ").concat(n.offset?"".concat(n.offset,"px"):0,"; left: 0;transform-origin: bottom left; transform: scale(").concat(d,"); z-index: ").concat(null!==(o=n.zIndex)&&void 0!==o?o:9999," !important;");break;case c.BOTTOM_RIGHT:e.style.cssText="position: fixed; padding: ".concat(Math.round(5*l),"px;transition: all 0.3s ease-in-out 0s;display: flex;justify-content: center;align-items: center;bottom: ").concat(n.offset?"".concat(n.offset,"px"):0,"; right: 0;transform-origin: bottom right; transform: scale(").concat(d,"); z-index: ").concat(null!==(s=n.zIndex)&&void 0!==s?s:9999," !important;");break;default:e.style.cssText=(this.canUseTop?this.floatingStyleTop:this.floatingStyleBottom)+"z-index: ".concat(null!==(a=n.zIndex)&&void 0!==a?a:9999," !important;")}n.showTimer&&this.injectTimer(e,n,l),e.style.background=n.backgroundColor;for(const e of n.zIndexFixes||[]){const t=document.querySelector(e.selector);t&&t instanceof HTMLElement&&(e.oldStyles=t.style.cssText,t.style.zIndex="".concat(e.zIndex," !important"))}}injectTimer(e,t,n){const i=document.createElement("div");switch(i.style.fontWeight="bold",i.style.position="absolute",i.style.fontSize="15px",i.style.background=t.backgroundColor,i.style.textAlign="center",i.style.width="25px",i.style.transform="scale(".concat(n,")"),i.style.lineHeight="25px",t.position){case c.TOP_LEFT:i.style.transformOrigin="top right",i.style.right="0",i.style.bottom="-25px";break;case c.TOP_RIGHT:i.style.transformOrigin="top left",i.style.left="0",i.style.bottom="-25px";break;case c.BOTTOM_LEFT:i.style.transformOrigin="bottom right",i.style.right="0",i.style.top="-25px";break;case c.BOTTOM_RIGHT:i.style.transformOrigin="bottom left",i.style.left="0",i.style.top="-25px"}const r=document.createElement("span");r.innerText="".concat(t.floatFor),r.style.mixBlendMode="difference",r.style.filter="invert(1)",r.style.padding="5px",i.appendChild(r),e.appendChild(i);const o=window.setInterval((()=>{r.innerText="".concat(parseInt(r.innerText)-1),parseInt(r.innerText)<=0&&(clearInterval(o),i.remove())}),1e3)}handleSkinAdRenderRequested(e){for(const t of e.elementsIDs)this.hptoBidSignals.add(t)}}h.ServiceName="HeaderScrollService";var g,f,m=n(2541),v=n(6811),b=n(8789);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let S=(0,i.Q)()((f=class e extends o.Q{constructor(t){super(t),this.elementIDs=[],this.elementIDsLegacyMapping=new Map,this.newElementIDsStorage=new Map,this.elementIDsToDisplay=new Set,this.adUnitsConfig=void 0,this.elementsWithCustomDataAttributes=void 0,this.mutationObserver=void 0,this.blockedUnits=new Map,this.processedNodes=new Set,this.elementsWithImmutableIds=new Set,this.headerScrollService=void 0,this.logger.log({namespace:e.PluginName,message:"Initialize plugin.",payload:t}),this.adUnitsConfig=this.config.config,this.initializeElementIDsToDisplay=this.initializeElementIDsToDisplay.bind(this),this.handleAdUnitsRemovedFromUsage=this.handleAdUnitsRemovedFromUsage.bind(this),this.removeAdUnits=this.removeAdUnits.bind(this),this.readdAdUnits=this.readdAdUnits.bind(this),this.replaceCustomTagWithDiv=this.replaceCustomTagWithDiv.bind(this),this.initialize=this.initialize.bind(this),this.mutationObserverCallback=this.mutationObserverCallback.bind(this),this.handleCloneAdUnits=this.handleCloneAdUnits.bind(this),this.addImmutableElementId=this.addImmutableElementId.bind(this),this.setProductInfo=this.setProductInfo.bind(this),this.mutationObserver=new MutationObserver((e=>window.setTimeout(this.mutationObserverCallback,0,e)))}registerMiddlewaresHook(){this.config.slotFilteringService.registerMiddlewares()}registerEventListenersHook(){this.eventBus.on(r.w.adUnitsRemovedFromUsage,this.handleAdUnitsRemovedFromUsage,!1,e.PluginName),this.eventBus.on(r.w.addImmutableElementId,this.addImmutableElementId,!1,e.PluginName),this.eventBus.on(r.w.adUnitsBlockedFromUsage,this.removeAdUnits,!1,e.PluginName),this.eventBus.on(r.w.adUnitsUnblockedFromUsage,this.readdAdUnits,!1,e.PluginName),this.eventBus.on(r.w.cloneAdUnitsRequested,this.handleCloneAdUnits,!0,e.PluginName),this.config.slotStyleService.registerEventListeners(),this.config.slotScalingService.registerEventListeners(),this.config.viewabilityTracker.registerEventListeners()}beforeActivate(){return this.logger.log({namespace:e.PluginName,message:"Before activate plugin.",verboseLevel:3}),super.beforeActivate()}async activate(){this.logger.log({namespace:e.PluginName,message:"Activate plugin",verboseLevel:3}),this.headerScrollService=new h(this.config.elements.filter((e=>!!e.headerScroll)),this.eventBus,this.logger),this.headerScrollService.activate();const t=await super.activate();return this.initialize(),t}async deactivate(){var t;return this.mutationObserver.disconnect(),this.eventBus.detachAllForNamespace(e.PluginName),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),null===(t=this.headerScrollService)||void 0===t||t.deactivate(),this.config.slotStyleService.deactivate(),this.config.slotScalingService.deactivate(),this.config.slotFilteringService.deactivate(),this.config.reactiveService.deactivate(),this.config.viewabilityTracker.deactivate(),await super.deactivate()}initialize(){this.config.slotStyleService.init(),this.config.outOfPageElementIds.forEach((e=>this.config.slotFilteringService.addSlot(e)));const t=()=>{this.initializeElementIDsToDisplay(),this.createPixelsIfNotExist(),document.removeEventListener("DOMContentLoaded",t),Array.from(this.elementIDsToDisplay).forEach((e=>this.displayElement(e))),this.mutationObserver.observe(document,{childList:!0,subtree:!0,attributes:!0}),window.setInterval((()=>{const e=this.mutationObserver.takeRecords();e.length&&this.mutationObserverCallback(e)}),500),this.logger.log({message:"Displaying elements finished after DOM loaded.",namespace:e.PluginName,verboseLevel:3,payload:this.elementIDsToDisplay}),this.config.slotFilteringService.init()};"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t),this.config.reactiveService.init()}mutationObserverCallback(e){e.forEach((e=>{"attributes"===e.type&&this.processAttributeChange(e),e.addedNodes.forEach((e=>{e&&this.processAddedAdSlots(e)}))}))}createPixelsIfNotExist(){for(const e of this.config.pixelElementIds){let t=document.getElementById(e);t||(t=document.createElement("div"),t.id=e,document.body.appendChild(t));const n=(0,d.c$)(t);if(!n)return;n.style.height="1px",n.style.width="1px",n.style.float="left",n.style.overflow="hidden"}}processAttributeChange(e){var t;if(e.target.style&&"none"===(null===(t=e.target.style)||void 0===t?void 0:t.display)&&(e.target.id&&this.elementIDs.includes(e.target.id)||this.elementIDs.includes(e.target instanceof Element&&e.target.getAttribute(this.adUnitsConfig.customTagDataAttribute)||"")))e.target.style.display="";else if(("id"===e.attributeName||e.attributeName===this.adUnitsConfig.customTagDataAttribute)&&e.target instanceof Element){if(this.processedNodes.has(e.target))return;this.processNode(e.target)}}initializeElementIDsToDisplay(){this.elementIDs.push(...this.config.elements.filter((e=>e.sizes.length)).map((e=>e.current))),this.elementIDsLegacyMapping=this.config.elements.reduce(((e,t)=>(t.sizes.length&&t.legacy&&(e.set(t.legacy,t.current),this.elementIDsToDisplay.add(t.legacy)),e)),new Map),this.elementIDs.forEach((e=>this.elementIDsToDisplay.add(e)))}displayElement(e){const t=document.getElementById(e);let n=!1;const i=this.getElementConfig(e);if(null!=i&&i.sizeMapping&&(i.sizes=this.config.sizeMappingService.getSizesForCurrentViewport(null==i?void 0:i.sizeMapping),0===i.sizes.length))return;t&&(this.processedNodes.add(t),this.config.slotStyleService.setContainerStyles(e),this.setProductInfo(e,e),this.adUnitDisplayRequest(e),this.config.viewabilityTracker.registerViewabilityTracking(t),n=!0);const o=this.getElementsWithCustomDataAttributes();for(let t=0;t<o.length;t++){let i=o[t];if(i.getAttribute(this.adUnitsConfig.customTagDataAttribute)===e){if(n){this.processAddedSlot(i,e);continue}i=this.replaceCustomTagWithDiv(i);const t=this.getAdUnitElementId(e);i.id=t,this.processedNodes.add(i),this.config.slotStyleService.setContainerStyles(t),this.setProductInfo(t,e),this.adUnitDisplayRequest(t);const o=document.getElementById(t);o&&this.config.viewabilityTracker.registerViewabilityTracking(o),n=!0,this.eventBus.emit(r.w.adUnitCustomPropertyProcessed,t)}}}adUnitDisplayRequest(t){const n={elementID:t};if(this.config.adUnitsUsingAmazonMultiFormatElementIdsMap&&Object.keys(this.config.adUnitsUsingAmazonMultiFormatElementIdsMap).includes(t)&&document.getElementById(t)){const e=this.config.adUnitsUsingAmazonMultiFormatElementIdsMap[t];document.getElementById(t).id=e,n.elementID=e}this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.adUnitDisplayRequested,"."),verboseLevel:3,payload:n}),this.config.slotFilteringService.addSlot(t),this.config.adUnitsUsingAmazonMultiFormatElementIdsMap&&this.config.adUnitsUsingAmazonMultiFormatElementIdsMap[t]&&this.config.slotFilteringService.addSlot(this.config.adUnitsUsingAmazonMultiFormatElementIdsMap[t]),this.eventBus.emit(r.w.adUnitDisplayRequested,n)}getElementConfig(e){return this.config.elements.find((t=>this.elementIDsLegacyMapping.get(e)?t.legacy===e:t.current===e))}processAddedAdSlots(e){if(this.processNode(e),e&&void 0!==e.children&&e.children.length>0)for(const t in e.children)this.processAddedAdSlots(e.children[t])}processNode(e){let t;e&&this.elementHasIdAttributeWithAdUnitValue(e)?(t=e.attributes.id.value,this.processAddedSlot(e,t)):e&&this.elementHasCustomDataAttribute(e)&&(t=e.attributes[this.adUnitsConfig.customTagDataAttribute].value,this.processAddedSlot(e,t))}replaceCustomTagWithDiv(e){if(!e||!e.nodeName||e.nodeName.toLowerCase()!==this.config.config.customTagTagName.toLowerCase())return e;const t=document.createElement("div");t.setAttribute("id",e.id);for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];t.setAttribute(i.name,i.value)}return this.processedNodes.has(e)&&this.processedNodes.delete(e),e.parentNode.replaceChild(t,e),t}processAddedSlot(t,n){var i;if(!this.isActive()||!t.isConnected)return n;if(this.processedNodes.has(t))return n;this.cullProcessedNodes();const o=this.generateElementId(n);this.setProductInfo(n,o,t.getAttribute(s.W.AD_INSTANCE_TYPE_ATTRIBUTE));let a=this.getElementConfig(n);var d;if((o!==n&&a&&(a=A(A({},a),{},{current:o}),this.config.elements.push(a)),null!==(i=a)&&void 0!==i&&i.sizeMapping)&&(a.sizes=this.config.sizeMappingService.getSizesForCurrentViewport(null===(d=a)||void 0===d?void 0:d.sizeMapping),0===a.sizes.length))return o;let c=this.replaceCustomTagWithDiv(t);this.processedNodes.add(c),c.setAttribute("id",o);const l={newAdunitElementId:o,adUnitElementId:this.getAdUnitElementId(n),newSizes:[]};return c.hasAttribute(s.W.NO_AUCTION_ATTRIBUTE)&&(l.doNotAuction=!0),this.config.slotFilteringService.addSlot(o),this.config.adUnitsUsingAmazonMultiFormatElementIdsMap&&this.config.adUnitsUsingAmazonMultiFormatElementIdsMap[o]&&this.config.slotFilteringService.addSlot(this.config.adUnitsUsingAmazonMultiFormatElementIdsMap[o]),this.config.slotStyleService.setContainerStyles(o),this.config.viewabilityTracker.registerViewabilityTracking(t),this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.adUnitAdditionalSlotCreated,"."),verboseLevel:3,payload:l}),this.eventBus.emit(r.w.adUnitAdditionalSlotCreated,l),o}getAdUnitElementId(e){return this.elementIDsLegacyMapping.get(e)||e}elementHasIdAttributeWithAdUnitValue(e){return e&&void 0!==e.attributes&&void 0!==e.attributes.id&&this.elementIDs.includes(e.attributes.id.value)}elementHasCustomDataAttribute(e){return e&&void 0!==e.attributes&&void 0!==e.attributes[this.adUnitsConfig.customTagDataAttribute]}getElementsWithCustomDataAttributes(){return this.elementsWithCustomDataAttributes||(this.elementsWithCustomDataAttributes=document.querySelectorAll("[".concat(this.adUnitsConfig.customTagDataAttribute,"]")))}generateElementId(e){return this.elementsWithImmutableIds.has(e)?e:this.config.slotFilteringService.hasSlot(e)?(this.newElementIDsStorage[e]||(this.newElementIDsStorage[e]=1),"".concat(e,"-").concat(this.newElementIDsStorage[e]++)):e}handleAdUnitsRemovedFromUsage(e){this.config.elements=this.config.elements.filter((t=>!e.includes(t.current)))}removeAdUnits(t){const n=this.config.elements.filter((e=>t.elementsIDs.includes(e.current)));for(const e of n)this.blockedUnits.set(e.current,e);this.config.elements=this.config.elements.filter((e=>!t.elementsIDs.includes(e.current))),this.logger.log({namespace:e.PluginName,message:"Filtered elements from config triggered by ".concat(r.w.adUnitsBlockedFromUsage," event."),verboseLevel:1,payload:t});for(const e of t.elementsIDs)this.config.slotStyleService.adUnitStylesRemoved(e)}readdAdUnits(t){this.logger.log({namespace:e.PluginName,message:"Re-adding elements caused by ".concat(r.w.adUnitsUnblockedFromUsage," event."),verboseLevel:1,payload:t});for(const e of t.elementsIDs)this.blockedUnits.has(e)&&(this.config.elements.push(this.blockedUnits.get(e)),this.blockedUnits.delete(e),this.config.slotStyleService.showElementWrapper(e),this.displayElement(e))}addImmutableElementId(e){this.elementsWithImmutableIds.add(e)}setProductInfo(e,t,n){var i,o;if(this.eventBus.emit(r.w.logProductDataRequested,{key:v.p.ProductFormat,value:m._.Banner,adUnitElementId:t}),(0,d.vs)(null===(i=this.getElementConfig(e))||void 0===i?void 0:i.sizes,this.config.hptoSizes)&&this.eventBus.emit(r.w.logProductDataRequested,{key:v.p.ProductFormat,value:m._.Skin,adUnitElementId:t}),t===e&&null!==(o=this.config.elements.find((e=>e.current===t)))&&void 0!==o&&o.headerScroll&&this.eventBus.emit(r.w.logProductDataRequested,{key:v.p.ProductFeature,value:m.x.HeaderScroll,adUnitElementId:t}),n===s.W.DAI_INSTANCE)this.eventBus.emit(r.w.logProductDataRequested,{key:v.p.ProductFeature,value:m.x.DynamicAdInjection,adUnitElementId:t})}cullProcessedNodes(){for(const e of this.processedNodes)e.isConnected||(this.processedNodes.delete(e),[...this.processedNodes].some((t=>t.isConnected&&t.id===e.id))||this.config.slotFilteringService.removeSlot(e.id))}handleCloneAdUnits(t){var n;const i=t.newAdUnitsElementIds.filter((e=>!this.elementIDs.includes(e)));for(const e of i)this.setProductInfo(t.cloneFromAdUnitElementId,e),this.elementIDs.push(e);if(null===(n=t.ext)||void 0===n||!n.delegateToLoad)return;const r=this.config.elements.find((e=>e.current===t.cloneFromAdUnitElementId));if(r)for(const e of i){var o,s,a,d,c,l,u;const n=A(A({},r),{},{hasOwnFormatting:null!==(o=null===(s=t.ext)||void 0===s?void 0:s.hasOwnFormatting)&&void 0!==o&&o,disableCLSFix:null!==(a=null===(d=t.ext)||void 0===d?void 0:d.disableCLSFix)&&void 0!==a?a:r.disableCLSFix,sizeMapping:null!==(c=null===(l=t.overrides)||void 0===l?void 0:l.sizeMapping)&&void 0!==c?c:r.sizeMapping,current:e,legacy:e,styling:null!==(u=t.ext)&&void 0!==u&&u.isCompanionAd?A(A({},r.styling),{},{pgAdWrapperCSS:"position: relative; margin: 0 5px"}):r.styling});this.config.elements.push(n)}else this.logger.warn({namespace:e.PluginName,message:"Load plugin did not find configuration for element ".concat(t.cloneFromAdUnitElementId," and could not create new ad unit instances."),type:b.f.LoadPluginDidNotFindConfiguration,verboseLevel:1})}},f.PluginName=a.f.LoadPlugin,g=f))||g;var I=n(9754),E=n(2166);class _{constructor(e,t){this.namespace="ViewabilityTracker",this.observer=void 0,this.intersectionOptions={root:null,rootMargin:"0px",threshold:.5},this.eventBus=void 0,this.trackedElements=new Set,this.logger=void 0,this.elementStatus=new Map,this.mutationObserver=void 0,this.eventBus=e,this.logger=t,this.handleIntersection=this.handleIntersection.bind(this),this.handleMutations=this.handleMutations.bind(this),this.handleSlotViewabilityReportRequested=this.handleSlotViewabilityReportRequested.bind(this),this.observer=new IntersectionObserver(this.handleIntersection,this.intersectionOptions),this.mutationObserver=new MutationObserver(this.handleMutations)}registerEventListeners(){this.eventBus.on(r.w.slotViewableStatusRequested,this.handleSlotViewabilityReportRequested,!1,this.namespace)}deactivate(){this.eventBus.detachAllForNamespace(this.namespace),this.observer.disconnect(),this.mutationObserver.disconnect()}registerViewabilityTracking(e){this.trackedElements.has(e)||(this.trackedElements.add(e),this.observer.observe(e),e.parentNode&&this.mutationObserver.observe(e.parentNode,{childList:!0}))}handleIntersection(e){for(const t of e)t.target.id&&(this.logger.log({namespace:this.namespace,message:"Slot viewability has changed.",verboseLevel:3,payload:{elementId:t.target.id,isVisible:t.isIntersecting}}),this.elementStatus.set(t.target.id,t.isIntersecting),this.eventBus.emit(r.w.slotViewabilityChanged,{elementId:t.target.id,isVisible:t.isIntersecting}))}handleSlotViewabilityReportRequested(e){e.callback(!!this.elementStatus.get(e.elementId))}handleMutations(e){for(const t of e)for(const e of t.removedNodes)e instanceof HTMLElement&&this.trackedElements.has(e)&&(this.eventBus.emit(r.w.adUnitElementRemoved,e.id),this.logger.log({namespace:this.namespace,message:"Element ".concat(e.id," removed from the page."),verboseLevel:3}))}}let x=function(e){return e.NEVER="never",e.ALWAYS="always",e.WHEN_STATIC="when-static",e.WHEN_DYNAMIC="when-dynamic",e}({});var P=n(6075),T=n.n(P);n(3870);var O=n(5450),C=n(7018);const R=()=>Object.entries(C.b).map((e=>e[1])),U=(T().object({version:T().string().required()}),T().array().items(T().number().integer().positive().allow(0).required()).length(4),T().array().items(T().array().items(T().number().integer().positive().required()).length(2)),T().array().items(T().number().integer().positive().required()).length(2),T().array().items(T().alternatives().try(T().array().items(T().string().optional()).length(1),T().array().items(T().number().integer().positive().optional()).length(2))),T().array().items(T().object({bidder:T().string().required(),bidSource:T().object({client:T().number().integer().positive().optional(),server:T().number().integer().positive().optional()}).min(1).required()})),T().object({deviceTypes:T().array().items(T().string().valid(...Object.entries(O.b).map((e=>e[1])))).min(1).when("state",{is:C.b.Excludes,then:T().array().max(Object.values(O.b).length-1).messages({"array.max":"Cannot exclude all device types."})}).required(),state:T().string().valid(...R()).required()})),k=T().object({from:T().number().integer().positive().allow(0).optional(),to:T().number().integer().positive().greater(T().ref("from")).optional()}),D=T().object({countryCodes:T().array().items(T().string().valid("AF","AX","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BH","BS","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BV","BR","IO","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","CG","CD","CK","CR","CI","HR","CU","CW","CY","CZ","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KP","KR","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MK","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","SS","ES","LK","SD","SR","SJ","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","US","UM","UY","UZ","VU","VE","VN","VG","VI","WF","EH","YE","ZM","ZW","XK")).min(1),state:T().string().valid(...R()).required()}),B=(T().object({deviceTypes:U.optional(),windowWidth:k.optional(),geoLocation:D.optional(),percentOfTraffic:T().number().integer().min(1).max(100).optional(),customFunction:T().object({functionName:T().string().custom(((e,t)=>{var n,i;return null!==(n=t.state.ancestors[t.state.ancestors.length-1].bundleSettings)&&void 0!==n&&null!==(i=n.customTargetingFunctions)&&void 0!==i&&i.find((t=>t.name===e))?e:t.message({custom:"The custom function '".concat(e,'\' is not defined in "bundleSettings.customTargetingFunctions"!')})})),shouldNegate:T().boolean().optional()}).optional()}).optional(),T().object({deviceTypes:U.optional(),windowWidth:k.optional(),geoLocation:D.optional()}).optional());T().object({targeting:B.optional(),refreshInterval:T().number().integer().positive().required(),cap:T().number().integer().positive().allow(null).optional(),refreshCapPer24Hours:T().number().integer().positive().allow(null).optional(),refreshCapPerSession:T().number().integer().positive().allow(null).optional(),refreshOutOfFocus:T().boolean().optional()}),T().string().pattern(/^\S+$/).messages({"string.pattern.base":"value cannot contain whitespace characters"});class j{constructor(e){this.config=e,this.containerStylesApplied=new Set,this.hasSpinnerStylesApplied=!1,this.handleAdUnitLoaded=this.handleAdUnitLoaded.bind(this),this.handleAdUnitEmptyRendered=this.handleAdUnitEmptyRendered.bind(this),this.handleAdUnitsBeforeApplyingAdServerRefresh=this.handleAdUnitsBeforeApplyingAdServerRefresh.bind(this),this.handleSkinAdRenderRequested=this.handleSkinAdRenderRequested.bind(this),this.stylingElementDestroyed=this.stylingElementDestroyed.bind(this)}registerEventListeners(){this.config.eventBus.on(r.w.adUnitLoaded,this.handleAdUnitLoaded,!1,j.ServiceName),this.config.eventBus.on(r.w.adUnitsBeforeApplyingAdServerRefresh,this.handleAdUnitsBeforeApplyingAdServerRefresh,!1,j.ServiceName),this.config.eventBus.on(r.w.adUnitEmptyRendered,this.handleAdUnitEmptyRendered,!1,j.ServiceName),this.config.eventBus.on(r.w.skinAdRenderRequested,this.handleSkinAdRenderRequested,!1,j.ServiceName),this.config.eventBus.on(r.w.stylingElementsDestroyed,this.stylingElementDestroyed,!1,j.ServiceName),this.config.eventBus.on(r.w.adUnitElementRemoved,(e=>this.containerStylesApplied.delete(e)),!1,j.ServiceName)}init(){this.hasSpinnerStylesApplied=!!document.querySelector("style[data-id=pgStyle]")}deactivate(){document.querySelectorAll(".adSpinner.ad-slot__label").forEach((e=>{e.remove()})),(0,d.LV)(),this.config.eventBus.detachAllForNamespace(j.ServiceName)}setContainerStyles(e){if(this.containerStylesApplied.has(e))return;const t=document.getElementById(e),n=this.config.elements.find((t=>t.current===e)),i=(0,d.w3)((null==n?void 0:n.sizes)||[]);if(!t||!n||!i.length||this.config.pixelElementIds.includes(e))return;if(n.disableWrapperElement||n.hasOwnFormatting)return void this.containerStylesApplied.add(e);const r=null!=t&&t.parentElement&&null!=t&&t.parentElement.classList.contains(s.W.AD_WRAPPER_CLASS)?null==t?void 0:t.parentElement:(0,d.c$)(t);if(r){if(this.config.transferStylesToWrapperDiv&&t&&(r.className=t.className,r.setAttribute("style",t.getAttribute("style")||""),t.className="",t.setAttribute("style","")),r.classList.add(s.W.AD_WRAPPER_CLASS),(0,d.vs)(null==n?void 0:n.sizes,this.config.hptoSizes)){const{height:e}=this.getCLSMaxSize(n);r.style.maxHeight="".concat(e,"px")}if(n.adLabel&&(r.style.position="relative",r.prepend((0,d.O7)(n.adLabel)),n.adLabel.addBackgroundToWrapperDiv&&n.adLabel.backgroundColor&&(r.style.backgroundColor=n.adLabel.backgroundColor),n.adLabel.fontSize&&(r.style.paddingTop="".concat((n.adLabel.verticalPadding||0)+n.adLabel.fontSize,"px"))),this.config.disableCLSFix||n.disableCLSFix||n.startCollapsed===x.ALWAYS||n.hasOwnFormatting)return this.setCustomStyling(n.styling,r,t);if(!this.config.highImpactAdUnits.includes(e)){t&&this.addCLSFix(t,n);(this.config.disableSpinners?null:this.createSpinnerElement(r))&&this.setSpinnerStyles(),this.containerStylesApplied.add(e)}this.setCustomStyling(n.styling,r,t)}}adUnitStylesRemoved(e){this.containerStylesApplied.delete(e);const t=document.getElementById(e);if(!t||null==t||!t.parentElement||null==t||!t.parentElement.classList.contains(s.W.AD_WRAPPER_CLASS))return;const n=t.parentElement;n.style.minWidth="",n.style.minHeight="",n.style.display="none",n.style.justifyContent="",n.style.alignItems="",this.config.logger.log({namespace:j.ServiceName,message:"Removed wrapper styles for ".concat(e," triggered by  ").concat(r.w.adUnitsBlockedFromUsage," event."),verboseLevel:3,payload:{}});const i=n.getElementsByClassName("adSpinner");for(const e of i||[])e.remove();this.config.logger.log({namespace:j.ServiceName,message:"Removed spinners for ".concat(e," triggered by ").concat(r.w.adUnitsBlockedFromUsage," event."),verboseLevel:3,payload:{}})}showElementWrapper(e){const t=document.getElementById(e);null!=t&&t.parentElement&&null!=t&&t.parentElement.classList.contains(s.W.AD_WRAPPER_CLASS)&&(t.parentElement.style.display="flex")}createSpinnerElement(e){if(!e.parentNode)return null;const t=document.createElement("div");return t.innerHTML=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#979797",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(0,0,0,0)";return'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 1000 1000" xml:space="preserve">\n    <g class="az_logo_group">\n      <g><g><g><g>\n        <g class="letter letter__1">\n          <path fill="'.concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M136.3,652.2v53.5c0,7.9-5.7,13.7-13.7,13.7c-5.5,0-13.1-5.7-13.1-13.7c-11.7,9.8-24.8,13.7-40.4,13.7C30.6,719.3,0,690.7,0,652.2s30.6-69.1,69.1-69.1S136.3,613.7,136.3,652.2z M109.5,652.2c0-22.9-17.5-42.3-40.4-42.3s-42.3,19.4-42.3,42.3s19.4,40.4,42.3,40.4C92,692.5,109.5,675,109.5,652.2z"/>\n        </g>\n        <g class="letter letter__2">\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M264.6,705.9c0,7.4-6,13.7-13.4,13.7h-84.9c-5.2,0-10.1-3-12.3-7.6c-2.5-4.9-1.9-10.4,1.4-14.5l68.3-87.9h-57.9c-7.4,0-13.4-6.3-13.4-13.7s6-13.4,13.4-13.4h84.9c5.2,0,10.1,2.7,12.3,7.6c2.5,4.6,1.9,10.1-1.4,14.2l-68.3,88.2h57.9C258.6,692.5,264.6,698.5,264.6,705.9z"/>\n        </g>\n        <g class="letter letter__3">\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M408.2,651c0,7.4-6,13.4-13.7,13.4h-94.2c5.7,16.4,21,28.1,39.3,28.1c6.3,0,17.5-0.5,30.6-9c6.3-4.1,14.7-0.3,18,6.3c3.3,6.8-0.3,13.9-6.6,18c-18,12-31.9,11.7-42.1,11.7c-38,0-68.5-30.9-68.5-68.5c0-38,30.6-68.5,68.5-68.5C372.7,582.5,408.2,606.5,408.2,651z M300.4,637.3h78.9c-5.7-19.1-23.2-27.9-39.6-27.9C321.4,609.5,306.1,621.2,300.4,637.3z"/>\n        </g>\n        <g class="letter letter__4">\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M506.5,596.2c0,7.4-6,13.7-13.7,13.7c-22.9,0-41.5,18.6-41.5,41.5v54.9c0,7.4-6,13.7-13.4,13.7c-7.6,0-13.7-6.3-13.7-13.7v-54.9c0-38,30.9-68.5,68.5-68.5C500.5,582.8,506.5,588.8,506.5,596.2z"/>\n        </g>\n        <g class="letter letter__5">\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M522.6,706.2v-110c0-7.4,6-13.4,13.7-13.4c7.4,0,13.4,6,13.4,13.4v110c0,7.6-6,13.7-13.4,13.7C528.6,719.8,522.6,713.8,522.6,706.2z"/>\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M526.7,563.3c-2.5-2.5-4.1-6-4.1-9.6c0-3.5,1.6-7.1,4.1-9.6s6-4.1,9.6-4.1s7.1,1.6,9.6,4.1s3.8,6,3.8,9.6  c0,3.5-1.4,7.1-3.8,9.6c-2.5,2.5-6,3.8-9.6,3.8S529.2,565.8,526.7,563.3z"/>\n        </g>\n        <g class="letter letter__6">\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M565.8,651c0-38,30.9-68.5,68.5-68.5c38,0,68.5,30.6,68.5,68.5c0,37.7-30.6,68.5-68.5,68.5C596.6,719.5,565.8,688.8,565.8,651z M592.8,651c0,22.7,18.6,41.5,41.5,41.5s41.5-18.8,41.5-41.5c0-22.9-18.6-41.5-41.5-41.5C611.4,609.5,592.8,628.2,592.8,651z"/>\n        </g>\n        <g class="letter letter__7">\n          <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M856,651v54.9c0,7.6-6,13.7-13.7,13.7c-7.4,0-13.4-6-13.4-13.7V651c0-22.9-18.6-41.5-41.5-41.5s-41.5,18.6-41.5,41.5v54.9c0,7.6-6,13.7-13.7,13.7c-7.4,0-13.4-6-13.4-13.7V651c0-38,30.9-68.5,68.5-68.5C825.2,582.5,856,613,856,651z"/>\n        </g>\n      </g></g></g></g>\n      <g class="az__logo">\n        <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M607.4,302c0.7,0.9,1.2,1.5,1.6,2.1c8.1,12.3,13.2,25.8,14.5,40.5c1.1,12.7-0.8,25.1-5.7,36.9c-9.3,22.6-25.2,39.3-46.8,50.5c-16.7,8.7-34.5,12.3-53.2,11.1c-21.8-1.3-41.2-8.8-58.1-22.8c-1.5-1.2-2.9-2.5-4.3-3.9c-25.1-25.8-41.5-56.4-48.7-91.7c-2.5-12.3-3.6-24.6-3.6-37.1c0-17.1,0-34.2,0-51.3c0-10.5-1.8-20.7-5.8-30.5c-10.2-25.3-33-43.7-59.8-48.1c-43.8-7.2-81.7,21.4-90.4,60.9c-1.5,6.8-2,13.7-1.6,20.6c0.1,1.8,0.2,3.6,0.2,5.4c-0.9,0.4-1.1-0.2-1.4-0.6c-3.8-5.5-7.2-11.2-10.3-17.2c-7.7-15-12.7-30.9-15.1-47.7c-4.2-30.7,1.3-59.6,16.8-86.4c19.2-33.4,47.5-56,83.6-69c11.1-4,22.6-6.7,34.3-8c12.9-1.5,25.8-1.4,38.6,0.3c15.6,2.1,30.6,6.3,44.8,13.1c3.1,1.5,6.1,3.1,9,4.8c54.5,32.9,93.7,87.4,107.7,149.5c3,13.4,4.9,27,5.5,40.7c0.2,5.1,0.4,10.2,0.4,15.3c0.1,15.9,0.2,31.7,0.3,47.6c0,2.6,0.2,5.3,0.8,7.7c2.7,10.1,9.2,16.6,19.4,18.8c10.1,2.1,18.5-1.1,25.2-8.9c0.3-0.3,0.5-0.7,0.8-1.1C606.5,303.1,606.8,302.8,607.4,302z"/>\n        <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M365.6,4.1c-1,0.1-2,0.2-3,0.2c-8.3,0.2-16.5,0.9-24.7,2.2c-23,3.8-44.3,12-63.8,24.8c-22.5,14.7-40.7,33.5-53.9,56.9c-9,15.9-14.8,33-17.5,51.1c-2,13.2-2.3,26.4-0.7,39.6c4.6,37.7,20.6,69.8,46.9,97c10.2,10.5,21.6,19.3,34.1,26.9c10.7,6.5,22.3,10.4,34.9,11.3c20.9,1.5,39.6-4.3,56-17.4c3.4-2.7,6.6-5.5,9.9-8.3c0.6-0.5,1.2-0.9,1.8-1.3c0.8,0.5,0.6,1.1,0.6,1.6c0,3.7,0.1,7.5,0,11.2c-0.1,6.6,0.7,13.1,1.7,19.6c3.1,19.9,9.1,39,18,57.1c9.7,19.8,22.4,37.5,38,53.1c1.7,1.8,3.5,3.5,5.2,5.3c-8.2,7.3-40.8,22-61.5,27.7c-34.6,9.6-69.6,11.3-105,5.1c-36.7-6.5-70-20.9-99.7-43.3C90.9,355.7,63.6,234,111,134.6C135.2,84,173,46.7,223.5,22.4C271.8-0.8,324.4-4.2,365.6,4.1z"/>\n        <path fill="').concat(e,'" stroke="').concat(t,'" stroke-width="5" d="M505.4,452c2.7,0.5,5.3,1,7.8,1.4c18.7,3.1,37.1,1.5,54.9-4.9c28.3-10.2,49.6-28.7,63.4-55.5c6.9-13.3,10.2-27.6,10.3-42.5c0.1-15-3.3-29.2-9.6-42.7c-6.4-13.5-15.3-25.1-26.2-35.2c-11.9-10.9-19.6-24.2-23.2-39.9c-9.6-41.7,15.3-82.2,55.4-93.4c27.6-7.7,56.9,0.2,76.8,20.3c25.8,26.1,42.4,57,49.7,93c2.3,11.4,3.6,22.8,3.4,34.4c-0.1,6.3,0,12.7-0.6,19c-1.5,15.2-4.7,30-9.9,44.3c-21,57.7-69.3,101.2-128.7,115.7c-18.1,4.4-36.4,6-55,4.8c-23-1.4-44.9-7.1-65.7-16.9C507.2,453.5,506,453.3,505.4,452z"/>\n      </g>\n    </g>\n  </svg>')}(),t.classList.add("adSpinner"),t.classList.add("ad-slot__label"),e.parentNode.insertBefore(t,e),e.appendChild(t),t}setSpinnerStyles(){if(this.hasSpinnerStylesApplied)return;const e=document.createElement("style");e.setAttribute("data-id","pgStyle"),e.innerHTML="\n    .up-show + .adSpinner {\n      display: none;\n    }\n\n    @keyframes ad-slot__label__letters {\n      0% {\n        opacity: 1;\n      }\n      15% {\n        opacity: 0.65;\n      }\n      30% {\n        opacity: 1;\n      }\n    }\n\n    .adSpinner.ad-slot__label {\n      width: 50px;\n      height: 50px;\n      position: absolute;\n      padding: 5px;\n      border-radius: 100%;\n    }\n\n    .adSpinner.ad-slot__label .az_logo_group {\n      transform: translate(60px, 120px);\n    }\n\n    .adSpinner.ad-slot__label .letter {\n      animation: ad-slot__label__letters 3s ease normal infinite;\n    }\n\n    .adSpinner.ad-slot__label .letter__1 {\n      animation-delay: 0.2s;\n    }\n\n    .adSpinner.ad-slot__label .letter__2 {\n      animation-delay: 0.4s;\n    }\n\n    .adSpinner.ad-slot__label .letter__3 {\n      animation-delay: 0.6s;\n    }\n\n    .adSpinner.ad-slot__label .letter__4 {\n      animation-delay: 0.8s;\n    }\n\n    .adSpinner.ad-slot__label .letter__5 {\n      animation-delay: 1s;\n    }\n\n    .adSpinner.ad-slot__label .letter__6 {\n      animation-delay: 1.2s;\n    }\n\n    .adSpinner.ad-slot__label .letter__7 {\n      animation-delay: 1.4s;\n    }",document.head.appendChild(e),this.hasSpinnerStylesApplied=!0}setCustomStyling(e,t,n){if(!e)return;if(e.pgAdWrapperCSS&&(t.style.cssText+=e.pgAdWrapperCSS),e.adUnitCSS&&(n.style.cssText+=e.adUnitCSS),!e.pgAdWrapperLayoutTemplate||!t.parentNode)return;const i=(0,d.SL)(e.pgAdWrapperLayoutTemplate);if(!i)return void this.config.logger.error({namespace:j.ServiceName,message:"There was pgAdWrapperLayoutTemplate specified for ad unit ".concat(n.id," but element could not be created from it."),type:b.f.AdUnitElementStylingError});const r=i.getElementsByTagName("pg-wrapper-layout");0!==r.length?(t.insertAdjacentElement("afterend",i),r[0].insertAdjacentElement("afterend",t),r[0].remove()):this.config.logger.error({namespace:j.ServiceName,message:"There was expansionWrapperLayoutTemplate specified for ad unit ".concat(n.id," but element was lacking pg-wrapper-layout element."),type:b.f.AdUnitElementStylingError})}addCLSFix(e,t){var n,i,r,o;const a=null!=e&&e.parentElement&&null!=e&&e.parentElement.classList.contains(s.W.AD_WRAPPER_CLASS)?null==e?void 0:e.parentElement:null;if(!a)return;const{width:d,height:c}=this.getCLSMaxSize(t);var l;(null!==(n=t.styling)&&void 0!==n&&n.wrapperMaxWidth&&(a.style.maxWidth="".concat(t.styling.wrapperMaxWidth,"px")),null!==(i=t.styling)&&void 0!==i&&i.wrapperMaxHeight&&(a.style.maxHeight="".concat(t.styling.wrapperMaxHeight,"px")),a.style.minWidth=null!==(r=t.styling)&&void 0!==r&&r.wrapperMaxWidth?"".concat(Math.min(d,t.styling.wrapperMaxWidth),"px"):"".concat(d,"px"),!a.style.minHeight||null!==(o=t.styling)&&void 0!==o&&o.wrapperMaxHeight)&&(a.style.minHeight=null!==(l=t.styling)&&void 0!==l&&l.wrapperMaxHeight?"".concat(Math.min(c,t.styling.wrapperMaxHeight),"px"):"".concat(c,"px"));a.style.display||(a.style.display="flex"),a.style.justifyContent||(a.style.justifyContent="center"),a.style.alignItems||(a.style.alignItems="center")}getCLSMaxSize(e){var t;const n=(0,d.w3)(e.sizes),i=n.filter((e=>!this.config.hptoSizes.some((t=>e[0]===t[0]&&e[1]===t[1]))));!i.length&&n.length&&i.push([1,1]);const r=i.reduce(((e,t)=>Math.max(e,t[0])),-1/0);let o=i.reduce(((e,t)=>Math.max(e,t[1])),-1/0);return null!=e&&null!==(t=e.adLabel)&&void 0!==t&&t.fontSize&&(o+=e.adLabel.fontSize,o+=e.adLabel.verticalPadding||0),{width:r,height:o}}handleAdUnitLoaded(e){this.removeSpinners();const t=this.config.elements.find((t=>t.current===e));if((null==t?void 0:t.startCollapsed)===x.ALWAYS){const n=document.getElementById(e);n&&this.addCLSFix(n,t)}}handleAdUnitEmptyRendered(e){this.removeSpinners()}removeSpinners(){const e=document.getElementsByClassName("adSpinner");for(const t of e)t.style.display="none"}handleSkinAdRenderRequested(e){e.elementsIDs.forEach((e=>this.toggleSkinAdRenderedSlotElementClass(e,!0)))}handleAdUnitsBeforeApplyingAdServerRefresh(e){this.runSublimeCleanup(e),e.elementsIDs.forEach((e=>this.toggleSkinAdRenderedSlotElementClass(e,!1)))}toggleSkinAdRenderedSlotElementClass(e,t){const n=document.getElementById(e);n&&n.classList.toggle("ow-skin-active",t)}runSublimeCleanup(e){e.elementsIDs.some((e=>{var t;return(0,d.vs)(null===(t=this.config.elements.find((t=>t.current===e)))||void 0===t?void 0:t.sizes,this.config.hptoSizes)}))&&(0,d.LV)()}stylingElementDestroyed(e){for(const t of e)this.containerStylesApplied.delete(t)}}j.ServiceName="SlotStyleService";class N{constructor(e){this.config=e,this.handleAdUnitRenderedBidder=this.handleAdUnitRenderedBidder.bind(this)}registerEventListeners(){this.config.eventBus.on(r.w.adUnitRenderedBidder,this.handleAdUnitRenderedBidder,!1,N.ServiceName)}deactivate(){this.config.eventBus.detachAllForNamespace(N.ServiceName)}handleAdUnitRenderedBidder(e){var t,n,i,r;const o=this.config.elements.find((t=>t.current===e.slotID));if(!(null!=o&&null!==(t=o.styling)&&void 0!==t&&t.wrapperMaxWidth||null!=o&&null!==(n=o.styling)&&void 0!==n&&n.wrapperMaxHeight))return void this.config.logger.log({namespace:N.ServiceName,message:"No scaling needed for ".concat(e.slotID,". Properties wrapperMaxHeight and wrapperMaxWidth not set. Returning."),verboseLevel:3});let s=Math.min(((null==o||null===(i=o.styling)||void 0===i?void 0:i.wrapperMaxHeight)||e.creativeHeight)/e.creativeHeight,((null==o||null===(r=o.styling)||void 0===r?void 0:r.wrapperMaxWidth)||e.creativeWidth)/e.creativeWidth);if(s>=1)return void this.config.logger.log({namespace:N.ServiceName,message:"No scaling needed for ".concat(e.slotID,". Returning."),verboseLevel:3});s=parseFloat(s.toFixed(2));const a=document.getElementById(e.slotID);if(!a)return void this.config.logger.warn({namespace:N.ServiceName,message:"No element found for ".concat(e.slotID,". Returning."),type:b.f.LoadPluginDidNotFoundElement,verboseLevel:1,payload:e});const c=a.childNodes.length>1?a.childNodes:[a];a.style.width="initial",a.style.height="initial",a.style.lineHeight="0",a.childNodes.length>1&&(this.config.logger.log({namespace:N.ServiceName,message:"Compound ad unit detected for ".concat(e.slotID,". Resetting width, height and setting line-height to 0. Setting up data-scaled attribute to true."),verboseLevel:3}),a.setAttribute("data-scaled","true"));for(const t of c){if(!(t instanceof HTMLElement)){this.config.logger.warn({namespace:N.ServiceName,message:"Element not an instance of HTMLElement for ad unit ".concat(e.slotID,". Iterating."),type:b.f.LoadPluginDidNotFoundElement,verboseLevel:1,payload:t});continue}let n=t.firstElementChild;if(!(n&&n instanceof HTMLDivElement)){this.config.logger.warn({namespace:N.ServiceName,message:"Frame parent element not an instance of HTMLDivElement or frame parent not found for ad unit ".concat(e.slotID,". Iterating."),type:b.f.LoadPluginDidNotFoundElement,verboseLevel:1,payload:n});continue}const i=n.firstElementChild;i&&i instanceof HTMLIFrameElement?(0,d.JZ)(i,n,s):this.config.logger.warn({namespace:N.ServiceName,message:"Frame element not an instance of HTMLIFrameElement or frame not found for ad unit ".concat(e.slotID,". Iterating."),type:b.f.LoadPluginDidNotFoundElement,verboseLevel:1,payload:i})}}}N.ServiceName="SlotScalingService";var L=n(2101);class M{constructor(e){this.config=e,this.eventBuffer=[],this.elementsExistingOnPage=new Set,this.addToEventBuffer=this.addToEventBuffer.bind(this),this.runEventBuffer=this.runEventBuffer.bind(this),this.config.excludeNotPresentSlotsFromInitialAuction}registerMiddlewares(){this.config.excludeNotPresentSlotsFromInitialAuction&&this.config.eventBus.addMiddleware(M.ServiceName,L.h.AdLoadAuctionRequestedMiddleware,r.w.auctionRequested,this.addToEventBuffer,!0)}init(){this.runEventBuffer()}deactivate(){this.config.eventBus.removeAllMiddlewareForPlugin(M.ServiceName)}addSlot(e){this.elementsExistingOnPage.add(e),this.config.eventBus.emit(r.w.adUnitElementAdded,e),this.config.logger.log({namespace:M.ServiceName,message:"Slot ".concat(e," added to the page."),verboseLevel:3})}removeSlot(e){this.elementsExistingOnPage.delete(e),this.config.eventBus.emit(r.w.adUnitElementRemoved,e),this.config.logger.log({namespace:M.ServiceName,message:"Slot ".concat(e," removed from the page."),verboseLevel:3})}hasSlot(e){return this.elementsExistingOnPage.has(e)}addToEventBuffer(e){return this.eventBuffer.push(e),e}runEventBuffer(){this.config.eventBus.removeAllMiddlewareForPlugin(M.ServiceName),this.config.excludeNotPresentSlotsFromInitialAuction&&this.config.eventBus.addMiddleware(M.ServiceName,L.h.AdLoadAuctionRequestedMiddleware,r.w.auctionRequested,(e=>(e.auctionID!==s.W.INITIAL_AUCTION_ID&&e.auctionID!==s.W.INITIAL_PADO_AUCTION_ID||(e.adUnitsElementIDs=e.adUnitsElementIDs.filter((e=>this.elementsExistingOnPage.has(e)||this.config.elements.some((t=>t.current===e&&t.alwaysIncludeInInitialAuction))))),e)));for(const e of this.eventBuffer)this.config.eventBus.emit(r.w.auctionRequested,e);this.eventBuffer=[]}}M.ServiceName="SlotFilteringService";class z{constructor(e){this.config=e,this.windowResizeCallback=void 0,this.windowResizeCallback=(0,d.sg)(this.resizeCallback.bind(this),250)}init(){window.addEventListener("resize",this.windowResizeCallback)}deactivate(){window.removeEventListener("resize",this.windowResizeCallback)}resizeCallback(){for(const e of this.config.elements){const t=e.sizeMapping?this.config.sizeMappingService.getSizesForCurrentViewport(e.sizeMapping):e.sizes;if(JSON.stringify(e.sizes)!==JSON.stringify(t)){const n=document.getElementById(e.current);if(!n)continue;const i=null==n?void 0:n.parentElement,r=n.cloneNode();if(this.config.slotStyleService.adUnitStylesRemoved(e.current),null!=i&&i.classList.contains(s.W.AD_WRAPPER_CLASS)&&(i.style.minHeight="",0===t.length))return void i.replaceWith(r);n.replaceWith(r)}}}}z.ServiceName="ReactiveService";var F=n(4028),q=n(3081);class H{execute(e,t){return t.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.current===t.current))||e.push(t),e)),[])}}var V=n(7165);class ${execute(e,t){let n=[];const i=Object.values(t);return t=Object.keys(t).map((e=>[e,t[e]])).filter((t=>e.map((e=>e.current)).includes(t[0]))).filter(((e,t)=>i.indexOf(e[1])===t)).reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),e.some((e=>Object.keys(t).includes(e.current)))?(e.forEach((e=>{if(Object.keys(t).includes(e.current)){const i=(0,V.A4)(e);i.current=t[e.current],i.legacy=t[e.current],n.push(i)}n.push(e)})),{updatedAdUnits:n,adUnitsUsingAmazonMultiFormatElementIdsMap:t}):{updatedAdUnits:e,adUnitsUsingAmazonMultiFormatElementIdsMap:t}}}class G{constructor(e,t){this.settingsTargetingServiceOnAdUnit=e,this.contextTypeStrategyFactory=t}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new H),n=(0,V.A4)(e.elements);e.elements=t.executeTaskStrategy(e.elements,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(q.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.elements}})}executeBusinessLogicForAdUnitsAmazonMultiFormat(e){const t=this.contextTypeStrategyFactory.getContext(new $),n=(0,V.A4)(e.elements),{updatedAdUnits:i,adUnitsUsingAmazonMultiFormatElementIdsMap:r}=t.executeTaskStrategy(e.elements,e.adUnitsUsingAmazonMultiFormatElementIdsMap||{});e.elements=i,e.adUnitsUsingAmazonMultiFormatElementIdsMap=r,e.logger.log({namespace:S.PluginName,message:"Before activate task: ".concat(q.w.AD_UNITS_USING_AMAZON_MULTI_FORMAT,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.elements}})}}var W=n(4894);const K=S.PluginName;window.pgPluginManager.registerPlugin(K,S,(function(){let e=window.pgPluginManager.getConfig([{highImpactAdUnits:[],elements:[{current:"tooplatecom47398",legacy:"tooplatecom47398",sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],code:"/8095840,22381294811/.2_A.47398.10_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!1,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47399",legacy:"tooplatecom47399",sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],code:"/8095840,22381294811/.2_A.47399.10_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!1,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47400",legacy:"tooplatecom47400",sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],code:"/8095840,22381294811/.2_A.47400.10_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!1,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47401",legacy:"tooplatecom47401",sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],code:"/8095840,22381294811/.2_A.47401.4_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!1,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47402",legacy:"tooplatecom47402",sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],code:"/8095840,22381294811/.2_A.47402.4_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!1,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47403",legacy:"tooplatecom47403",sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],code:"/8095840,22381294811/.2_A.47403.4_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!1,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47404",legacy:"tooplatecom47404",sizes:[[468,60],[728,90],[970,90],[970,120],[970,250],[750,100],[750,200],[750,300],[930,180],[980,120],[980,250],[980,300],[980,90]],code:"/8095840,22381294811/.2_A.47404.3_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!0,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[468,60]]},{viewportSize:[730,0],sizes:[[728,90],[468,60]]},{viewportSize:[750,0],sizes:[[728,90],[468,60],[750,300],[750,200],[750,100]]},{viewportSize:[930,0],sizes:[[728,90],[468,60],[930,180],[750,300],[750,200],[750,100]]},{viewportSize:[970,0],sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[980,90],[970,250],[980,120],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[980,250],[970,120],[980,300]]},{viewportSize:[0,0],sizes:[]}],alwaysIncludeInInitialAuction:!1},{current:"tooplatecom47406",legacy:"tooplatecom47406",sizes:[[300,100],[300,50],[320,100],[320,50]],code:"/8095840,22381294811/.2_A.47406.28_tooplate.com_tier1",disableCLSFix:!1,hasOwnFormatting:!0,disableWrapperElement:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},alwaysIncludeInInitialAuction:!1}],config:{defaultTagName:"div",customTagTagName:"pgs-ad",customTagDataAttribute:"data-pg-ad-spot"},disableCLSFix:!1,transferStylesToWrapperDiv:!1,hptoSizes:[[1800,1e3],[233,233],[970,1e3],[1920,1200],[1800,200],[10,10],[640,300]],taskHandler:{},sizeMappingService:{},pixelElementIds:[],excludeNotPresentSlotsFromInitialAuction:!0,viewabilityTracker:{},slotStyleService:{},slotScalingService:{},slotFilteringService:{},reactiveService:{},outOfPageElementIds:["/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1"],viewConfigurationID:1135,disableSpinners:!1}]),t=new F.G(I.Q);return e.taskHandler=new G(t,new E.W),e.sizeMappingService=new W.A,e.viewabilityTracker=new _(window.pgPluginManager.baseConfig.eventBus,window.pgPluginManager.baseConfig.logger),e.slotStyleService=new j(e),e.slotScalingService=new N(e),e.slotFilteringService=new M(e),e.reactiveService=new z(e),e}))},8647:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(6360),s=n(2703),a=n(6075),d=n.n(a);const c=d().object({Data:d().array().items(d().object({VariantId:d().string().required(),TrafficPercent:d().number().positive().required(),SSPIds:d().array().items(d().number().integer()).required()})).min(1).required()});let l=function(e){return e[e.pending=0]="pending",e[e.successful=1]="successful",e[e.failed=2]="failed",e}({});var u,p,h=n(2101),g=n(7165),f=n(329),m=n(2541),v=n(6811),b=n(7267);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let S=(0,i.Q)()((p=class e extends o.Q{constructor(t){super(t),this.siteSegmentConfigurationRequestStatus=l.pending,this.optimizedByPadoAdUnitsQueue=[],this.currentSiteSegmentVariantBidders=[],this.currentSiteSegmentVariantId="",this.optimizedByPadoAdUnitsSspsFiltered=!1,this.s2sSspsSiteSegmentVariantId=-1,this.amazonGoogleDeviceMap=void 0,this.amazonGoogleDeviceMap=new Map(t.padoPluginConfig.amazonToGoogleMapping),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t}),this.handleAuctionRequestedMediator=this.handleAuctionRequestedMediator.bind(this),this.fetchSiteSegmentJson=this.fetchSiteSegmentJson.bind(this),this.prepareSiteSegmentJsonUrl=this.prepareSiteSegmentJsonUrl.bind(this),this.validateSiteSegmentJsonResponse=this.validateSiteSegmentJsonResponse.bind(this),this.handleSiteSegmentJsonFetchError=this.handleSiteSegmentJsonFetchError.bind(this),this.chooseSiteSegmentVariant=this.chooseSiteSegmentVariant.bind(this),this.getSspNames=this.getSspNames.bind(this),this.filterHeaderBiddingSetupsSsps=this.filterHeaderBiddingSetupsSsps.bind(this),this.requestAuctionForPadoOptimizedAdUnits=this.requestAuctionForPadoOptimizedAdUnits.bind(this),this.attachCurrentSiteSegmentVariantIdKeyValue=this.attachCurrentSiteSegmentVariantIdKeyValue.bind(this),this.applyFallbackVariantSsps=this.applyFallbackVariantSsps.bind(this),this.handleAdUnitAdditionalSlotCreated=this.handleAdUnitAdditionalSlotCreated.bind(this),this.handleCloneAdUnitsRequested=this.handleCloneAdUnitsRequested.bind(this),this.fetchSiteSegmentJson()}registerMiddlewaresHook(){this.eventBus.addMiddleware(e.PluginName,h.h.PadoAuctionRequestedMiddleware,r.w.auctionRequested,this.handleAuctionRequestedMediator)}registerEventListenersHook(){this.eventBus.on(r.w.adUnitAdditionalSlotCreated,this.handleAdUnitAdditionalSlotCreated,!0,e.PluginName),this.eventBus.on(r.w.cloneAdUnitsRequested,this.handleCloneAdUnitsRequested,!0,e.PluginName)}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.detachAllForNamespace(e.PluginName),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),await super.deactivate()}handleAdUnitAdditionalSlotCreated(e){this.config.padoPluginConfig.adUnitsOptimizedByPado.includes(e.adUnitElementId)&&(this.addAdUnitsToOptimizedByPadoAdUnits([e.newAdunitElementId]),this.optimizedByPadoAdUnitsSspsFiltered||(this.optimizedByPadoAdUnitsSspsFiltered||!this.config.padoPluginConfig.adUnitsOptimizedByPadoToInitialLoad.includes(e.adUnitElementId)?(this.emitFilterPrebidBiddersRequested([e.newAdunitElementId]),this.emitFilterAmazonAdUnitsRequested([e.newAdunitElementId]),this.attachCurrentSiteSegmentVariantIdKeyValue([e.newAdunitElementId]),e.doNotAuction||setTimeout((()=>this.requestAuctionForPadoOptimizedAdUnits([e.newAdunitElementId])),0),this.eventBus.emit(r.w.logProductDataRequested,{adUnitElementId:e.newAdunitElementId,key:v.p.ProductFeature,value:m.x.Pado})):this.addAdUnitsToOptimizedByPadoAdUnitsToInitialLoad([e.newAdunitElementId])))}handleCloneAdUnitsRequested(e){var t;if(!this.config.padoPluginConfig.adUnitsOptimizedByPado.includes(e.cloneFromAdUnitElementId))return;const n=e.newAdUnitsElementIds.filter((e=>!this.config.padoPluginConfig.adUnitsOptimizedByPado.includes(e)));this.addAdUnitsToOptimizedByPadoAdUnits(n),null!=e&&null!==(t=e.ext)&&void 0!==t&&t.isSmartSlotChild||!this.config.padoPluginConfig.adUnitsOptimizedByPadoToInitialLoad.includes(e.cloneFromAdUnitElementId)||this.addAdUnitsToOptimizedByPadoAdUnitsToInitialLoad(n),this.optimizedByPadoAdUnitsSspsFiltered&&(this.emitFilterPrebidBiddersRequested(n),this.emitFilterAmazonAdUnitsRequested(n),this.attachCurrentSiteSegmentVariantIdKeyValue(n),n.forEach((e=>{this.eventBus.emit(r.w.logProductDataRequested,{adUnitElementId:e,key:v.p.ProductFeature,value:m.x.Pado})})))}addAdUnitsToOptimizedByPadoAdUnits(e){this.config.padoPluginConfig.adUnitsOptimizedByPado=[...new Set([...this.config.padoPluginConfig.adUnitsOptimizedByPado,...e])]}addAdUnitsToOptimizedByPadoAdUnitsToInitialLoad(e){this.config.padoPluginConfig.adUnitsOptimizedByPadoToInitialLoad=[...new Set([...this.config.padoPluginConfig.adUnitsOptimizedByPadoToInitialLoad,...e])]}handleAuctionRequestedMediator(t){if(this.optimizedByPadoAdUnitsSspsFiltered)return this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),t;const n=(0,g.A4)(t);return n.adUnitsElementIDs=n.adUnitsElementIDs.filter((e=>!this.config.padoPluginConfig.adUnitsOptimizedByPado.includes(e)||this.optimizedByPadoAdUnitsQueue.push(e)&&!1)),this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.auctionRequested,"."),verboseLevel:1,payload:n}),n}async fetchSiteSegmentJson(){const e=this.prepareSiteSegmentJsonUrl();if(null===e)return void this.applyFallbackVariantSsps();const t=await fetch(e,{method:"GET",mode:"cors"}).then(this.validateSiteSegmentJsonResponse).catch(this.handleSiteSegmentJsonFetchError);null!==t?this.chooseSiteSegmentVariant(t):this.applyFallbackVariantSsps()}prepareSiteSegmentJsonUrl(){const e=this.config.padoPluginConfig.padoSiteSegmentJsonEndpoint,t=this.config.padoPluginConfig.publisherPropertyId,n=window.pgGeo||null,i=this.amazonGoogleDeviceMap.get(window.pgDevice||null)||null;return null===n||null===i?null:"".concat(e).concat(t,"/").concat(n,"_").concat(i,".json").toLowerCase()}async validateSiteSegmentJsonResponse(e){const{error:t,value:n}=c.validate(await e.json());return t?(this.siteSegmentConfigurationRequestStatus=l.failed,null):(this.siteSegmentConfigurationRequestStatus=l.successful,n)}handleSiteSegmentJsonFetchError(t){return this.logger.log({message:"Fetching Site Segment JSON Failed",namespace:e.PluginName,verboseLevel:3,payload:t}),null}chooseSiteSegmentVariant(e){const t=100*Math.random(),n=e.Data;for(let e=0;e<n.length;e++)if(n[e].TrafficPercent=0===e?n[e].TrafficPercent:n[e].TrafficPercent+n[e-1].TrafficPercent,t<n[e].TrafficPercent){this.currentSiteSegmentVariantId=n[e].VariantId,this.currentSiteSegmentVariantBidders=this.getSspNames(n[e].SSPIds);break}this.filterHeaderBiddingSetupsSsps()}getSspNames(e){let t=e,n=this.config.padoPluginConfig.sspsWhichShouldAlwaysBeIncluded;const i=this.config.padoPluginConfig.s2sSsps;if(t.includes(this.s2sSspsSiteSegmentVariantId)){t=t.filter((e=>e!==this.s2sSspsSiteSegmentVariantId)),n=[...n,...t.map((e=>this.config.padoPluginConfig.sspIdsMapping[e]))];for(const e in i){const t=i[e];t.supportsParallelBidding?n.push(e):t.supportsParallelBidding||n.includes(t.clientSideBidder)?t.supportsParallelBidding||!n.includes(t.clientSideBidder)||!this.config.padoPluginConfig.sspsWhichShouldAlwaysBeIncluded.includes(e)||this.config.padoPluginConfig.sspsWhichShouldAlwaysBeIncluded.includes(t.clientSideBidder)?!t.supportsParallelBidding&&n.includes(t.clientSideBidder)&&n.includes(e)&&(n=n.filter((t=>t!==e))):n=n.filter((e=>e!==t.clientSideBidder)):n.push(e)}return[...new Set(n)]}return n=[...n,...t.map((e=>this.config.padoPluginConfig.sspIdsMapping[e]))],[...new Set(n)]}filterHeaderBiddingSetupsSsps(){this.emitFilterPrebidBiddersRequested(),this.emitFilterAmazonAdUnitsRequested(),this.optimizedByPadoAdUnitsSspsFiltered=!0,this.attachCurrentSiteSegmentVariantIdKeyValue(this.config.padoPluginConfig.adUnitsOptimizedByPado),this.requestAuctionForPadoOptimizedAdUnits([...new Set([...this.optimizedByPadoAdUnitsQueue,...this.config.padoPluginConfig.adUnitsOptimizedByPadoToInitialLoad])],b.W.INITIAL_PADO_AUCTION_ID),this.config.padoPluginConfig.adUnitsOptimizedByPado.forEach((e=>{this.eventBus.emit(r.w.logProductDataRequested,{adUnitElementId:e,key:v.p.ProductFeature,value:m.x.Pado})}))}emitFilterPrebidBiddersRequested(t){if(this.config.padoPluginConfig.hasPrebid){const n={adUnits:t||this.config.padoPluginConfig.adUnitsOptimizedByPado,bidders:this.currentSiteSegmentVariantBidders};this.logger.log({payload:n,message:"Event: ".concat(r.w.filterPrebidBiddersRequested,"."),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(r.w.filterPrebidBiddersRequested,n)}}emitFilterAmazonAdUnitsRequested(t){if(this.config.padoPluginConfig.hasAmazon&&!this.currentSiteSegmentVariantBidders.includes("amazon")){const n={adUnits:t||this.config.padoPluginConfig.adUnitsOptimizedByPado};this.logger.log({payload:n,message:"Event: ".concat(r.w.filterAmazonAdUnitsRequested,"."),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(r.w.filterAmazonAdUnitsRequested,n)}}requestAuctionForPadoOptimizedAdUnits(t,n){const i={auctionID:n||(0,f.$C)(),adUnitsElementIDs:t};this.logger.log({payload:i,message:"Event: ".concat(r.w.auctionRequested,"."),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(r.w.auctionRequested,i)}attachCurrentSiteSegmentVariantIdKeyValue(t){if(this.siteSegmentConfigurationRequestStatus!==l.successful)return;const n={key:"padoVariant",value:this.currentSiteSegmentVariantId};this.logger.log({message:"".concat(r.w.attachKeyValueRequested," events emitted."),namespace:e.PluginName,verboseLevel:1,payload:A({adUnitElementIds:t},n)}),t.forEach((e=>{this.eventBus.emit(r.w.attachKeyValueRequested,A({adUnitElementId:e},n))}))}applyFallbackVariantSsps(){this.siteSegmentConfigurationRequestStatus=l.failed,this.currentSiteSegmentVariantBidders=this.config.padoPluginConfig.fallbackVariantSsps,this.filterHeaderBiddingSetupsSsps()}},p.PluginName=s.f.PadoPlugin,u=p))||u;const I=S.PluginName;window.pgPluginManager.registerPlugin(I,S,(function(){return window.pgPluginManager.getConfig([{viewConfigurationID:1135,padoPluginConfig:{adUnitsOptimizedByPadoToInitialLoad:["tooplatecom47398","tooplatecom47399","tooplatecom47400","tooplatecom47401","tooplatecom47402","tooplatecom47403","tooplatecom47404","tooplatecom47406"],sspsWhichShouldAlwaysBeIncluded:["amazon","openx","improvedigital","openxS2S","improvedigitS2S"],adUnitsOptimizedByPado:["tooplatecom47398","tooplatecom47399","tooplatecom47400","tooplatecom47401","tooplatecom47402","tooplatecom47403","tooplatecom47404","tooplatecom47406"],publisherPropertyId:13454,fallbackVariantSsps:["adagio","ix","ixS2S","rubicon","appnexus","criteo","onetag","pubmatic","amazon","openx","improvedigital","openxS2S","improvedigitS2S"],sspIdsMapping:{6:"ix",98:"adf",145:"appnexus",187:"oftmedia",215:"rubicon",230:"amazon",235:"openx",237:"pubmatic",249:"criteo",271:"improvedigital",278:"sharethrough",292:"onetag",304:"adagio",307:"33across",349:"seedtag",352:"medianet",370:"ogury"},s2sSsps:{ixS2S:{supportsParallelBidding:!0,clientSideBidder:"ix"},openxS2S:{supportsParallelBidding:!0,clientSideBidder:"openx"},appnexusS2S:{supportsParallelBidding:!0,clientSideBidder:"appnexus"},"33acrossS2S":{supportsParallelBidding:!0,clientSideBidder:"thirtythreeacross"},improvedigitS2S:{supportsParallelBidding:!0,clientSideBidder:"improvedigital"},medianetS2S:{supportsParallelBidding:!0,clientSideBidder:"medianet"}},hasAmazon:!0,hasPrebid:!0,padoSiteSegmentJsonEndpoint:"https://d3ijs1jrnmt18w.cloudfront.net/",amazonToGoogleMapping:[["Phone","phone"],["Mobile","phone"],["Tablet","desktop"],["Desktop","desktop"],["TV","desktop"],["SmartTV","desktop"]]}}])}))},672:(e,t,n)=>{"use strict";let i;n.r(t),n.d(t,{pgPluginConfig:()=>ge});try{new EventTarget,i=!0}catch(e){i=!1}var r=i?EventTarget:class{constructor(){this.e={}}addEventListener(e,t,n=!1){this.t(e).push(t)}removeEventListener(e,t,n=!1){const i=this.t(e),r=i.indexOf(t);r>-1&&i.splice(r,1)}dispatchEvent(e){return e.target=this,Object.freeze(e),this.t(e.type).forEach((t=>t(e))),!0}t(e){return this.e[e]=this.e[e]||[]}};var o=i?Event:class{constructor(e){this.type=e}};class s extends o{constructor(e,t){super(e),this.newState=t.newState,this.oldState=t.oldState,this.originalEvent=t.originalEvent}}const a="active",d="passive",c="hidden",l="frozen",u="terminated",p="object"==typeof safari&&safari.pushNotification,h=["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in self?"pagehide":"unload"],g=e=>(e.preventDefault(),e.returnValue="Are you sure?"),f=[[a,d,c,u],[a,d,c,l],[c,d,a],[l,c],[l,a],[l,d]].map((e=>e.reduce(((e,t,n)=>(e[t]=n,e)),{}))),m=()=>document.visibilityState===c?c:document.hasFocus()?a:d;var v=new class extends r{constructor(){super();const e=m();this.s=e,this.i=[],this.a=this.a.bind(this),h.forEach((e=>addEventListener(e,this.a,!0))),p&&addEventListener("beforeunload",(e=>{this.n=setTimeout((()=>{e.defaultPrevented||e.returnValue.length>0||this.r(e,c)}),0)}))}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(e){!this.i.indexOf(e)>-1&&(0===this.i.length&&addEventListener("beforeunload",g),this.i.push(e))}removeUnsavedChanges(e){const t=this.i.indexOf(e);t>-1&&(this.i.splice(t,1),0===this.i.length&&removeEventListener("beforeunload",g))}r(e,t){if(t!==this.s){const n=((e,t)=>{for(let n,i=0;n=f[i];++i){const i=n[e],r=n[t];if(i>=0&&r>=0&&r>i)return Object.keys(n).slice(i,r+1)}return[]})(this.s,t);for(let t=0;t<n.length-1;++t){const i=n[t],r=n[t+1];this.s=r,this.dispatchEvent(new s("statechange",{oldState:i,newState:r,originalEvent:e}))}}}a(e){switch(p&&clearTimeout(this.n),e.type){case"pageshow":case"resume":this.r(e,m());break;case"focus":this.r(e,a);break;case"blur":this.s===a&&this.r(e,m());break;case"pagehide":case"unload":this.r(e,e.persisted?l:u);break;case"visibilitychange":this.s!==l&&this.s!==u&&this.r(e,m());break;case"freeze":this.r(e,l)}}};const b=v;var y=n(8789),A=n(329),w=n(8595),S=n(5675),I=n(8902);const E=new Map,_=new Map;let x=!1;const P=e=>(null!=e?e:2)<=(0,A.MR)("pgLoggerVerboseLevel"),T=e=>"background: ".concat(e,"; color: #fff; border-radius: 3px; padding-left: 3px; padding-right: 3px; display: block;"),O=(e,t,n)=>{const i=[];return i.push("%cAzerion".concat(t?"%c".concat(t):"")),i.push(T("#ff5000")),t&&i.push(T("#0f1130")),i.push(e),n&&i.push(n),i},C=e=>{"hidden"!==e.newState&&"terminated"!==e.newState&&"frozen"!==e.newState||E.forEach((e=>e.data.length&&(0,A.Bz)(e)))},R=(e,t)=>{if((0,A.pc)("enableConsoleLogging")&&P(e.verboseLevel))switch(t){case w.LF.Error:console.error.apply(console,O("ERROR: ".concat(e.message),e.namespace,e.payload));break;case w.LF.Warning:console.warn.apply(console,O("WARN: ".concat(e.message),e.namespace,e.payload));break;case w.LF.Info:default:console.log.apply(console,O("INFO: ".concat(e.message),e.namespace,e.payload))}if((0,I.w)()&&P(e.verboseLevel)){const n=(0,I.a)(),i={[w.LF.Error]:"error",[w.LF.Warning]:"warn",[w.LF.Info]:"info"},r={message:e.message,severity:i[t]||"info",namespace:e.namespace,payload:e.payload,timestamp:new Date};n.log(r)}},U=e=>{if(e.endPoint&&!(0,A.pc)("disableEndPointLogging")&&e.data.length)switch(e.protocol){case w.qQ.Http:(0,A.BC)(e);break;case w.qQ.Socket:throw new Error("Not implemented");default:(0,A.BC)(e)}},k=(e,t)=>{if(!x)return console.error("Logger is not activated"),!1;try{if(_.has(y.f.ClientLoggerConsoleInfo)&&R(e,t),e.type){const t=_.get(e.type);if(t)return t.channelName.forEach((t=>((e,t)=>{if(e.data.push({data:t,channel:e.name}),e.requestFrequency===w.Cj.Instant)U(e),e.data=[];else{if(e.requestFrequency!==w.Cj.InBatches)throw new Error("not implemented ".concat(e.requestFrequency));e.data.length===e.batchSize&&(U(e),e.data=[])}})((e=>E.get(e))(t),e.payload))),!0}return!1}catch(e){return console.error("there is a problem with the logging functionality"),!1}},D=()=>0===E.size?(console.error("No channels are registered for logging"),!1):(x=!0,b.addEventListener("statechange",C),!0),B=(e,t)=>{e.forEach((e=>E.set(e.name,e))),t.forEach((e=>_.set(e.messageType,e)))},j=()=>({log:e=>k(e,w.LF.Info),warn:e=>k(e,w.LF.Warning),error:e=>{var t,n;const i=null===(t=window.pgPluginManager)||void 0===t||null===(n=t.baseConfig)||void 0===n?void 0:n.eventBus;return null==i||i.emit(S.w.loggedErrorOccurred,e),k(e,w.LF.Error)}});var N=n(3081),L=n(5319);const M={createTasks:function(){return[{runTime:L.s.BEFORE_ACTIVATE,type:N.w.AD_UNIT_SIZE_MAPPING,payload:{}}]}},z={createTasks:function(){return[{runTime:L.s.BEFORE_ACTIVATE,type:N.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,payload:{}}]}},F={createTasks:function(){return[]}},q={createTasks:function(){return[{runTime:L.s.BEFORE_ACTIVATE,type:N.w.AUTO_SLOT_SPECIFICATION_SELECTED,payload:{}},{runTime:L.s.BEFORE_ACTIVATE,type:N.w.AUTO_SLOTS_CONVERTED_TO_SMART_SLOTS,payload:{}}]}},H={createTasks:function(){return[{runTime:L.s.BEFORE_ACTIVATE,type:N.w.USER_SYNC_GEO_TARGETING,payload:{}}]}},V={createTasks:function(){return[{runTime:L.s.BEFORE_ACTIVATE,type:N.w.NEW_ADHESIVE_SELECT_PER_VIEWPORT_SETTINGS,payload:{}}]}},$={createTasks:function(){return[]}};var G=n(1201),W=n.n(G),K=n(4120),Q=n(7165);class J{constructor(){var e=this;this.eventBus=void 0,this.middlewares=[],this.eventBuffer=new Map,this.wrappedHandlersMap=new Map,this.handlerNamespaceMap=new Map,this.handlerEventNameMap=new Map,this.on=(e,t,n,i)=>{this.handlerNamespaceMap.set(t,i),this.handlerEventNameMap.set(t,e);const r=this.wrapEventHandler(e,t);if(n&&this.eventBuffer.has(e))for(const t of null!==(o=this.eventBuffer.get(e))&&void 0!==o?o:[]){var o;r(t.eventArgs)}this.eventBus.on(e,r)},this.emit=function(t,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n;const o=e.middlewares.filter((e=>e.eventName===t)).sort(((e,t)=>e.priority>t.priority?1:e.priority<t.priority?-1:0));for(const i of o)if(r=i.handler(r),i.stopPropagation||!r)return void e.emit(S.w.propagationHasBeenStoppedForEvent,{name:t,eventArgs:n});const s={eventArgs:r,timestamp:Date.now()};e.eventBuffer.has(t)&&!i?e.eventBuffer.get(t).push(s):e.eventBuffer.set(t,[s]),e.eventBus.emit(t,null,r)},this.addMiddleware=function(t,n,i,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.middlewares.push({pluginName:t,priority:n,eventName:i,stopPropagation:o,handler:e.wrapMiddlewareHandler(t,i,n,r)})},this.removeMiddleware=(e,t,n)=>{this.middlewares=this.middlewares.filter((i=>i.pluginName!==e||i.eventName!==t||i.handler!==this.wrappedHandlersMap.get(n)))},this.removeAllMiddlewareForPlugin=e=>{this.middlewares=this.middlewares.filter((t=>t.pluginName!==e))},this.detach=(e,t)=>{this.wrappedHandlersMap.has(t)&&(this.eventBus.detach(e,this.wrappedHandlersMap.get(t)),this.handlerNamespaceMap.delete(t),this.handlerEventNameMap.delete(t))},this.detachAllForNamespace=e=>{const t=[];for(const[n,i]of this.handlerNamespaceMap.entries())if(i===e){const e=this.handlerEventNameMap.get(n);e&&t.push({handler:n,eventName:e})}for(const{handler:e,eventName:n}of t)this.detach(n,e)},this.trimEventBuffer=()=>{const e=Date.now();for(const[t,n]of this.eventBuffer.entries()){const i=n.filter((t=>e-t.timestamp<J.bufferRetentionTimeMilliseconds));i.length?this.eventBuffer.set(t,i):this.eventBuffer.delete(t)}},this.clearBuffer=()=>{this.eventBuffer.clear()},this.wrapEventHandler=(e,t)=>{const n=n=>{try{return t(n)}catch(i){throw this.emit(S.w.eventHandlerErrorOccurred,{error:i,context:{component:J.ComponentName,operation:K.eG.EventListenerExecution,eventName:e,eventArgs:(0,Q.N1)(n),handlerContext:this.getHandlerContext(t)},timestamp:(new Date).toISOString(),severity:K.MU.Critical}),i}};return this.wrappedHandlersMap.set(t,n),n},this.wrapMiddlewareHandler=(e,t,n,i)=>{const r=n=>{try{return i(n)}catch(i){throw this.emit(S.w.middlewareErrorOccurred,{error:i,context:{component:J.ComponentName,operation:K.eG.MiddlewareExecution,eventName:t,eventArgs:(0,Q.N1)(n),handlerContext:e},timestamp:(new Date).toISOString(),severity:K.MU.Critical}),i}};return this.wrappedHandlersMap.set(i,r),r},this.getHandlerContext=e=>this.handlerNamespaceMap.has(e)?this.handlerNamespaceMap.get(e):"anonymous-handler",this.eventBus=new(W());const t=setInterval((()=>{this.trimEventBuffer()}),J.bufferTrimIntervalMilliseconds);"function"==typeof t.unref&&t.unref()}}J.ComponentName="EventBus",J.bufferTrimIntervalMilliseconds=1e4,J.bufferRetentionTimeMilliseconds=3e5;var Y=n(7267);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class te{constructor(e){this.baseConfig=e,this.name="PluginManager",this.plugins=new Map,this.pluginSettings=new Map,this.pluginOriginalConfigs=new Map,this.registerPlugin=this.registerPlugin.bind(this),this.decoratePlugin=this.decoratePlugin.bind(this),this.getPlugin=this.getPlugin.bind(this),this.activatePlugin=this.activatePlugin.bind(this),this.deactivatePlugin=this.deactivatePlugin.bind(this),this.activateAll=this.activateAll.bind(this),this.deactivateAll=this.deactivateAll.bind(this)}registerPlugin(e,t,n){try{if(this.plugins.has(e))return this.plugins.get(e);const i="function"==typeof n?n():n;if(i){switch(typeof n){case"function":default:this.pluginOriginalConfigs.set(e,{name:e,PluginType:t,config:n});break;case"object":this.pluginOriginalConfigs.set(e,{name:e,PluginType:t,config:Z({},n)})}const r=this.enrichPluginConfig(i),o=new t(r);return this.plugins.set(e,o),this.setDeepCopyOfPluginSettings(e,r),this.plugins.get(e)}return{}}catch(t){throw this.emitPluginError(t,{pluginName:e,operation:K.d$.Registration,config:n}),t}}enrichPluginConfig(e){return Object.assign(e,this.baseConfig)}decoratePlugin(e,t,n){const i=this.plugins.get(e);if(void 0===i)return this.baseConfig.logger.error({namespace:this.name,message:"There is no registered plugin with name ".concat(e,"."),type:y.f.PluginManagerPluginNotRegisteredError,verboseLevel:1}),{};const r=i.modifyConfig(n),o=new t(r,i);return this.plugins.set(e,o),this.setDeepCopyOfPluginSettings(e,r),this.plugins.get(e)}setPluginSettings(e,t){const n=this.plugins.get(e);if(n){const i=n.modifyConfig(t);return this.setDeepCopyOfPluginSettings(e,i),i}}getAllPluginSettings(){return this.pluginSettings}getPlugin(e){return this.plugins.get(e)}async activatePlugin(e){try{const t=this.plugins.get(e);return!!t&&(!!t.isActive()||t.beforeActivate()&&await t.activate()&&t.afterActivate())}catch(t){throw this.emitPluginError(t,{pluginName:e,operation:K.d$.Activation}),t}}async deactivatePlugin(e){try{const t=this.plugins.get(e);return!!t&&(!t.isActive()||t.deactivate())}catch(t){throw this.emitPluginError(t,{pluginName:e,operation:K.d$.Deactivation}),t}}resetAll(){this.plugins.clear(),this.baseConfig.eventBus=new J,Y.W.regenerateInitialAuctionId(),Y.W.regenerateInitialPadoAuctionId(),Y.W.regenerateInitialSiderailAuctionId();for(const e of this.pluginOriginalConfigs.keys()){const t=this.pluginOriginalConfigs.get(e);this.registerPlugin(t.name,t.PluginType,t.config)}}async activateAll(){const e=new Map;for(const[e,t]of this.plugins)try{t.registerMiddlewares()}catch(t){return this.emitPluginError(t,{pluginName:e,operation:K.d$.AttachMiddlewares}),!1}for(const[e,t]of this.plugins)try{t.registerEventListeners()}catch(t){return this.emitPluginError(t,{pluginName:e,operation:K.d$.AttachEventListeners}),!1}for(const[e,t]of this.plugins)try{!t.isActive()&&t.beforeActivate()}catch(t){return this.emitPluginError(t,{pluginName:e,operation:K.d$.Activation}),!1}for(const[t,n]of this.plugins)try{n.isActive()||(await n.activate(),e.set(t,n))}catch(e){return this.emitPluginError(e,{pluginName:t,operation:K.d$.Activation}),!1}for(const[t,n]of e)try{n.afterActivate()}catch(e){return this.emitPluginError(e,{pluginName:t,operation:K.d$.Activation}),!1}return!0}async deactivateAll(){for(const[e,t]of this.plugins)try{await t.deactivate()}catch(t){return this.emitPluginError(t,{pluginName:e,operation:K.d$.Deactivation}),!1}return this.baseConfig.eventBus.clearBuffer(),!0}setDeepCopyOfPluginSettings(e,t){this.pluginSettings.set(e,t)}emitPluginError(e,t){const n={error:e,context:{component:te.PluginName,operation:t.operation,pluginName:t.pluginName,config:t.config},timestamp:(new Date).toISOString(),severity:K.MU.Critical};this.baseConfig.eventBus.emit(S.w.pluginErrorOccurred,n)}}te.PluginName="PluginManager";var ne=n(2703);class ie extends te{constructor(e,t,n){var i,r;super(e),this._extensions=void 0,this.currentView=void 0,this.azerionSettings=void 0,this.domainFiltering=void 0,this.domainBlocked=!0,this.loc=void 0,this.domObserver=void 0,this.publisherApiService=void 0,this.canActivate=!0,this.shouldActivate=!1,this.consentDataUpdatedCallback=()=>{this._extensions.ignoreConsentChanges||this.reset().then((()=>{setTimeout((()=>{this.plugins.has(ne.f.CustomScriptPlugin)?(this.plugins.has(ne.f.ConsentManagementPlugin)&&this.activatePlugin(ne.f.ConsentManagementPlugin),this.activatePlugin(ne.f.CustomScriptPlugin)):this.activateAll()}),500)}))},this.publisherApiService=n,this._extensions=t,this._extensions.monitoringService.activate(),this.currentView=this._extensions.viewTargetingService.getCurrentView(),this.azerionSettings=this._extensions.azerionSettings,this.domainFiltering=this.currentView.domainFiltering,this.locationChangeCallback=this.locationChangeCallback.bind(this),this.loc=this.getLocationString(),this.publisherApiService.initialize(),this.initializeLocationChangeListener(),this.pgDeviceFallback(),this.blockWrapperBasedOnDomain(),this.setWrapperValue(null===(i=this.currentView)||void 0===i||null===(r=i.abTesting)||void 0===r?void 0:r.wrapperActiveTargetingValue),e.logger.log({message:"Initialize plugin manager.",namespace:ie.PluginName,verboseLevel:1,payload:{extensions:t,currentView:this.currentView,domainFiltering:this.domainFiltering,config:e}}),this.baseConfig.eventBus.on(S.w.pluginsActivationAllowed,(e=>{this.canActivate=e,this.shouldActivate&&e&&this.activateAll().then((()=>{}))}),!0,ie.PluginName),this.baseConfig.eventBus.on(S.w.consentDataUpdated,this.consentDataUpdatedCallback,!1,ie.PluginName)}async activateAll(){return this.shouldActivate=!0,!!this.canActivate&&(this._extensions.waitForConsentToActivateAll?(this.baseConfig.eventBus.emit(S.w.getConsentDataRequested,(e=>{super.activateAll()})),!0):super.activateAll())}initializeLocationChangeListener(){if(this._extensions.ignoreLocationChanges)return;let e=history.pushState,t=history.replaceState;history.pushState=(t,n,i)=>{e.apply(history,[t,n,i]),window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("owlocationchange"))},history.replaceState=(e,n,i)=>{t.apply(history,[e,n,i]),window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("owlocationchange"))},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("owlocationchange"))})),this.domObserver=new MutationObserver((e=>{window.dispatchEvent(new Event("owlocationchange"))})),this.domObserver.observe(document,{childList:!0,subtree:!0}),window.addEventListener("owlocationchange",this.locationChangeCallback)}locationChangeCallback(){const e=this.getLocationString();if(e!==this.loc){if(this.loc=e,this._extensions.ignoreSameViewLocationChanges&&this.currentView.viewConfigurationID===this._extensions.viewTargetingService.getCurrentView().viewConfigurationID)return;let t=0;this.reset().then((()=>{window.clearTimeout(t),t=window.setTimeout((()=>{this.plugins.has(ne.f.CustomScriptPlugin)?(this.plugins.has(ne.f.ConsentManagementPlugin)&&this.activatePlugin(ne.f.ConsentManagementPlugin),this.activatePlugin(ne.f.CustomScriptPlugin)):this.activateAll()}),500)}))}}getLocationString(){return this._extensions.ignoreLocationHashChanges?location.pathname:location.href}setIgnoreLocationChanges(e){this._extensions.ignoreLocationChanges=e}setIgnoreLocationHashChanges(e){this._extensions.ignoreLocationHashChanges=e,this.loc=this.getLocationString()}removeLocationChangeHandler(){var e;window.removeEventListener("locationchange",this.locationChangeCallback),null===(e=this.domObserver)||void 0===e||e.disconnect()}async reset(){await this.deactivateAll(),this.currentView=this._extensions.viewTargetingService.getCurrentView(),this._extensions.monitoringService.deactivate(),this._extensions.monitoringService.activate(),this.resetAll()}getCustomTargetingFunctionResult(e){return this._extensions.customTargetingFunctions[e]?this._extensions.customTargetingFunctions[e]():(this.baseConfig.logger.error({message:"Custom targeting function ".concat(e," not found."),namespace:ie.PluginName,type:y.f.CustomTargetingFunctionNotFound}),!1)}getConfig(e){return e.find((e=>{var t,n;return e.viewConfigurationID===this.currentView.viewConfigurationID&&(null===(t=e.abTesting)||void 0===t?void 0:t.wrapperActiveTargetingValue)===(null===(n=this.currentView.abTesting)||void 0===n?void 0:n.wrapperActiveTargetingValue)}))}registerPlugin(e,t,n){if(this.domainBlocked)return{};const i=super.registerPlugin(e,t,n);return(this.plugins.has(ne.f.FirstPartyDataPlugin)&&this.plugins.has(ne.f.AudienceDataPlugin)||this.plugins.has(ne.f.ConsentManagementPlugin))&&this.publisherApiService.initialize(),i}blockWrapperBasedOnDomain(){const e=document.location.hostname.toLowerCase();(!this.domainFiltering||e.endsWith(this.domainFiltering.baseDomain.toLowerCase())&&!(this.domainFiltering.blackList||[]).includes(e))&&(this.domainBlocked=!1),this.baseConfig.logger.log({message:"Domain check.",namespace:ie.PluginName,verboseLevel:1,payload:{domainBlocked:this.domainBlocked}})}setWrapperValue(e){window[Y.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]=window[Y.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]||e}pgDeviceFallback(){if(!window.pgDevice){const e=window.innerWidth;switch(!0){case e<768:window.pgDevice="Mobile";break;case e<1024:window.pgDevice="Tablet";break;default:window.pgDevice="Desktop"}}}}ie.PluginName="MonetizationPluginManager";var re=n(3870);let oe=function(e){return e.And="AND",e.Or="OR",e}({});class se{apply(e){return Array.from(e.reduce(((e,t)=>{var n;return e.get(t.viewConfigurationID)?null===(n=e.get(t.viewConfigurationID))||void 0===n||n.push(t):e.set(t.viewConfigurationID,[t]),e}),new Map)).map((e=>e[1].sort(((e,t)=>e.abTesting&&t.abTesting?e.abTesting.rangeUnder-t.abTesting.rangeUnder:1)).find((e=>!e.abTesting||e.abTesting.rangeUnder>se.randomNumber)))).filter((e=>void 0!==e))}}se.randomNumber=(0,A.Qp)(1,100);var ae=n(3916);ae.A;n(9754);var de=n(2101);class ce{constructor(e,t){this.serviceSettings=e,this.rapidRefreshThreshold=4500,this.name=ce.ComponentName,this.pluginConfig=void 0,this.lifecycleTrackers=new Map,this.lastRefreshTimestampsByAdUnit=new Map,this.adUnitElementsOnPage=new Set,this.pluginConfig=t}activate(){return this.registerMiddlewares(),this.registerEventListeners(),!0}deactivate(){this.pluginConfig.eventBus.removeAllMiddlewareForPlugin(this.name),this.pluginConfig.eventBus.detachAllForNamespace(this.name);for(const e of this.lifecycleTrackers.values())e.timeoutId&&window.clearTimeout(e.timeoutId);return this.lifecycleTrackers.clear(),this.lastRefreshTimestampsByAdUnit.clear(),this.adUnitElementsOnPage.clear(),!0}registerMiddlewares(){this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePreMiddlewareHook,S.w.auctionRequested,this.handleAuctionRequestedPre.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePreMiddlewareHook,S.w.auctionSyncFinished,this.handleAuctionSyncFinishedPre.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePreMiddlewareHook,S.w.adUnitAdServerRefreshRequested,this.handleAdServerRefreshRequestedPre.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePreMiddlewareHook,S.w.adUnitsBeforeApplyingAdServerRefresh,this.handleBeforeApplyingAdServerRefreshPre.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePostMiddlewareHook,S.w.auctionRequested,this.handleAuctionRequestedPost.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePostMiddlewareHook,S.w.auctionSyncFinished,this.handleAuctionSyncFinishedPost.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePostMiddlewareHook,S.w.adUnitAdServerRefreshRequested,this.handleAdServerRefreshRequestedPost.bind(this)),this.pluginConfig.eventBus.addMiddleware(this.name,de.h.MonitoringServicePostMiddlewareHook,S.w.adUnitsBeforeApplyingAdServerRefresh,this.handleBeforeApplyingAdServerRefreshPost.bind(this))}registerEventListeners(){this.pluginConfig.eventBus.on(S.w.adUnitElementAdded,this.handleAdUnitElementAdded.bind(this),!0,ce.ComponentName),this.pluginConfig.eventBus.on(S.w.adUnitElementRemoved,this.handleAdUnitElementRemoved.bind(this),!0,ce.ComponentName),this.pluginConfig.eventBus.on(S.w.propagationHasBeenStoppedForEvent,this.handlePropagationHasStoppedForEvent.bind(this),!0,ce.ComponentName),this.pluginConfig.eventBus.on(S.w.adUnitsRemovedFromUsage,this.handleAdUnitsRemovedFromUsage.bind(this),!0,ce.ComponentName),this.pluginConfig.eventBus.on(S.w.adUnitsBlockedFromUsage,this.handleAdUnitsBlockedFromUsage.bind(this),!0,ce.ComponentName),this.pluginConfig.eventBus.on(S.w.adUnitDestroyRequested,this.handleAdUnitsDestroyRequested.bind(this),!0,ce.ComponentName),this.pluginConfig.eventBus.on(S.w.notDisplayedAdUnitsQueuedForRefresh,this.handleNotDisplayedAdUnitsQueuedForRefresh.bind(this),!0,ce.ComponentName)}handleAdUnitElementAdded(e){this.adUnitElementsOnPage.add(e);for(const[t,n]of this.lifecycleTrackers)n.adUnitElementId===e&&(this.pluginConfig.logger.log({namespace:this.name,message:"Ad unit element added to page",type:y.f.ClientLoggerConsoleInfo,verboseLevel:2,payload:{adUnitId:e,auctionId:n.auctionId}}),n.isOnPage||(n.startTime=Date.now(),window.clearTimeout(n.timeoutId),n.timeoutId=window.setTimeout((()=>{this.handleLifecycleTimeout(this.getTrackerId(n.auctionId,n.adUnitElementId))}),this.serviceSettings.timeout),n.isOnPage=!0))}handleAdUnitElementRemoved(e){this.adUnitElementsOnPage.delete(e),this.lastRefreshTimestampsByAdUnit.delete(e);for(const[t,n]of this.lifecycleTrackers)n.adUnitElementId===e&&(n.isOnPage=!1,this.pluginConfig.logger.log({namespace:this.name,message:"Ad unit element removed from page",type:y.f.ClientLoggerConsoleInfo,verboseLevel:2,payload:{adUnitId:e,auctionId:n.auctionId}}))}handleAdUnitsRemovedFromUsage(e){for(const t of e){for(const[e,n]of this.lifecycleTrackers)n.adUnitElementId===t&&(n.isInUse=!1,this.pluginConfig.logger.log({namespace:this.name,message:"Ad unit removed from usage",type:y.f.ClientLoggerConsoleInfo,verboseLevel:2,payload:{adUnitId:t,auctionId:n.auctionId}}));this.lastRefreshTimestampsByAdUnit.delete(t)}}handleAdUnitsBlockedFromUsage(e){for(const t of e.elementsIDs){for(const[e,n]of this.lifecycleTrackers)n.adUnitElementId===t&&(n.isInUse=!1,this.pluginConfig.logger.log({namespace:this.name,message:"Ad unit removed from usage",type:y.f.ClientLoggerConsoleInfo,verboseLevel:3,payload:{adUnitId:t,auctionId:n.auctionId}}));this.lastRefreshTimestampsByAdUnit.delete(t)}}handleAdUnitsDestroyRequested(e){for(const t of e.elementsIDs){for(const[e,n]of this.lifecycleTrackers)n.adUnitElementId===t&&(n.isInUse=!1,this.pluginConfig.logger.log({namespace:this.name,message:"Ad unit destroyed",type:y.f.ClientLoggerConsoleInfo,verboseLevel:3,payload:{adUnitId:t,auctionId:n.auctionId}}));this.lastRefreshTimestampsByAdUnit.delete(t)}}handleNotDisplayedAdUnitsQueuedForRefresh(e){for(const t of e)for(const[e,n]of this.lifecycleTrackers)n.adUnitElementId===t&&this.cleanupTracker(e)}checkAndEmitRapidRefresh(e,t){const n=Date.now(),i=this.lastRefreshTimestampsByAdUnit.get(e);i&&n-i<this.rapidRefreshThreshold&&this.pluginConfig.eventBus.emit(S.w.adUnitRefreshAnomalyDetected,{auctionId:t,anomalyType:K.rn.RapidConsecutiveRefresh,adUnits:[e],timestamp:(new Date).toISOString(),context:{timeSinceLastRefresh:n-i}}),this.lastRefreshTimestampsByAdUnit.set(e,n)}handlePropagationHasStoppedForEvent(e){if(![S.w.auctionRequested,S.w.auctionSyncFinished,S.w.adUnitAdServerRefreshRequested,S.w.adUnitsBeforeApplyingAdServerRefresh].includes(e.name))return;const t=e.eventArgs;for(const e of this.getAllTrackersByAuctionId(t.auctionID))this.cleanupTracker(this.getTrackerId(e.auctionId,e.adUnitElementId))}handleAuctionRequestedPre(e){for(const t of e.adUnitsElementIDs){const n=this.getTrackerId(e.auctionID,t);let i=this.lifecycleTrackers.get(n);i||(i=this.createNewTracker(e.auctionID,t),this.lifecycleTrackers.set(n,i)),i.events[S.w.auctionRequested]={timestamp:Date.now(),data:e}}return e}handleAuctionRequestedPost(e){const t=this.getAllTrackersByAuctionIdAndEvent(e.auctionID,S.w.auctionRequested).map((e=>e.adUnitElementId)),n=new Set([...t,...e.adUnitsElementIDs]);for(const i of n){const n=this.getTrackerId(e.auctionID,i);if(!this.lifecycleTrackers.has(n)){const t=this.createNewTracker(e.auctionID,i);this.lifecycleTrackers.set(n,t);continue}this.lifecycleTrackers.get(n).middlewareModifications.push({eventType:S.w.auctionRequested,timestamp:Date.now(),pluginName:this.name,before:{elementsIds:t},after:{elementsIds:e.adUnitsElementIDs}})}return e}handleAuctionSyncFinishedPre(e){for(const t of e.elementsIDs){const n=this.getTrackerId(e.auctionID,t);let i=this.lifecycleTrackers.get(n);i||(i=this.createNewTracker(e.auctionID,t),this.lifecycleTrackers.set(n,i)),i.events[S.w.auctionSyncFinished]={timestamp:Date.now(),data:e}}return e}handleAuctionSyncFinishedPost(e){const t=this.getAllTrackersByAuctionIdAndEvent(e.auctionID,S.w.auctionSyncFinished).map((e=>e.adUnitElementId)),n=new Set([...t,...e.elementsIDs]);for(const i of n){const n=this.getTrackerId(e.auctionID,i);if(!this.lifecycleTrackers.has(n)){const t=this.createNewTracker(e.auctionID,i);this.lifecycleTrackers.set(n,t);continue}this.lifecycleTrackers.get(n).middlewareModifications.push({eventType:S.w.auctionSyncFinished,timestamp:Date.now(),pluginName:this.name,before:{elementsIds:t},after:{elementsIds:e.elementsIDs}})}return e}handleAdServerRefreshRequestedPre(e){for(const t of e.elementsIDs){const n=this.getTrackerId(e.auctionID,t);let i=this.lifecycleTrackers.get(n);i||(i=this.createNewTracker(e.auctionID,t),this.lifecycleTrackers.set(n,i)),i.events[S.w.adUnitAdServerRefreshRequested]={timestamp:Date.now(),data:e}}return e}handleAdServerRefreshRequestedPost(e){const t=this.getAllTrackersByAuctionIdAndEvent(e.auctionID,S.w.auctionSyncFinished).map((e=>e.adUnitElementId)),n=new Set([...t,...e.elementsIDs]);for(const i of n){const n=this.getTrackerId(e.auctionID,i);if(!this.lifecycleTrackers.has(n)){const t=this.createNewTracker(e.auctionID,i);this.lifecycleTrackers.set(n,t);continue}this.checkAndEmitRapidRefresh(i,e.auctionID);this.lifecycleTrackers.get(n).middlewareModifications.push({eventType:S.w.adUnitAdServerRefreshRequested,timestamp:Date.now(),pluginName:this.name,before:{elementsIds:t},after:{elementsIds:e.elementsIDs}})}return e}handleBeforeApplyingAdServerRefreshPre(e){for(const t of e.elementsIDs){const n=this.getTrackerId(e.auctionID,t);let i=this.lifecycleTrackers.get(n);i||(i=this.createNewTracker(e.auctionID,t),this.lifecycleTrackers.set(n,i)),i.events[S.w.adUnitsBeforeApplyingAdServerRefresh]={timestamp:Date.now(),data:e}}return e}handleBeforeApplyingAdServerRefreshPost(e){const t=this.getAllTrackersByAuctionIdAndEvent(e.auctionID,S.w.auctionSyncFinished).map((e=>e.adUnitElementId)),n=new Set([...t,...e.elementsIDs]);for(const i of n){const n=this.getTrackerId(e.auctionID,i);if(!this.lifecycleTrackers.has(n)){const t=this.createNewTracker(e.auctionID,i);this.lifecycleTrackers.set(n,t);continue}const r=this.lifecycleTrackers.get(n);this.getMissingEvents(r).length||this.cleanupTracker(n),r.middlewareModifications.push({eventType:S.w.adUnitsBeforeApplyingAdServerRefresh,timestamp:Date.now(),pluginName:this.name,before:{elementsIds:t},after:{elementsIds:e.elementsIDs}})}return e}createNewTracker(e,t){const n=Object.values(S.w).reduce(((e,t)=>(e[t]=void 0,e)),{});return this.pluginConfig.logger.log({namespace:this.name,message:"Created new ad unit lifecycle tracker",type:y.f.ClientLoggerConsoleInfo,verboseLevel:2,payload:{adUnitId:t,auctionId:e,timeout:this.serviceSettings.timeout}}),{auctionId:e,events:n,isOnPage:this.adUnitElementsOnPage.has(t),adUnitElementId:t,startTime:Date.now(),middlewareModifications:[],timeoutId:window.setTimeout((()=>{this.handleLifecycleTimeout(this.getTrackerId(e,t))}),this.serviceSettings.timeout),isInUse:!0,lastRefreshTimestamp:void 0,lastGptRequestTimestamp:void 0}}handleLifecycleTimeout(e){const t=this.lifecycleTrackers.get(e);if(!t)return;if(!t.isOnPage||!t.isInUse)return void this.cleanupTracker(e);if(this.wasAdUnitFilteredInMiddleware(t))return void this.cleanupTracker(e);const n=this.getMissingEvents(t),i=Date.now()-t.startTime,r=!t.events[S.w.auctionRequested];this.pluginConfig.logger.warn({namespace:this.name,message:"Ad unit lifecycle timeout after ".concat(i,"ms"),verboseLevel:1,type:y.f.MonitoringServiceAdUnitsDidNotFinishRequestForRefreshError,payload:{duration:i,missingEvents:n,wasAddedDuringMiddleware:r,isOnPage:t.isOnPage,isInUse:t.isInUse,adUnitId:t.adUnitElementId,auctionId:t.auctionId}}),this.pluginConfig.eventBus.emit(S.w.adUnitRefreshAnomalyDetected,{anomalyType:K.rn.NotRefreshed,context:{duration:i,missingEvents:n,wasAddedDuringMiddleware:r,isOnPage:t.isOnPage,isInUse:t.isInUse,events:t.events,middlewareModifications:t.middlewareModifications},auctionId:t.auctionId,adUnits:[t.adUnitElementId],timestamp:(new Date).toISOString()}),this.cleanupTracker(e)}getRequiredEvents(e){const t=!!e.events[S.w.auctionRequested],n=!!e.events[S.w.auctionSyncFinished],i=!!e.events[S.w.adUnitAdServerRefreshRequested];return t?[S.w.auctionRequested,S.w.auctionSyncFinished,S.w.adUnitAdServerRefreshRequested,S.w.adUnitsBeforeApplyingAdServerRefresh]:n?[S.w.auctionSyncFinished,S.w.adUnitAdServerRefreshRequested,S.w.adUnitsBeforeApplyingAdServerRefresh]:i?[S.w.adUnitAdServerRefreshRequested,S.w.adUnitsBeforeApplyingAdServerRefresh]:[S.w.adUnitsBeforeApplyingAdServerRefresh]}getMissingEvents(e){return this.getRequiredEvents(e).filter((t=>!e.events[t]))}cleanupTracker(e){const t=this.lifecycleTrackers.get(e);t&&(this.pluginConfig.logger.log({namespace:this.name,message:"Cleaning up ad unit lifecycle tracker",type:y.f.ClientLoggerConsoleInfo,verboseLevel:3,payload:{duration:Date.now()-t.startTime,adUnitId:t.adUnitElementId,auctionId:t.auctionId}}),t.timeoutId&&window.clearTimeout(t.timeoutId),this.lifecycleTrackers.delete(e))}getTrackerId(e,t){return"".concat(e,":").concat(t)}getAllTrackersByAuctionIdAndEvent(e,t){const n=[];for(const i of this.lifecycleTrackers.values())i.auctionId===e&&i.events[t]&&n.push(i);return n}getAllTrackersByAuctionId(e){const t=[];for(const n of this.lifecycleTrackers.values())n.auctionId===e&&t.push(n);return t}wasAdUnitFilteredInMiddleware(e){for(const i of e.middlewareModifications){var t,n;const r=null===(t=i.before)||void 0===t?void 0:t.elementsIds,o=null===(n=i.after)||void 0===n?void 0:n.elementsIds;if(r&&o&&Array.isArray(r)&&Array.isArray(o)&&r.includes(e.adUnitElementId)&&!o.includes(e.adUnitElementId))return!0}return!1}}ce.ComponentName="MonitoringService";var le=n(2541);class ue{constructor(e){this.config=e,this.requestAdsQue=[],this.requestWebRewardedAdQue=[],this.formats=new Map}initialize(){window[Y.W.WRAPPER_BASE_NAME]=window[Y.W.WRAPPER_BASE_NAME]||{};const e=window[Y.W.WRAPPER_BASE_NAME];if(!e._loaded){e._loaded=!0,e.que=e.que||[],this.setupRequestAdsApi(e),this.setupWebRewardedApi(e),this.setupAudienceDataApi(e),this.setupIabTaxonomiesApi(e),this.setupAdServerTargetingApi(e),this.setupConsentDataApi(e),this.setupEventListenersApi(e),this.setupAdhesiveApi(e),this.setupActivationControlApi(e),this.setupRemoveAdUnitsApi(e),this.setupStopRefreshForAdUnitsApi(e);for(const t of e.que)this.callCallback(t);e.que=[],e.que.push=this.callCallback}}setupAdhesiveApi(e){e.initiateAdhesive=e=>{if("string"!=typeof e)throw this.config.logger.error({namespace:ue.ServiceName,message:"AdUnitElementId is not a string",type:y.f.PublisherApiAdUnitElementIdNotString}),new Error("AdUnitElementId is not a string");this.config.eventBus.emit(S.w.initiateAdhesiveRequested,e,!0)},e.destroyAdhesive=e=>{if("string"!=typeof e)throw this.config.logger.error({namespace:ue.ServiceName,message:"AdUnitElementId is not a string",type:y.f.PublisherApiAdUnitElementIdNotString}),new Error("AdUnitElementId is not a string");this.config.eventBus.emit(S.w.destroyAdhesiveRequested,e,!0)}}setupEventListenersApi(e){e.events=e.events||{},e.events.AdUnitEmptyRendered=S.w.adUnitEmptyRendered,e.events.AdUnitLoaded=S.w.adUnitLoaded,e.formats={Banner:le._.Banner,SideRail:le._.SideRail,Adhesive:le._.Adhesive,Skin:le._.Skin,MobileSkin:le._.MobileSkin,Interstitial:le._.Interstitial,Rewarded:le._.Rewarded,Instream:le._.Instream},this.config.eventBus.on(S.w.productDataFormatUpdated,(e=>{for(const t of e.adUnitElementIds||[])this.formats.set(t,e.value)}),!1,ue.ServiceName),e.addEventListener=(e,t)=>{if("function"!=typeof t)throw this.config.logger.error({namespace:ue.ServiceName,message:"Callback is not a function",type:y.f.PublisherApiCallbackNotAFunction}),new Error("Callback is not a function");switch(e){case S.w.adUnitEmptyRendered:this.config.eventBus.on(e,(e=>{const n={adUnitElementId:e,formats:this.formats.get(e)||[le._.Banner]};t(n)}),!1,ue.ServiceName);break;case S.w.adUnitLoaded:this.config.eventBus.on(e,(e=>{const n={adUnitElementId:e,formats:this.formats.get(e)||[le._.Banner]};t(n)}),!1,ue.ServiceName);break;default:throw this.config.logger.error({namespace:ue.ServiceName,message:"Event type not supported",type:y.f.PublisherApiNotImplemented}),new Error("Event type not supported")}}}setupConsentDataApi(e){e.getConsentData=e=>{this.config.eventBus.emit(S.w.getConsentDataRequested,e)}}setupAdServerTargetingApi(e){e.setAdServerTargeting=e=>{this.config.eventBus.emit(S.w.attachKeyValuesToAll,e.keyValues)}}setupIabTaxonomiesApi(e){e.setIabTaxonomies=e=>{e&&this.config.eventBus.emit(S.w.setIabTaxonomiesRequested,e)}}setupAudienceDataApi(e){e.setUserAudienceData=e=>{e&&this.config.eventBus.emit(S.w.setUserAudienceDataRequested,e)}}setupRequestAdsApi(e){this.config.eventBus.on(S.w.headerBiddersReady,(()=>{for(const e of this.requestAdsQue)this.callCallback(e);this.requestAdsQue.push=this.callCallback}),!1,ue.ServiceName),this.config.eventBus.on(S.w.headerBiddersNotReady,(()=>{this.requestAdsQue.push===this.callCallback&&(this.requestAdsQue=[])}),!1,ue.ServiceName),e.requestAds=e=>{this.requestAdsQue.push((()=>{this.requestInstreamVideo(e)}))}}setupWebRewardedApi(e){this.config.eventBus.on(S.w.rewardedAdsActivated,(()=>{for(const e of this.requestWebRewardedAdQue)this.callCallback(e);this.requestWebRewardedAdQue.push=this.callCallback}),!1,ue.ServiceName),this.config.eventBus.on(S.w.rewardedAdsDeactivated,(()=>{this.requestWebRewardedAdQue.push===this.callCallback&&(this.requestWebRewardedAdQue=[])}),!1,ue.ServiceName),e.requestWebRewardedAd=e=>{this.requestWebRewardedAdQue.push((()=>{this.config.eventBus.emit(S.w.webRewardedRequested,e)}))}}setupActivationControlApi(e){e.disableInitialLoad=()=>{this.config.eventBus.emit(S.w.pluginsActivationAllowed,!1)},e.enableLoad=()=>{this.config.eventBus.emit(S.w.pluginsActivationAllowed,!0)}}requestInstreamVideo(e){this.config.eventBus.emit(S.w.auctionRequestedInstream,{slotIds:e.slotIds,callback:e.callback,auctionId:(0,A.$C)()})}callCallback(e){if("function"==typeof e)try{e.call(this)}catch(e){this.config.logger.warn({namespace:ue.ServiceName,message:"Failed to execute callback",type:y.f.MonetizationCallbackQueError})}return 0}setupRemoveAdUnitsApi(e){e.removeAdUnits=e=>{if(!Array.isArray(e)||e.some((e=>"string"!=typeof e)))throw this.config.logger.error({namespace:ue.ServiceName,message:"removeAdUnits was called with invalid arguments. Expected an array of strings.",type:y.f.PublisherApiAdUnitElementIdsNotArrayOfStrings,payload:{elementsIDs:e}}),new Error("removeAdUnits was called with invalid arguments. Expected an array of strings.");this.config.eventBus.emit(S.w.adUnitsBlockedFromUsage,{elementsIDs:e})}}setupStopRefreshForAdUnitsApi(e){var t=this;e.stopRefreshForAdUnits=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e)||e.length&&e.some((e=>"string"!=typeof e)))throw t.config.logger.error({namespace:ue.ServiceName,message:"stopRefreshForAdUnits was called with invalid arguments. Expected an array of strings.",type:y.f.PublisherApiAdUnitElementIdsNotArrayOfStrings,payload:{elementsIDs:e}}),new Error("stopRefreshForAdUnits was called with invalid arguments. Expected an array of strings.");t.config.eventBus.emit(S.w.disableAdRefreshRequested,{elementsIDs:e})}}}ue.ServiceName="PublisherApi",B([{name:"console",type:"instant",requestFrequency:"instant",requestFormatType:"uri",data:[]},{endPoint:"https://pghbl1.pubgalaxy.com/proxy",name:"log-impression",type:"instant",protocol:"http",requestFormatType:"uri",requestFrequency:"instant",data:[]},{endPoint:"https://pghbl1.pubgalaxy.com/proxy",name:"smart-react",type:"instant",protocol:"http",requestFormatType:"uri",requestFrequency:"instant",data:[]}],[{messageType:1,channelName:["console"]}]),D();const pe=j(),he=new class{constructor(){this.taskQueue=[]}addTask(e){this.taskQueue.push(e)}getInstanceOfTask(e){return e}getTasksByRunTime(e){return this.taskQueue.filter((t=>t.runTime===e))}};(new class{createTasks(){return[]}}).createTasks().forEach((e=>he.addTask(e)));M.createTasks().forEach((e=>he.addTask(e)));z.createTasks().forEach((e=>he.addTask(e)));F.createTasks().forEach((e=>he.addTask(e)));q.createTasks().forEach((e=>he.addTask(e)));H.createTasks().forEach((e=>he.addTask(e)));V.createTasks().forEach((e=>he.addTask(e)));$.createTasks().forEach((e=>he.addTask(e)));const ge={logger:pe,taskQueue:he,eventBus:new J},fe={},me={viewTargetingService:new class{constructor(e,t,n){this.config=e,this.abTestingService=t,this.customTargetingFunctions=n}getCurrentView(){let e=null;const t=this.abTestingService.apply(this.config.urlViewTargeting),n=t.map((e=>({viewConfigurationID:e.viewConfigurationID,viewPriority:e.viewPriority||-1,isRuleApplicable:!!e.url&&this.findMatchingRule(e.url)}))).filter((e=>e.isRuleApplicable));if(0===n.length)e=t.find((e=>e.viewConfigurationID===this.config.defaultViewConfigurationId));else{const i=n.reduce(((e,t)=>e.viewPriority<t.viewPriority?e:t),{});e=t.find((e=>e.viewConfigurationID===i.viewConfigurationID))}if(!e)throw new Error("There is no view matching targeting criteria! Wrong wrapper configuration is used!");return e}findMatchingRule(e){if("group"===e.type){const t=e.rules.map((e=>this.findMatchingRule(e)));return e.operator===oe.And?t.every((e=>e)):t.some((e=>e))}switch(e.filter){case re.$.CustomVariable:return this.applyCustomVariablesRule(e.pair.key,e.pair.value);case re.$.CustomFunction:return this.customTargetingFunctions[e.functionName]&&this.customTargetingFunctions[e.functionName]();default:return this.applyURLRule(e.target,e.filter,e.pattern)}}applyCustomVariablesRule(e,t){return(0,A.lI)(window,e)==t}applyURLRule(e,t,n){const i=this.getURLValue(e).toLowerCase(),r=n.toLowerCase();let o=!1;switch(t){case re.$.Is:o=this.is(i,r,!1);break;case re.$.IsNot:o=this.is(i,r,!0);break;case re.$.StartsWith:o=this.startsWith(i,r,!1);break;case re.$.NotStartsWith:o=this.startsWith(i,r,!0);break;case re.$.EndsWith:o=this.endsWith(i,r,!1);break;case re.$.NotEndsWith:o=this.endsWith(i,r,!0);break;case re.$.Contains:o=this.includes(i,r,!1);break;case re.$.NotContains:o=this.includes(i,r,!0);break;case re.$.RegularExpression:o=new RegExp((0,Q.wh)(n),"i").test(i)}return o}getURLValue(e){return window.location[e]||""}is(e,t,n){return n?e!==t:e===t}startsWith(e,t,n){return n?!e.startsWith(t):e.startsWith(t)}endsWith(e,t,n){return n?!e.endsWith(t):e.endsWith(t)}includes(e,t,n){return n?!e.includes(t):e.includes(t)}}({defaultViewConfigurationId:1135,urlViewTargeting:[{viewName:"sitewide",viewConfigurationID:1135,viewPriority:1,url:{type:"group",operator:"AND",rules:[{type:"rule",filter:"contains",target:"href",pattern:"tooplate"}]},adUnits:[{headerBiddingSetups:[],adUnitCode:"/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1",adUnitName:"Interstitial",adServerAdapterType:"googletag",placementGpid:"interstitial",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1",legacy:""},hasLazyLoading:!1,adUnitOptimizedByPado:!1,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!1,isDynamicallyInserted:!1,sizes:[[1,1]],targeting:{deviceTypes:{deviceTypes:["mobile","tablet","desktop","smarttv"],state:"includes"}},exemptFromVisibilityPolicy:!1,alwaysIncludeInInitialAuction:!1,googleInterstitial:{enabled:!0,triggers:{navBar:!1,unhideWindow:!1}}},{headerBiddingSetups:[{setupConfigurationId:13474,setupName:"HB",setupCode:".2 208363.10 tooplate.com PGHB tier1",sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214965"}},sharethrough:{prebid:{pkey:"2dkgPtw6MW2opb6YTMloLla7"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},appnexus:{prebid:{placementId:33209830,allowSmallerSizes:!0}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},improvedigital:{prebid:{placementId:23235080,publisherId:1263}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206891pghb",pagetype:"article",category:"technology"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227577,usePrebidSizes:!0}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"341551386"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47398.10_tooplate.com_tier1_208363"}},openx:{prebid:{unit:"561331801",delDomain:"pubgalaxy-d.openx.net"}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583414,bidonmultiformat:!0,position:"atf"}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33247364",placement:"inBanner"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"212960207"}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1133383"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["uDCkEWucimfM5BzLnUlV5CRr"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["73ZqCGpFzb502YDgDACe8kUz"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_Desktop_300x250_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_300x250_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47398.10_tooplate.com_tier1",adUnitName:"Desktop Horizontal Top",adServerAdapterType:"googletag",placementGpid:"leaderboard",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47398",legacy:"tooplatecom47398"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},exemptFromVisibilityPolicy:!1,sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],adRefreshes:{smartReact:{refreshInterval:28,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,smartSlot:{parentCpmMultiplier:1,isAutoSlot:!0}},{headerBiddingSetups:[{setupConfigurationId:13475,setupName:"HB",setupCode:".2 208362.10 tooplate.com PGHB tier1",sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214964"}},sharethrough:{prebid:{pkey:"2dkgPtw6MW2opb6YTMloLla7"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206894pghb",pagetype:"article",category:"technology"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227577,usePrebidSizes:!0}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"811577497"}},openx:{prebid:{unit:"561331800",delDomain:"pubgalaxy-d.openx.net"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47399.10_tooplate.com_tier1_208362"}},improvedigital:{prebid:{placementId:23282291,publisherId:1263}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583412,bidonmultiformat:!0,position:"atf"}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33364280",placement:"inArticle"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"212960207"}},appnexus:{prebid:{placementId:34224139,allowSmallerSizes:!0}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1133383"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["uDCkEWucimfM5BzLnUlV5CRr"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["73ZqCGpFzb502YDgDACe8kUz"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_Desktop_300x250_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_300x250_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47399.10_tooplate.com_tier1",adUnitName:"Desktop Horizontal Middle",adServerAdapterType:"googletag",placementGpid:"incontent",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47399",legacy:"tooplatecom47399"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},exemptFromVisibilityPolicy:!1,sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],adRefreshes:{smartReact:{refreshInterval:28,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,smartSlot:{parentCpmMultiplier:1,isAutoSlot:!0}},{headerBiddingSetups:[{setupConfigurationId:13476,setupName:"HB",setupCode:".2 208361.10 tooplate.com PGHB tier1",sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214772"}},sharethrough:{prebid:{pkey:"2dkgPtw6MW2opb6YTMloLla7"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206898pghb",pagetype:"article",category:"technology"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227577,usePrebidSizes:!0}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"811577497"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47400.10_tooplate.com_tier1_208361"}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583416,bidonmultiformat:!0,position:"atf"}},openx:{prebid:{unit:"561331802",delDomain:"pubgalaxy-d.openx.net"}},improvedigital:{prebid:{placementId:23282292,publisherId:1263}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33364273",placement:"inArticle"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"212960207"}},appnexus:{prebid:{placementId:34224143,allowSmallerSizes:!0}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1133383"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["uDCkEWucimfM5BzLnUlV5CRr"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["73ZqCGpFzb502YDgDACe8kUz"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_Desktop_300x250_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_300x250_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47400.10_tooplate.com_tier1",adUnitName:"Desktop Horizontal Bottom",adServerAdapterType:"googletag",placementGpid:"incontent",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47400",legacy:"tooplatecom47400"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],["fluid"],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},exemptFromVisibilityPolicy:!1,sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],adRefreshes:{smartReact:{refreshInterval:28,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,smartSlot:{parentCpmMultiplier:1,isAutoSlot:!0}},{headerBiddingSetups:[{setupConfigurationId:13477,setupName:"HB",setupCode:".2 208360.4 tooplate.com PGHB tier1",sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214732"}},sharethrough:{prebid:{pkey:"uDCkEWucimfM5BzLnUlV5CRr"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},ogury:{prebid:{assetKey:"OGY-9B0B1C9D6B19",adUnitId:"wm-hb-iart-toopla-azeri-5sen91cnntvu",adSlotSelector:"%divId%"}},appnexus:{prebid:{placementId:34224144,allowSmallerSizes:!0}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583418,bidonmultiformat:!0,position:"atf"}},openx:{prebid:{unit:"561331803",delDomain:"pubgalaxy-d.openx.net"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47401.4_tooplate.com_tier1_208360"}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%",pubid:"101031"}},improvedigital:{prebid:{placementId:23282293,publisherId:1263}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206901pghb",pagetype:"article",category:"technology"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227576,usePrebidSizes:!0}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33247363",placement:"inBanner"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"212960207"}},medianetS2S:{prebid:{cid:"8CU14QN5E"}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:0},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1157878"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["VvskwdkMGfZ2pspPgQOpisnD"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["EY3ChcHE2BEZn6QtygI2H4xB"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_HDX_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_320x50_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47401.4_tooplate.com_tier1",adUnitName:"Mobile Top",adServerAdapterType:"googletag",placementGpid:"leaderboard",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47401",legacy:"tooplatecom47401"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},exemptFromVisibilityPolicy:!1,adRefreshes:{smartReact:{refreshInterval:28,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,smartSlot:{parentCpmMultiplier:1,isAutoSlot:!0}},{headerBiddingSetups:[{setupConfigurationId:13478,setupName:"HB",setupCode:".2 208359.4 tooplate.com PGHB tier1",sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214698"}},sharethrough:{prebid:{pkey:"uDCkEWucimfM5BzLnUlV5CRr"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206904pghb",pagetype:"article",category:"technology"}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"341551386"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227576,usePrebidSizes:!0}},improvedigital:{prebid:{placementId:23282294,publisherId:1263}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583420,bidonmultiformat:!0,position:"atf"}},openx:{prebid:{unit:"561331804",delDomain:"pubgalaxy-d.openx.net"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47402.4_tooplate.com_tier1_208359"}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33364263",placement:"inArticle"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"212960207"}},appnexus:{prebid:{placementId:34224146,allowSmallerSizes:!0}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1157878"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["VvskwdkMGfZ2pspPgQOpisnD"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["EY3ChcHE2BEZn6QtygI2H4xB"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_HDX_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_320x50_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47402.4_tooplate.com_tier1",adUnitName:"Mobile Middle",adServerAdapterType:"googletag",placementGpid:"incontent",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47402",legacy:"tooplatecom47402"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},exemptFromVisibilityPolicy:!1,adRefreshes:{smartReact:{refreshInterval:28,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,smartSlot:{parentCpmMultiplier:1,isAutoSlot:!0}},{headerBiddingSetups:[{setupConfigurationId:13479,setupName:"HB",setupCode:".2 208358.4 tooplate.com PGHB tier1",sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214692"}},sharethrough:{prebid:{pkey:"uDCkEWucimfM5BzLnUlV5CRr"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206907pghb",pagetype:"article",category:"technology"}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"811577497"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227576,usePrebidSizes:!0}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583422,bidonmultiformat:!0,position:"atf"}},openx:{prebid:{unit:"561331805",delDomain:"pubgalaxy-d.openx.net"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47403.4_tooplate.com_tier1_208358"}},improvedigital:{prebid:{placementId:23282295,publisherId:1263}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33364238",placement:"inArticle"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"212960207"}},appnexus:{prebid:{placementId:34224145,allowSmallerSizes:!0}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1157878"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["VvskwdkMGfZ2pspPgQOpisnD"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["EY3ChcHE2BEZn6QtygI2H4xB"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_HDX_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_320x50_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47403.4_tooplate.com_tier1",adUnitName:"Mobile Bottom",adServerAdapterType:"googletag",placementGpid:"incontent",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47403",legacy:"tooplatecom47403"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],["fluid"]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},exemptFromVisibilityPolicy:!1,adRefreshes:{smartReact:{refreshInterval:28,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,smartSlot:{parentCpmMultiplier:1,isAutoSlot:!0}},{headerBiddingSetups:[{setupConfigurationId:13480,setupName:"HB",setupCode:".2 208357.3 tooplate.com PGHB tier1",sizes:[[728,90],[970,250],[970,90],[468,60],[970,120],[980,90],[980,120],[930,180],[750,300],[750,200],[750,100],[980,250],[980,300]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214691"}},sharethrough:{prebid:{pkey:"fVLe77vJfjh9JNIAK2VmEY9k"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206910pghb",pagetype:"article",category:"technology"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227573,usePrebidSizes:!0}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"805486344"}},improvedigital:{prebid:{placementId:23282296,publisherId:1263}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583424,bidonmultiformat:!0,position:"atf"}},openx:{prebid:{unit:"561331806",delDomain:"pubgalaxy-d.openx.net"}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47404.3_tooplate.com_tier1_208357"}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33247362",placement:"inScreen"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"776828808"}},appnexus:{prebid:{placementId:34224147,allowSmallerSizes:!0}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47404.3_tooplate.com_tier1",adUnitName:"Desktop Anchor",adServerAdapterType:"googletag",placementGpid:"adhesion",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47404",legacy:"tooplatecom47404"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[468,60],[728,90],[970,90],[970,120],[970,250],[750,100],[750,200],[750,300],[930,180],[980,120],[980,250],[980,300],[980,90]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},exemptFromVisibilityPolicy:!0,sizeMapping:[{viewportSize:[468,0],sizes:[[468,60]]},{viewportSize:[730,0],sizes:[[728,90],[468,60]]},{viewportSize:[750,0],sizes:[[728,90],[468,60],[750,300],[750,200],[750,100]]},{viewportSize:[930,0],sizes:[[728,90],[468,60],[930,180],[750,300],[750,200],[750,100]]},{viewportSize:[970,0],sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[980,90],[970,250],[980,120],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[980,250],[970,120],[980,300]]},{viewportSize:[0,0],sizes:[]}],adRefreshes:{smartReact:{refreshInterval:20,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,adhesives:[{adhesiveSettings:[{position:"bottom",design:"companion",margin:0,button:{enabled:!0,showAfter:5,position:"left",color:"#111111"},container:{enabled:!0,width:"100%",height:5,parallaxHeight:100,backgroundColor:"rgba(255, 255, 255, 0.7)"},companionSettings:{affinity:"center",numberOfCompanions:2,sizeMapping:[{viewportSize:[1620,0],sizes:[[300,50],[320,100],[300,100],[320,50]]}]},notSupportedBidders:["sovrn","sharethrough","sharethroughS2S","triplelift","tripleliftS2S"]}],viewportSize:[730,0]}]},{headerBiddingSetups:[{setupConfigurationId:13481,setupName:"HB",setupCode:".2 208356.28 tooplate.com PGHB tier1",sizes:[[320,50],[300,100],[320,100],[300,50]],formats:{banner:!0},demandPartners:{ix:{prebid:{siteId:"1015499"}},adf:{prebid:{mid:1729968,priceType:"net"}},oftmedia:{prebid:{placementId:"33214690"}},sharethrough:{prebid:{pkey:"UDNV87ScO81Vbef0K7wqohP4"}},ixS2S:{prebid:{siteId:"1015500"}},openxS2S:{prebid:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},"33acrossS2S":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},appnexusS2S:{prebid:{placement_id:34043906,allowSmallerSizes:!0}},criteo:{prebid:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},adagio:{prebid:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206913pghb",pagetype:"article",category:"technology"}},medianetS2S:{prebid:{cid:"8CU14QN5E",crid:"805486344"}},improvedigitS2S:{prebid:{publisherId:1263,placementId:23227574,usePrebidSizes:!0}},pubmatic:{prebid:{publisherId:"157230",adSlot:"/8095840/.2_A.47406.28_tooplate.com_tier1_208356"}},rubicon:{prebid:{accountId:18630,siteId:554006,zoneId:3583426,bidonmultiformat:!0,position:"atf"}},improvedigital:{prebid:{placementId:23282297,publisherId:1263}},openx:{prebid:{unit:"561331807",delDomain:"pubgalaxy-d.openx.net"}},onetag:{prebid:{pubId:"699899629dbed80",placement:"%setupCode%"}},"33across":{prebid:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},seedtag:{prebid:{publisherId:"1363-6742-01",adUnitId:"33247362",placement:"inScreen"}},medianet:{prebid:{cid:"8CUQ257TE",crid:"752017230"}},appnexus:{prebid:{placementId:34224148,allowSmallerSizes:!0}},amazon:{amazonUAM:!0}},hasRonNative:!1,floors:{default:.01},renderer:{}}],adUnitCode:"/8095840,22381294811/.2_A.47406.28_tooplate.com_tier1",adUnitName:"Mobile Anchor",adServerAdapterType:"googletag",placementGpid:"adhesion",hideOnHpto:!1,overridePixelSizes:!0,adUnitElementId:{current:"tooplatecom47406",legacy:"tooplatecom47406"},hasLazyLoading:!1,adUnitOptimizedByPado:!0,disableCLSFix:!1,disableWrapperElement:!1,excludedFromInitialLoad:!0,isDynamicallyInserted:!1,sizes:[[300,100],[300,50],[320,100],[320,50]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},exemptFromVisibilityPolicy:!0,adRefreshes:{smartReact:{refreshInterval:20,minViewabilityRefreshTime:1,viewabilityThreshold:50,viewabilityBuffer:1,bigCreativeViewabilityThreshold:30}},alwaysIncludeInInitialAuction:!1,adhesives:[{adhesiveSettings:[{position:"bottom",design:"default",margin:0,button:{enabled:!0,showAfter:5,position:"left",color:"#111111"},container:{enabled:!0,width:"100%",height:5,parallaxHeight:100,backgroundColor:"rgba(255, 255, 255, 0.7)"}}],viewportSize:[320,0]}]}],domainFiltering:{baseDomain:"tooplate.com"}}]},new se,fe),monitoringService:new ce({timeout:4500},ge),ignoreLocationChanges:!1,ignoreLocationHashChanges:!0,ignoreSameViewLocationChanges:!1,ignoreConsentChanges:!1,customTargetingFunctions:fe,waitForConsentToActivateAll:!1,azerionSettings:{}};window.pgPluginManager||(window.pgPluginManager=new ie(ge,me,new ue(ge)))},4714:(e,t,n)=>{"use strict";var i=n(9439),r=n(4744),o=n.n(r),s=n(7165),a=n(282),d=n(329),c=n(3821),l=n(5675),u=n(5412);let p=function(e){return e.SkinSizes="skinSizes",e.All="all",e}({});var h=n(2703),g=n(7018),f=n(3481),m=n(8752);let v=function(e){return e.client="client",e.server="s2s",e}({}),b=function(e){return e[e.Criteo=0]="Criteo",e}({});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S{constructor(e,t){this.context=e,this.logger=t}static getInstance(e,t){return S.instance||(S.instance=new S(e,t)),S.instance}setFirstPartyData(e,t){const n={};if(e.mappedTaxonomyIds.contentTaxonomyVersion2_2&&e.mappedTaxonomyIds.contentTaxonomyVersion2_2.length&&(n.site=A(A({},n.site),{},{content:{data:[{name:e.rootDomain,segment:e.mappedTaxonomyIds.contentTaxonomyVersion2_2.map((e=>({id:"".concat(e)}))),ext:{segtax:6}}]}})),e.mappedTaxonomyIds.audienceTaxonomyVersion1_1&&e.mappedTaxonomyIds.audienceTaxonomyVersion1_1.length&&(n.user=A(A({},n.user),{},{data:[{name:e.rootDomain,segment:e.mappedTaxonomyIds.audienceTaxonomyVersion1_1.map((e=>({id:"".concat(e)}))),ext:{segtax:4}}]})),e.mappedTaxonomyIds.contentTaxonomyVersion1_0&&e.mappedTaxonomyIds.contentTaxonomyVersion1_0.length&&(n.site=A(A({},n.site),{},{cat:e.mappedTaxonomyIds.contentTaxonomyVersion1_0,sectioncat:e.mappedTaxonomyIds.contentTaxonomyVersion1_0,pagecat:e.mappedTaxonomyIds.contentTaxonomyVersion1_0})),t.some((e=>e.bids.some((e=>"adagio"===e.bidder))))){var i,r;(null===(i=t.find((e=>e.bids.some((e=>"adagio"===e.bidder)))))||void 0===i||null===(r=i.bids.find((e=>"adagio"===e.bidder)))||void 0===r?void 0:r.params)&&(n.site=A(A({},n.site),{},{ext:{data:{pagetype:"content",category:e.rootDomain}}}))}if(e.keywords.size&&(n.site=A(A({},n.site),{},{keywords:Array.from(e.keywords).join(",")})),0!==Object.keys(n.site||{}).length||0!==Object.keys(n.user||{}).length)return this.context.que.push((()=>{const e=o()(this.context.getConfig("ortb2")||{},n);this.context.setConfig({ortb2:e})})),this.logger.log({namespace:S.SetterName,message:"ORTB data queued to be set.",verboseLevel:2,payload:n}),n}}S.SetterName="OrtbFirstPartyDataSetter",S.instance=void 0;var I=n(8703),E=n(4120);class _{constructor(e){this.namespace="PrebidEventHandlerService",this.eventBus=void 0,this.logger=void 0,this.context=void 0,this.wrappedHandlersMap=new Map,this.wrapEventHandler=(e,t)=>{const n=n=>{try{return t(n)}catch(t){throw this.eventBus.emit(l.w.eventHandlerErrorOccurred,{error:t,context:{component:this.namespace,operation:E.eG.EventListenerExecution,eventName:e,eventArgs:(0,s.N1)(n),handlerContext:this.namespace},timestamp:(new Date).toISOString(),severity:E.MU.Critical}),this.logger.log({namespace:this.namespace,message:"Error in ".concat(e," handler: ").concat(t.message),verboseLevel:0}),t}};return this.wrappedHandlersMap.set(t,n),n},this.getWrappedHandler=e=>this.wrappedHandlersMap.get(e)||e,this.eventBus=e.eventBus,this.logger=e.logger,this.context=e.context}attachEventHandlers(){this.context.onEvent("auctionEnd",this.wrapEventHandler("auctionEnd",this.auctionEndHandler.bind(this))),this.context.onEvent("bidTimeout",this.wrapEventHandler("bidTimeout",this.bidTimeoutHandler.bind(this))),this.context.onEvent("adRenderSucceeded",this.wrapEventHandler("adRenderSucceeded",this.adRenderSucceededHandler.bind(this)))}detachEventHandlers(){this.context.offEvent("auctionEnd",this.getWrappedHandler(this.auctionEndHandler)),this.context.offEvent("bidTimeout",this.getWrappedHandler(this.bidTimeoutHandler)),this.context.offEvent("adRenderSucceeded",this.getWrappedHandler(this.adRenderSucceededHandler))}auctionEndHandler(e){const t=[];for(const n of e.adUnitCodes){const i=e.adUnits.find((e=>e.code===n)),r=e=>"appnexus"===e.bidder&&e.appnexus&&e.appnexus.buyerMemberId?e.appnexus.buyerMemberId||"":"ix"===e.bidder&&e.meta&&e.meta.brandId?e.meta.brandId:"pubmatic"===e.bidder&&e.meta&&e.meta.buyerId?e.meta.buyerId:"",o=[...e.bidsReceived,...this.context.getHighestCpmBids(n).filter((t=>!e.bidsReceived.find((e=>e.adId===t.adId)))),...e.bidsRejected].filter((e=>e.adUnitCode===n)).map((t=>{var n,i,o,s,a,d,c,l;const u=(null===(n=e.bidderRequests)||void 0===n||null===(i=n.find((e=>e.bidderCode===t.bidder)))||void 0===i||null===(o=i.bids)||void 0===o?void 0:o.find((e=>e.adUnitCode===t.adUnitCode)))||{},p="function"==typeof u.getFloor&&u.getFloor()||{};return{bidder:t.bidder,source:"s2s"===t.source?I.kL.Server:I.kL.Client,bidderResponseTime:t.timeToRespond,isTimeout:!1,rendered:!1,bid:{adId:t.adId,creativeId:t.creativeId||"",bidder:t.bidder,adomain:(null===(s=t.adserverTargeting)||void 0===s?void 0:s.hb_adomain)||"",cpm:t.cpm||0,dspId:(null===(a=t.adserverTargeting)||void 0===a?void 0:a.hb_dsp)||(null===(d=t.meta)||void 0===d?void 0:d.networkId)||"",size:(null===(c=t.adserverTargeting)||void 0===c?void 0:c.hb_size)||t.getSize()||"",dealId:t.dealId||"",brandId:(null===(l=t.meta)||void 0===l?void 0:l.brandId)||"",buyerId:r(t),bidderPositionInAuction:e.bidderRequests.filter((e=>!e.bidderCode.toLowerCase().includes("s2s"))).findIndex((e=>e.bidderCode===t.bidder)),ad:t.ad,floorPrice:p.floor,floorPriceCurrency:p.currency}}}));o.push(...e.noBids.filter((e=>e.adUnitCode===n)).map((e=>({bidder:e.bidder,source:"s2s"===e.src?I.kL.Server:I.kL.Client,bidderResponseTime:0,isTimeout:!1,rendered:!1}))));const s={adUnitElementId:n,requestedSizes:i.sizes,requestedFormat:Object.keys(i.mediaTypes),timeout:e.timeout,auctionDuration:e.auctionEnd-e.timestamp,bids:o};t.push(s)}const n=this.context.getUserIds(),i={adUnits:t,auctionId:e.auctionId,userIds:Object.keys(n),isTimeout:!1};this.logger.log({payload:i,namespace:this.namespace,message:"Event: ".concat(l.w.prebidAuctionEnded),verboseLevel:1}),this.eventBus.emit(l.w.prebidAuctionEnded,i)}bidTimeoutHandler(e){const t={};for(const n of e)t[n.auctionId]=t[n.auctionId]||[],t[n.auctionId].push({adUnitElementId:n.adUnitCode,bidder:n.bidder});this.logger.log({namespace:this.namespace,message:"Event: ".concat(l.w.prebidAuctionTimeouts),payload:t,verboseLevel:1}),this.eventBus.emit(l.w.prebidAuctionTimeouts,t)}adRenderSucceededHandler(e){const t={adUnitElementId:e.bid.adUnitCode,bidder:e.bid.bidder,auctionId:e.bid.auctionId,adId:e.bid.adId,cpm:e.bid.cpm||0};this.logger.log({payload:t,namespace:this.namespace,message:"Event: ".concat(l.w.prebidBidRendered),verboseLevel:1}),this.eventBus.emit(l.w.prebidBidRendered,t)}}class x{constructor(e){this.config=e,this.namespace="PrebidHooksService",this.eventBus=void 0,this.logger=void 0,this.eventBus=this.config.eventBus,this.logger=this.config.logger,this.prioritizeRefreshableBids=this.prioritizeRefreshableBids.bind(this),this.setBidderOrder=this.setBidderOrder.bind(this),this.encodeNativeAssetUrls=this.encodeNativeAssetUrls.bind(this)}attachHooks(){this.logger.log({namespace:this.namespace,message:"Attaching Prebid hooks.",verboseLevel:1}),this.attachGetHighestCpmBidsFromBidPoolHook(),this.attachMakeBidRequestsHook(),this.attachTargetingDoneHook()}attachGetHighestCpmBidsFromBidPoolHook(){var e;null!==(e=this.config.prioritizeRefreshableBidsSettings)&&void 0!==e&&e.enabled&&this.config.context.que.push((()=>{this.config.context.getHighestCpmBidsFromBidPool.before(this.prioritizeRefreshableBids,14)}))}prioritizeRefreshableBids(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this.config.disableRefreshForBidders)return void e(t,n,r,o);const s=t.filter((e=>{var t,n;return null===(t=this.config)||void 0===t||null===(n=t.disableRefreshForBidders)||void 0===n?void 0:n.some((t=>t.bidderCode===e.bidderCode&&(t.sizes===p.All||t.sizes===p.SkinSizes&&!!this.config.hptoSizes.find((t=>t[0]===e.width&&t[1]===e.height)))))})),a=t.filter((e=>{var t,n;return!(null!==(t=this.config)&&void 0!==t&&null!==(n=t.disableRefreshForBidders)&&void 0!==n&&n.some((t=>t.bidderCode===e.bidderCode&&(t.sizes===p.All||t.sizes===p.SkinSizes&&!!this.config.hptoSizes.find((t=>t[0]===e.width&&t[1]===e.height))))))}));if(null===(i=this.config.prioritizeRefreshableBidsSettings)||void 0===i||!i.cpmMultiplier)return void e(a,n,r,!0);if(!a.length||!s.length)return void e(t,n,r,o);const d=(e,t)=>(e.cpm||0)>(t.cpm||0)?e:t,c=a.reduce(d),l=s.reduce(d);(c.cpm||0)*this.config.prioritizeRefreshableBidsSettings.cpmMultiplier>=(l.cpm||0)?e(a,n,r,!0):e(t,n,r,o)}attachMakeBidRequestsHook(){this.config.bidderOrdering&&0!==this.config.bidderOrdering.length&&this.config.context.que.push((()=>{this.config.context.getHook("makeBidRequests").after(this.setBidderOrder,15)}))}setBidderOrder(e,t){var n;if(!this.config.bidderOrdering||0===this.config.bidderOrdering.length)return void e(t);const i=(null===(n=this.config.config.s2sConfig)||void 0===n?void 0:n.bidders)||[],r=this.config.bidderOrdering.filter((e=>i.includes(e))),o=this.config.bidderOrdering.filter((e=>!i.includes(e)));e([...r.map((e=>t.find((t=>t.bidderCode===e)))).filter(Boolean),...t.filter((e=>!r.includes(e.bidderCode)&&i.includes(e.bidderCode))),...o.map((e=>t.find((t=>t.bidderCode===e)))).filter(Boolean),...t.filter((e=>!o.includes(e.bidderCode)&&!i.includes(e.bidderCode)))])}attachTargetingDoneHook(){this.config.context.que.push((()=>{this.config.context.getHook("targetingDone").after(this.encodeNativeAssetUrls)}))}encodeNativeAssetUrls(e,t){Object.entries(t).forEach((e=>{let[t,n]=e;Object.entries(n).forEach((e=>{let[n,i]=e;this.config.keysWhoseValuesNeedToBeEncoded.includes(n)&&this.eventBus.emit(l.w.attachKeyValueRequested,{key:n,adUnitElementId:t,value:encodeURIComponent((0,d.sH)(i))})}))})),e(t)}}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C=e=>{const t=T(T({},e?{1:e}:{}),{},{8:encodeURIComponent(window.location.href),9:encodeURIComponent(window.location.hostname),12:encodeURIComponent(navigator.userAgent)});return{pd:btoa(Object.entries(t).map((e=>{let[t,n]=e;return"".concat(t,"=").concat(n)})).join("&"))}},R=C,U=(e,t)=>{var n,i,r;const o=null===(n=e.config.userSync)||void 0===n||null===(i=n.userIds)||void 0===i||null===(r=i.find((e=>"id5Id"===e.name)))||void 0===r?void 0:r.params;!o||o.pd&&!t||(o.pd=C(t).pd)};var k,D;function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let L=(0,c.Q)()((D=class e extends m._{constructor(t){var n,i;super(t),this.floorsSet=void 0,this.floorProvider=void 0,this.initialized=!1,this.runAuctionQue=[],this.clientBidAdjustments=new Map,this.serverBidAdjustments=new Map,this.prebidEventHandlerService=void 0,this.runningAuctions=new Set,this.runAuction=e=>{const t=(0,s.A4)(e);if(e.callbackVastURL&&(t.callbackVastURL=e.callbackVastURL),this.initialized){if(this.setBidderSpecificFirstPartyDataTargeting(),this.config.adUnitManager.applySizeMapping(this.config.adUnits,t.adUnitsElementIDs),e.skipRunningAuction)return this.initiateAuction(t);if(this.config.maximumNumberOfConcurrentAuctions&&this.runningAuctions.size>=this.config.maximumNumberOfConcurrentAuctions)return t.skipRunningAuction=!0,this.initiateAuction(t);this.runningAuctions.add(t.auctionID),this.initiateAuction(t)}else this.runAuctionQue.push(t)},this.config.context.que=this.config.context.que||[],this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t}),(null!==(n=this.config.dynamicBidAdjustment)&&void 0!==n&&n.client||null!==(i=this.config.dynamicBidAdjustment)&&void 0!==i&&i.server)&&this.setDynamicBidAdjustments(this.config.dynamicBidAdjustment),(0,a.g)(["uaFullVersion"]).then((()=>{})),this.removeAdUnits=this.removeAdUnits.bind(this),this.readdAdUnits=this.readdAdUnits.bind(this),this.removePpidConfig=this.removePpidConfig.bind(this),this.setFirstPartyData=this.setFirstPartyData.bind(this),this.setPrebidAudienceBidderSettings=this.setPrebidAudienceBidderSettings.bind(this),this.handleAttachKeyValuesToAll=this.handleAttachKeyValuesToAll.bind(this),this.setDynamicBidAdjustments=this.setDynamicBidAdjustments.bind(this),this.bidAdjustmentCallback=this.bidAdjustmentCallback.bind(this),this.inverseBidAdjustmentCallback=this.inverseBidAdjustmentCallback.bind(this),this.handleAdRequested=this.handleAdRequested.bind(this),this.handleBidUsed=this.handleBidUsed.bind(this),this.renderAdFacade=this.renderAdFacade.bind(this),this.handleAuctionFinished=this.handleAuctionFinished.bind(this),this.handleUserAudienceDataUpdated=this.handleUserAudienceDataUpdated.bind(this),this.config.context.que.push((()=>{var e;this.config.context.pbRenderAd=null!==(e=this.config.context.pbRenderAd)&&void 0!==e?e:this.config.context.renderAd,this.config.context.renderAd=this.renderAdFacade})),this.floorsSet=!1,this.config.adUnits=this.config.macroService.meetsMacrosRequirements(this.config.adUnits),this.prebidEventHandlerService=new _(this.config)}registerMiddlewaresHook(){}registerEventListenersHook(){this.eventBus.on(l.w.filterPrebidBiddersRequested,this.handleFilterPrebidBidders.bind(this),!1,e.PluginName),this.eventBus.on(l.w.setFirstPartyData,this.setFirstPartyData,!1,e.PluginName),this.eventBus.on(l.w.attachKeyValuesToAll,this.handleAttachKeyValuesToAll,!0,e.PluginName),this.config.resetPpidOnUserAudienceUpdate&&this.eventBus.on(l.w.userAudienceDataUpdated,this.removePpidConfig,!1,e.PluginName),this.eventBus.on(l.w.adUnitsBlockedFromUsage,this.removeAdUnits,!1,e.PluginName),this.eventBus.on(l.w.adUnitsUnblockedFromUsage,this.readdAdUnits,!1,e.PluginName),this.eventBus.on(l.w.userAudienceDataUpdated,this.setPrebidAudienceBidderSettings,!1,e.PluginName),this.eventBus.on(l.w.dynamicBidAdjustmentsRequested,this.setDynamicBidAdjustments,!0,e.PluginName),this.eventBus.on(l.w.bidUsed,this.handleBidUsed,!1,e.PluginName),this.eventBus.on(l.w.auctionFinished,this.handleAuctionFinished,!0,e.PluginName),this.eventBus.on(l.w.userAudienceDataUpdated,this.handleUserAudienceDataUpdated,!0,e.PluginName)}beforeActivate(){var t,n;if(this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),null!==(t=this.config.config.userSync)&&void 0!==t&&t.encryptedSignalSources){const e=()=>{this.config.context.que.push((()=>{"function"==typeof this.config.context.registerSignalSources&&this.config.context.registerSignalSources()}))};this.eventBus.emit(l.w.adServerAddCallbackToQueRequested,{callback:e,adServerAdapterType:f.K.GOOGLETAG})}return null!==(n=this.config.internalTests)&&void 0!==n&&n.length&&this.config.internalTestingModule&&this.config.internalTestingModule.runTests(this.config),super.beforeActivate()}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.init(),this.config.adUnitManager.setProductInfo(this.config.adUnits),super.activate()}setDynamicBidAdjustments(e){for(const t of e.client||[])this.clientBidAdjustments.set(t.bidderCode.toLowerCase(),t.adjustment);for(const t of e.server||[])this.serverBidAdjustments.set(t.bidderCode.toLowerCase(),t.adjustment)}init(){var e;if(null!==(e=this.config.config.consentManagement)&&void 0!==e&&e.gdpr){const e={countryCodes:this.config.config.gdprGeos,state:g.b.Includes};this.config.config.consentManagement.gdpr.defaultGdprScope=this.config.clientTargetingService.meetsGeoTargetingRequirements(e)}this.setDynamicBidAdjustmentHandlers(),this.applyBidderParamModifications();for(const e of this.config.adUnits||[])this.config.adUnitManager.attachKeyValuesForPrebidAdUnit(e);if(new x(this.config).attachHooks(),this.config.context.que.push((()=>{var e,t;this.config.bidderConfigurations.forEach((e=>{this.config.context.setBidderConfig(e,!0)})),this.setFloors(),this.config.config.useBidCache&&null!==(e=this.config.disabledBidCacheBidders)&&void 0!==e&&e.length&&(this.config.config.bidCacheFilterFunction=e=>{var t;return!(null!==(t=this.config.disabledBidCacheBidders)&&void 0!==t&&t.includes(e.bidder))}),U(this.config),this.config.context.setConfig(this.config.config),this.config.context.que.push((()=>{this.config.context.registerPgAliases(),this.config.context.aliasRegistry&&this.eventBus.emit(l.w.prebidAliasesSet,this.config.context.aliasRegistry)})),this.config.config.useBidCache&&null!==(t=this.config.disabledBidCacheBidders)&&void 0!==t&&t.length&&this.config.context.que.push((()=>{if(this.config.context.aliasRegistry){var e;const t=Object.keys(this.config.context.aliasRegistry).filter((e=>{var t;return this.config.context.aliasRegistry&&(null===(t=this.config.disabledBidCacheBidders)||void 0===t?void 0:t.includes(this.config.context.aliasRegistry[e]))}));null===(e=this.config.disabledBidCacheBidders)||void 0===e||e.push(...t)}})),this.prebidEventHandlerService.attachEventHandlers()})),!this.floorProvider)return this.initialized=!0,this.runAuctionQue.forEach((e=>this.runAuction(e))),void(this.runAuctionQue=[]);this.floorProvider.setFloors().then((()=>{this.initialized=!0,this.runAuctionQue.forEach((e=>this.runAuction(e))),this.runAuctionQue=[]}))}afterActivate(){return this.eventBus.emit(l.w.headerBidderActivated,{headerBidder:u.q.Prebid}),super.afterActivate()}async deactivate(){return this.eventBus.emit(l.w.headerBidderDeactivated,{headerBidder:u.q.Prebid}),this.eventBus.detachAllForNamespace(e.PluginName),this.prebidEventHandlerService.detachEventHandlers(),super.deactivate()}setDynamicBidAdjustmentHandlers(){this.config.dynamicBidAdjustment&&(this.config.context.bidderSettings=this.config.context.bidderSettings||{},this.config.context.bidderSettings.standard=this.config.context.bidderSettings.standard||{},this.config.context.bidderSettings.standard.bidCpmAdjustment=this.bidAdjustmentCallback,this.config.context.bidderSettings.standard.inverseBidAdjustment=this.inverseBidAdjustmentCallback)}applyBidderParamModifications(){if(this.config.bidderParamModificationServices.length)for(const e of this.config.bidderParamModificationServices)this.config.adUnits=e.modifyParams(this.config.adUnits)}bidAdjustmentCallback(e,t){return t.bidderCode?t.source===v.client?e*(this.clientBidAdjustments.get(t.bidderCode.toLowerCase())||1):t.source===v.server?e*(this.serverBidAdjustments.get(t.bidderCode.toLowerCase())||1):e:e}inverseBidAdjustmentCallback(e,t){return t.bidder?t.src===v.client?e/(this.clientBidAdjustments.get(t.bidder.toLowerCase())||1):t.src===v.server?e/(this.serverBidAdjustments.get(t.bidder.toLowerCase())||1):e:e}initiateAuction(e){this.config.auctionFactory.getAuction(e,this.config).run()}setBidderSpecificFirstPartyDataTargeting(){const e=(0,d.DI)(this.logger);if(!e.length)return;const t=["ix",...Object.keys(this.config.context.aliasRegistry||{}).filter((e=>"ix"===this.config.context.aliasRegistry[e]))],n=["rubicon",...Object.keys(this.config.context.aliasRegistry||{}).filter((e=>"rubicon"===this.config.context.aliasRegistry[e]))];for(const n of t){const t={};t[n]={firstPartyData:{pps:e.join(",")}},this.config.context.mergeConfig(t)}for(const t of n)this.config.context.setBidderConfig({bidders:[t],config:{ortb2:{user:{ext:{data:{pps:e}}}}}},!0)}tryAddAdUnit(e){const t=this.config.adUnitManager.createNewAdUnitInstance(this.config.adUnits,e)[0],n=this.config.adUnitManager.getAdUnit(this.config.adUnits,e.adUnitElementId);return!(!t||!n)&&(this.config.adUnitManager.handleBidderOverrides(t,n,!1),this.config.adUnits.push(t),this.floorProvider||(this.floorsSet=!1,this.setFloors()),this.applyBidderParamModifications(),this.config.adUnitManager.attachKeyValuesForPrebidAdUnit(t),this.config.adUnitManager.setProductInfo(this.config.adUnits,e.newAdunitElementId),!0)}setFloors(){if(this.floorsSet||0===this.config.adUnits.length)return;if(this.config.floorProvider)return this.floorProvider=this.config.floorProviderFactory.create(this.config.floorProvider),this.floorProvider.init(),void(this.floorsSet=!0);const e=this.config.context.getConfig("floors");for(const n of this.config.adUnits){var t;null!==(t=n.floors)&&void 0!==t&&t.default&&(e.data.values[n.adUnitElementId]=n.floors.default)}this.config.context.setConfig({floors:e}),this.floorsSet=!0}removeAdUnits(t){this.config.adUnits=this.config.adUnitManager.removeAdUnits(this.config.adUnits,t),this.logger.log({namespace:e.PluginName,message:"Filtered elements from config triggered by ".concat(l.w.adUnitsBlockedFromUsage," event."),verboseLevel:1,payload:t})}readdAdUnits(e){this.config.adUnits.push(...this.config.adUnitManager.restoreAdUnits(e))}handleFilterPrebidBidders(e){this.config.adUnits.forEach((t=>{e.adUnits.includes(t.adUnitElementId)&&(t.bids=t.bids.filter((t=>e.bidders.includes(t.bidder))),t.multiFormatBids&&t.multiFormatBids.forEach((t=>{t.bids=t.bids.filter((t=>e.bidders.includes(t.bidder)))})))}))}handleCloneAdUnitsRequested(t){const n=this.config.adUnitManager.cloneAdUnits(this.config.adUnits,t),i=this.config.adUnitManager.getAdUnit(this.config.adUnits,t.cloneFromAdUnitElementId);n.length&&i&&(n.forEach((e=>{var n,r;t.ext&&!0===(null===(n=t.ext)||void 0===n?void 0:n.includeInInitialAuction)&&!this.config.adUnitsInitialLoadElementIDs.includes(e.adUnitElementId)&&this.config.adUnitsInitialLoadElementIDs.push(e.adUnitElementId),this.config.adUnitManager.handleBidderOverrides(e,i,!(null===(r=t.overrides)||void 0===r||!r.isChild)),this.config.adUnits.push(e),this.config.adUnitManager.setProductInfo(this.config.adUnits,e.adUnitElementId),this.config.adUnitManager.attachKeyValuesForPrebidAdUnit(e)})),this.floorProvider||(this.floorsSet=!1,this.setFloors()),this.applyBidderParamModifications(),this.logger.log({namespace:e.PluginName,message:"Cloned ad units added to config.",verboseLevel:1,payload:{adUnits:this.config.adUnits}}))}removePpidConfig(){const e=this.config.context.getConfig("userSync");e&&(e.ppid=null,this.config.context.setConfig({userSync:e}))}handleUserAudienceDataUpdated(e){var t;const n=e.callback();if(!n||!n.extraNormalizedSha256)return;const i=this.config.context.getConfig("userSync"),r=null==i||null===(t=i.userIds)||void 0===t?void 0:t.find((e=>"id5Id"===e.name));if(r&&r.params)return r.params=j(j({},r.params),R(n.extraNormalizedSha256)),void this.config.context.setConfig({userSync:i});U(this.config,n.extraNormalizedSha256)}setFirstPartyData(e){const t=S.getInstance(this.config.context,this.logger).setFirstPartyData(e,this.config.adUnits);t&&(this.config.config.ortb2=o()(this.config.config.ortb2||{},t))}setPrebidAudienceBidderSettings(e){const t=e.callback();t&&this.config.context.que.push((()=>{this.config.audienceDataSetterFactory.create(b.Criteo).setAudienceData(t)}))}handleAttachKeyValuesToAll(e){this.config.adUnitManager.handleAttachKeyValuesToAll(this.config.adUnits,e)}handleAdRequested(e){var t,n,i;const r=this.config.context.getHighestCpmBids(e.slotId).sort(((e,t)=>t.cpm-e.cpm))[0];r?this.eventBus.emit(l.w.bidsReceived,j(j(j(j(j({bidder:u.q.Prebid,adRequestId:e.adRequestId,noBid:!1,format:r.mediaType,cpm:r.cpm,size:r.getSize().split("x").map((e=>parseInt(e))),adId:r.adId,slotId:e.slotId},"banner"===r.mediaType?{renderer:(e,t)=>this.config.context.renderAd(e,t)}:null),{},{deal:!1,auctionId:r.latestTargetedAuctionId},r.native?{nativeAd:j(j(j({type:"Ad"},r.native.title?{title:r.native.title}:null),r.native.body?{body:r.native.body}:null),r.native.image&&r.native.image.url?{imageUrl:r.native.image.url}:null)}:null),null!==(t=r.native)&&void 0!==t&&t.clickTrackers?{clickTrackers:r.native.clickTrackers}:null),null!==(n=r.native)&&void 0!==n&&n.impressionTrackers?{impressionTrackers:r.native.impressionTrackers}:null),null!==(i=r.native)&&void 0!==i&&i.javascriptTrackers?{javascriptTrackersHtmlString:r.native.javascriptTrackers}:null)):this.eventBus.emit(l.w.bidsReceived,{bidder:u.q.Prebid,adRequestId:e.adRequestId,noBid:!0,format:"banner",slotId:e.slotId,size:[0,0]})}handleBidUsed(e){e.headerBidder===u.q.Prebid&&(this.config.context.markWinningBidAsUsed({adId:e.adId}),e.fireImpressionTrackersCallback&&e.fireImpressionTrackersCallback(),e.fireScriptTrackersCallback&&e.fireScriptTrackersCallback())}renderAdFacade(e,t,n){const i=this.config.context.getHighestCpmBids().find((e=>e.adId===t)),r=i?this.config.adUnitManager.getAdUnit(this.config.adUnits,i.adUnitCode):void 0;i&&r&&this.config.hptoSizes.find((e=>e[0]===i.width&&e[1]===i.height))&&this.emitSkinAdRenderRequested(r),i&&null!=r&&r.adUnitElementId&&this.checkIfRefreshShouldBeDisabled(i)&&this.emitDisableAdRefreshRequested(r.adUnitElementId),this.applyBidderFixes(i,r),this.config.rendererFactory.getRender(this.config.context,e,t,i,r,n).renderAd()}emitSkinAdRenderRequested(t){const n={elementsIDs:[t.adUnitElementId]};this.logger.log({payload:n,namespace:e.PluginName,message:"Event: ".concat(l.w.skinAdRenderRequested,"."),verboseLevel:1}),this.eventBus.emit(l.w.skinAdRenderRequested,n)}checkIfRefreshShouldBeDisabled(e){if(!this.config.disableRefreshForBidders||!this.config.disableRefreshForBidders.length)return!1;const t=this.config.disableRefreshForBidders.find((t=>t.bidderCode===e.bidderCode));if(!t)return!1;switch(t.sizes){case p.All:return!0;case p.SkinSizes:return this.config.hptoSizes.some((t=>t[0]===e.width&&t[1]===e.height))}}emitDisableAdRefreshRequested(t){const n={elementsIDs:[t]};this.logger.log({payload:n,namespace:e.PluginName,message:"Event: ".concat(l.w.disableAdRefreshRequested,"."),verboseLevel:1}),this.eventBus.emit(l.w.disableAdRefreshRequested,n)}applyBidderFixes(e,t){var n;if("dspx"===((this.config.context.aliasRegistry||{})[(null==e?void 0:e.bidderCode)||""]||(null==e?void 0:e.bidderCode)||""))return e&&t&&(null===(n=this.config.bidderFixServices.get("dspx"))||void 0===n?void 0:n.applyFixes(e,t))}handleAuctionFinished(e){e.headerBidder===u.q.Prebid&&this.runningAuctions.delete(e.auctionID)}},D.PluginName=h.f.PrebidPlugin,k=D))||k;var M,z,F=n(8789),q=n(6360),H=n(7267);let V=(0,c.Q)()((z=class e extends q.Q{constructor(t){super(t),this.logImpression=(t,n,i)=>{try{if("object"==typeof i){if(!i.adunit_code)return void this.logger.error({namespace:e.PluginName,message:"No Ad Unit Code found.",type:F.f.LogImpressionAdUnitCodeNotFoundError,verboseLevel:1});if(this.logParamsAreValid(i)){const t={location:i.location,adunit_code:i.adunit_code,provider_id:this.mapToProviderID(i.provider_id),size:i.size,price:Number.parseFloat(i.price),data_type:i.data_type||1,hb_channel:i.hb_channel||0,bundle_name:this.config.fileName};window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]&&(t[H.W.WRAPPER_ACTIVE_TARGETING_KEY_NAME]=window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]),this.logger.log({namespace:e.PluginName,message:"Logging impression.",type:F.f.LogImpressionDataInfo,payload:t})}else this.logger.error({namespace:e.PluginName,message:"Invalid log impression data.",type:F.f.LogImpressionInvalidImpressionDataError,verboseLevel:1,payload:i})}else this.logger.error({namespace:e.PluginName,message:"Invalid log impression format.",type:F.f.LogImpressionInvalidImpressionFormatError,verboseLevel:1,payload:i})}catch(t){this.logger.error({namespace:e.PluginName,message:"Error while parsing log impression.",type:F.f.LogImpressionWhileParsingLogImpressionError,verboseLevel:1,payload:i})}},this.logParamsAreValid=e=>void 0!==e.provider_id&&void 0!==e.price&&void 0!==e.location&&void 0!==e.adunit_code&&void 0!==e.size,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.config.context.pghb={logImpression:this.logImpression},await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.config.context.pghb={},await super.deactivate()}mapToProviderID(t){const n=this.config.providersIdMapping[t];if(n)return n;this.logger.warn({namespace:e.PluginName,message:"Not found provider ID for ".concat(t,"."),type:F.f.LogImpressionNotFoundProviderIdError})}},z.PluginName=h.f.LogImpressionPlugin,M=z))||M;var $=n(3916);const G=["renderer"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class J extends $.A{constructor(e){super(e)}applyTargeting(e){return K(K({},e),{},{adUnits:this.applyTargetingToAdUnits(e),taskHandler:{},auctionFactory:{},videoRenderer:{},audienceDataSetterFactory:{},floorProviderFactory:{},rendererFactory:{},bidderParamModificationServices:[],bidderFixServices:new Map,adUnitManager:{}})}applyTargetingToAdUnits(e){const t=e.adUnits.reduce(((t,n)=>{const i=this.filterByTargeting(n.setups),r=e.splitBiddersWhichDoNotSupportMultiFormat?this.getMultiFormatBidObjects(i,e.bidderMultiFormatSupportSettings):null;return this.filterByBidderTargeting(i,e).forEach((e=>t.push(K(K(K({},this.getRelevantProperties(n)),this.getRelevantProperties(e)),r)))),t}),[]);return t.forEach((e=>{var t;e.bids.forEach((e=>{e.bidder.includes("#")&&(e.bidder=e.bidder.split("#")[0])})),null===(t=e.multiFormatBids)||void 0===t||t.forEach((e=>{e.bids.forEach((e=>{e.bidder.includes("#")&&(e.bidder=e.bidder.split("#")[0])}))}))})),t}filterByBidderTargeting(e,t){if(!t.bidderTargeting)return e;for(const n of e)n.targeting||(n.bids=n.bids.filter((e=>{var n,i,r,o;const s=null===(n=t.bidderTargeting)||void 0===n?void 0:n.find((t=>e.bidder===t.bidder));if(!s)return!0;const a=null===(i=s.targeting)||void 0===i||!i.geoLocation||this.targetingService.meetsGeoTargetingRequirements(s.targeting.geoLocation),d=null===(r=s.targeting)||void 0===r||!r.deviceTypes||this.targetingService.meetsDeviceTargetingRequirements(s.targeting.deviceTypes),c=null===(o=s.targeting)||void 0===o||!o.windowWidth||this.targetingService.meetsWidthTargetingRequirements(s.targeting.windowWidth);return d&&a&&c})));return e}getRelevantProperties(e){const{renderer:t}=e;return function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,G)}getMultiFormatBidObjects(e,t){const n=[...t.biddersWhichNeedToBeSplit,...t.biddersWithMultipleParams];if(!e.some((e=>Object.keys(e.mediaTypes).length>1))||!e.some((e=>e.bids.some((e=>e.bidder.includes("#")))))||!e.some((e=>e.bids.some((e=>n.includes(e.bidder))))))return null;const i=[...e.map((e=>({mediaTypes:e.mediaTypes,bids:e.bids.filter((e=>!n.includes(e.bidder)&&!e.bidder.includes("#")))})))];for(const n of e){if(1===Object.keys(n.mediaTypes).length)continue;const e=n.bids.filter((e=>t.biddersWithMultipleParams.includes(e.bidder)||e.bidder.includes("#"))).map((e=>e.bidder));for(const r of Object.keys(n.mediaTypes)){const o=n.bids.filter((e=>t.biddersWhichNeedToBeSplit.includes(e.bidder))),s=n.bids.filter((e=>t.biddersWithMultipleParams.includes(e.bidder)||e.bidder.includes("#"))).filter((t=>!!t.bidder.includes("#".concat(r))||("banner"===r?!t.bidder.includes("#"):"native"===r&&(!t.bidder.includes("#")&&!e.includes("".concat(t.bidder,"#native"))))));(s.length||o.length)&&i.push({mediaTypes:{[r]:n.mediaTypes[r]},bids:[...o,...s]})}}return 1===i.length?null:{multiFormatBids:i}}}class Y{constructor(e,t){this.context=e,this.logger=t}static getInstance(e,t){return Y.instance||(Y.instance=new Y(e,t)),Y.instance}setAudienceData(e){if(!(null!=e&&e.md5HashedEmail||null!=e&&e.sha256HashedEmail))return;const t={bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[]}}}}}},n={source:(0,s.SN)(),uids:[]};null!=e&&e.md5HashedEmail&&n.uids.push({id:e.md5HashedEmail,atype:3,ext:{stype:"hemmd5"}}),null!=e&&e.sha256HashedEmail&&n.uids.push({id:e.sha256HashedEmail,atype:3,ext:{stype:"hemsha256"}}),t.config.ortb2.user.ext.data.eids.push(n),this.context.setBidderConfig(t,!0),this.logger.log({namespace:Y.SetterName,message:"Criteo bidder user data set.",verboseLevel:2,payload:t})}}Y.SetterName="CriteoAudienceDataSetter",Y.instance=void 0;class X{constructor(e,t){this.context=e,this.logger=t}create(e){if(e===b.Criteo)return Y.getInstance(this.context,this.logger)}}var Z=n(8064),ee=n(6811);let te=function(e){return e.OnCreate="on-create",e.OnAuction="on-auction",e}({}),ne=function(e){return e.ChildInstances="child-instances",e.AdUnitInstances="ad-unit-instances",e}({}),ie=function(e){return e.RoundRobin="round-robin",e.RemoveBidder="remove-bidder",e}({});function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ae{constructor(e,t){this.event=e,this.config=t,this.context=void 0,this.cacheUrl="https://pbc.360yield.com/cache",this.cacheTimeout=300,this.auctionType=void 0,this.adUnits=void 0,this.eventBus=void 0,this.logger=void 0,this.getFailFinishAuctionCallback=e=>()=>{},this.context=t.context,this.config=t,this.event=e,this.eventBus=this.config.eventBus,this.logger=this.config.logger,this.finishAuction=this.finishAuction.bind(this),this.getSuccessFinishAuctionCallback=this.getSuccessFinishAuctionCallback.bind(this),this.bidsBackHandler=this.bidsBackHandler.bind(this)}setAdUnits(){const e=this.config.adUnits.filter((e=>!this.event.skipRunningAuction&&this.event.adUnitsElementIDs.includes(e.adUnitElementId))).filter((e=>e.bids.length>0));return this.handleBidderOverrides(e)}handleBidderOverrides(e){const t=new Map;for(const n of e)if(n.bidderOverrides&&n.instanceOf){if(!t.has(n.instanceOf)){const e=n.bidderOverrides.filter((e=>e.applyTo===ne.AdUnitInstances&&e.mode===te.OnAuction));for(const t of e){const e=n.bids.find((e=>e.bidder.toLowerCase()===t.bidder.toLowerCase()));null!=e&&e.params[t.property]&&(t.overrides=Array.from(new Set([null==e?void 0:e.params[t.property],...t.overrides])))}t.set(n.instanceOf,e)}for(const e of t.get(n.instanceOf)){void 0===e.overrides[0]&&(n.bids=n.bids.filter((t=>t.bidder.toLowerCase()!==e.bidder.toLowerCase())));const t=n.bids.find((t=>t.bidder.toLowerCase()===e.bidder.toLowerCase()));t&&e.overrides[0]&&(t.params[e.property]=e.overrides[0]),e.onExhaust===ie.RemoveBidder&&e.overrides.shift(),e.onExhaust===ie.RoundRobin&&e.overrides.push(e.overrides.shift())}}return e}bidsBackHandler(e,t,n){this.filterBidsFromBlockedAdvertiserDomains(e)}filterBidsFromBlockedAdvertiserDomains(e){e&&Object.entries(e).forEach((e=>{let[t,{bids:n}]=e;n.forEach((e=>{var t;const n=oe(oe({},e.adserverTargeting.hb_adomain&&{adomain:e.adserverTargeting.hb_adomain}),(null===(t=e.meta.dsa)||void 0===t?void 0:t.domain)&&{dsa_domain:e.meta.dsa.domain});if(!Object.keys(n).length)return;let i;this.config.blockedAdvertiserDomains.some((e=>{const t=Object.keys(n).find((t=>e===n[t]));return!!t&&(i={reason:t,domain:n[t]},!0)})),i&&(this.config.context.markWinningBidAsUsed({adId:e.adId}),this.logger.log({namespace:this.auctionType,message:"Bid marked as used due to blocked ".concat(i.reason,' domain "').concat(i.domain,'".'),verboseLevel:1}))}))}))}logRealPrebidBids(e){const t=this.config.context.getAdserverTargeting();for(const n in t){let i="";if(t[n].hb_adid){for(const r in e)for(const o of e[r].bids)o.adserverTargeting.hb_adid===t[n].hb_adid&&(i=o.cpm.toString());const r=this.config.context.getAllPrebidWinningBids();for(const e of r)e.adId===t[n].hb_adid&&(i=e.cpm.toString())}this.eventBus.emit(l.w.logAnalyticsDataRequested,{value:i,key:ee.p.PrebidRealBid,isPageLevel:!1,adUnitElementIds:[n]})}}getWinningBids(e){const t=this.config.context.getAdserverTargeting(),n=new Map;for(const i in e)n.set(i,parseFloat(t[i].hb_pb));return n}finishAuction(e,t,n,i){const r={auctionID:t,winningBids:n,headerBidder:u.q.Prebid,elementsIDs:e.map((e=>e.adUnitElementId)),callback:i};this.logger.log({namespace:this.auctionType,message:"Auction finished. Event: ".concat(l.w.auctionFinished,"."),verboseLevel:1,payload:r});const o=()=>{this.eventBus.emit(l.w.auctionFinished,r)},a=[],d=[],c=this.config.context.getAdserverTargeting();if(Object.entries(c||{}).forEach((e=>{let[t,n]=e;"native"===n.hb_format&&(this.eventBus.emit(l.w.clearKeyValuesByKeyRequested,{keys:["ntv_cache_id"],adUnitElementId:t}),a.push(t),d.push((0,s.A4)(n)))})),0===a.length)return void o();const p=new AbortController,h=fetch(this.cacheUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({puts:d.map((e=>({type:"json",ttlseconds:30,value:e})))}),signal:p.signal}),g=setTimeout((()=>p.abort()),this.cacheTimeout);h.then((e=>{if(clearTimeout(g),!e.ok)return this.logger.error({namespace:this.auctionType,message:"Error in cache server for native targeting.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1}),void o();e.json().then((e=>{(e.responses||[]).forEach(((e,t)=>{this.eventBus.emit(l.w.attachKeyValueRequested,{key:"ntv_cache_id",adUnitElementId:a[t],value:e.uuid})})),o()})).catch((()=>{this.logger.error({namespace:this.auctionType,message:"Error decoding cache response for native targeting.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1}),o()}))})).catch((()=>{this.logger.error({namespace:this.auctionType,message:"Error caching native targeting.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1}),o()}))}getHptoSizes(){return this.config.hptoSizes.map((e=>e.join("x")))}handleRequestingBidsError(){this.logger.error({namespace:this.auctionType,message:"Error while requesting bids.",type:F.f.PrebidRequestingBidsError,verboseLevel:1}),this.finishAuction(this.adUnits,this.event.auctionID,new Map,this.getFailFinishAuctionCallback(this.adUnits))}getSuccessFinishAuctionCallback(e,t){return this.logRealPrebidBids(t),()=>{this.config.context.que.push((()=>{this.config.context.setTargetingForGPTAsync(e.map((e=>e.adUnitElementId)))}))}}splitMultiFormatAdUnits(e){const t=[];for(const n of e)t.push(...this.splitMultiFormatAdUnit(n));return t}splitMultiFormatAdUnit(e){if(!e.multiFormatBids)return[e];const t=[];for(const n of e.multiFormatBids){const i=(0,s.A4)(e);i.mediaTypes=n.mediaTypes,i.bids=n.bids,delete i.multiFormatBids,t.push(i)}return t}}let de=function(e){return e.DefaultPrebidAuction="DefaultPrebidAuction",e.OutstreamPrebidAuction="OutstreamPrebidAuction",e.InstreamPrebidAuction="InstreamPrebidAuction",e}({});function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pe extends ae{constructor(e,t){super(e,t),this.auctionType=de.DefaultPrebidAuction,this.adUnits=void 0,this.adUnits=this.setAdUnits()}setAdUnits(){return super.setAdUnits().filter((e=>{var t;return e.mediaTypes.banner?null===(t=e.mediaTypes.banner.sizes)||void 0===t?void 0:t.length:e.mediaTypes.native})).map((e=>le(le({},e),{},{code:e.adUnitElementId})))}run(){if(!this.adUnits.length){const e={auctionID:this.event.auctionID,headerBidder:u.q.Prebid,elementsIDs:this.event.adUnitsElementIDs,callback:()=>{},winningBids:new Map,targeting:new Map};return this.logger.log({namespace:this.auctionType,message:"Forwarding without running auction. Event: ".concat(l.w.auctionFinished,"."),verboseLevel:1,payload:e}),void this.eventBus.emit(l.w.auctionFinished,e)}this.logger.log({namespace:this.auctionType,message:"Run action.",verboseLevel:1,payload:{adUnits:this.adUnits,auctionID:this.event.auctionID,config:this.config.config,timeout:this.event.timeout||this.config.timeout}}),this.config.context.que.push((()=>{try{this.config.context.requestBids({adUnits:this.splitMultiFormatAdUnits(this.adUnits),timeout:this.event.timeout||this.config.timeout,bidsBackHandler:this.bidsBackHandler,auctionId:this.event.auctionID})}catch(e){this.handleRequestingBidsError()}}))}bidsBackHandler(e,t,n){super.bidsBackHandler(e,t,n);const i=this.getWinningBids(e);this.finishAuction(this.adUnits,this.event.auctionID,i,this.getSuccessFinishAuctionCallback(this.adUnits,e))}}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class me extends ae{constructor(e,t){super(e,t),this.auctionType=de.InstreamPrebidAuction,this.adUnits=void 0,this.finishAuctionInstream=(e,t,n,i,r,o)=>{const s={auctionID:t,winningBids:i,targeting:r,callbackVastURL:n,headerBidder:u.q.Prebid,elementsIDs:e.map((e=>e.adUnitElementId)),adUnitPaths:e.map((e=>e.adUnitPath)),callback:o,maxduration:e.map((e=>{var t;return null===(t=e.mediaTypes.video)||void 0===t?void 0:t.maxduration})).find((e=>void 0!==e)),playbackmethod:e.map((e=>{var t;return null===(t=e.mediaTypes.video)||void 0===t?void 0:t.playbackmethod})).find((e=>void 0!==e)),position:e.map((e=>{var t;return null===(t=e.mediaTypes.video)||void 0===t?void 0:t.position})).find((e=>void 0!==e))};this.logger.log({namespace:this.auctionType,message:"Auction finished. Event: ".concat(l.w.auctionInstreamFinished,"."),verboseLevel:1,payload:s}),this.eventBus.emit(l.w.auctionInstreamFinished,s)},this.adUnits=this.setAdUnits()}setAdUnits(){return super.setAdUnits().map((e=>ge(ge({},e),{},{code:e.adUnitElementId})))}run(){if(!this.adUnits.length){const e={auctionID:this.event.auctionID,headerBidder:u.q.Prebid,elementsIDs:this.event.adUnitsElementIDs,callback:()=>{},winningBids:new Map,targeting:new Map};return this.logger.log({namespace:this.auctionType,message:"Forwarding without running auction. Event: ".concat(l.w.auctionFinished,"."),verboseLevel:1,payload:e}),void this.eventBus.emit(l.w.auctionFinished,e)}this.logger.log({namespace:this.auctionType,message:"Run action.",verboseLevel:1,payload:{adUnits:this.adUnits,auctionID:this.event.auctionID,config:this.config.config,timeout:this.event.timeout||this.config.timeout}}),this.config.context.que.push((()=>{this.config.context.setConfig({cache:{url:"https://pbc.360yield.com/cache"}});try{this.config.context.requestBids({adUnits:this.adUnits,timeout:this.event.timeout||this.config.timeout,bidsBackHandler:this.bidsBackHandler,auctionId:this.event.auctionID})}catch(e){this.handleRequestingBidsError()}}))}bidsBackHandler(e,t,n){super.bidsBackHandler(e,t,n);const i=this.getWinningBids(e);this.config.context.setConfig({enableSendAllBids:!0});const r=this.getTargeting(e);this.config.context.setConfig({enableSendAllBids:!!this.config.config.enableSendAllBids}),this.finishAuctionInstream(this.adUnits,this.event.auctionID,this.event.callbackVastURL,i,r,this.getSuccessFinishAuctionCallback(this.adUnits,e))}getTargeting(e){const t=new Map;for(const n in e)t.set(n,this.config.context.getAdserverTargetingForAdUnitCode([n]));return t}}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ae extends ae{constructor(e,t){super(e,t),this.auctionType=de.OutstreamPrebidAuction,this.adUnits=void 0,this.adUnits=this.setAdUnits()}setAdUnits(){return super.setAdUnits().filter((e=>{var t;return e.mediaTypes.banner?null===(t=e.mediaTypes.banner.sizes)||void 0===t?void 0:t.length:e.mediaTypes.video||e.mediaTypes.native})).map((e=>be(be({},e),{},{code:e.adUnitElementId})))}run(){if(this.adUnits.forEach((e=>{var t;if((null===(t=e.mediaTypes.video)||void 0===t?void 0:t.context)===Z.$.Outstream&&e.mediaTypes.video.renderer){const t=e.mediaTypes.video.renderer.renderConfig,n=this.config.outstreamPlayer.getInstance;e.mediaTypes.video.renderer={url:e.mediaTypes.video.renderer.url,backupOnly:e.mediaTypes.video.renderer.backupOnly,render:e.mediaTypes.video.renderer.useIma?this.config.videoRenderer.getImaRenderer(e,this.eventBus,this.event):this.config.videoRenderer.getVideoRenderer(e,n,t),useIma:e.mediaTypes.video.renderer.useIma}}})),!this.adUnits.length){const e={auctionID:this.event.auctionID,headerBidder:u.q.Prebid,elementsIDs:this.event.adUnitsElementIDs,callback:()=>{},winningBids:new Map,targeting:new Map};return this.logger.log({namespace:this.auctionType,message:"Forwarding without running auction. Event: ".concat(l.w.auctionFinished,"."),verboseLevel:1,payload:e}),void this.eventBus.emit(l.w.auctionFinished,e)}this.logger.log({namespace:this.auctionType,message:"Run action.",verboseLevel:1,payload:{adUnits:this.adUnits,auctionID:this.event.auctionID,config:this.config.config,timeout:this.event.timeout||this.config.timeout}}),this.config.context.que.push((()=>{try{this.config.context.requestBids({adUnits:this.splitMultiFormatAdUnits(this.adUnits),timeout:this.event.timeout||this.config.timeout,bidsBackHandler:this.bidsBackHandler,auctionId:this.event.auctionID})}catch(e){this.handleRequestingBidsError()}}))}bidsBackHandler(e,t,n){super.bidsBackHandler(e,t,n);const i=this.getWinningBids(e);this.finishAuction(this.adUnits,this.event.auctionID,i,this.getSuccessFinishAuctionCallback(this.adUnits,e))}}class we{constructor(){}getAuction(e,t){return e.isInstream?new me(e,t):this.hasOutstream(e,t)?new Ae(e,t):new pe(e,t)}hasOutstream(e,t){return t.adUnits.filter((t=>e.adUnitsElementIDs.includes(t.adUnitElementId))).some((e=>!!e.mediaTypes.video&&e.mediaTypes.video.context&&e.mediaTypes.video.context.toLowerCase()===Z.$.Outstream))}}const Se={meetsMacrosRequirements(e){return e.map((e=>e.bids.map((t=>this.parseParams(t.params,e))))),e.filter((e=>{var t;return null===(t=e.multiFormatBids)||void 0===t?void 0:t.length})).map((e=>e.multiFormatBids.map((t=>t.bids.map((t=>this.parseParams(t.params,e))))))),e},replaceMacrosInString(e,t,n){const{name:i,parentNetworkCode:r,childNetworkCode:o}=this.parseAdUnitPath(t);return e=(e=(e=e.replace(/%dfpCodeWithoutMcmCode%/g,"/".concat(r,"/").concat(i))).replace(/%dfpCodeWithMcmCode%/g,o?"/".concat(r,",").concat(o,"/").concat(i):"/".concat(r,"/").concat(i))).replace(/%divId%/g,n),e=this.replaceAzerionSettingsMacros(e)},parseAdUnitPath(e){const t=e?e.split("/"):[],n=t[2]||"",i=t[1]?t[1].split(","):[];return{name:n,parentNetworkCode:i[0]||"",childNetworkCode:i[1]||""}},parseParams(e,t){const{name:n,parentNetworkCode:i,childNetworkCode:r}=this.parseAdUnitPath(t.adUnitPath);for(const o of Object.keys(e)){if("object"==typeof e[o])return void this.parseParams(e[o],t);switch(!0){case"%dfpCodeWithoutMcmCode%"===e[o]:e[o]="/".concat(i,"/").concat(n);break;case"%dfpCodeWithMcmCode%"===e[o]:e[o]=r?"/".concat(i,",").concat(r,"/").concat(n):"/".concat(i,"/").concat(n);break;case"%dfpCodeWithoutMcmCodeS2S%"===e[o]:e[o]="/".concat(i,"/").concat(n,"_s2s");break;case"%dfpCodeWithMcmCodeS2S%"===e[o]:e[o]=r?"/".concat(i,",").concat(r,"/").concat(n,"_s2s"):"/".concat(i,"/").concat(n);break;case"%setupCode%"===e[o]:e[o]="".concat(t.setupCode);break;case"%divId%"===e[o]:e[o]=t.adUnitElementId;break;case"%sizes%"===e[o]:e[o]=t.sizes;break;case"%firstSize%"===e[o]:e[o]=t.sizes[0][0]}}},replaceAzerionSettingsMacros:e=>e.replace(/%AZS:([\w-]+)%/g,((e,t)=>{var n,i,r,o;return null!==(n=null===(i=window)||void 0===i||null===(r=i.pgPluginManager)||void 0===r||null===(o=r.azerionSettings)||void 0===o?void 0:o[t])&&void 0!==n?n:""}))};let Ie=function(e){return e.CAROUSEL="CarouselRenderer",e.PREBID="PrebidRenderer",e}({});class Ee{constructor(e,t,n,i,r){this.logger=e,this.prebid=t,this.document=n,this.adId=i,this.options=r}renderAd(){this.prebid&&this.document&&this.prebid.pbRenderAd?this.prebid.pbRenderAd(this.document,this.adId,this.options):this.logger.error({namespace:Ee.RendererName,message:"Cannot render prebid ad. Renderer is not initialized.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1})}}Ee.RendererName=Ie.PREBID;class _e{constructor(e,t,n){this.configuredRenderers=e,this.logger=t,this.eventBus=n}getRender(e,t,n,i,r,o){return!0==!(!r||!r.carousel||!i||"banner"!==i.mediaType&&"native"!==i.mediaType)&&this.configuredRenderers.getCarouselRenderer(this.logger,this.eventBus,e,t,r)||new Ee(this.logger,e,t,n,o)}}var xe=n(4047);class Pe{constructor(e,t,n,i,r){this.logger=e,this.eventBus=t,this.prebid=n,this.document=i,this.adUnit=r,this.ttlLimitingEvent=void 0,this.bids=void 0,this.maxWidth=0,this.maxHeight=0,this.carouselContainer=void 0,this.maximumTimeLimit=0,this.bidsRendered=0,this.renderIntervalReached=!1,this.isVisible=!1,this.minimumTimeLimit=0,this.initialized=!1,this.cropHeight=0,this.canBeCropped=!1,this.currentMaxHeight=0,this.handleAdUnitTimeOnPageLimited=this.handleAdUnitTimeOnPageLimited.bind(this),this.handleSlotViewabilityChanged=this.handleSlotViewabilityChanged.bind(this),this.eventBus.on(l.w.adUnitTimeOnPageLimited,this.handleAdUnitTimeOnPageLimited,!0,Pe.RendererName),this.eventBus.on(l.w.slotViewabilityChanged,this.handleSlotViewabilityChanged,!1,Pe.RendererName),(null==r?void 0:r.adUnitElementId)&&this.eventBus.emit(l.w.slotViewableStatusRequested,{elementId:null==r?void 0:r.adUnitElementId,callback:e=>{this.isVisible=e,this.tryRenderNextAd()}}),(null==r?void 0:r.adUnitElementId)&&this.eventBus.emit(l.w.slotCroppableStatusRequested,{elementId:null==r?void 0:r.adUnitElementId,callback:(e,t)=>{this.canBeCropped=e,this.cropHeight=t}})}renderAd(){this.prebid&&this.document&&this.prebid.pbRenderAd&&this.adUnit?window.setTimeout((()=>{var e;this.logger.log({namespace:Pe.RendererName,message:"Setting up carousel for ad unit: ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),verboseLevel:1}),this.setupBids(),this.setMaxSizes(),this.setParentIframeSize(),this.createCarouselContainer(),this.insertAd(),this.setupNextAd(),this.initialized=!0}),20):this.logger.error({namespace:Pe.RendererName,message:"Cannot render prebid ad. Renderer is not initialized.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1})}setupBids(){var e;this.setupTimeLimits();const t=Math.floor(this.maximumTimeLimit/this.adUnit.carousel.minimumTimePerAd),n=this.prebid.getBidResponsesForAdUnitCode(this.adUnit.adUnitElementId).bids.filter((e=>"rendered"!==e.status&&(Date.now()-e.responseTimestamp)/1e3<e.ttl&&["banner","native"].includes(e.mediaType))).sort(((e,t)=>t.cpm-e.cpm));this.bids=t&&t<this.adUnit.carousel.maximumAds?n.slice(0,t):n.slice(0,this.adUnit.carousel.maximumAds),this.logger.log({namespace:Pe.RendererName,message:"Bids set up for ad unit: ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),payload:this.bids,verboseLevel:2})}setupTimeLimits(){var e,t;if(!this.ttlLimitingEvent)return;const n=this.ttlLimitingEvent.ttls.filter((e=>e.getState()!==xe.s.Triggered));if(!n.length)return;this.logger.log({namespace:Pe.RendererName,message:"TTL event found, calculating maximum number of ads.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1}),this.maximumTimeLimit=n.reduce(((e,t)=>e+t.getRemainingTime()),0),this.minimumTimeLimit=n.reduce(((e,t)=>{const n=t.getRemainingTime();return e>n?e:n}),0),this.logger.log({namespace:Pe.RendererName,message:"Ad unit TTL limiters processed for ad unit: ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),payload:{maximumTimeLimit:this.maximumTimeLimit},verboseLevel:3});const i=Math.floor(this.maximumTimeLimit/this.adUnit.carousel.minimumTimePerAd);this.bids=null===(t=this.bids)||void 0===t?void 0:t.slice(0,i)}handleAdUnitTimeOnPageLimited(e){var t;e.elementId===(null===(t=this.adUnit)||void 0===t?void 0:t.adUnitElementId)&&(this.ttlLimitingEvent=e)}handleSlotViewabilityChanged(e){var t;e.elementId===(null===(t=this.adUnit)||void 0===t?void 0:t.adUnitElementId)&&(this.isVisible=e.isVisible,this.tryRenderNextAd())}setParentIframeSize(e){var t;if(!this.document.defaultView||!this.document.defaultView.frameElement||!this.document.defaultView.frameElement.isConnected)return void this.logger.warn({namespace:Pe.RendererName,message:"Could not set up frame size.",type:F.f.ErrorRenderingPrebidAd,verboseLevel:1});const n=this.document.defaultView.frameElement;this.maxWidth&&(n.width="".concat(this.maxWidth)),(this.maxHeight||e)&&(n.height="".concat(null!=e?e:this.maxHeight),n.style.height="".concat(null!=e?e:this.maxHeight,"px")),this.logger.log({namespace:Pe.RendererName,message:"Parent frame resized for ad unit ".concat(null===(t=this.adUnit)||void 0===t?void 0:t.adUnitElementId,"."),payload:{width:this.maxWidth,height:null!=e?e:this.maxHeight},verboseLevel:3})}setMaxSizes(){var e,t;const n=this.bids.reduce(((e,t)=>Math.max(e,t.width||0)),0),i=this.bids.reduce(((e,t)=>Math.max(e,t.height||0)),0),r=(null===(e=this.adUnit.mediaTypes.banner)||void 0===e?void 0:e.sizes)||this.adUnit.sizes[0];let o=r.reduce(((e,t)=>Math.max(e,isNaN(t[0])?0:t[0])),0),s=r.reduce(((e,t)=>Math.max(e,isNaN(t[1])?0:t[1])),0);o=isNaN(o)?0:o,s=isNaN(s)?0:s,this.maxWidth=n&&o?Math.min(n,o):Math.max(n,o),this.maxHeight=i&&s?Math.min(i,s):Math.max(i,s),this.logger.log({namespace:Pe.RendererName,message:"Max dimensions set for ad unit ".concat(null===(t=this.adUnit)||void 0===t?void 0:t.adUnitElementId,"."),payload:{maxWidth:this.maxWidth,maxHeight:this.maxHeight},verboseLevel:3})}createCarouselContainer(){var e;this.logger.log({namespace:Pe.RendererName,message:"Crating carousel container for ad unit ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),verboseLevel:2}),this.carouselContainer=this.document.createElement("div"),this.carouselContainer.style.width="".concat(this.maxWidth*this.bids.length,"px"),this.carouselContainer.style.height="".concat(this.maxHeight,"px"),this.carouselContainer.style.display="flex",this.carouselContainer.style.flexDirection="row",this.carouselContainer.style.flexWrap="nowrap",this.carouselContainer.style.position="absolute",this.carouselContainer.style.top="0",this.carouselContainer.style.left="0",this.carouselContainer.style.transition="left 1s ease",this.carouselContainer.style.overflow="hidden",this.document.body.appendChild(this.carouselContainer)}insertAd(){var e,t,n,i,r,o;if(!this.bids||!this.bids.length)return void this.logger.log({namespace:Pe.RendererName,message:"All bids rendered for ad unit ".concat(null===(o=this.adUnit)||void 0===o?void 0:o.adUnitElementId,"."),verboseLevel:2});const s=this.bids.shift();if(!s)return;this.logger.log({namespace:Pe.RendererName,message:"Setting up ad container for ad unit ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),verboseLevel:2});const a=this.canBeCropped&&Math.max(this.cropHeight||0,s.height||0)||this.maxHeight;this.currentMaxHeight=a;const d=this.document.createElement("div");d.style.width="".concat(this.maxWidth,"px"),d.style.height="".concat(a,"px"),d.style.display="flex",d.style.justifyContent="center",d.style.alignItems="center",d.style.overflow="hidden";const c=this.document.createElement("iframe");c.width="".concat(s.width),c.height="".concat(s.height),c.id="frame_".concat(s.adId),c.setAttribute("marginwidth","0"),c.setAttribute("style","border: none;"),c.setAttribute("scrolling","no"),c.setAttribute("frameborder","0"),c.setAttribute("marginheight","0"),c.setAttribute("allowfullscreen","true"),c.setAttribute("allowtransparency","true"),c.setAttribute("webkitallowfullscreen","true"),c.setAttribute("mozallowfullscreen","true"),d.appendChild(c),null===(t=this.carouselContainer)||void 0===t||t.appendChild(d),(null===(n=this.prebid)||void 0===n?void 0:n.pbRenderAd)&&c.contentWindow&&(null===(i=this.prebid)||void 0===i||i.pbRenderAd(c.contentWindow.document,s.adId)),this.logger.log({namespace:Pe.RendererName,message:"Bid rendered rendered for ad unit ".concat(null===(r=this.adUnit)||void 0===r?void 0:r.adUnitElementId,"."),verboseLevel:3}),this.bidsRendered||this.setUpCroppable(),this.bidsRendered++}setupNextAd(){var e,t,n;this.logger.log({namespace:Pe.RendererName,message:"Setting up next ad for for ad unit ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),verboseLevel:2});const i=this.minimumTimeLimit?this.minimumTimeLimit/(this.bids.length+this.bidsRendered):this.adUnit.carousel.minimumTimePerAd;window.setTimeout((()=>{this.renderIntervalReached=!0,this.tryRenderNextAd()}),i-((null===(t=this.adUnit)||void 0===t||null===(n=t.carousel)||void 0===n?void 0:n.preloadTime)||0))}tryRenderNextAd(){var e,t,n,i,r;if(this.initialized){if(this.setupTimeLimits(),null===(e=this.bids)||void 0===e||!e.length||null===(t=this.carouselContainer)||void 0===t||!t.isConnected||!this.bids||!this.document.defaultView||this.document.defaultView.frameElement&&!this.document.defaultView.frameElement.isConnected)return this.eventBus.detach(l.w.adUnitTimeOnPageLimited,this.handleAdUnitTimeOnPageLimited),void this.eventBus.detach(l.w.slotViewabilityChanged,this.handleSlotViewabilityChanged);this.renderIntervalReached&&this.isVisible&&(this.insertAd(),this.logger.log({namespace:Pe.RendererName,message:"Next ad preloaded for for ad unit ".concat(null===(n=this.adUnit)||void 0===n?void 0:n.adUnitElementId,"."),verboseLevel:3}),window.setTimeout((()=>{this.carouselAd()}),(null===(i=this.adUnit)||void 0===i||null===(r=i.carousel)||void 0===r?void 0:r.preloadTime)||0))}}carouselAd(){var e;this.logger.log({namespace:Pe.RendererName,message:"Activating carousel for ad unit ".concat(null===(e=this.adUnit)||void 0===e?void 0:e.adUnitElementId,"."),verboseLevel:3}),this.carouselContainer.style.left="-".concat(this.maxWidth*(this.bidsRendered-1),"px"),this.renderIntervalReached=!1,this.setUpCroppable(),this.setupNextAd()}setUpCroppable(){this.canBeCropped&&this.carouselContainer&&this.currentMaxHeight&&(this.setParentIframeSize(this.currentMaxHeight),this.carouselContainer.style.height="".concat(this.currentMaxHeight,"px"))}}Pe.RendererName=Ie.CAROUSEL;var Te=n(3081),Oe=n(5319);class Ce{execute(e,t){return t.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.adUnitElementId===t.adUnitElementId))||e.push(t),e)),[])}}class Re{execute(e,t,n){let i=[];const r=Object.values(t);if(t=Object.keys(t).map((e=>[e,t[e]])).filter((t=>e.map((e=>e.adUnitElementId)).includes(t[0]))).filter(((e,t)=>r.indexOf(e[1])===t)).reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),!e.some((e=>Object.keys(t).includes(e.adUnitElementId))))return{updatedAdUnits:e,newAdUnitsInitialLoadElementIds:n};const o=n;return n.forEach((e=>Object.keys(t).includes(e)?o.push(t[e]):null)),e.forEach((e=>{if(Object.keys(t).includes(e.adUnitElementId)){const n=(0,s.A4)(e);n.adUnitElementId=t[e.adUnitElementId],i.push(n)}i.push(e)})),{updatedAdUnits:i,newAdUnitsInitialLoadElementIds:o}}}class Ue{execute(e,t,n,i,r){var o;const a=(0,s.A4)(e),d=null!==(o=null==t?void 0:t.bidders)&&void 0!==o?o:[];return a.map((e=>(0===n.length&&(e.bids=this.filterAdUnitBids(e,d,i)),n.includes(e.adUnitPath)&&(e.bids=this.filterAdUnitBids(e,d,i)),e))).filter((e=>{var t;return 0!==(null===(t=e.bids)||void 0===t?void 0:t.length)||(r.push(e.adUnitElementId),!1)}))}filterAdUnitBids(e,t,n){return n?e.bids.filter((e=>!t.includes(e.bidder))):e.bids.filter((e=>t.includes(e.bidder)))}}class ke{execute(e,t,n){return 0===t.length?(e.forEach((e=>n.push(e.adUnitElementId))),[]):e.filter((e=>!t.find((t=>t===e.adUnitPath))||(n.push(e.adUnitElementId),!1)))}}class De{execute(e,t,n,i,r){var o;const a=(0,s.A4)(e),d=null!==(o=null==t?void 0:t.bidders)&&void 0!==o?o:[];return a.map((e=>(0===n.length&&(e.bids=this.filterAdUnitBids(e,d,i)),n.includes(e.adUnitPath)&&(e.bids=this.filterAdUnitBids(e,d,i)),e))).filter((e=>{var t;return 0!==(null===(t=e.bids)||void 0===t?void 0:t.length)||(r.push(e.adUnitElementId),!1)}))}filterAdUnitBids(e,t,n){return n?e.bids.filter((e=>!t.includes(e.bidder))):e.bids.filter((e=>t.includes(e.bidder)))}}var Be=n(9527);class je{execute(e,t,n,i){const r=(0,s.A4)(e),o=n===Be.b.INCLUDE;return r.filter((e=>{const n=t.find((t=>t===e.adUnitPath));return n?!!o||(i.push(e.adUnitElementId),!1):!(!n&&o)||(i.push(e.adUnitElementId),!1)}))}}class Ne{execute(e,t,n){return e.filter((e=>!t[e.name]||n.meetsGeoTargetingRequirements(t[e.name])))}}class Le{constructor(e,t,n){this.settingsTargetingServiceOnAdUnit=e,this.targetingService=t,this.contextTypeStrategyFactory=n,this.removedAdUnits=[]}getRemovedAdUnits(){return this.removedAdUnits}executeBusinessLogicForRemoveAdUnits(e){const t=this.contextTypeStrategyFactory.getContext(new je);let n;if(e.taskQueue.getTasksByRunTime(Oe.s.BEFORE_ACTIVATE).forEach((e=>{e.type===Te.w.REMOVE_AD_UNITS&&(n=e)})),n){const i=e.taskQueue.getInstanceOfTask(n),r=(0,s.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,i.payload.adUnitCodes,i.payload.filterStrategy,this.removedAdUnits),e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.REMOVE_AD_UNITS,"."),verboseLevel:3,payload:{adUnitsBefore:r,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForDisableAdUnitHB(e){const t=this.contextTypeStrategyFactory.getContext(new ke);let n;if(e.taskQueue.getTasksByRunTime(Oe.s.BEFORE_ACTIVATE).forEach((e=>{e.type===Te.w.DISABLE_AD_UNIT_HEADER_BIDDING&&(n=e)})),n){const i=e.taskQueue.getInstanceOfTask(n),r=(0,s.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,i.payload.adUnitCodes,this.removedAdUnits),e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.DISABLE_AD_UNIT_HEADER_BIDDING,"."),verboseLevel:3,payload:{adUnitsBefore:r,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForDisableAdUnitClient(e){const t=this.contextTypeStrategyFactory.getContext(new Ue);let n;if(e.taskQueue.getTasksByRunTime(Oe.s.BEFORE_ACTIVATE).forEach((e=>{e.type===Te.w.DISABLE_AD_UNIT_CLIENT_SIDE_HEADER_BIDDING&&(n=e)})),n){const i=!1,r=e.taskQueue.getInstanceOfTask(n),o=(0,s.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,e.config.s2sConfig,r.payload.adUnitCodes,i,this.removedAdUnits),e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.DISABLE_AD_UNIT_CLIENT_SIDE_HEADER_BIDDING,"."),verboseLevel:3,payload:{adUnitsBefore:o,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForDisableAdUnitServer(e){const t=this.contextTypeStrategyFactory.getContext(new De);let n;if(e.taskQueue.getTasksByRunTime(Oe.s.BEFORE_ACTIVATE).forEach((e=>{e.type===Te.w.DISABLE_AD_UNIT_SERVER_SIDE_HEADER_BIDDING&&(n=e)})),n){const i=!0,r=e.taskQueue.getInstanceOfTask(n),o=(0,s.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,e.config.s2sConfig,r.payload.adUnitCodes,i,this.removedAdUnits),e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.DISABLE_AD_UNIT_SERVER_SIDE_HEADER_BIDDING,"."),verboseLevel:3,payload:{adUnitsBefore:o,adUnitsAfter:e.adUnits}})}}executeBusinessLogicForAdUnitsFiltered(e){const t=this.contextTypeStrategyFactory.getContext(new Ce),n=(0,s.A4)(e.adUnits);e.adUnits=t.executeTaskStrategy(e.adUnits,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnits}})}executeBusinessLogicForAdUnitsAmazonMultiFormat(e){const t=this.contextTypeStrategyFactory.getContext(new Re),n=(0,s.A4)(e.adUnits),{updatedAdUnits:i,newAdUnitsInitialLoadElementIds:r}=t.executeTaskStrategy(e.adUnits,e.adUnitsUsingAmazonMultiFormatElementIdsMap||{},e.adUnitsInitialLoadElementIDs);e.adUnits=i,e.adUnitsInitialLoadElementIDs=r||[],e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.AD_UNITS_USING_AMAZON_MULTI_FORMAT,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:e.adUnits}})}executeBusinessLogicForUserSyncFilter(e){var t,n,i,r;const o=this.contextTypeStrategyFactory.getContext(new Ne),a=(0,s.A4)(null===(t=e.config.userSync)||void 0===t?void 0:t.userIds);null!==(n=e.config.userSync)&&void 0!==n&&null!==(i=n.userIds)&&void 0!==i&&i.length&&(e.config.userSync.userIds=o.executeTaskStrategy(e.config.userSync.userIds,e.userIdGeoRestrictions,this.targetingService)),e.logger.log({namespace:L.PluginName,message:"Before activate task: ".concat(Te.w.USER_SYNC_GEO_TARGETING,"."),verboseLevel:3,payload:{userIdsBefore:a,userIdsAfter:null===(r=e.config.userSync)||void 0===r?void 0:r.userIds}})}}var Me,ze,Fe=n(4028),qe=n(9754),He=n(2166);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let We=(0,c.Q)()((ze=class e extends q.Q{constructor(t){super(t),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.config.context.que.push((()=>{this.config.context.mergeConfig({realTimeData:$e({},this.config.config)})})),await super.activate()}},ze.PluginName=h.f.RealTimeDataPlugin,Me=ze))||Me;class Ke extends $.A{constructor(e){super(e)}filterByTargeting(e){return super.filterByTargeting(e).filter((e=>{var t;return null===(t=e.targeting)||void 0===t||!t.percentOfTraffic||this.targetingService.meetsPercentOfTrafficRequirement(e.targeting.percentOfTraffic)}))}applyTargeting(e){var t,n,i,r;return!(null!==(t=e.config)&&void 0!==t&&null!==(n=t.targeting)&&void 0!==n&&n.percentOfTraffic&&!this.targetingService.meetsPercentOfTrafficRequirement(null===(i=e.config)||void 0===i?void 0:i.targeting.percentOfTraffic))&&this.isApplicable(null===(r=e.config)||void 0===r?void 0:r.targeting)}}var Qe=n(5240);class Je extends $.A{constructor(e){super(e)}filterByTargeting(e){return super.filterByTargeting(e).filter((e=>{var t;return null===(t=e.targeting)||void 0===t||!t.percentOfTraffic||this.targetingService.meetsPercentOfTrafficRequirement(e.targeting.percentOfTraffic)}))}applyTargeting(e){return e.config=e.config.filter((e=>{var t;return!(null!==(t=e.targeting)&&void 0!==t&&t.percentOfTraffic&&!this.targetingService.meetsPercentOfTrafficRequirement(e.targeting.percentOfTraffic))&&this.isApplicable(e.targeting)})),(e.config||[]).length>0}}var Ye=n(2101),Xe=n(5450);class Ze{constructor(e,t,n,i,r){this.context=e,this.logger=t,this.providerConfig=n,this.eventBus=i,this.clientTargetingService=r,this.pubxLoadedVariable="__pubxLoaded__",this.eventBufferRunAuction=[],this.eventBufferRefreshRequested=[],this.isTagIntegration=void 0,this.tagTimeout=800,this.timeoutId=void 0,this.targeted=!0,this.isTagIntegration=!this.providerConfig.analytics,this.unblockEvents=this.unblockEvents.bind(this),this.runAuctionMiddlewareHandler=this.runAuctionMiddlewareHandler.bind(this),this.refreshRequestedMiddlewareHandler=this.refreshRequestedMiddlewareHandler.bind(this)}init(){if(!this.isTargeted())return this.targeted=!1,!1;this.setMiddleware(),this.setAnalytics();const e="https://cdn.pbxai.com/".concat(this.providerConfig.id,".js?pbxd=").concat(encodeURIComponent(window.location.origin));if(document.querySelector('script[src="'.concat(e,'"]')))return this.logger.log({namespace:Ze.FloorProviderName,message:"Tag injected.",verboseLevel:2}),this.unblockEvents(),!0;const t=document.createElement("script");t.src=e,t.async=!0,t.referrerPolicy="origin";const n=document.head;return n?(t.onload=()=>{this.logger.log({namespace:Ze.FloorProviderName,message:"Tag injected.",verboseLevel:2}),this.unblockEvents()},this.timeoutId=window.setTimeout((()=>{this.unblockEvents()}),this.tagTimeout),this.logger.log({namespace:Ze.FloorProviderName,message:"Injecting tag.",verboseLevel:3}),n.appendChild(t),!0):(this.logger.log({namespace:Ze.FloorProviderName,message:"Attempting to inject tag in document without head present.",verboseLevel:2}),!1)}isTargeted(){if(this.providerConfig.countries){const e={countryCodes:this.providerConfig.countries,state:g.b.Includes};if(!this.clientTargetingService.meetsGeoTargetingRequirements(e))return!1}if(this.providerConfig.devices){const e={deviceTypes:Object.values(Xe.b).filter((e=>this.providerConfig.devices.map((e=>e.toLowerCase())).includes(e))),state:g.b.Includes};if(!this.clientTargetingService.meetsDeviceTargetingRequirements(e))return!1}return!(this.providerConfig.percent&&!this.clientTargetingService.meetsPercentOfTrafficRequirement(this.providerConfig.percent))}setMiddleware(){this.logger.log({namespace:Ze.FloorProviderName,message:"Setting up middlewares.",verboseLevel:3}),this.isTagIntegration?this.eventBus.addMiddleware(Ze.FloorProviderName,Ye.h.PubxAuctionRequestedMiddleware,l.w.auctionRequested,this.runAuctionMiddlewareHandler,!0):this.eventBus.addMiddleware(Ze.FloorProviderName,Ye.h.PubxAdUnitAdServerRefreshRequestedMiddleware,l.w.adUnitAdServerRefreshRequested,this.refreshRequestedMiddlewareHandler,!0)}setAnalytics(){this.providerConfig.analytics&&(this.context.que.push((()=>{this.context.enableAnalytics(this.providerConfig.analytics)})),this.logger.log({namespace:Ze.FloorProviderName,message:"Analytics initialized.",verboseLevel:2,payload:this.providerConfig.analytics}))}async setFloors(){if(!this.providerConfig.analytics||!this.targeted)return;const e=new AbortController,t=setTimeout((()=>e.abort()),this.tagTimeout);try{this.logger.log({namespace:Ze.FloorProviderName,message:"Fetching floors.",verboseLevel:3});const n=await fetch("https://floor.pbxai.com/?pubxId=".concat(this.providerConfig.id,"&page=").concat(window.top?window.top.location.href:window.location.href),{method:"GET",mode:"cors",signal:e.signal});clearTimeout(t),n.ok||this.logger.error({namespace:Ze.FloorProviderName,message:"Error fetching floor data.",type:F.f.ErrorFetchingFloorData,verboseLevel:1});const i=await n.text();if(!i){this.logger.log({namespace:Ze.FloorProviderName,message:"Setting up control group.",verboseLevel:3});const e={floors:{}};return this.logger.log({namespace:Ze.FloorProviderName,message:"Resetting up floors config.",verboseLevel:3,payload:e}),window[this.pubxLoadedVariable]=!1,void this.context.que.push((()=>{this.context.setConfig(e)}))}const r={a:[0,1],b:[2,6],c:[7,11],d:[12,16],e:[17,Number.MAX_SAFE_INTEGER]},o=e=>{const t=e.bidRequestsCount||0,n=Object.keys(r);for(const e of n){const n=r[e];if(t>=n[0]&&t<=n[1])return e}return n[n.length-1]},s=e=>e.bidder,a={floors:{enforcement:{floorDeals:!0,bidAdjustment:!0,enforcePBS:!0},data:JSON.parse(i),additionalSchemaFields:{rank:o,bidder:s}}};this.logger.log({namespace:Ze.FloorProviderName,message:"Setting up floors config.",verboseLevel:3,payload:a}),window[this.pubxLoadedVariable]=!0,this.context.que.push((()=>{this.context.setConfig(a)}))}catch(e){this.logger.error({namespace:Ze.FloorProviderName,message:"Error fetching floor data. Error ".concat(e),type:F.f.ErrorFetchingFloorData,verboseLevel:1})}}runAuctionMiddlewareHandler(e){return this.eventBufferRunAuction.push(e),e}refreshRequestedMiddlewareHandler(e){return this.eventBufferRefreshRequested.push(e),e}unblockEvents(){if(this.logger.log({namespace:Ze.FloorProviderName,message:"Removing blocking middlewares.",verboseLevel:3}),this.eventBus.removeAllMiddlewareForPlugin(Ze.FloorProviderName),this.isTagIntegration){for(const e of this.eventBufferRunAuction)this.eventBus.emit(l.w.auctionRequested,e);this.eventBufferRunAuction=[]}else{for(const e of this.eventBufferRefreshRequested)this.eventBus.emit(l.w.adUnitAdServerRefreshRequested,e);this.eventBufferRefreshRequested=[],this.logger.log({namespace:Ze.FloorProviderName,message:"All events emited.",verboseLevel:3}),this.timeoutId&&window.clearTimeout(this.timeoutId)}}}Ze.FloorProviderName="PubxFloorProvider";class et{constructor(e,t,n,i){this.context=e,this.logger=t,this.eventBus=n,this.clientTargetingService=i}create(e){return!0==!!e.pubxai?new Ze(this.context,this.logger,e.pubxai,this.eventBus,this.clientTargetingService):{init:()=>!1,setFloors:()=>Promise.resolve()}}}var tt=n(4894);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot=n(2541);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ct{constructor(e,t,n,i){this.sizeMappingService=e,this.logger=t,this.eventBus=n,this.namespace="PrebidAdUnitManager",this.slotInstanceCount=new Map,this.blockedUnits=new Map,this.supportedNativeSizes=void 0,this.supportedNativeSizes=i.supportedNativeSizes}restoreAdUnits(e){const t=[];for(const n of e.elementsIDs)this.blockedUnits.has(n)&&(t.push(this.blockedUnits.get(n)),this.blockedUnits.delete(n));return t}removeAdUnits(e,t){const n=e.filter((e=>t.elementsIDs.includes(e.adUnitElementId)));for(const e of n)this.blockedUnits.set(e.adUnitElementId,e);return e.filter((e=>!t.elementsIDs.includes(e.adUnitElementId)))}createNewAdUnitInstance(e,t){return this.cloneAdUnits(e,{cloneFromAdUnitElementId:t.adUnitElementId,newAdUnitsElementIds:[t.newAdunitElementId],overrides:{sizes:t.newSizes}})}getAdUnit(e,t){return e.find((e=>e.adUnitElementId===t))}cloneAdUnits(e,t){const n=e.find((e=>e.adUnitElementId===t.cloneFromAdUnitElementId));return n?t.newAdUnitsElementIds.filter((t=>!e.map((e=>e.adUnitElementId)).includes(t))).map((e=>{var i,r,o;const a=(0,s.A4)(at(at({},n),{},{adUnitElementId:e}));if(a.sizeMapping=(null===(i=t.overrides)||void 0===i?void 0:i.sizeMapping)||n.sizeMapping,a.bids=a.bids.filter((e=>{var n,i;return!(null!==(n=t.ext)&&void 0!==n&&null!==(i=n.biddersToRemove)&&void 0!==i&&i.includes(e.bidder))})),!t.ext||!t.ext.isSmartSlotChild){const e=this.getSlotInstance(a.adUnitPath);a.ortb2Imp.ext.gpid="".concat(a.ortb2Imp.ext.gpid,"_").concat(e),a.ortb2Imp.ext.data.divId=a.adUnitElementId,n.ortb2Imp.ext.data.placement===n.ortb2Imp.ext.gpid&&(a.ortb2Imp.ext.data.placement=a.ortb2Imp.ext.gpid)}return t.ext&&t.ext.isSmartSlotChild&&a.bids.find((e=>"ogury"===e.bidder))&&(a.bids=a.bids.filter((e=>"ogury"!==e.bidder)),a.multiFormatBids&&(a.multiFormatBids=a.multiFormatBids.map((e=>(e.bids=e.bids.filter((e=>"ogury"!==e.bidder)),e))))),t.overrides&&null!==(r=t.overrides.sizes)&&void 0!==r&&r.length&&(a.mediaTypes&&a.mediaTypes.banner&&(a.mediaTypes.banner.sizes=t.overrides.sizes),a.multiFormatBids&&(a.multiFormatBids=a.multiFormatBids.map((e=>{var n;return e.mediaTypes.banner&&null!==(n=t.overrides)&&void 0!==n&&n.sizes&&(e.mediaTypes.banner.sizes=t.overrides.sizes),e}))),a.sizes=t.overrides.sizes),t.ext&&t.ext.isSmartSlotChild&&null!==(o=a.sizeMapping)&&void 0!==o&&o.length&&delete a.sizeMapping,a})):[]}getSlotInstance(e){const t=(this.slotInstanceCount.get(e)||0)+1;return this.slotInstanceCount.set(e,t),t}applySizeMapping(e,t){t.forEach((t=>{const n=this.getAdUnit(e,t);if(!n||!n.sizeMapping)return;const i=this.sizeMappingService.getHeaderBiddingSizesForCurrentViewport(n.sizeMapping);if(n.mediaTypes.banner){n.mediaTypes.banner.sizes=i;for(const e of n.multiFormatBids||[])e.mediaTypes.banner&&(e.mediaTypes.banner.sizes=i)}}))}attachKeyValuesForPrebidAdUnit(e){this.attachRonNativeKeyValues(e)}attachRonNativeKeyValues(e){if(!e.hasRonNative)return;const t=[{adUnitElementId:e.adUnitElementId,key:"pg_rn",value:"1"}];if(e.sizes&&e.sizes[0].length){const n=e.sizes[0].reduce(((e,t)=>{if(this.supportedNativeSizes.some((e=>e[0]===t[0]&&e[1]===t[1]))){const n=t[0]*t[1];if(!e||n>e[0]*e[1])return t}return e}),null);n&&n[0]&&n[1]&&(t.push({adUnitElementId:e.adUnitElementId,key:"pg_nw",value:"".concat(n[0])}),t.push({adUnitElementId:e.adUnitElementId,key:"pg_nh",value:"".concat(n[1])}))}t.forEach((t=>this.emitAttachKeyValueRequested(t,'Requesting the attachment of "'.concat(t.key,'" key for ').concat(e.adUnitElementId,"."))))}emitAttachKeyValueRequested(e,t){this.logger.log({payload:e,message:t,namespace:this.namespace,verboseLevel:3}),this.eventBus.emit(l.w.attachKeyValueRequested,e)}setProductInfo(e,t){for(const t of e)this.eventBus.emit(l.w.logProductDataRequested,{key:ee.p.ProductFeature,value:Object.keys(t.mediaTypes).length>1?ot.x.MultiFormat:ot.x.SingleFormat,adUnitElementId:t.adUnitElementId});const n=e.filter((e=>t?e.adUnitElementId===t&&!!e.carousel:!!e.carousel)).map((e=>e.adUnitElementId));for(const e of n)this.eventBus.emit(l.w.logProductDataRequested,{key:ee.p.ProductFeature,value:ot.x.Carousel,adUnitElementId:e})}handleBidderOverrides(e,t,n){if(e.bidderOverrides){e.instanceOf=t.instanceOf=t.adUnitElementId;for(const t of e.bidderOverrides){if(t.mode!==te.OnCreate||t.applyTo!==(n?ne.ChildInstances:ne.AdUnitInstances))continue;void 0===t.overrides[0]&&(e.bids=e.bids.filter((e=>e.bidder.toLowerCase()!==t.bidder.toLowerCase())),e.multiFormatBids&&(e.multiFormatBids=e.multiFormatBids.map((e=>(e.bids=e.bids.filter((e=>e.bidder.toLowerCase()!==t.bidder.toLowerCase())),e)))));const i=[e.bids.find((e=>e.bidder.toLowerCase()===t.bidder.toLowerCase())),...(e.multiFormatBids||[]).map((e=>e.bids.find((e=>e.bidder.toLowerCase()===t.bidder.toLowerCase()))))];for(const e of i)e&&t.overrides[0]&&(e.params[t.property]=t.overrides[0]);t.onExhaust===ie.RemoveBidder&&t.overrides.shift(),t.onExhaust===ie.RoundRobin&&t.overrides.push(t.overrides.shift())}t.bidderOverrides=(0,s.A4)(e.bidderOverrides)}}handleAttachKeyValuesToAll(e,t){const n=(e,t)=>{var n;(n=t.params).keywords||(n.keywords={});for(const n in e)t.params.keywords[n]=[].concat(e[n])},i={improvedigital:(e,t)=>{var n;(n=t.params).keyValues||(n.keyValues={});for(const n in e)t.params.keyValues[n]=[].concat(e[n])},appnexus:n,gps:n,weborama:n};e.forEach((e=>{e.bids.forEach((e=>{i[e.bidder]&&i[e.bidder](t,e)}))}))}}class lt{constructor(e){this.tests=e}runTests(e){this.tests.forEach((t=>t.runTest(e)))}}let ut=function(e){return e.AssertiveYieldPrebidServerTest="AssertiveYieldPrebidServerTest",e.AssertiveYieldDynamicFloorsTest="AssertiveYieldDynamicFloorsTest",e}({});function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ft{constructor(){this.testType=ut.AssertiveYieldPrebidServerTest}runTest(e){var t;if(!(e.internalTests&&e.internalTests.length&&e.internalTests.find((e=>e.type===this.testType))&&0!==(null===(t=e.internalTests.find((e=>e.type===this.testType)))||void 0===t?void 0:t.percentOfTrafficToTest)&&e.config.s2sConfig))return;const n=e.internalTests.find((e=>e.type===this.testType)).percentOfTrafficToTest,i=100*Math.random()<n;if(this.enableAssertiveYieldAnalytics(e.logger,i),!i)return this.emitAttachKeyValueToAllAdUnitsRequested(i,e),void e.logger.log({message:"Skipping Assertive Yield Prebid Server Test.",namespace:this.testType,verboseLevel:3});e.eventBus.on(l.w.prebidAliasesSet,(t=>{"33acrossS2S"!==t["33acrossS2S"]&&e.context.aliasBidder("33across","33acrossS2S")}),!0,"AssertiveYieldPrebidServerTest");const r=(0,s.A4)(e.config.s2sConfig);e.config.s2sConfig=ht(ht({},e.config.s2sConfig),this.getS2sConfig()),this.emitAttachKeyValueToAllAdUnitsRequested(i,e),e.logger.log({message:"Running Assertive Yield Prebid Server Test.",namespace:this.testType,verboseLevel:3,payload:{s2sConfigBefore:r,s2sConfigAfter:e.config.s2sConfig}})}emitAttachKeyValueToAllAdUnitsRequested(e,t){window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]=window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]||[],Array.isArray(window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME])||(window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]=[window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]]),window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME].push(e?"wrapper-b":"wrapper-a");const n={key:"wrapper_active",value:window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]};t.eventBus.emit(l.w.attachKeyValueToAllAdUnitsRequested,n)}getS2sConfig(){const e=["CA","US","MX","BZ","CR","SV","GT","HN","NI","PA","AG","BS","BB","CU","DM","DO","GD","HT","JM","KN","LC","VC","TT","AR","BO","BR","CL","CO","EC","GY","PY","PE","SR","UY","VE"].includes(window.pgGeo)?"pbs-us-east":"pbs-eu-central";return{accountId:"org_ojCvad5z9YAsqCpww",endpoint:"https://".concat(e,".ay.delivery/openrtb2/auction"),syncEndpoint:"https://".concat(e,".ay.delivery/cookie_sync")}}enableAssertiveYieldAnalytics(e,t){window.assertive={entityId:"xfCimabzWf2mPMATw",analytics:{custom:{custom_1:"pbs=".concat(t)},override:{pbjs:"pgPrebid"},logUnfilled:!0}};const n=document.createElement("script");n.src="https://xfcimabzwf2mpmatw.ay.delivery/client-v2.js",n.async=!0,document.head.appendChild(n),e.log({message:"Loaded Assertive Yield Analytics script.",namespace:this.testType,verboseLevel:3})}}class mt{constructor(){this.testType=ut.AssertiveYieldDynamicFloorsTest,this.eventBus=null,this.eventBufferRunAuction=[],this.unblockEventsSafetyTimeout=void 0}runTest(e){var t,n,i;if(!e.internalTests||!e.internalTests.length||!e.internalTests.find((e=>e.type===this.testType))||0===(null===(t=e.internalTests.find((e=>e.type===this.testType)))||void 0===t?void 0:t.percentOfTrafficToTest))return;this.eventBus=e.eventBus,this.eventBus.addMiddleware(this.testType,Ye.h.AssertiveYieldAuctionRequestedMiddleware,l.w.auctionRequested,this.runAuctionMiddlewareHandler.bind(this),!0);const r=e.internalTests.find((e=>e.type===this.testType)).percentOfTrafficToTest,o=this.getSessionBasedTestDecision(r,e.logger);if(this.enableAssertiveYieldAnalytics(e.logger,o),!o)return this.emitAttachKeyValueToAllAdUnitsRequested(o,e),void e.logger.log({message:"Skipping Assertive Yield Dynamic Floors Test.",namespace:this.testType,verboseLevel:3});e.floorProvider=void 0;for(const t of e.adUnits){var s;(null===(s=t.floors)||void 0===s?void 0:s.default)&&(t.floors.default=0)}(null===(n=window.pgPluginManager)||void 0===n||null===(i=n.getPlugin("PrebidPlugin"))||void 0===i?void 0:i.setFloors)&&(window.pgPluginManager.getPlugin("PrebidPlugin").setFloors=()=>{}),this.emitAttachKeyValueToAllAdUnitsRequested(o,e),e.logger.log({message:"Running Assertive Yield Dynamic Floors Test.",namespace:this.testType,verboseLevel:3})}getSessionBasedTestDecision(e,t){try{const n=localStorage.getItem(mt.SESSION_STORAGE_KEY);if(n){const{shouldRunTest:e,timestamp:i}=JSON.parse(n);if(Date.now()-i<mt.SESSION_TIMEOUT_MS)return t.log({message:"Using existing session decision: ".concat(e?"enabled":"disabled"),namespace:this.testType,verboseLevel:3}),e}const i=100*Math.random()<e,r={shouldRunTest:i,timestamp:Date.now()};return localStorage.setItem(mt.SESSION_STORAGE_KEY,JSON.stringify(r)),t.log({message:"Created new session decision: ".concat(i?"enabled":"disabled"),namespace:this.testType,verboseLevel:3}),i}catch(n){return t.log({message:"Failed to access localStorage, falling back to per-load decision: ".concat(n),namespace:this.testType,verboseLevel:2}),100*Math.random()<e}}emitAttachKeyValueToAllAdUnitsRequested(e,t){window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]=window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]||[],Array.isArray(window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME])||(window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]=[window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]]),window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME].push(e?"ay_floor_1":"ay_floor_0");const n={key:"wrapper_active",value:window[H.W.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME]};t.eventBus.emit(l.w.attachKeyValueToAllAdUnitsRequested,n)}runAuctionMiddlewareHandler(e){return this.eventBufferRunAuction.push(e),e}unblockEvents(){if(this.eventBus){this.eventBus.removeAllMiddlewareForPlugin(this.testType);for(const e of this.eventBufferRunAuction)this.eventBus.emit(l.w.auctionRequested,e);this.eventBufferRunAuction=[],this.unblockEventsSafetyTimeout&&window.clearTimeout(this.unblockEventsSafetyTimeout)}}enableAssertiveYieldAnalytics(e,t){window.assertive={entityId:"xfCimabzWf2mPMATw",analytics:{custom:{custom_1:void 0},override:{pbjs:"pgPrebid",creativeRegex:/prebid.renderAd\(document, ?"([^"]+)"\);/,adServerCurrency:"BGN"},logUnfilled:!0,integrations:{webAnalytics:!0}},floor:{enabled:t,addToHashKey:!1,currency:"BGN",priceBuckets:[{min:.01,max:1.5,increment:.01},{min:1.52,max:3.5,increment:.02}],exploreRate:"auto",readyCallback:this.unblockEvents.bind(this)}};const n=document.createElement("script");n.src="https://xfcimabzwf2mpmatw.ay.delivery/client-v2.js",n.async=!0,document.head.appendChild(n),this.unblockEventsSafetyTimeout=window.setTimeout((()=>{this.unblockEvents()}),2e3),e.log({message:"Loaded Assertive Yield Analytics script with floor optimization ".concat(t?"enabled":"disabled","."),namespace:this.testType,verboseLevel:3})}}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}mt.SESSION_TIMEOUT_MS=18e5,mt.SESSION_STORAGE_KEY="ay_pg_dynamic_floors_test_session";const At=[];At.push(class{constructor(e){this.eventBus=e}modifyParams(e){return e.some((e=>e.bids.some((e=>"ogury"===e.bidder))))?e.map((e=>(e.bids.some((e=>"ogury"===e.bidder))&&(e.bids=e.bids.map((t=>("ogury"===t.bidder&&(t.params=it(it({},t.params),{},{onAdComplete:()=>this.eventBus.emit(l.w.auctionRequested,{adUnitsElementIDs:[e.adUnitElementId],auctionID:(0,d.$C)()})})),t)))),e))):e}});const wt=[{context:{},config:{auctionDelay:300,dataProviders:[{name:"azerionedge",params:{key:"521d319a-7e38-4737-bbb3-3699ea2414fe",bidders:["ix","adf","oftmedia","sharethrough","ixS2S","openxS2S","appnexusS2S","33acrossS2S","appnexus","criteo","improvedigital","adagio","improvedigitS2S","medianetS2S","pubmatic","openx","rubicon","onetag","33across","seedtag","medianet","ogury"]}},{name:"hadron",waitForIt:!0,params:{segmentCache:!1,partnerId:570}},{name:"adagio",params:{organizationId:"1152",site:"tooplate-com"}}]},viewConfigurationID:1135}];wt.forEach((e=>e.context=i.default));const St=new Ke(qe.Q),It=window.pgPluginManager.getConfig(wt),Et=It&&St.applyTargeting(It),_t=We.PluginName;Et&&window.pgPluginManager.registerPlugin(_t,We,It);const xt=[{context:{},config:[],viewConfigurationID:1135}];xt.forEach((e=>e.context=i.default));const Pt=new Je(qe.Q),Tt=window.pgPluginManager.getConfig(xt),Ot=Tt&&Pt.applyTargeting(Tt),Ct=Qe.A.PluginName;Ot&&window.pgPluginManager.registerPlugin(Ct,Qe.A,Tt);const Rt=[{fileName:"tooplatecom.min.js",providersIdMapping:{rubicon:215,pubmatic:237,aol:5,sovrn:47,appnexus:145,sonobi:77,conversant:120,ix:6,openx:235,smartadserver:31,criteo:249,amazon:230,improvedigital:271,teads:282,adf:98,onetag:292,sharethrough:278,tripleliftS2S:308,unrulyS2S:371,nextmS2S:156,unruly:371,nativo:83,adagio:304,"33across":307,triplelift:308,justpremium:213,nextMillennium:156,gumgum:343,rise:350,medianet:352,seedtag:349,oftmedia:187,ogury:370,appnexus_nrd:373,adyoulike:89,between:293,brightcom:274,districtmDMX:108,emx_digital:54,eplanning:295,pubmatic_nrd:374,lockerdome:279,nanointeractive:239,nextroll:283,onemobile:287,rubicon_nrd:375,rhythmone:131,improvedigital_nrd:376,spotx:284,synacormedia:272,adf_nrd:377,rubicon_dch:378,improvedigital_dch:379,smartadserver_dch:380,seedtag_dch:381,yieldlab:372,dspx:382,smaato:383,smaatoS2S:383,visx:386,insticator:387,trustedstack:388,optidigital:389,smilewanted:391,sparteo:393,connectad:394,ttd:396,nobid:398,kueezrtb:397,kueezrtbS2S:397,adfS2S:98,sharethroughS2S:278,oms:401,adfKey:347,eplanningS2S:295,improvedigitalKey:345,pubmaticKey:348,rubiconKey:346,pubmaticS2S:237,ixS2S:6,conversantS2S:120,betweenS2S:293,openxS2S:235,sonobiS2S:77,sovrnS2S:47,appnexusS2S:145,onetagS2S:292,smartadserverS2S:31,rubiconS2S:215,gumgumS2S:343,criteoS2S:249,improvedigitS2S:271,riseS2S:350,medianetS2S:352,"33acrossS2S":307},viewConfigurationID:1135}];Rt.forEach((e=>e.context=i.default));const Ut=V.PluginName;window.pgPluginManager.registerPlugin(Ut,V,window.pgPluginManager.getConfig(Rt));const kt=L.PluginName;window.pgPluginManager.registerPlugin(kt,L,(function(){const e=[{context:{},viewConfigurationID:1135,bidderOrdering:["improvedigital","improvedigital_dch","improvedigital_nrd","improvedigitalKey","improvedigitS2S"],userIdGeoRestrictions:{"33acrossId":{countryCodes:["US","CA","AU","JP"],state:"includes"},identityLink:{countryCodes:["US","CA","AU","NZ","GK","SG","TW","AR","MX","JP","ID","BE","BR","FR","IT","NL","PL","RO","SP","UK"],state:"includes"}},resetPpidOnUserAudienceUpdate:!1,adUnits:[{adUnitElementId:"tooplatecom47398",placementGpid:"leaderboard",adUnitPath:"/8095840,22381294811/.2_A.47398.10_tooplate.com_tier1",setupCode:[".2 208363.10 tooplate.com PGHB tier1"],sizes:[[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214965"}},{bidder:"sharethrough",params:{pkey:"2dkgPtw6MW2opb6YTMloLla7"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"appnexus",params:{placementId:33209830,allowSmallerSizes:!0}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"improvedigital",params:{placementId:23235080,publisherId:1263}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206891pghb",pagetype:"article",category:"technology"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227577,usePrebidSizes:!0}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"341551386"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47398.10_tooplate.com_tier1_208363"}},{bidder:"openx",params:{unit:"561331801",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583414,bidonmultiformat:!0,position:"atf"}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33247364",placement:"inBanner"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"212960207"}}],mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]}},setupConfigurationID:13474,hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1133383"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["uDCkEWucimfM5BzLnUlV5CRr"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["73ZqCGpFzb502YDgDACe8kUz"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_Desktop_300x250_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_300x250_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],ortb2Imp:{ext:{gpid:"/8095840/.2_A.47398.10_tooplate.com_tier1/leaderboard",data:{divId:"tooplatecom47398",placement:"206891pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47398.10_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47398.10_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47399",placementGpid:"incontent",adUnitPath:"/8095840,22381294811/.2_A.47399.10_tooplate.com_tier1",setupCode:[".2 208362.10 tooplate.com PGHB tier1"],sizes:[[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214964"}},{bidder:"sharethrough",params:{pkey:"2dkgPtw6MW2opb6YTMloLla7"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206894pghb",pagetype:"article",category:"technology"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227577,usePrebidSizes:!0}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"811577497"}},{bidder:"openx",params:{unit:"561331800",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47399.10_tooplate.com_tier1_208362"}},{bidder:"improvedigital",params:{placementId:23282291,publisherId:1263}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583412,bidonmultiformat:!0,position:"atf"}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33364280",placement:"inArticle"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"212960207"}},{bidder:"appnexus",params:{placementId:34224139,allowSmallerSizes:!0}}],mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]}},setupConfigurationID:13475,hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1133383"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["uDCkEWucimfM5BzLnUlV5CRr"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["73ZqCGpFzb502YDgDACe8kUz"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_Desktop_300x250_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_300x250_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],ortb2Imp:{ext:{gpid:"/8095840/.2_A.47399.10_tooplate.com_tier1/incontent",data:{divId:"tooplatecom47399",placement:"206894pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47399.10_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47399.10_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47400",placementGpid:"incontent",adUnitPath:"/8095840,22381294811/.2_A.47400.10_tooplate.com_tier1",setupCode:[".2 208361.10 tooplate.com PGHB tier1"],sizes:[[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}],setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214772"}},{bidder:"sharethrough",params:{pkey:"2dkgPtw6MW2opb6YTMloLla7"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206898pghb",pagetype:"article",category:"technology"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227577,usePrebidSizes:!0}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"811577497"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47400.10_tooplate.com_tier1_208361"}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583416,bidonmultiformat:!0,position:"atf"}},{bidder:"openx",params:{unit:"561331802",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"improvedigital",params:{placementId:23282292,publisherId:1263}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33364273",placement:"inArticle"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"212960207"}},{bidder:"appnexus",params:{placementId:34224143,allowSmallerSizes:!0}}],mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,200],[980,300],[980,190],[300,250],[980,90],[980,120],[250,250],[750,300],[750,100],[200,200],[980,250],[970,120]]}},setupConfigurationID:13476,hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1133383"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["uDCkEWucimfM5BzLnUlV5CRr"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["73ZqCGpFzb502YDgDACe8kUz"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_Desktop_300x250_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_300x250_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],ortb2Imp:{ext:{gpid:"/8095840/.2_A.47400.10_tooplate.com_tier1/incontent",data:{divId:"tooplatecom47400",placement:"206898pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47400.10_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47400.10_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47401",placementGpid:"leaderboard",adUnitPath:"/8095840,22381294811/.2_A.47401.4_tooplate.com_tier1",setupCode:[".2 208360.4 tooplate.com PGHB tier1"],sizes:[[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214732"}},{bidder:"sharethrough",params:{pkey:"uDCkEWucimfM5BzLnUlV5CRr"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"ogury",params:{assetKey:"OGY-9B0B1C9D6B19",adUnitId:"wm-hb-iart-toopla-azeri-5sen91cnntvu",adSlotSelector:"%divId%"}},{bidder:"appnexus",params:{placementId:34224144,allowSmallerSizes:!0}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583418,bidonmultiformat:!0,position:"atf"}},{bidder:"openx",params:{unit:"561331803",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47401.4_tooplate.com_tier1_208360"}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%",pubid:"101031"}},{bidder:"improvedigital",params:{placementId:23282293,publisherId:1263}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206901pghb",pagetype:"article",category:"technology"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227576,usePrebidSizes:!0}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33247363",placement:"inBanner"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"212960207"}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E"}}],mediaTypes:{banner:{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]}},setupConfigurationID:13477,hasRonNative:!1,floors:{default:0},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1157878"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["VvskwdkMGfZ2pspPgQOpisnD"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["EY3ChcHE2BEZn6QtygI2H4xB"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_HDX_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_320x50_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],ortb2Imp:{ext:{gpid:"/8095840/.2_A.47401.4_tooplate.com_tier1/leaderboard",data:{divId:"tooplatecom47401",placement:"206901pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47401.4_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47401.4_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47402",placementGpid:"incontent",adUnitPath:"/8095840,22381294811/.2_A.47402.4_tooplate.com_tier1",setupCode:[".2 208359.4 tooplate.com PGHB tier1"],sizes:[[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214698"}},{bidder:"sharethrough",params:{pkey:"uDCkEWucimfM5BzLnUlV5CRr"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206904pghb",pagetype:"article",category:"technology"}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"341551386"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227576,usePrebidSizes:!0}},{bidder:"improvedigital",params:{placementId:23282294,publisherId:1263}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583420,bidonmultiformat:!0,position:"atf"}},{bidder:"openx",params:{unit:"561331804",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47402.4_tooplate.com_tier1_208359"}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33364263",placement:"inArticle"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"212960207"}},{bidder:"appnexus",params:{placementId:34224146,allowSmallerSizes:!0}}],mediaTypes:{banner:{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]}},setupConfigurationID:13478,hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1157878"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["VvskwdkMGfZ2pspPgQOpisnD"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["EY3ChcHE2BEZn6QtygI2H4xB"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_HDX_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_320x50_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],ortb2Imp:{ext:{gpid:"/8095840/.2_A.47402.4_tooplate.com_tier1/incontent",data:{divId:"tooplatecom47402",placement:"206904pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47402.4_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47402.4_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47403",placementGpid:"incontent",adUnitPath:"/8095840,22381294811/.2_A.47403.4_tooplate.com_tier1",setupCode:[".2 208358.4 tooplate.com PGHB tier1"],sizes:[[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214692"}},{bidder:"sharethrough",params:{pkey:"uDCkEWucimfM5BzLnUlV5CRr"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206907pghb",pagetype:"article",category:"technology"}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"811577497"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227576,usePrebidSizes:!0}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583422,bidonmultiformat:!0,position:"atf"}},{bidder:"openx",params:{unit:"561331805",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47403.4_tooplate.com_tier1_208358"}},{bidder:"improvedigital",params:{placementId:23282295,publisherId:1263}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33364238",placement:"inArticle"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"212960207"}},{bidder:"appnexus",params:{placementId:34224145,allowSmallerSizes:!0}}],mediaTypes:{banner:{sizes:[[300,250],[320,50],[300,100],[336,280],[250,250],[320,100],[200,200],[375,50],[375,100],[320,320]]}},setupConfigurationID:13479,hasRonNative:!1,floors:{default:.01},bidderOverrides:[{bidder:"sovrn",property:"tagid",overrides:["1157878"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethrough",property:"pkey",overrides:["VvskwdkMGfZ2pspPgQOpisnD"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"sharethroughS2S",property:"pkey",overrides:["EY3ChcHE2BEZn6QtygI2H4xB"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"triplelift",property:"inventoryCode",overrides:["PubGalaxy_RON_HDX_Prebid"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"},{bidder:"tripleliftS2S",property:"inventoryCode",overrides:["PubGalaxy_RON_Web_320x50_S2S"],mode:"on-create",applyTo:"child-instances",onExhaust:"round-robin"}],ortb2Imp:{ext:{gpid:"/8095840/.2_A.47403.4_tooplate.com_tier1/incontent",data:{divId:"tooplatecom47403",placement:"206907pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47403.4_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47403.4_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47404",placementGpid:"adhesion",adUnitPath:"/8095840,22381294811/.2_A.47404.3_tooplate.com_tier1",setupCode:[".2 208357.3 tooplate.com PGHB tier1"],sizes:[[[728,90],[970,250],[970,90],[468,60],[970,120],[980,90],[980,120],[930,180],[750,300],[750,200],[750,100],[980,250],[980,300]]],targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[468,60]]},{viewportSize:[730,0],sizes:[[728,90],[468,60]]},{viewportSize:[750,0],sizes:[[728,90],[468,60],[750,300],[750,200],[750,100]]},{viewportSize:[930,0],sizes:[[728,90],[468,60],[930,180],[750,300],[750,200],[750,100]]},{viewportSize:[970,0],sizes:[[728,90],[970,250],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[980,90],[970,250],[980,120],[970,90],[468,60],[930,180],[750,300],[750,200],[750,100],[980,250],[970,120],[980,300]]},{viewportSize:[0,0],sizes:[]}],setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214691"}},{bidder:"sharethrough",params:{pkey:"fVLe77vJfjh9JNIAK2VmEY9k"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206910pghb",pagetype:"article",category:"technology"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227573,usePrebidSizes:!0}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"805486344"}},{bidder:"improvedigital",params:{placementId:23282296,publisherId:1263}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583424,bidonmultiformat:!0,position:"atf"}},{bidder:"openx",params:{unit:"561331806",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47404.3_tooplate.com_tier1_208357"}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33247362",placement:"inScreen"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"776828808"}},{bidder:"appnexus",params:{placementId:34224147,allowSmallerSizes:!0}}],mediaTypes:{banner:{sizes:[[728,90],[970,250],[970,90],[468,60],[970,120],[980,90],[980,120],[930,180],[750,300],[750,200],[750,100],[980,250],[980,300]]}},setupConfigurationID:13480,hasRonNative:!1,floors:{default:.01},ortb2Imp:{ext:{gpid:"/8095840/.2_A.47404.3_tooplate.com_tier1/adhesion",data:{divId:"tooplatecom47404",placement:"206910pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47404.3_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47404.3_tooplate.com_tier1"}}}}}]},{adUnitElementId:"tooplatecom47406",placementGpid:"adhesion",adUnitPath:"/8095840,22381294811/.2_A.47406.28_tooplate.com_tier1",setupCode:[".2 208356.28 tooplate.com PGHB tier1"],sizes:[[[320,50],[300,100],[320,100],[300,50]]],targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}},setups:[{renderer:{},bids:[{bidder:"ix",params:{siteId:"1015499"}},{bidder:"adf",params:{mid:1729968,priceType:"net"}},{bidder:"oftmedia",params:{placementId:"33214690"}},{bidder:"sharethrough",params:{pkey:"UDNV87ScO81Vbef0K7wqohP4"}},{bidder:"ixS2S",params:{siteId:"1015500"}},{bidder:"openxS2S",params:{unit:"561194658",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"33acrossS2S",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"appnexusS2S",params:{placement_id:34043906,allowSmallerSizes:!0}},{bidder:"criteo",params:{networkId:8347,publisherSubId:"%dfpCodeWithoutMcmCode%"}},{bidder:"adagio",params:{organizationId:"1152",site:"tooplate-com",adUnitElementId:"%divId%",placement:"206913pghb",pagetype:"article",category:"technology"}},{bidder:"medianetS2S",params:{cid:"8CU14QN5E",crid:"805486344"}},{bidder:"improvedigitS2S",params:{publisherId:1263,placementId:23227574,usePrebidSizes:!0}},{bidder:"pubmatic",params:{publisherId:"157230",adSlot:"/8095840/.2_A.47406.28_tooplate.com_tier1_208356"}},{bidder:"rubicon",params:{accountId:18630,siteId:554006,zoneId:3583426,bidonmultiformat:!0,position:"atf"}},{bidder:"improvedigital",params:{placementId:23282297,publisherId:1263}},{bidder:"openx",params:{unit:"561331807",delDomain:"pubgalaxy-d.openx.net"}},{bidder:"onetag",params:{pubId:"699899629dbed80",placement:"%setupCode%"}},{bidder:"33across",params:{siteId:"cqwBSSoh0r74kmrkHcnlxd",productId:"siab"}},{bidder:"seedtag",params:{publisherId:"1363-6742-01",adUnitId:"33247362",placement:"inScreen"}},{bidder:"medianet",params:{cid:"8CUQ257TE",crid:"752017230"}},{bidder:"appnexus",params:{placementId:34224148,allowSmallerSizes:!0}}],mediaTypes:{banner:{sizes:[[320,50],[300,100],[320,100],[300,50]]}},setupConfigurationID:13481,hasRonNative:!1,floors:{default:.01},ortb2Imp:{ext:{gpid:"/8095840/.2_A.47406.28_tooplate.com_tier1/adhesion",data:{divId:"tooplatecom47406",placement:"206913pghb",adserver:{name:"gam",adslot:"/8095840/.2_A.47406.28_tooplate.com_tier1",pbadslot:"/8095840/.2_A.47406.28_tooplate.com_tier1"}}}}}]}],adUnitsInitialLoadElementIDs:["/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1"],adUnitsDynamicallyInsertedElementIDs:[],config:{enableSendAllBids:!1,priceGranularity:{buckets:[{precision:2,max:5,increment:.01},{precision:2,max:10,increment:.05},{precision:2,max:50,increment:.5},{precision:2,max:100,increment:1},{precision:2,max:500,increment:5}]},currency:{adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://currency.prebid.org/latest.json",bidderCurrencyDefault:{teads:"BRL"},defaultRates:{USD:{EUR:.8702462796971543,USD:1,JPY:153.50274127578103,BGN:1.7020276738316944,CZK:21.208772082499348,DKK:6.4970846749630145,GBP:.7653816029936471,HUF:337.96884518318683,PLN:3.7046384126707856,RON:4.426159603167696,SEK:9.560960751892786,CHF:.8088939169785049,ISK:126.70785832390565,NOK:10.20494299886868,TRY:42.0865024802019,AUD:1.5395526934122357,BRL:5.384474806370203,CAD:1.4078844312940562,CNY:7.125315464276389,HKD:7.77373596727874,IDR:16720.99904272909,ILS:3.267252632494996,INR:88.70898964406928,KRW:1439.19589243756,MXN:18.62118179444783,MYR:4.197458880863284,NZD:1.7665129231572536,PHP:58.61282743016274,SGD:1.3064137150813682,THB:32.53502741275781,ZAR:17.469758941780523}}},userIdTargeting:{GAM:!0},useBidCache:!0,targetingControls:{addTargetingKeys:["SOURCE","ADOMAIN","DEAL","DSP"]},maxRequestsPerOrigin:6,minBidCacheTTL:300,eventHistoryTTL:120,gdprGeos:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LI","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","IS","NO","CH","BR"],consentManagement:{gdpr:{cmpApi:"iab",timeout:1e4},usp:{cmpApi:"iab",timeout:1e4},gpp:{cmpApi:"iab",timeout:1e4}},userSync:{userIds:[{name:"criteo"},{name:"id5Id",params:{partner:341,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"unifiedId",params:{partner:"zn2ep7r"},storage:{type:"html5",name:"pbjs-unifiedid",expires:60}},{name:"identityLink",params:{pid:"14034",notUse3P:!1},storage:{type:"html5",name:"idl_env",expires:15,refreshInSeconds:1800}},{name:"sharedId",params:{syncTime:86400},storage:{name:"sharedid",type:"html5",expires:28}},{name:"lotamePanoramaId"},{name:"33acrossId",params:{pid:"0015a00002qqhqLAAQ"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}},{name:"hadronId",params:{partnerId:570}},{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}}],filterSettings:{all:{bidders:"*",filter:"include"}},syncDelay:6e3,syncsPerBidder:3,auctionDelay:100,topics:{maxTopicCaller:2,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"improvedigital",iframeURL:"https://hb.360yield.com/privacy-sandbox/topics.html"}]},encryptedSignalSources:{sources:[{source:["esp.criteo.com","id5-sync.com","pubcid.org","crwdcntrl.net","33across.com"],encrypt:!1}]},ppid:"pubcid.org"},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"pubgalaxy.com",hp:1,sid:"13454"}]}},multibid:[{bidders:["ix","adf","oftmedia","sharethrough","ixS2S","openxS2S","appnexusS2S","33acrossS2S","appnexus","criteo","improvedigital","adagio","improvedigitS2S","medianetS2S","pubmatic","openx","rubicon","onetag","33across","seedtag","medianet","ogury"],maxBids:3}],improvedigital:{usePrebidSizes:!0},rubicon:{singleRequest:!0},s2sConfig:{accountId:"pubgalaxyS2S",endpoint:"https://pbs.360yield.com/openrtb2/auction",syncEndpoint:"https://pbs.360yield.com/cookie_sync",timeout:500,enabled:!0,testing:!1,bidders:["ixS2S","openxS2S","appnexusS2S","improvedigitS2S","medianetS2S","33acrossS2S"]},enableTIDs:!0,paapi:{enabled:!0,bidders:["pubmatic","improvedigital","openx"],defaultForSlots:1}},bidderConfigurations:[],timeout:1500,outstreamPlayer:{},rendererTimeout:3e3,clientTargetingService:{},macroService:{},ignoreHptoSizes:!1,hptoSizes:[[1800,1e3],[233,233],[970,1e3],[1920,1200],[1800,200],[10,10],[640,300]],bidderTargeting:[{bidder:"ix",targeting:{geoLocation:{countryCodes:["VE","TZ","EG","TN","VN","RU","PK","NG","NE","NP","IQ","CN","LK","KH","AR","DZ"],state:"excludes"}}},{bidder:"adf",targeting:{geoLocation:{countryCodes:["US","GB","TR","CH","SE","ES","ZA","SI","SK","RS","RU","RO","PT","PL","PK","NO","NL","LU","LT","LI","LV","IT","IE","IS","HU","GR","DE","FR","FI","EE","DK","CZ","CY","HR","BG","BE","AT","AU"],state:"includes"}}},{bidder:"rubicon",targeting:{geoLocation:{countryCodes:["TN","RU","NP","CN","KH","BY","BN","DZ"],state:"excludes"}}},{bidder:"pubmatic",targeting:{geoLocation:{countryCodes:["UA","RS","RU","CN","BA","AL"],state:"excludes"}}},{bidder:"sharethrough",targeting:{geoLocation:{countryCodes:["US","GB","AE","CH","SE","ES","SG","PL","NZ","NL","MX","IT","DE","FR","CA","AU"],state:"includes"}}},{bidder:"onetag",targeting:{geoLocation:{countryCodes:["BD","DZ","TN","KH","MM","VE","NP","RU","AL","SC","LY"],state:"excludes"}}},{bidder:"ixS2S",targeting:{geoLocation:{countryCodes:["BD","KH","PK","AR","VN","EG","CN","LK","MM","DZ","RU","VE","NP","TZ"],state:"excludes"}}},{bidder:"33across",targeting:{geoLocation:{countryCodes:["US","NZ","CA","AU"],state:"includes"}}},{bidder:"seedtag",targeting:{geoLocation:{countryCodes:["BG"],state:"excludes"}}},{bidder:"openxS2S",targeting:{geoLocation:{countryCodes:["RU","BY"],state:"excludes"}}},{bidder:"33acrossS2S",targeting:{geoLocation:{countryCodes:["US","NZ","CA","AU"],state:"includes"}}}],supportedNativeSizes:[[300,250],[970,250],[970,90],[728,90],[300,600],[160,600],[320,50],[320,100]],blockedAdvertiserDomains:[],floorProvider:{pubxai:{id:"251fdff9-3043-42e6-a6f4-35500425a8a6",analytics:{provider:"pubxai",options:{samplingRate:10,pubxId:"251fdff9-3043-42e6-a6f4-35500425a8a6"}}}},disabledBidCacheBidders:["gumgum","ttd","thetradedesk"],bidderMultiFormatSupportSettings:{biddersWithMultipleParams:["ix","ixS2S","adf","adfS2S","openx","sharethrough","sharethroughS2S","sovrn","dspx"],biddersWhichNeedToBeSplit:["medianet","onetag","unruly","sonobi"]},splitBiddersWhichDoNotSupportMultiFormat:!1,keysWhoseValuesNeedToBeEncoded:["hb_native_linkurl","hb_native_image","hb_native_privacy"],internalTests:[{type:"AssertiveYieldPrebidServerTest",percentOfTrafficToTest:0},{type:"AssertiveYieldDynamicFloorsTest",percentOfTrafficToTest:0}],dynamicBidAdjustment:{client:[],server:[]}}],t=((e,t)=>{const n=null!=e?e:0;return{getVideoRenderer:(e,i,r)=>o=>{setTimeout((()=>{try{i().player(o,e.adUnitElementId,r)}catch(e){t.error({namespace:"VideoRenderer",message:"Error in ad rendering!",type:F.f.VideoRendererError,verboseLevel:1,payload:e})}}),n)},getImaRenderer:(e,n,i)=>r=>{try{var o;if(!r.vastXml&&!r.vastUrl)throw new Error("Bidder responded with invalid video response");const g=document.getElementById(e.adUnitElementId);if(!g)throw new Error("AdUnit code not present in bid");let f=640,m=360;var s,a,c,u,p,h;null!==(o=e.mediaTypes.video)&&void 0!==o&&o.playerSize&&(f="object"==typeof(null===(s=e.mediaTypes.video)||void 0===s?void 0:s.playerSize[0])?null===(a=e.mediaTypes.video)||void 0===a?void 0:a.playerSize[0][0]:null===(c=e.mediaTypes.video)||void 0===c?void 0:c.playerSize[0],m="object"==typeof(null===(u=e.mediaTypes.video)||void 0===u?void 0:u.playerSize[0])?null===(p=e.mediaTypes.video)||void 0===p?void 0:p.playerSize[0][1]:null===(h=e.mediaTypes.video)||void 0===h?void 0:h.playerSize[1]);const v=g.getElementsByTagName("div");v[0]&&(v[0].style.width="1px",v[0].style.height="1px");const b=document.createElement("div");b.style.width="".concat(f,"px"),b.style.height="".concat(m,"px"),b.style.maxWidth="".concat(f,"px"),b.style.maxHeight="".concat(f,"px"),b.style.overflow="hidden",b.style.position="relative",b.style.top="0",b.style.left="0",b.style.display="block",g.appendChild(b);const y=document.createElement("video");y.src="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",y.muted=!0,y.style.width="".concat(f,"px"),y.style.height="".concat(m,"px"),b.append(y);const A=document.createElement("div");A.style.position="absolute",A.style.top="0",b.append(A);const w=e=>{if(!e.parentNode)return null;const t=document.createElement("div");return e.parentNode.insertBefore(t,e),t.appendChild(e),t.className=H.W.AD_WRAPPER_CLASS,t},S=null!=g&&g.parentElement&&null!=g&&g.parentElement.classList.contains(H.W.AD_WRAPPER_CLASS)?null==g?void 0:g.parentElement:w(g);if(!S)return;S.style.position="relative",S.style.minWidth=S.style.minWidth||"".concat(f,"px"),S.style.minHeight=S.style.minHeight||"".concat(m,"px"),S.style.display="flex",S.style.justifyContent="center",S.style.alignItems="center";const I=new window.google.ima.AdsRequest,E=new window.google.ima.AdDisplayContainer(A,y);r.vastXml?I.adsResponse=r.vastXml.replace(/\\"/g,'"'):I.adTagUrl=r.vastUrl;const _=new window.google.ima.AdsLoader(E);_.getSettings().setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE);let x=!1;_.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(o=>{const s=new window.google.ima.AdsRenderingSettings;s.restoreCustomPlaybackStateOnAdBreakComplete=!0,s.loadVideoTimeout=3e3;const a=o.getAdsManager(y,s);a.addEventListener(window.google.ima.AdEvent.Type.LOADED,(()=>{y.play()})),a.addEventListener(window.google.ima.AdEvent.Type.STARTED,(()=>{n.emit(l.w.adUnitRenderingDelayed,{adUnitsElementIDs:[e.adUnitElementId]}),setTimeout((()=>{n.emit(l.w.adUnitRenderedBidder,{creativeWidth:f,creativeHeight:m,bidders:[r.bidder],slotID:e.adUnitElementId})}),1e3)})),a.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(()=>{n.emit(l.w.adUnitRenderingDelayed,{adUnitsElementIDs:[e.adUnitElementId]}),n.emit(l.w.auctionRequested,{auctionID:(0,d.$C)(),adUnitsElementIDs:[e.adUnitElementId]})})),a.addEventListener(window.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(()=>y.pause())),a.addEventListener(window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(()=>y.play())),a.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,(o=>{n.emit(l.w.rerunAuctionRequested,{auctionID:(0,d.$C)(),originalAuctionID:"originalAuctionID"in i?i.originalAuctionID:i.auctionID,adUnitsElementIDs:[e.adUnitElementId]}),t.error({namespace:"VideoRenderer",message:"Error in ad rendering!",type:F.f.VideoRendererError,verboseLevel:1,payload:o}),x||(n.emit(l.w.videoAdError,{adUnitCode:e.adUnitPath,bidCpm:r.cpm,bidderCode:r.bidder,countryCode:window.pgGeo,device:window.pgDevice,elementId:e.adUnitElementId,errorCode:o.getError().getErrorCode(),auctionId:i.auctionID,vastXml:r.vastXml||r.vastUrl}),x=!0)})),E.initialize(),a.init(f,m,window.google.ima.ViewMode.NORMAL),a.start()}),!1),_.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,(o=>{n.emit(l.w.rerunAuctionRequested,{auctionID:(0,d.$C)(),originalAuctionID:"originalAuctionID"in i?i.originalAuctionID:i.auctionID,adUnitsElementIDs:[e.adUnitElementId]}),t.error({namespace:"VideoRenderer",message:"Error in ad rendering!",type:F.f.VideoRendererError,verboseLevel:1,payload:o}),x||(n.emit(l.w.videoAdError,{adUnitCode:e.adUnitPath,bidCpm:r.cpm,bidderCode:r.bidder,countryCode:window.pgGeo,device:window.pgDevice,elementId:e.adUnitElementId,errorCode:o.getError().getErrorCode(),auctionId:i.auctionID,vastXml:r.vastXml||r.vastUrl}),x=!0)})),n.emit(l.w.outstreamRenderRequested,{elementId:e.adUnitElementId}),_.requestAds(I)}catch(e){t.error({namespace:"VideoRenderer",message:"Error in ad rendering!",type:F.f.VideoRendererError,verboseLevel:1,payload:e})}}}})(e.find((e=>e.outstreamPlayer)).rendererTimeout,window.pgPluginManager.baseConfig.logger),n=new J(qe.Q),r=window.pgPluginManager.getConfig(e);let o=new Fe.G(qe.Q),s=r&&n.applyTargeting(r);if(s){s=bt(bt({},s),{},{context:i.default,outstreamPlayer:{getInstance:()=>window.outstreamPlayer},taskHandler:new Le(o,qe.Q,new He.W),videoRenderer:t,clientTargetingService:qe.Q,macroService:Se,audienceDataSetterFactory:new X(i.default,window.pgPluginManager.baseConfig.logger),auctionFactory:new we}),s.floorProviderFactory=new et(i.default,window.pgPluginManager.baseConfig.logger,window.pgPluginManager.baseConfig.eventBus,qe.Q),s.bidderFixServices=new Map;const e={getCarouselRenderer:(e,t,n,i,r)=>new Pe(e,t,n,i,r)};s.rendererFactory=new _e(e,window.pgPluginManager.baseConfig.logger,window.pgPluginManager.baseConfig.eventBus),s.context.bidderSettings.standard={storageAllowed:!0},s.bidderParamModificationServices=At.map((e=>new e(window.pgPluginManager.baseConfig.eventBus))),s.adUnitManager=new ct(new tt.A,window.pgPluginManager.baseConfig.logger,window.pgPluginManager.baseConfig.eventBus,s);const n=[];n.push(new ft),n.push(new mt),s.internalTestingModule=new lt(n)}return s}))},9439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e_});var i=n(3815);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],d=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);d=!0);}catch(e){c=!0,r=e}finally{try{if(!d&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function c(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=window,p=u.pgPrebid=u.pgPrebid||{};function h(){return p}function g(e){p.installedModules.push(e)}function f(e,t,n,i,r,o,s){try{var a=e[o](s),d=a.value}catch(e){return void n(e)}a.done?t(d):Promise.resolve(d).then(i,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function s(e){f(o,i,r,s,a,"next",e)}function a(e){f(o,i,r,s,a,"throw",e)}s(void 0)}))}}p.cmd=p.cmd||[],p.que=p.que||[],u===window&&(u._pbjsGlobals=u._pbjsGlobals||[],u._pbjsGlobals.push("pgPrebid"));var v=n(865),b=n.n(v),y={buckets:[{max:5,increment:.5}]},A={buckets:[{max:20,increment:.1}]},w={buckets:[{max:20,increment:.01}]},S={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},I={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function E(e,t,n){var i="";if(!_(t))return i;var r=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),o=0,s=t.buckets.find((function(t){if(e>r.max*n){var s=t.precision;void 0===s&&(s=2),i=(t.max*n).toFixed(s)}else{if(e<=t.max*n&&e>=o*n)return t.min=o,t;o=t.max}}));return s&&(i=function(e,t,n){var i=void 0!==t.precision?t.precision:2,r=t.increment*n,o=t.min*n,s=Math.floor,a=Se.getConfig("cpmRoundingFunction");"function"==typeof a&&(s=a);var d,c,l=Math.pow(10,i+2),u=(e*l-o*l)/(r*l);try{d=s(u)*r+o}catch(e){c=!0}(c||"number"!=typeof d)&&(At("Invalid rounding function passed in config"),d=Math.floor(u)*r+o);return(d=Number(d.toFixed(10))).toFixed(i)}(e,s,n)),i}function _(e){if(jt(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}function x(e,t,n,i,r){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:r;return e===r?n:e}var P="adserverTargeting",T="standard",O="pbjs_debug",C=1,R={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",EXPIRED_RENDER:"expiredRender",BILLABLE_EVENT:"billableEvent",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PBS_ANALYTICS:"pbsAnalytics",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError",BEFORE_PBS_HTTP:"beforePBSHttp",BROWSI_INIT:"browsiInit",BROWSI_DATA:"browsiData"},U="preventWritingOnMainDocument",k="exception",D="cannotFindAd",B="missingDocOrAdid",j="low",N="medium",L="high",M="auto",z="dense",F="custom",q={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp"},H={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},V={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},$="s2s",G={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},W="Bid has missing or invalid properties",K="Invalid request ID",Q="Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",J="Bid does not meet price floor",Y="Unable to convert currency",X="Bid does not provide required DSA transparency info",Z="Bid indicates inappropriate DSA rendering method",ee="Bid price exceeds maximum value",te={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},ne={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},ie=1,re=3,oe=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],se="Prebid Request",ae="Prebid Response",de="Prebid Native",ce="Prebid Event",le="__pb_locator__";function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var fe="TRUE"===Tt(O).toUpperCase(),me={},ve="random",be={};be[ve]=!0,be.fixed=!0;var ye=ve,Ae={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function we(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?{priceGranularity:Ae.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:ye,auctionOptions:{}}:{};function n(e){return t[e]}function i(n,i){t.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0}),t[n]=i}var r={publisherDomain:{set:function(e){null!=e&&At("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{set:function(e){a(e)&&("string"==typeof e?i("priceGranularity",o(e)?e:Ae.MEDIUM):Dt(e)&&(i("customPriceBucket",e),i("priceGranularity",Ae.CUSTOM),bt("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set:function(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce((function(t,i){return a(e[i])?"string"==typeof e?t[i]=o(e[i])?e[i]:n("priceGranularity"):Dt(e)&&(t[i]=e[i],bt("Using custom price granularity for ".concat(i))):At("Invalid price granularity for media type: ".concat(i)),t}),{}))}},bidderSequence:{set:function(e){be[e]?i("bidderSequence",e):At("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{set:function(e){(function(e){if(!Dt(e))return At("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];if("secondaryBidders"!==i&&"suppressStaleRender"!==i&&"suppressExpiredRender"!==i)return At("Auction Options given an incorrect param: ".concat(i)),!1;if("secondaryBidders"===i){if(!Ut(e[i]))return At("Auction Options ".concat(i," must be of type Array")),!1;if(!e[i].every(Rt))return At("Auction Options ".concat(i," must be only string")),!1}else if(("suppressStaleRender"===i||"suppressExpiredRender"===i)&&!Bt(e[i]))return At("Auction Options ".concat(i," must be of type boolean")),!1}return!0})(e)&&i("auctionOptions",e)}}};return Object.defineProperties(e,Object.fromEntries(Object.entries(r).map((function(e){var r=s(e,2),o=r[0],a=r[1];return[o,Object.assign({get:n.bind(null,o),set:i.bind(null,o),enumerable:t.hasOwnProperty(o),configurable:!t.hasOwnProperty(o)},a)]})))),e;function o(e){return Object.keys(Ae).find((function(t){return e===Ae[t]}))}function a(e){if(!e)return wt("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)o(e)||At("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(Dt(e)&&!_(e))return wt("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}var Se=function(){var e,t,n,i=[],r=null;function o(){e={};var i=we({debug:fe,bidderTimeout:3e3,enableSendAllBids:true,useBidCache:false,deviceAccess:true,disableAjaxTimeout:false,maxNestedIframes:10,maxBid:5e3,userSync:{topics:me}});t&&w(Object.keys(t).reduce((function(e,n){return t[n]!==i[n]&&(e[n]=i[n]||{}),e}),{})),t=i,n={}}function c(){if(r&&n&&Dt(n[r])){var e,i=n[r],o={},s=he(new Set([].concat(a(Object.keys(t)),a(Object.keys(i)))));try{for(s.s();!(e=s.n()).done;){var d=e.value,c=t[d],l=i[d];o[d]=void 0===l?c:void 0===c?l:Dt(l)?En({},c,l):l}}catch(e){s.e(e)}finally{s.f()}return o}return pe({},t)}var u=[c,function(){var e=c();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?x(e(),t):c()}return A.apply(void 0,arguments)}})),p=s(u,2),h=p[0],g=p[1],f=[g,h].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===d(t)&&(t=en(t)),t}})),m=s(f,2),v=m[0],b=m[1];function y(n){if(Dt(n)){var i=Object.keys(n),r={};i.forEach((function(i){var o=n[i];Dt(e[i])&&Dt(o)&&(o=Object.assign({},e[i],o));try{r[i]=t[i]=o}catch(e){At("Cannot set config for property ".concat(i," : "),e)}})),w(r)}else wt("setConfig options must be an object")}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if("string"!=typeof e&&(r=e,e="*",n=t||{}),"function"==typeof r){var o={topic:e,callback:r};return i.push(o),n.init&&r("*"===e?g():l({},e,g(e))),function(){i.splice(i.indexOf(o),1)}}wt("listener must be a function")}function w(e){var t=Object.keys(e);i.filter((function(e){return t.includes(e.topic)})).forEach((function(t){t.callback(l({},t.topic,e[t.topic]))})),i.filter((function(e){return"*"===e.topic})).forEach((function(t){return t.callback(e)}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!Dt(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!Dt(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((function(i){n[i]||(n[i]=we({},!1)),Object.keys(e.config).forEach((function(r){var o=e.config[r],s=n[i][r];if(Dt(o)&&(null==s||Dt(s))){var a=t?En:Object.assign;n[i][r]=a({},s||{},o)}else n[i][r]=o}))}))}catch(e){wt(e)}}function I(e,t){r=e;try{return t()}finally{E()}}function E(){r=null}return o(),{getCurrentBidder:function(){return r},resetBidder:E,getConfig:g,getAnyConfig:h,readConfig:v,readAnyConfig:b,setConfig:y,mergeConfig:function(e){if(Dt(e)){var t=En(c(),e);return y(pe({},t)),t}wt("mergeConfig input must be an object")},setDefaults:function(n){Dt(e)?(Object.assign(e,n),Object.assign(t,n)):wt("defaults must be an object")},resetConfig:o,runWithBidder:I,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return I(e,t.bind.apply(t,[this].concat(i)))}At("config.callbackWithBidder callback is not a function")}}},setBidderConfig:S,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return S(e,!0)}}}();function Ie(e){var t,n,i;if(Array.isArray(e)){for(n=Array(t=e.length);t--;)n[t]=(i=e[t])&&"object"==typeof i?Ie(i):i;return n}if("[object Object]"===Object.prototype.toString.call(e)){for(t in n={},e)"__proto__"===t?Object.defineProperty(n,t,{value:Ie(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=(i=e[t])&&"object"==typeof i?Ie(i):i;return n}return e}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function xe(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pe(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Te=0;function Oe(e){return"__private_"+Te+++"_"+e}var Ce,Re,Ue=0,ke=1,De=Oe("result"),Be=Oe("callbacks"),je=Oe("collect"),Ne=function(){return xe((function e(t){if(Ee(this,e),Object.defineProperty(this,De,{writable:!0,value:void 0}),Object.defineProperty(this,Be,{writable:!0,value:void 0}),"function"!=typeof t)throw new Error("resolver not a function");var n=[],i=[],r=s([Ue,ke].map((function(e){return function(t){if(e===Ue&&"function"==typeof(null==t?void 0:t.then))t.then(o,a);else if(!n.length)for(n.push(e,t);i.length;)i.shift()()}})),2),o=r[0],a=r[1];try{t(o,a)}catch(e){a(e)}Pe(this,De)[De]=n,Pe(this,Be)[Be]=i}),[{key:"then",value:function(e,t){var n=this,i=Pe(this,De)[De];return new this.constructor((function(r,o){var a=function(){var n=i[1],a=s(i[0]===Ue?[e,r]:[t,o],2),d=a[0],c=a[1];if("function"==typeof d){try{n=d(n)}catch(e){return void o(e)}c=r}c(n)};i.length?a():Pe(n,Be)[Be].push(a)}))}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,n=this;return this.then((function(n){return t=n,e()}),(function(i){return t=n.constructor.reject(i),e()})).then((function(){return t}))}}],[{key:"race",value:function(e){var t=this;return new this((function(n,i){Pe(t,je)[je](e,(function(e,t){return e?n(t):i(t)}))}))}},{key:"all",value:function(e){var t=this;return new this((function(n,i){var r=[];Pe(t,je)[je](e,(function(e,t,n){return e?r[n]=t:i(t)}),(function(){return n(r)}))}))}},{key:"allSettled",value:function(e){var t=this;return new this((function(n){var i=[];Pe(t,je)[je](e,(function(e,t,n){return i[n]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}}),(function(){return n(i)}))}))}},{key:"resolve",value:function(e){return new this((function(t){return t(e)}))}},{key:"reject",value:function(e){return new this((function(t,n){return n(e)}))}}])}();Object.defineProperty(Ne,je,{value:function(e,t,n){var i=this,r=e.length;function o(){t.apply(this,arguments),--r<=0&&n&&n()}0===e.length&&n?n():e.forEach((function(e,t){return i.resolve(e).then((function(e){return o(!0,e,t)}),(function(e){return o(!1,e,t)}))}))}});var Le=null!==(Ce=h().setTimeout)&&void 0!==Ce?Ce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>0)return setTimeout(e,t);e()},Me=null!==(Re=h().Promise)&&void 0!==Re?Re:Ne;function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Me((function(t){Le(t,e)}))}function Fe(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).promiseFactory;function i(e){return function(t){return e(t)}}return{promise:(void 0===n?function(e){return new Me(e)}:n)((function(n,i){e=n,t=i})),resolve:i(e),reject:i(t)}}var qe,He,Ve="String",$e="Object",Ge="Boolean",We=Object.prototype.toString,Ke=Boolean(window.console),Qe=Boolean(Ke&&window.console.log),Je=Boolean(Ke&&window.console.info),Ye=Boolean(Ke&&window.console.warn),Xe=Boolean(Ke&&window.console.error),Ze=h();function et(){null!=qe&&qe.apply(void 0,arguments)}var tt,nt=function(){return(!He||!tt||Date.now()-tt>20)&&(it.resetWinDimensions(),tt=Date.now()),He};var it={checkCookieSupport:cn,createTrackPixelIframeHtml:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return"";t&&(e=encodeURI(e));n&&(n='sandbox="'.concat(n,'"'));return"<iframe ".concat(n,' id="').concat(st(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')},getWindowSelf:ft,getWindowTop:gt,canAccessWindowTop:vt,getWindowLocation:mt,insertUserSyncIframe:Vt,insertElement:Ft,isFn:Ct,triggerPixel:Ht,logError:wt,logWarn:At,logMessage:bt,logInfo:yt,parseQS:yn,formatQS:An,deepEqual:In,resetWinDimensions:function(){var e,t,n,i,r,o,s,a,d,c,l,u,p,h,g,f=vt()?it.getWindowTop():it.getWindowSelf();He={screen:{width:null===(e=f.screen)||void 0===e?void 0:e.width,height:null===(t=f.screen)||void 0===t?void 0:t.height,availWidth:null===(n=f.screen)||void 0===n?void 0:n.availWidth,availHeight:null===(i=f.screen)||void 0===i?void 0:i.availHeight,colorDepth:null===(r=f.screen)||void 0===r?void 0:r.colorDepth},innerHeight:f.innerHeight,innerWidth:f.innerWidth,outerWidth:f.outerWidth,outerHeight:f.outerHeight,visualViewport:{height:null===(o=f.visualViewport)||void 0===o?void 0:o.height,width:null===(s=f.visualViewport)||void 0===s?void 0:s.width},document:{documentElement:{clientWidth:null===(a=f.document)||void 0===a||null===(a=a.documentElement)||void 0===a?void 0:a.clientWidth,clientHeight:null===(d=f.document)||void 0===d||null===(d=d.documentElement)||void 0===d?void 0:d.clientHeight,scrollTop:null===(c=f.document)||void 0===c||null===(c=c.documentElement)||void 0===c?void 0:c.scrollTop,scrollLeft:null===(l=f.document)||void 0===l||null===(l=l.documentElement)||void 0===l?void 0:l.scrollLeft},body:{scrollTop:null===(u=document.body)||void 0===u?void 0:u.scrollTop,scrollLeft:null===(p=document.body)||void 0===p?void 0:p.scrollLeft,clientWidth:null===(h=document.body)||void 0===h?void 0:h.clientWidth,clientHeight:null===(g=document.body)||void 0===g?void 0:g.clientHeight}}}}};var rt,ot=(rt=0,function(){return++rt});function st(){return ot()+Math.random().toString(16).substr(2)}function at(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,at)}function dt(e,t){return(null==t?void 0:t[e])||""}function ct(e){return"string"==typeof e?e.split(/\s*,\s*/).map((function(e){return e.match(/^(\d+)x(\d+)$/i)})).filter((function(e){return e})).map((function(e){var t=s(e,3),n=(t[0],t[1]),i=t[2];return[parseInt(n,10),parseInt(i,10)]})):Array.isArray(e)?ht(e)?[e]:e.filter(ht):[]}function lt(e){return ct(e).map(ut)}function ut(e){return e[0]+"x"+e[1]}function pt(e){return{w:e[0],h:e[1]}}function ht(e){return Ut(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function gt(){return window.top}function ft(){return window.self}function mt(){return window.location}function vt(){try{if(it.getWindowTop().location.href)return!0}catch(e){return!1}}function bt(){Et()&&Qe&&console.log.apply(console,It(arguments,"MESSAGE:"))}function yt(){Et()&&Je&&console.info.apply(console,It(arguments,"INFO:"))}function At(){Et()&&Ye&&console.warn.apply(console,It(arguments,"WARNING:")),et(R.AUCTION_DEBUG,{type:"WARNING",arguments})}function wt(){Et()&&Xe&&console.error.apply(console,It(arguments,"ERROR:")),et(R.AUCTION_DEBUG,{type:"ERROR",arguments})}function St(e){function t(t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(void 0,[e].concat(i))}}return{logError:t(wt),logWarn:t(At),logMessage:t(bt),logInfo:t(yt)}}function It(e,t){e=[].slice.call(e);var n=Se.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(i("#aaa")),e.unshift(i("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function i(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function Et(){return!!Se.getConfig("debug")}var _t,xt=(_t={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.createElement("iframe");return Object.assign(i,Object.assign({},_t,t)),Object.assign(i.style,n),i});function Pt(){return xt(document,{id:st(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function Tt(e){return yn(mt().search)[e]||""}function Ot(e,t){return We.call(e)==="[object "+t+"]"}function Ct(e){return Ot(e,"Function")}function Rt(e){return Ot(e,Ve)}var Ut=Array.isArray.bind(Array);function kt(e){return Ot(e,"Number")}function Dt(e){return Ot(e,$e)}function Bt(e){return Ot(e,Ge)}function jt(e){return!e||(Ut(e)||Rt(e)?!(e.length>0):Object.keys(e).length<=0)}function Nt(e){return Rt(e)&&(!e||0===e.length)}function Lt(e,t){var n=this;if(Ct(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach((function(e){var i=s(e,2),r=i[0],o=i[1];return t.call(n,o,r)}))}function Mt(e,t){return Ct(null==e?void 0:e.includes)&&e.includes(t)}function zt(e,t){return Ct(null==e?void 0:e.map)?e.map(t):Object.entries(e||{}).map((function(n){var i=s(n,2),r=i[0],o=i[1];return t(o,r,e)}))}function Ft(e,t,n,i){var r;t=t||document,r=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((r=r.length?r:t.getElementsByTagName("body")).length){r=r[0];var o=i?null:r.firstChild;return r.insertBefore(e,o)}}catch(e){}}function qt(e,t){var n=null;return new Me((function(i){var r=function(){e.removeEventListener("load",r),e.removeEventListener("error",r),null!=n&&window.clearTimeout(n),i()};e.addEventListener("load",r),e.addEventListener("error",r),null!=t&&(n=window.setTimeout(r,t))}))}function Ht(e,t,n){var i=new Image;t&&it.isFn(t)&&qt(i,n).then(t),i.src=e}function Vt(e,t,n){var i=it.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),r=document.createElement("div");r.innerHTML=i;var o=r.firstChild;t&&it.isFn(t)&&qt(o,n).then(t),it.insertElement(o,document,"html",!0)}function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;if(!e)return"";var n='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return n+='<img src="'+t(e)+'"></div>'}function Gt(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map((function(e){return e[1]})).reduce((function(e,t){return e.replace("$"+encodeURIComponent(t),"$"+t)}),encodeURI(e))}function Wt(e,t,n){return n.indexOf(e)===t}function Kt(e,t){return e.concat(t)}function Qt(e,t){if(e)return t.flatMap((function(e){return e.bids})).find((function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}))}function Jt(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze.adUnits).map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(Kt,[])})).reduce(Kt,[]).filter((function(e){return void 0!==e})).filter(Wt)}function Yt(){if(window.googletag&&Ct(window.googletag.pubads)&&Ct(window.googletag.pubads().getSlots))return!0}var Xt=function(e,t){return t.cpm-e.cpm};function Zt(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),i=e[--t];e[t]=e[n],e[n]=i}return e}function en(e){return Ie(e)||{}}function tn(){try{return it.getWindowSelf()!==it.getWindowTop()}catch(e){return!0}}function nn(){if(!tn())return!1;var e=it.getWindowSelf();return!(!e.$sf||!e.$sf.ext)}function rn(){try{var e=ft();return"function"==typeof e.$sf.ext.geom?e.$sf.ext.geom():void 0}catch(e){return void wt("Error getting SafeFrame geometry",e)}}function on(e,t){if(e)return Object.entries(t).reduce((function(e,t){var n=s(t,2),i=n[0],r=n[1];return e.replace(new RegExp("\\$\\{"+i+"\\}","g"),r||"")}),e)}function sn(){return(new Date).getTime()}function an(e){var t,n=-1,i=(e=e||ft()).performance;if(null!==(t=e.performance)&&void 0!==t&&t.timing&&e.performance.timing.navigationStart>0){var r=i.timing.domLoading-i.timing.navigationStart;r>0&&(n=r)}return n}function dn(){return!1!==Se.getConfig("deviceAccess")}function cn(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function ln(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}function un(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function pn(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return Object.assign(t,l({},n,e[n]))}),{})}function hn(e,t,n){return e.filter((function(e){return e.code===t})).flatMap((function(e){return e.bids})).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}var gn=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};var fn=Number.isInteger.bind(Number);function mn(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=s(e,2);t[0];return void 0!==t[1]})))}function vn(e,t){return"object"!==d(e)?{}:t.reduce((function(n,i,r){if("function"==typeof i)return n;var o=i,s=i.match(/^(.+?)\sas\s(.+?)$/i);s&&(i=s[1],o=s[2]);var a=e[i];return"function"==typeof t[r+1]&&(a=t[r+1](a,n)),void 0!==a&&(n[o]=a),n}),{})}function bn(e,t){return Ut(e)&&(!t||e.length===t)&&e.every((function(e){return fn(e)}))}function yn(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=s(t.split("="),2),i=n[0],r=n[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(r)):e[i]=r||"",e}),{}):{}}function An(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function wn(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var i=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:i?n.search:it.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function Sn(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(it.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function In(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkTypes,i=void 0!==n&&n;if(e===t)return!0;if("object"!==d(e)||null===e||"object"!==d(t)||null===t)return!1;var r=Array.isArray(e),o=Array.isArray(t);if(r&&o){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!In(e[s],t[s],{checkTypes:i}))return!1;return!0}if(r||o)return!1;if(i&&e.constructor!==t.constructor)return!1;var a=Object.keys(e),c=Object.keys(t);if(a.length!==c.length)return!1;for(var l=0,u=a;l<u.length;l++){var p=u[l];if(!Object.prototype.hasOwnProperty.call(t,p))return!1;if(!In(e[p],t[p],{checkTypes:i}))return!1}return!0}function En(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];Dt(n)&&_n(e,n)}return e}function _n(e,t){if(Dt(e)&&Dt(t))for(var n=Object.keys(t),i=function(){var i=n[r];if("__proto__"===i||"constructor"===i)return 1;var o=t[i];Dt(o)?(e[i]||(e[i]={}),_n(e[i],o)):Array.isArray(o)?Array.isArray(e[i])?o.forEach((function(t){e[i].some((function(e){return In(e,t)}))||e[i].push(t)})):e[i]=a(o):e[i]=o},r=0;r<n.length;r++)i()}function xn(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=function(e,t){if(Ct(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},r=3735928559^n,o=1103547991^n,s=0;s<e.length;s++)r=i(r^(t=e.charCodeAt(s)),2654435761),o=i(o^t,1597334677);return r=i(r^r>>>16,2246822507)^i(o^o>>>13,3266489909),(4294967296*(2097151&(o=i(o^o>>>16,2246822507)^i(r^r>>>13,3266489909)))+(r>>>0)).toString()}function Pn(e){try{return JSON.parse(e)}catch(e){}}function Tn(e){try{return JSON.stringify(e)}catch(e){return""}}function On(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Map,i=function(){var i=t.apply(this,arguments);return n.has(i)||n.set(i,e.apply(this,arguments)),n.get(i)};return i.clear=n.clear.bind(n),i}function Cn(e,t){for(var n,i=0;i<e.length;i++)if(n=x(e[i],t))return n}var Rn,Un=function(){if(void 0!==Rn)return Rn;try{void 0===window.CompressionStream?Rn=!1:(new window.CompressionStream("gzip"),Rn=!0)}catch(e){Rn=!1}return Rn};function kn(){return(kn=m(b().mark((function e(t){var n,i,r,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&(t=JSON.stringify(t)),n=new TextEncoder,i=n.encode(t),r=new Blob([i]).stream().pipeThrough(new window.CompressionStream("gzip")),e.next=1,new Response(r).blob();case 1:return o=e.sent,e.next=2,o.arrayBuffer();case 2:return s=e.sent,e.abrupt("return",new Uint8Array(s));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e,t,n){t.split&&(t=t.split("."));for(var i,r,o=0,s=t.length,a=e;o<s&&"__proto__"!=(r=""+t[o++])&&"constructor"!==r&&"prototype"!==r;)a=a[r]=o===s?n:typeof(i=a[r])==typeof t?i:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}var Bn={fetch:window.fetch.bind(window),makeRequest:function(e,t){return new Request(e,t)},timeout:function(e,t){var n=new AbortController,i=setTimeout((function(){n.abort(),wt("Request timeout after ".concat(e,"ms"),t),i=null}),e);return{signal:n.signal,done:function(){i&&clearTimeout(i)}}}},jn="GET",Nn="Content-Type";function Ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,i=t.done,r=function(t,n){var i,r,o;null==e||null!=(null===(i=n)||void 0===i?void 0:i.signal)||Se.getConfig("disableAjaxTimeout")||(o=Bn.timeout(e,t),n=Object.assign({signal:o.signal},n));var s=Bn.fetch(t,n);return null!=(null===(r=o)||void 0===r?void 0:r.done)&&(s=s.finally(o.done)),s};return null==n&&null==i||(r=function(e){return function(t,r){var o=new URL(null==(null==t?void 0:t.url)?t:t.url,document.location).origin,s=e(t,r);return n&&n(o),i&&(s=s.finally((function(){return i(o)}))),s}}(r)),r}function Mn(e,t){var n=e.status,i=e.statusText,r=void 0===i?"":i,o=e.headers,s=e.url,a=0;function d(e){if(0===a)try{var n;a=(new DOMParser).parseFromString(t,null==o||null===(n=o.get(Nn))||void 0===n||null===(n=n.split(";"))||void 0===n?void 0:n[0])}catch(t){a=null,e&&e(t)}return a}return{readyState:XMLHttpRequest.DONE,status:n,statusText:r,responseText:t,response:t,responseType:"",responseURL:s,get responseXML(){return d(wt)},getResponseHeader:function(e){return null!=o&&o.has(e)?o.get(e):null},toJSON:function(){return Object.assign({responseXML:d()},this)},timedOut:!1}}function zn(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Ln(arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:e.request,done:e.done});return function(e,n,i){!function(e,t){var n="object"===d(t)&&null!=t?t:{success:"function"==typeof t?t:function(){return null},error:function(e,t){return wt("Network error",e,t)}},i=n.success,r=n.error;e.then((function(e){return e.text().then((function(t){return[e,t]}))})).then((function(e){var t=s(e,2),n=t[0],o=t[1],a=Mn(n,o);n.ok||304===n.status?i(o,a):r(n.statusText,a)}),(function(e){return r("",Object.assign(Mn({status:0},""),{reason:e,timedOut:"AbortError"===(null==e?void 0:e.name)}))}))}(t(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.method||(t?"POST":jn);if(i===jn&&t){var r=wn(e,n);Object.assign(r.search,t),e=Sn(r)}var o=new Headers(n.customHeaders);o.set(Nn,n.contentType||"text/plain");var s={method:i,headers:o};return i!==jn&&t&&(s.body=t),n.withCredentials&&(s.credentials="include"),isSecureContext&&["browsingTopics","adAuctionHeaders"].forEach((function(e){n[e]&&(s[e]=!0)})),n.keepalive&&(s.keepalive=!0),Bn.makeRequest(e,s)}(e,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})),n)}}var Fn=zn(),qn=Ln(),Hn=new Map;function Vn(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?Ia.index:t,i=$n(e),r=n.getAuction(e),o={type:"xml",value:i,ttlseconds:Number(e.ttl)+15};return Se.getConfig("cache.vasttrack")&&(o.bidder=e.bidder,o.bidid=e.requestId,o.aid=e.auctionId),null!=r&&(o.timestamp=r.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(o.key=e.customCacheKey),o}function $n(e){return e.vastXml?e.vastXml:(t=e.vastUrl,n=e.vastImpUrl,i=(n=n&&(Array.isArray(n)?n:[n]))?n.map((function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")})).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        ").concat(i,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"));var t,n,i}var Gn,Wn,Kn,Qn=function(e,t,n){e.videoCacheKey=n||at(),e.vastUrl||(e.vastUrl=t)},Jn={store:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zn,i={puts:e.map(Vn)};n(Se.getConfig("cache.timeout"))(Se.getConfig("cache.url"),function(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}(t),JSON.stringify(i),{contentType:"text/plain",withCredentials:!0})}};function Yn(e){var t=e.map((function(e){return e.bidResponse}));Jn.store(t,(function(n,i){n?wt("Failed to save to the video cache: ".concat(n,". Video bids will be discarded:"),t):e.length!==i.length?wt("expected ".concat(e.length," cache IDs, got ").concat(i.length," instead")):i.forEach((function(t,n){var i=e[n],r=i.auctionInstance,o=i.bidResponse,s=i.afterBidAdded;""===t.uuid?At("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(Qn(o,function(e){return"".concat(Se.getConfig("cache.url"),"?uuid=").concat(e)}(t.uuid),t.uuid),aa(r,o),s())}))}))}Se.getConfig("cache",(function(e){var t=e.cache;Gn="number"==typeof t.batchSize&&t.batchSize>0?t.batchSize:1,Wn="number"==typeof t.batchTimeout&&t.batchTimeout>0?t.batchTimeout:0,t.useLocal&&!Kn&&(Kn=Ia.onExpiry((function(e){e.getBidsReceived().forEach((function(e){var t=Hn.get(e.videoCacheKey);t&&t.startsWith("blob")&&URL.revokeObjectURL(t),Hn.delete(e.videoCacheKey)}))})))}));var Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yn,n=[[]],i=!1,r=function(e){return e()};return function(o,s,a){var d=Wn>0?e:r;n[n.length-1].length>=Gn&&n.push([]),n[n.length-1].push({auctionInstance:o,bidResponse:s,afterBidAdded:a}),i||(i=!0,d((function(){n.forEach(t),n=[[]],i=!1}),Wn))}}(),Zn="accessDevice",ei="syncUser",ti="enrichUfpd",ni="enrichEids",ii="fetchBids",ri="transmitEids",oi="transmitUfpd",si="transmitPreciseGeo",ai="transmitTid";function di(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}function ci(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,i=void 0===n?"client":n,r=t.bidder,o=void 0===r?"":r,s=t.bidId,a=t.transactionId,d=t.adUnitId,c=t.auctionId,l=i,u=e||0;Object.assign(this,{bidderCode:o,width:0,height:0,statusMessage:function(){switch(u){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:st(),requestId:s,transactionId:a,adUnitId:d,auctionId:c,mediaType:"banner",source:l}),this.getStatusCode=function(){return u},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}function li(e,t){return new ci(e,t)}var ui=Oe("resolveScope"),pi=function(){return xe((function e(t,n){Ee(this,e),Object.defineProperty(this,ui,{value:hi}),this.getSettings=t,this.defaultScope=n}),[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=Pe(this,ui)[ui](e),x(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return En({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=Pe(this,ui)[ui](e),this.getSettings()[e]||{}}}])}();function hi(e){return null==e?this.defaultScope:e}var gi=new pi((function(){return h().bidderSettings||{}}),T),fi="prebid",mi="bidder",vi="userId",bi="rtd",yi="analytics",Ai=n(2111),wi=n.n(Ai),Si=wi()({ready:wi().SYNC|wi().ASYNC|wi().QUEUE}),Ii=Fe();Si.ready=function(){var e=Si.ready;return function(){try{return e.apply(Si,arguments)}finally{Ii.resolve()}}}();var Ei=Ii.promise,_i=Si.get;function xi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;0===e.getHooks({hook:t}).length&&e.before(t,n)}var Pi={};function Ti(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).postInstallAllowed,i=void 0!==n&&n;Si("async",(function(n){n.forEach((function(e){return t.apply(void 0,a(e))})),i&&(Pi[e]=t)}),e)([])}function Oi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=Pi[e];if(r)return r.apply(void 0,n);_i(e).before((function(e,t){t.push(n),e(t)}))}function Ci(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t}var Ri="component",Ui=Ri+"Type",ki=Ri+"Name",Di="adapterCode",Bi="storageType",ji="syncType";function Ni(e){return function(t,n,i){var r=l(l(l({},Ui,t),ki,n),Ri,"".concat(t,".").concat(n));return t===mi&&(r[Di]=e(n)),Li(Object.assign(r,i))}}var Li=Si("sync",(function(e){return e}));function Mi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Fi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St("Activity control:"),t={};function n(e){return t[e]=t[e]||[]}function i(t,n,i,r){var o;try{o=i(r)}catch(i){e.logError("Exception in rule ".concat(n," for '").concat(t,"'"),i),o={allow:!1,reason:i}}return o&&Object.assign({activity:t,name:n,component:r[Ri]},o)}var r={};function o(t){var n=t.activity,i=t.name,o=t.allow,s=t.reason,a=t.component,d="".concat(i," ").concat(o?"allowed":"denied"," '").concat(n,"' for '").concat(a,"'").concat(s?":":""),c=r.hasOwnProperty(d);if(c&&clearTimeout(r[d]),r[d]=setTimeout((function(){return delete r[d]}),1e3),!c){var l=[d];s&&l.push(s),(o?e.logInfo:e.logWarn).apply(e,l)}}return[function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=n(e),a=o.findIndex((function(e){var t=s(e,1)[0];return r<t})),d=[r,t,i];return o.splice(a<0?o.length:a,0,d),function(){var e=o.indexOf(d);e>=0&&o.splice(e,1)}},function(e,t){var r,a,d,c=Mi(n(e));try{for(c.s();!(d=c.n()).done;){var l=s(d.value,3),u=l[0],p=l[1],h=l[2];if(r!==u&&a)break;r=u;var g=i(e,p,h,t);if(g){if(!g.allow)return o(g),!1;a=g}}}catch(e){c.e(e)}finally{c.f()}return a&&o(a),!0}]}(),qi=s(Fi,2),Hi=qi[0],Vi=qi[1];function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wi="html5",Ki="cookie",Qi=[];function Ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,n=e.moduleType,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isAllowed,r=void 0===i?Vi:i;function o(e,i){var o=t,s=Se.getCurrentBidder();return s&&n===mi&&Rs.aliasRegistry[s]===t&&(o=s),e({valid:r(Zn,Us(n,o,l({},Bi,i)))})}function s(e,t,n){if(!n||"function"!=typeof n)return o(e,t);Qi.push((function(){var i=o(e,t);n(i)}))}function a(e){var t=e.charAt(0).toUpperCase()+e.substring(1),n=function(){return window[e]},i=function(t){return s((function(t){if(t&&t.valid)try{return!!n()}catch(t){wt("".concat(e," api disabled"))}return!1}),Wi,t)};return l(l(l(l(l({},"has".concat(t),i),"".concat(e,"IsEnabled"),(function(e){return s((function(e){if(e&&e.valid)try{return n().setItem("prebid.cookieTest","1"),"1"===n().getItem("prebid.cookieTest")}catch(e){}finally{try{n().removeItem("prebid.cookieTest")}catch(e){}}return!1}),Wi,e)})),"setDataIn".concat(t),(function(e,t,r){return s((function(r){r&&r.valid&&i()&&n().setItem(e,t)}),Wi,r)})),"getDataFrom".concat(t),(function(e,t){return s((function(t){return t&&t.valid&&i()?n().getItem(e):null}),Wi,t)})),"removeDataFrom".concat(t),(function(e,t){return s((function(t){t&&t.valid&&i()&&n().removeItem(e)}),Wi,t)}))}return Gi(Gi(Gi({setCookie:function(e,t,n,i,r,o){return s((function(o){if(o&&o.valid){var s=r&&""!==r?" ;domain=".concat(encodeURIComponent(r)):"",a=n&&""!==n?" ;expires=".concat(n):"",d=null!=i&&"none"==i.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(a,"; path=/").concat(s).concat(i?"; SameSite=".concat(i):"").concat(d)}}),Ki,o)},getCookie:function(e,t){return s((function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null}),Ki,t)},cookiesAreEnabled:function(e){return s((function(e){return!(!e||!e.valid)&&cn()}),Ki,e)}},a("localStorage")),a("sessionStorage")),{},{findSimilarCookies:function(e,t){return s((function(t){if(t&&t.valid){var n=[];if(dn())for(var i=document.cookie.split(";");i.length;){var r=i.pop(),o=r.indexOf("=");o=o<0?r.length:o,decodeURIComponent(r.slice(0,o).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(r.slice(o+1)))}return n}}),Ki,t)}})}function Yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,n=e.moduleName,i=e.bidderCode;function r(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return i?((t&&t!==mi||n)&&r(),t=mi,n=i):n&&t||r(),Ji({moduleType:t,moduleName:n})}function Xi(e){return Ji({moduleName:e,moduleType:fi})}Hi(Zn,"deviceAccess config",(function(){if(!dn())return{allow:!1}})),Hi(Zn,"bidderSettings.*.storageAllowed",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gi;if(e[Ui]===mi){var n=t.get(e[Di],"storageAllowed");if(n&&!0!==n){var i=e[Bi];n=Array.isArray(n)?n.some((function(e){return e===i})):n===i}else n=!!n;return n?void 0:{allow:n}}}));var Zi={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:500};Se.setDefaults({userSync:en(Zi)});var er=Xi("usersync");var tr=function(e){var t={},n={image:[],iframe:[]},i=new Set,r={},o={image:!0,iframe:!1},a=e.config;function d(){if(a.syncEnabled&&e.browserSupportsCookies){try{!function(){if(!o.iframe)return;c(n.iframe,(function(e){var t=s(e,2),i=t[0],r=t[1];bt("Invoking iframe user sync for bidder: ".concat(i)),Vt(r),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,i)}))}(),function(){if(!o.image)return;c(n.image,(function(e){var t=s(e,2),n=t[0],i=t[1];bt("Invoking image pixel user sync for bidder: ".concat(n)),Ht(i)}))}()}catch(e){return wt("Error firing user syncs",e)}n={image:[],iframe:[]}}}function c(e,t){Zt(e).forEach(t)}function u(e,t){var n=a.filterSettings;if(function(e,t){if(e.all&&e[t])return At('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],i=e.all?"all":t;if(!n)return!1;var r=n.filter,o=n.bidders;if(r&&"include"!==r&&"exclude"!==r)return At('UserSync "filterSettings.'.concat(i,".filter\" setting '").concat(r,"' is not a valid option; use either 'include' or 'exclude'.")),!1;if("*"!==o&&!(Array.isArray(o)&&o.length>0&&o.every((function(e){return Rt(e)&&"*"!==e}))))return At('Detected an invalid setup in userSync "filterSettings.'.concat(i,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1;return!0}(n,e)){o[e]=!0;var i=n.all?n.all:n[e],r="*"===i.bidders?[t]:i.bidders;return{include:function(e,t){return!e.includes(t)},exclude:function(e,t){return e.includes(t)}}[i.filter||"include"](r,t)}return!o[e]}return Se.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;Dt(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}a=Object.assign(a,e.userSync)})),e.regRule(ei,"userSync config",(function(e){if(!a.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[Ui]===mi){var n=e[ji],i=e[ki];if(!t.canBidderRegisterSync(n,i))return{allow:!1,reason:"".concat(n," syncs are not enabled for ").concat(i)}}})),t.registerSync=function(t,o,s){return i.has(o)?bt('already fired syncs for "'.concat(o,'", ignoring registerSync call')):a.syncEnabled&&Ut(n[t])?o?0!==a.syncsPerBidder&&Number(r[o])>=a.syncsPerBidder?At('Number of user syncs exceeded for "'.concat(o,'"')):void(e.isAllowed(ei,Us(mi,o,l(l({},ji,t),"syncUrl",s)))&&(n[t].push([o,s]),r=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(r,o))):At("Bidder is required for registering sync"):At('User sync type "'.concat(t,'" not supported'))},t.bidderDone=i.add.bind(i),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(d,Number(e));d()},t.triggerUserSyncs=function(){a.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!a.filterSettings||!u(e,t)},t}(Object.defineProperties({config:Se.getConfig("userSync"),isAllowed:Vi,regRule:Hi},{browserSupportsCookies:{get:function(){return!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&er.cookiesAreEnabled()}}})),nr="outstream",ir="instream",rr=new Map([["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e}))}],["minduration",fn],["maxduration",fn],["startdelay",fn],["maxseq",fn],["poddur",fn],["protocols",bn],["w",fn],["h",fn],["podid",Rt],["podseq",fn],["rqddurs",bn],["placement",fn],["plcmt",fn],["linearity",fn],["skip",function(e){return[1,0].includes(e)}],["skipmin",fn],["skipafter",fn],["sequence",fn],["slotinpod",fn],["mincpmpersec",kt],["battr",bn],["maxextended",fn],["minbitrate",fn],["maxbitrate",fn],["boxingallowed",fn],["playbackmethod",bn],["playbackend",fn],["delivery",bn],["pos",fn],["api",bn],["companiontype",bn],["poddedupe",bn]]);function or(e,t){var n,i=null==e||null===(n=e.mediaTypes)||void 0===n?void 0:n.video;Dt(i)?null!=i&&Object.entries(i).forEach((function(n){var r=s(n,2),o=r[0],a=r[1];rr.has(o)&&(rr.get(o)(a)||("function"==typeof t?t(o,a,e):(delete i[o],At('Invalid prop in adUnit "'.concat(e.code,'": Invalid value for mediaTypes.video.').concat(o," ORTB property. The property has been removed.")))))})):At("validateOrtbVideoFields: videoParams must be an object.")}var sr=Si("sync",(function(e,t,n,i,r){if(n&&(r||i!==nr)){var o=Se.getConfig("cache")||{},s=o.url,a=o.useLocal;return s||a||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(wt('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling either prebid cache with pgPrebid.setConfig({ cache: {url: "..."} });\n        or local cache with pgPrebid.setConfig({ cache: { useLocal: true }});\n      '),!1)}return!(i===nr&&!r)||!!(e.renderer||t&&t.renderer||n.renderer)}),"checkVideoBidSetup"),ar=null,dr=0,cr=[];function lr(){document.hidden?ar=Date.now():(dr+=Date.now()-(null!=ar?ar:0),ar=null,cr.forEach((function(e){var t=e.callback,n=e.startTime;return(0,e.setTimerId)(ur(t,dr-n)())})),cr=[])}function ur(e,t){var n=dr,i=setTimeout((function(){dr===n&&null==ar?e():null!=ar?cr.push({callback:e,startTime:n,setTimerId:function(e){i=e}}):i=ur(e,dr-n)()}),t);return function(){return i}}function pr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function gr(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.startTime,r=void 0===i?sn:i,o=n.ttl,a=void 0===o?function(){return null}:o,d=n.monotonic,c=void 0!==d&&d,u=n.slack,p=void 0===u?5e3:u,h=new Map,g=[],f=[],m=c?function(e){return f.push(e)}:function(e){return f.splice(function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=0,r=e.length&&e.length-1,o=n(t);r-i>1;){var s=i+Math.round((r-i)/2);o>n(e[s])?i=s:r=s}for(;e.length>i&&o>n(e[i]);)i++;return i}(f,e,(function(e){return e.expiry})),0,e)};function v(){if(t&&clearTimeout(t),f.length>0){var n=sn();e=Math.max(n,f[0].expiry+p),t=ur((function(){for(var e=sn(),n=0,i=function(){var t=o[r];if(t.expiry>e)return 1;g.forEach((function(e){try{e(t.item)}catch(e){wt(e)}})),h.delete(t.item),n++},r=0,o=f;r<o.length&&!i();r++);f.splice(0,n),t=null,v()}),e-n)}else t=null}function b(n){var i,o={},d=y;var c=Object.entries({start:r,delta:a}).map((function(r){var a,c=s(r,2),l=c[0],u=c[1];return function(){var r=a={};Me.resolve(u(n)).then((function(n){r===a&&(o[l]=n,d===y&&null!=o.start&&null!=o.delta&&(i=o.start+o.delta,m(g),(null==t||e>i+p)&&v()))}))}})),l=s(c,2),u=l[0],h=l[1],g={item:n,refresh:h,get expiry(){return i}};return u(),h(),g}var y={};return l(l(l(l(l(l({},Symbol.iterator,(function(){return h.keys()})),"add",(function(e){!h.has(e)&&h.set(e,b(e))})),"clear",(function(){f.length=0,v(),h.clear(),y={}})),"toArray",(function(){return Array.from(h.keys())})),"refresh",(function(){f.length=0,v();var e,t=pr(h.values());try{for(t.s();!(e=t.n()).done;){e.value.refresh()}}catch(e){t.e(e)}finally{t.f()}})),"onExpiry",(function(e){return g.push(e),function(){var t=g.indexOf(e);t>=0&&g.splice(t,1)}}))}document.addEventListener("visibilitychange",lr);var fr="eventHistoryTTL",mr=null,vr=gr({monotonic:!0,ttl:function(){return mr}});Se.getConfig(fr,(function(e){var t,n=mr;e=null===(t=e)||void 0===t?void 0:t[fr],n!==(mr="number"==typeof e?1e3*e:null)&&vr.refresh()}));var br,yr=Array.prototype.slice,Ar=Array.prototype.push,wr=Object.values(R),Sr={bidWon:"adUnitCode"},Ir=function(){var e={},t={};function n(e){return wr.includes(e)}return t.has=n,t.on=function(t,i,r){if(n(t)){var o=e[t]||{que:[]};r?(o[r]=o[r]||{que:[]},o[r].que.push(i)):o.que.push(i),e[t]=o}else wt("Wrong event name : "+t+" Valid event names :"+wr)},t.emit=function(t){!function(t,n){bt("Emitting event for: "+t);var i=n[0]||{},r=i[Sr[t]],o=e[t]||{que:[]},s=Object.keys(o),a=[];vr.add({eventType:t,args:i,id:r,elapsedTime:window.performance&&window.performance.now&&window.performance.now()||0}),r&&s.includes(r)&&Ar.apply(a,o[r].que),Ar.apply(a,o.que),(a||[]).forEach((function(e){if(e)try{e.apply(null,n)}catch(e){wt("Error executing handler:","events.js",e,t)}}))}(t,yr.call(arguments,1))},t.off=function(t,n,i){var r=e[t];jt(r)||jt(r.que)&&jt(r[i])||i&&(jt(r[i])||jt(r[i].que))||(i?(r[i].que||[]).forEach((function(e){var t=r[i].que;e===n&&t.splice(t.indexOf(e),1)})):(r.que||[]).forEach((function(e){var t=r.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=r)},t.get=function(){return e},t.addEvents=function(e){wr=wr.concat(e)},t.getEvents=function(){return vr.toArray().map((function(e){return Object.assign({},e)}))},t}();br=Ir.emit.bind(Ir),qe=br;var Er=Ir.on,_r=Ir.off,xr=(Ir.get,Ir.getEvents),Pr=Ir.emit;Ir.addEvents,Ir.has;function Tr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Or(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Cr="performanceMetrics",Rr=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},Ur=new WeakMap;function kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,n=void 0===t?Rr:t,i=e.mkNode,r=void 0===i?jr:i,o=e.mkTimer,s=void 0===o?Br:o,a=e.mkRenamer,d=void 0===a?function(e){return e}:a,c=e.nodes,l=void 0===c?Ur:c;return function(){return function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};i=d(i);var o,a=(o="timestamps",function(e){return t.dfWalk({visit:function(t,n){var i=n[o];if(i.hasOwnProperty(e))return i[e]}})});function c(e,n){var r=i(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){r.forEach((function(i){null==e?t.metrics[i]=n:(t.groups.hasOwnProperty(i)||(t.groups[i]=[]),t.groups[i].push(n))}))}})}function u(e){return s(n,(function(t){return c(e,t)}))}function p(){var e={};return t.dfWalk({visit:function(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}var h={startTiming:u,measureTime:function(e,t){return u(e).stopAfter(t)()},measureHookTime:function(e,t,n){var i=u(e);return n(function(e){var t=i.stopBefore(e);return t.bail=e.bail&&i.stopBefore(e.bail),t.stopTiming=i,t.untimed=e,t}(t))},checkpoint:function(e){t.timestamps[e]=n()},timeSince:function(e,t){var i=a(e),r=null!=i?n()-i:null;return null!=t&&c(t,r),r},timeBetween:function(e,t,n){var i=a(e),r=a(t),o=null!=i&&null!=r?r-i:null;return null!=n&&c(n,o),o},setMetric:c,getMetrics:p,fork:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.propagate,s=void 0===o||o,a=n.stopPropagation,d=void 0!==a&&a,c=n.includeGroups;return e(r([[t,{propagate:s,stopPropagation:d,includeGroups:void 0!==c&&c}]]),i)},join:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.propagate,r=void 0===i||i,o=n.stopPropagation,s=void 0!==o&&o,a=n.includeGroups,d=void 0!==a&&a,c=l.get(e);null!=c&&c.addParent(t,{propagate:r,stopPropagation:s,includeGroups:d})},newMetrics:function(){return e(t.newSibling(),i)},renameWith:function(n){return e(t,n)},toJSON:function(){return p()}};return l.set(h,t),h}(r([]))}}function Dr(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function Br(e,t){var n=e(),i=!1;function r(){i||(t(e()-n),i=!0)}return r.stopBefore=function(e){return Dr(e,r)},r.stopAfter=function(e){return Dr(e,null,r)},r}function jr(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,n){e.push([t,n])},newSibling:function(){return jr(e.slice())},dfWalk:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.visit,r=n.follow,o=void 0===r?function(){return!0}:r,a=n.visited,d=void 0===a?new Set:a,c=n.inEdge;if(!d.has(this)){if(d.add(this),null!=(t=i(c,this)))return t;var l,u=Tr(e);try{for(u.s();!(l=u.n()).done;){var p=s(l.value,2),h=p[0],g=p[1];if(o(c,g)&&null!=(t=h.dfWalk({visit:i,follow:o,visited:d,inEdge:g})))return t}}catch(e){u.e(e)}finally{u.f()}}}}}var Nr=function(){var e=function(){},t=function(){return{}},n={forEach:e},i=function(){return null};i.stopBefore=function(e){return e},i.stopAfter=function(e){return e};var r=Object.defineProperties({dfWalk:e,newSibling:function(){return r},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return kr({now:function(){return 0},mkNode:function(){return r},mkRenamer:function(){return function(){return n}},mkTimer:function(){return i},nodes:{get:e,set:e}})()}(),Lr=!0;function Mr(e){return Lr&&e||Nr}Se.getConfig(Cr,(function(e){Lr=!!e[Cr]}));var zr,Fr=(zr=kr(),function(){return Lr?zr():Nr});function qr(e,t){return function(n,i){return function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];var d=this;return Mr(t.apply(d,s)).measureHookTime(e+n,r,(function(e){return i.call.apply(i,[d,e].concat(s))}))}}}var Hr=qr("requestBids.",(function(e){return e.metrics})),Vr=qr("addBidResponse.",(function(e,t){return t.metrics})),$r=["cpm","ttl","creativeId","netRevenue","currency"],Gr=["auctionId","transactionId"];function Wr(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=Qr(e);Rs.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var i,r,o=t;Dt(t)&&(o=t.code,i=t.gvlid,r=t.skipPbsAliasing),Rs.aliasRegistry[o]=e.code,n(Object.assign({},e,{code:o,gvlid:i,skipPbsAliasing:r}))}))}var Kr=On((function(e){var t=e.bidderCode;if(Vi(ai,Us(mi,t)))return{bidRequest:function(e){return e},bidderRequest:function(e){return e}};function n(e,t,n){return Gr.includes(t)?null:Reflect.get(e,t,n)}function i(e,t){var n=new Proxy(e,t);return Object.entries(e).filter((function(e){var t=s(e,2);t[0];return"function"==typeof t[1]})).forEach((function(t){var i=s(t,2),r=i[0],o=i[1];return n[r]=o.bind(e)})),n}var r=On((function(e){return i(e,{get:n})}),(function(e){return e.bidId}));return{bidRequest:r,bidderRequest:function(e){return i(e,{get:function(t,i,o){return"bids"===i?e.bids.map(r):n(t,i,o)}})}}}));function Qr(e){return Object.assign(new di(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(n,i,r,o,s,a){if(Array.isArray(n.bids)){var d=Kr(n),c={},l=[],u=to(n).measureTime("validate",(function(){return n.bids.filter((function(t){return function(t){if(!e.isBidRequestValid(t))return At("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1;return!0}(d.bidRequest(t))}))}));if(0!==u.length){var p={};u.forEach((function(e){p[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),Yr(e,u,n,o,a,{onRequest:function(e){return Pr(R.BEFORE_BIDDER_HTTP,n,e)},onResponse:function(t){s(e.code),l.push(t)},onPaapi:function(e){var t=p[e.bidId];t?Zr(t,e):At("Received fledge auction configuration for an unknown bidId",e)},onError:function(t,i){i.timedOut||s(e.code),Rs.callBidderError(e.code,i,n),Pr(R.BIDDER_ERROR,{error:i,bidderRequest:n}),wt("Server call for ".concat(e.code," failed: ").concat(t," ").concat(i.status,". Continuing without bids."),{bidRequests:u})},onBid:function(t){var n=p[t.requestId];if(n){var r;if(t.adapterCode=n.bidder,function(e,t){var n=gi.get(t,"allowAlternateBidderCodes")||!1,i=gi.get(t,"allowedAlternateBidderCodes");if(e&&t&&t!==e&&(i=Ut(i)?i.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(Wt):i,!n||Ut(i)&&"*"!==i[0]&&!i.includes(e)))return!0;return!1}(t.bidderCode,n.bidder))return At("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(n.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void i.reject(n.adUnitCode,t,Q);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[n.bidder]),t.deferBilling=n.deferBilling,t.deferRendering=t.deferBilling&&(null!==(r=t.deferRendering)&&void 0!==r?r:"function"!=typeof e.onBidBillable);var o=Object.assign(li(C,n),t,vn(n,Gr));!function(e,t){var n=Mr(t.metrics);n.checkpoint("addBidResponse"),c[e]=!0,n.measureTime("addBidResponse.validate",(function(){return eo(e,t)}))?i(e,t):i.reject(e,t,W)}(n.adUnitCode,o)}else At("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),i.reject(null,t,K)},onCompletion:h})}else h()}function h(){r(),Se.runWithBidder(e.code,(function(){Pr(R.BIDDER_DONE,n),t(l,n.gdprConsent,n.uspConsent,n.gppConsent)}))}}});function t(t,n,i,r){Xr(e,t,n,i,r)}}var Jr=["bids","paapi"],Yr=Si("async",(function(e,t,n,i,r,o){var s=o.onRequest,a=o.onResponse,c=o.onPaapi,l=o.onError,u=o.onBid,p=o.onCompletion,h=to(n);p=h.startTiming("total").stopBefore(p);var g=Kr(n),f=h.measureTime("buildRequests",(function(){return e.buildRequests(t.map(g.bidRequest),g.bidderRequest(n))}));if(f&&0!==f.length){Array.isArray(f)||(f=[f]);var m=ln(p,f.length);f.forEach((function(t){var n,o=h.fork();function p(e){null!=e&&(e.metrics=o.fork().renameWith()),u(e)}var g=r((function(n,i){v();try{n=JSON.parse(n)}catch(e){}n={body:n,headers:{get:i.getResponseHeader.bind(i)}},a(n);try{n=o.measureTime("interpretResponse",(function(){return e.interpretResponse(n,t)}))}catch(t){return wt("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void m()}var r,s;n&&!Object.keys(n).some((function(e){return!Jr.includes(e)}))?(r=n.bids,s=n.paapi):r=n,Ut(s)&&s.forEach(c),r&&(Ut(r)?r.forEach(p):p(r)),m()})),f=r((function(e,t){v(),l(e,t),m()}));s(t);var v=o.startTiming("net");function b(n){var i,r=t.options;return Object.assign(n,r,{browsingTopics:!(null!=r&&r.hasOwnProperty("browsingTopics")&&!r.browsingTopics)&&((null===(i=gi.get(e.code,"topicsHeader"))||void 0===i||i)&&Vi(oi,Us(mi,e.code)))})}switch(t.method){case"GET":i("".concat(t.url).concat(function(e){if(e)return"?".concat("object"===d(e)?function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.replace(/&$/,"")}(e):e);return""}(t.data)),{success:g,error:f},void 0,b({method:"GET",withCredentials:!0}));break;case"POST":var y=null===(n=t.options)||void 0===n?void 0:n.endpointCompression,A="TRUE"===Tt(O).toUpperCase()||Et(),w=function(e){var t=e.url,n=e.payload;i(t,{success:g,error:f},n,b({method:"POST",contentType:"text/plain",withCredentials:!0}))};y&&A&&At("Skipping GZIP compression for ".concat(e.code," as debug mode is enabled")),y&&!A&&Un()?function(e){return kn.apply(this,arguments)}(t.data).then((function(e){var n=new URL(t.url,window.location.origin);n.searchParams.has("gzip")||n.searchParams.set("gzip","1"),w({url:n.href,payload:e})})):w({url:t.url,payload:"string"==typeof t.data?t.data:JSON.stringify(t.data)});break;default:At("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),m()}}))}else p()}),"processBidderRequests"),Xr=Si("async",(function(e,t,n,i,r){var o=Se.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!Rs.aliasRegistry[e.code])){var s=e.getUserSyncs({iframeEnabled:tr.canBidderRegisterSync("iframe",e.code),pixelEnabled:tr.canBidderRegisterSync("image",e.code)},t,n,i,r);s&&(Array.isArray(s)||(s=[s]),s.forEach((function(t){tr.registerSync(t.type,e.code,t.url)})),tr.bidderDone(e.code))}}),"registerSyncs"),Zr=Si("sync",(function(e,t){}),"addPaapiConfig");function eo(e,t){var n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===i?Ia.index:i;function o(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(n=Object.keys(t),$r.every((function(e){return n.includes(e)&&![void 0,null].includes(t[e])}))?"native"!==t.mediaType||function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.index,r=void 0===i?Ia.index:i,o=r.getAdUnit(e);if(!o)return!1;var s=o.nativeOrtbRequest,a=(null===(t=e.native)||void 0===t?void 0:t.ortb)||Ld(e.native,s);return function(e,t){var n;if(null==e||null===(n=e.link)||void 0===n||!n.url)return wt("native response doesn't have 'link' property. Ortb response: ",e),!1;var i=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),r=e.assets.map((function(e){return e.id})),o=i.every((function(e){return r.includes(e)}));o||wt("didn't receive a bid with all required assets. Required ids: ".concat(i,", but received ids in response: ").concat(r));return o}(a,s)}(t,{index:r})?"video"!==t.mediaType||function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,i=void 0===n?Ia.index:n,r=null===(t=i.getMediaTypes(e))||void 0===t?void 0:t.video,o=r&&(null==r?void 0:r.context),s=r&&(null==r?void 0:r.useCacheKey),a=i.getAdUnit(e);return sr(e,a,r,o,s)}(t,{index:r})?!("banner"===t.mediaType&&!function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?Ia.index:n;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;if(null!=t.wratio&&null!=t.hratio)return t.wratio=parseInt(t.wratio,10),t.hratio=parseInt(t.hratio,10),!0;var r=i.getBidRequest(t),o=i.getMediaTypes(t),a=lt(r&&r.sizes||o&&o.banner&&o.banner.sizes);if(1===a.length){var d=s(a[0].split("x"),2),c=d[0],l=d[1];return t.width=parseInt(c,10),t.height=parseInt(l,10),!0}return!1}(e,t,{index:r}))||(wt(o("Banner bids require a width and height")),!1):(wt(o("Video bid does not have required vastUrl or renderer property")),!1):(wt(o("Native bid missing some required properties.")),!1):(wt(o("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)):(At("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):(At("No adUnitCode was supplied to addBidResponse."),!1)}function to(e){return Mr(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}var no={};function io(e,t,n){var i=function(e,t){var n=no[e]=no[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return i[t]=(i[t]||0)+1,i[t]}function ro(e){return io(e,"auctionsCounter")}function oo(e){var t;return(null===(t=no)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.requestsCounter)||0}function so(e,t){var n;return(null===(n=no)||void 0===n||null===(n=n[e])||void 0===n||null===(n=n.bidders)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.requestsCounter)||0}function ao(e,t){var n;return(null===(n=no)||void 0===n||null===(n=n[e])||void 0===n||null===(n=n.bidders)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.winsCounter)||0}function co(e){var t;return(null===(t=no)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.auctionsCounter)||0}function lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function uo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noLeadingWww,i=void 0!==n&&n,r=t.noPort,o=void 0!==r&&r;try{e=new URL(lo(e))}catch(e){return}return e=o?e.hostname:e.host,i&&e.startsWith("www.")&&(e=e.substring(4)),e}function po(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}var ho,go=function(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return r.top!==r?e:function(){var o=po(r.document),s=r.location.href;return t===o&&s===n||(t=o,n=s,i=e()),i}}((ho=window,function(){var e,t,n,i,r=[],o=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(ho),s=Se.getConfig("maxNestedIframes"),a=!1,d=0,c=!1,l=!1,u=!1;do{var p=e,h=l,g=void 0,f=!1,m=null;l=!1,e=e?e.parent:ho;try{g=e.location.href||null}catch(e){f=!0}if(f)if(h){var v=p.context;try{t=m=v.sourceUrl,u=!0,c=!0,e===ho.top&&(a=!0),v.canonicalUrl&&(n=v.canonicalUrl)}catch(e){}}else{At("Trying to access cross domain iframe. Continuing without referrer and location");try{var b=p.document.referrer;b&&(m=b,e===ho.top&&(a=!0))}catch(e){}!m&&o&&o[d-1]&&(m=o[d-1],e===ho.top&&(u=!0)),m&&!c&&(t=m)}else{if(g&&(t=m=g,c=!1,e===ho.top)){a=!0;var y=po(e.document);y&&(n=y)}e.context&&e.context.sourceUrl&&(l=!0)}r.push(m),d++}while(e!==ho.top&&d<s);r.reverse();try{i=ho.top.document.referrer}catch(e){}var A=a||u?t:null,w=Se.getConfig("pageUrl")||n||null,S=Se.getConfig("pageUrl")||A||lo(w,ho);return A&&A.indexOf("?")>-1&&-1===S.indexOf("?")&&(S="".concat(S).concat(A.substring(A.indexOf("?")))),{reachedTop:a,isAmp:c,numIframes:d-1,stack:r,topmostLocation:t||null,location:A,canonicalUrl:w,page:S,domain:uo(S)||null,ref:i||null,legacy:{reachedTop:a,isAmp:c,numIframes:d-1,stack:r,referer:t||null,canonicalUrl:w}}}));function fo(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mo(e){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mo(e)}function vo(e,t){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vo(e,t)}function bo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}function yo(e,t,n){return t=mo(t),fo(e,Ao()?Reflect.construct(t,n||[],mo(e).constructor):t.apply(e,n))}function Ao(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ao=function(){return!!e})()}var wo=Object.freeze({}),So=Oe("enabled"),Io=Oe("data"),Eo=Oe("defer"),_o=Oe("ready"),xo=Oe("dirty"),Po=Oe("hash"),To=Oe("resolve"),Oo=function(){return xe((function e(){Ee(this,e),Object.defineProperty(this,To,{value:Co}),Object.defineProperty(this,So,{writable:!0,value:void 0}),Object.defineProperty(this,Io,{writable:!0,value:void 0}),Object.defineProperty(this,Eo,{writable:!0,value:void 0}),Object.defineProperty(this,_o,{writable:!0,value:void 0}),Object.defineProperty(this,xo,{writable:!0,value:!0}),Object.defineProperty(this,Po,{writable:!0,value:void 0}),this.generatedTime=void 0,this.hashFields=void 0,this.reset()}),[{key:"reset",value:function(){Pe(this,Eo)[Eo]=Fe(),Pe(this,So)[So]=!1,Pe(this,Io)[Io]=null,Pe(this,_o)[_o]=!1,this.generatedTime=null}},{key:"enable",value:function(){Pe(this,So)[So]=!0}},{key:"enabled",get:function(){return Pe(this,So)[So]}},{key:"ready",get:function(){return Pe(this,_o)[_o]}},{key:"promise",get:function(){return Pe(this,_o)[_o]?Me.resolve(Pe(this,Io)[Io]):(Pe(this,So)[So]||Pe(this,To)[To](null),Pe(this,Eo)[Eo].promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sn();this.generatedTime=t,Pe(this,xo)[xo]=!0,Pe(this,To)[To](e)}},{key:"getConsentData",value:function(){return Pe(this,Io)[Io]}},{key:"hash",get:function(){var e=this;return Pe(this,xo)[xo]&&(Pe(this,Po)[Po]=xn(JSON.stringify(Pe(this,Io)[Io]&&this.hashFields?this.hashFields.map((function(t){return Pe(e,Io)[Io][t]})):Pe(this,Io)[Io])),Pe(this,xo)[xo]=!1),Pe(this,Po)[Po]}}])}();function Co(e){Pe(this,_o)[_o]=!0,Pe(this,Io)[Io]=e,Pe(this,Eo)[Eo].resolve(e)}var Ro=function(e){function t(){return Ee(this,t),yo(this,t,arguments)}return bo(t,e),xe(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(Oo),Uo=function(e){function t(){var e;Ee(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=yo(this,t,[].concat(i))).hashFields=["gdprApplies","consentString"],e}return bo(t,e),xe(t,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:Rt(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}])}(Oo),ko=function(e){function t(){var e;Ee(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=yo(this,t,[].concat(i))).hashFields=["applicableSections","gppString"],e}return bo(t,e),xe(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(Oo);var Do,Bo,jo,No=new Uo,Lo=new Ro,Mo=new ko,zo=function(){function e(){return!!Se.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset:function(){},get promise(){return Me.resolve(e())},get hash(){return e()?"1":"0"}}}(),Fo=(Do={},Bo={},jo={},{register:function(e,t,n){n&&((Do[t]=Do[t]||{})[e]=n,Bo.hasOwnProperty(t)?Bo[t]!==n&&(Bo[t]=jo):Bo[t]=n)},get:function(e){var t={modules:Do[e]||{}};return Bo.hasOwnProperty(e)&&Bo[e]!==jo&&(t.gvlid=Bo[e]),t}}),qo={gdpr:No,usp:Lo,gpp:Mo,coppa:zo};var Ho=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qo;return e=Object.entries(e),Object.assign({get promise(){return Me.all(e.map((function(e){var t=s(e,2),n=t[0];return t[1].promise.then((function(e){return[n,e]}))}))).then((function(e){return Object.fromEntries(e)}))},get hash(){return xn(e.map((function(e){var t=s(e,2);t[0];return t[1].hash})).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((function(t){return[t,(n=t,function(){return Object.fromEntries(e.map((function(e){var t=s(e,2);return[t[0],t[1][n]()]})))})];var n}))))}();function Vo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function $o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Go=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map((function(e){return"user.".concat(e)})).concat("device.ext.cdep"),Wo=["user.eids","user.ext.eids"],Ko=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"],Qo=["device.ip"],Jo=["device.ipv6"];function Yo(e){return Object.assign({get:function(){},run:function(e,t,n,i,r){var o=n&&n[i];if(es(o)&&r()){var s=this.get(o);void 0===s?delete n[i]:n[i]=s}}},e)}function Xo(e){return e.forEach((function(e){e.paths=e.paths.map((function(e){var t=e.split("."),n=t.pop();return[t.length>0?t.join("."):null,n]}))})),function(t,n){for(var i=[],r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var d=Zo.apply(void 0,[t].concat(o));return e.forEach((function(e){if(!1!==t[e.name]){var r,o=Vo(e.paths);try{for(o.s();!(r=o.n()).done;){var a=s(r.value,2),c=a[0],l=a[1],u=null==c?n:x(n,c);if(i.push(e.run(n,c,u,l,d.bind(null,e))),!1===t[e.name])return}}catch(e){o.e(e)}finally{o.f()}}})),i.filter((function(e){return null!=e}))}}function Zo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(t){return e.hasOwnProperty(t.name)||(e[t.name]=!!t.applies.apply(t,n)),e[t.name]}}function es(e){return null!=e&&("object"!==d(e)||Object.keys(e).length>0)}function ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vi;return function(n){return!t(e,n)}}function ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return[{name:oi,paths:Go,applies:ts(oi,e)},{name:ri,paths:Wo,applies:ts(ri,e)},{name:si,paths:Ko,applies:ts(si,e),get:function(e){return Math.round(100*(e+Number.EPSILON))/100}},{name:si,paths:Qo,applies:ts(si,e),get:function(e){return function(e){if(!e)return null;var t=e.split(".").map(Number);if(4!=t.length)return null;for(var n=[],i=0;i<4;i++){var r=Math.max(0,Math.min(8,24-8*i));n.push(255<<8-r&255)}return t.map((function(e,t){return e&n[t]})).join(".")}(e)}},{name:si,paths:Jo,applies:ts(si,e),get:function(e){return function(e){if(!e)return null;var t=e.split(":").map((function(e){return parseInt(e,16)}));for(t=t.map((function(e){return isNaN(e)?0:e}));t.length<8;)t.push(0);if(8!=t.length)return null;for(var n=[],i=0;i<8;i++){var r=Math.max(0,Math.min(16,64-16*i));n.push(65535<<16-r&65535)}return t.map((function(e,t){return e&n[t]})).map((function(e){return e.toString(16)})).join(":")}(e)}},{name:ai,paths:["source.tid"],applies:ts(ai,e)}].map(Yo)}var is=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi,t=Xo(ns(e)),n=Xo(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return[{name:ri,paths:["userId","userIdAsEids"],applies:ts(ri,e)},{name:ai,paths:["ortb2Imp.ext.tid"],applies:ts(ai,e)}].map(Yo)}(e));return function(e){var i={};return{ortb2:function(n){return t(i,n,e),n},bidRequest:function(t){return n(i,t,e),t}}}}();Hi(ai,"enableTIDs config",(function(){if(!Se.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}}));var rs=1,os=1,ss=500;function as(e){return(null!=e?e:[]).reduce((function(e,t){var n,i,r=t.event,o=t.method,s=t.url,a=e[r]=null!==(n=e[r])&&void 0!==n?n:{};return(a[o]=null!==(i=a[o])&&void 0!==i?i:[]).push(s),e}),{})}function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ls="pbsBidAdapter",us="client",ps="server",hs={isAllowed:Vi,redact:is},gs={},fs=gs.bidderRegistry={},ms=gs.aliasRegistry={},vs=[];Se.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(vs=Ut(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var bs={},ys=Ni((function(e){return gs.resolveAlias(e)}));function As(e){var t;return null!==(t=e.configName)&&void 0!==t?t:e.name}function ws(e){return ys(fi,ls,l({},"configName",As(e)))}var Ss=Si("sync",(function(e){var t=e.bidderCode,n=e.auctionId,i=e.bidderRequestId,r=e.adUnits,o=e.src,s=e.metrics;return r.reduce((function(e,r){var a=r.bids.filter((function(e){return e.bidder===t}));return null==t&&0===a.length&&null!=r.s2sBid&&a.push({bidder:null}),e.push(a.reduce((function(e,a){var d,c,l=null==(a=Object.assign({},a,{ortb2Imp:En({},r.ortb2Imp,a.ortb2Imp)},pn(r,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?r.mediaTypes:a.mediaTypes;return!function(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return t.includes(e)}))&&(!e.video||!e.video.context||["instream","outstream","adpod"].includes(e.video.context))}(l)?wt("mediaTypes is not correctly configured for adunit ".concat(r.code)):a=Object.assign({},a,{mediaTypes:l}),"client"===o&&function(e,t){io(e,"requestsCounter",t)}(r.code,t),e.push(Object.assign({},a,{adUnitCode:r.code,transactionId:r.transactionId,adUnitId:r.adUnitId,sizes:(null==l||null===(d=l.banner)||void 0===d?void 0:d.sizes)||(null==l||null===(c=l.video)||void 0===c?void 0:c.playerSize)||[],bidId:a.bid_id||st(),bidderRequestId:i,auctionId:n,src:o,metrics:s,auctionsCount:co(r.code),bidRequestsCount:oo(r.code),bidderRequestsCount:so(r.code,a.bidder),bidderWinsCount:ao(r.code,a.bidder),deferBilling:!!r.deferBilling})),e}),[])),e}),[]).reduce(Kt,[]).filter((function(e){return""!==e}))}),"getBids");var Is=Si("sync",(function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders;if(null==t)return e;var i=(void 0===n?_s:n)(t);return e.filter((function(e){if(!i.has(e.bidder))return!1;if(null==e.s2sConfigName)return!0;var n=As(t);return(Array.isArray(e.s2sConfigName)?e.s2sConfigName:[e.s2sConfigName]).includes(n)}))}),"filterBidsForAdUnit");var Es=Si("sync",(function(e,t){return e}),"setupAdUnitMediaTypes");function _s(e){Ut(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var xs,Ps=Si("sync",(function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders,i=(void 0===n?_s:n)(t);return Jt(e).reduce((function(e,t){return e[i.has(t)?ps:us].push(t),e}),l(l({},us,[]),ps,[]))}),"partitionBidders");function Ts(e,t){var n=fs[e],i=(null==n?void 0:n.getSpec)&&n.getSpec();if(i&&i[t]&&"function"==typeof i[t])return[i,i[t]]}function Os(e,t,n,i){try{yt("Invoking ".concat(e,".").concat(t));for(var r=arguments.length,o=new Array(r>4?r-4:0),s=4;s<r;s++)o[s-4]=arguments[s];Se.runWithBidder(e,i.bind.apply(i,[n].concat(o)))}catch(n){At("Error calling ".concat(t," of ").concat(e))}}function Cs(e,t,n){if((null==n?void 0:n.source)!==$){var i=Ts(e,t);null!=i&&Os.apply(void 0,[e,t].concat(a(i),[n]))}}gs.makeBidRequests=Si("sync",(function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6?arguments[6]:void 0;s=Mr(s),Pr(R.BEFORE_REQUEST_BIDS,e),function(e){e.forEach((function(e){var t,n=e.nativeParams||(null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.native);n&&(e.nativeParams=Pd(n)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||Dd(e.nativeParams))}))}(e),e.map((function(e){return e.code})).filter(Wt).forEach(ro),e.forEach((function(e){Dt(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter((function(e){return!e.bidder||hs.isAllowed(ii,ys(mi,e.bidder))})),io(e.code,"requestsCounter")})),e=Es(e,r);var d=Ps(e,vs),c=d[us],l=d[ps];Se.getConfig("bidderSequence")===ve&&(c=Zt(c));var u=go(),p=[],h=o.global||{},g=o.bidder||{};function f(e,t){var i,r,o,s=hs.redact(null!=t?t:ys(mi,e.bidderCode)),d=En({source:{tid:n}},h,g[e.bidderCode]);o=null===(r=(i=d).user)||void 0===r?void 0:r.eids,Array.isArray(o)&&o.length&&(i.user.ext=i.user.ext||{},i.user.ext.eids=[].concat(a(i.user.ext.eids||[]),a(o)),delete i.user.eids);var c=Object.freeze(s.ortb2(d));return e.ortb2=c,e.bids=e.bids.map((function(e){return e.ortb2=c,s.bidRequest(e)})),e}vs.forEach((function(i){var r=ws(i);if(i&&i.enabled&&hs.isAllowed(ii,r)){var o=function(e,t){var n=en(e),i=!1;return n.forEach((function(e){var n=e.bids.filter((function(e){var n;return e.module===ls&&(null===(n=e.params)||void 0===n?void 0:n.configName)===As(t)}));1===n.length?(e.s2sBid=n[0],i=!0,e.ortb2Imp=En({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&At('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=Is(e.bids,t).map((function(e){return e.bid_id=st(),e}))})),{adUnits:n=n.filter((function(e){return 0!==e.bids.length||null!=e.s2sBid})),hasModuleBids:i}}(e,i),a=o.adUnits,d=o.hasModuleBids,c=at();(0===l.length&&d?[null]:l).forEach((function(e){var o=st(),d=s.fork(),l=f({bidderCode:e,auctionId:n,bidderRequestId:o,uniquePbsTid:c,bids:Ss({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:en(a),src:$,metrics:d}),auctionStart:t,timeout:i.timeout,src:$,refererInfo:u,metrics:d},r);0!==l.bids.length&&p.push(l)})),a.forEach((function(e){var t=e.bids.filter((function(e){return p.find((function(t){return t.bids.find((function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),p.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=a.filter((function(e){return e.bids.length>0||null!=e.s2sBid})))}))}}));var m=function(e){var t=en(e);return t.forEach((function(e){e.bids=Is(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}(e);return c.forEach((function(e){var o=st(),a=s.fork(),d=f({bidderCode:e,auctionId:n,bidderRequestId:o,bids:Ss({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:en(m),labels:r,src:"client",metrics:a}),auctionStart:t,timeout:i,refererInfo:u,metrics:a}),c=fs[e];c||wt("Trying to make a request for bidder that does not exist: ".concat(e)),c&&d.bids&&0!==d.bids.length&&p.push(d)})),p.forEach((function(e){No.getConsentData()&&(e.gdprConsent=No.getConsentData()),Lo.getConsentData()&&(e.uspConsent=Lo.getConsentData()),Mo.getConsentData()&&(e.gppConsent=Mo.getConsentData())})),p}),"makeBidRequests"),gs.callBids=function(e,t,n,i,r,o,a){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var c=s(t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===$)].push(t),e}),[[],[]]),2),l=c[0],u=c[1],p=[];u.forEach((function(e){for(var t=-1,n=0;n<p.length;++n)if(e.uniquePbsTid===p[n].uniquePbsTid){t=n;break}t<=-1&&p.push(e)}));var h=0;vs.forEach((function(e){if(e&&p[h]&&_s(e).has(p[h].bidderCode)){var t=zn(o,r?{request:r.request.bind(null,"s2s"),done:r.done}:void 0),s=e.bidders,c=fs[e.adapter],l=p[h].uniquePbsTid,g=p[h].adUnitsS2SCopy,f=u.filter((function(e){return e.uniquePbsTid===l}));if(c){var m={ad_units:g,s2sConfig:e,ortb2Fragments:d,requestBidsTimeout:o};if(m.ad_units.length){var v=f.map((function(e){return e.start=sn(),function(t){t||a(e.bidderRequestId),i.apply(e,arguments)}})),b=Jt(m.ad_units).filter((function(e){return s.includes(e)}));bt("CALLING S2S HEADER BIDDERS ==== ".concat(b.length>0?b.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),f.forEach((function(e){Pr(R.BID_REQUESTED,cs(cs({},e),{},{tid:e.auctionId}))})),c.callBids(m,u,n,(function(e){return v.forEach((function(t){return t(e)}))}),t)}}else wt("missing "+e.adapter);h++}})),l.forEach((function(e){e.start=sn();var t=fs[e.bidderCode];Se.runWithBidder(e.bidderCode,(function(){bt("CALLING BIDDER"),Pr(R.BID_REQUESTED,e)}));var s=zn(o,r?{request:r.request.bind(null,e.bidderCode),done:r.done}:void 0),d=i.bind(e);try{Se.runWithBidder(e.bidderCode,t.callBids.bind(t,e,n,d,s,(function(){return a(e.bidderRequestId)}),Se.callbackWithBidder(e.bidderCode)))}catch(t){wt("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),d()}}))}else At("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},gs.videoAdapters=[],gs.registerBidAdapter=function(e,t){var n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,r=void 0===i?[]:i;e&&t?"function"==typeof e.callBids?(fs[t]=e,Fo.register(mi,t,null===(n=e.getSpec)||void 0===n?void 0:n.call(e).gvlid),r.includes("video")&&gs.videoAdapters.push(t),r.includes("native")&&Sd.push(t)):wt("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):wt("bidAdapter or bidderCode not specified")},gs.aliasBidAdapter=function(e,t,n){if(void 0===fs[t]){var i=fs[e];if(void 0===i){var r=[];vs.forEach((function(n){if(n.bidders&&n.bidders.length){var i=n&&n.bidders;n&&i.includes(t)?ms[t]=e:r.push(e)}})),r.forEach((function(e){wt('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var o,s=function(e){var t=[];return gs.videoAdapters.includes(e)&&t.push("video"),Sd.includes(e)&&t.push("native"),t}(e);if(i.constructor.prototype!=Object.prototype)(o=new i.constructor).setBidderCode(t);else{var a=(n||{}).useBaseGvlid,d=void 0!==a&&a,c=i.getSpec(),l=d?c.gvlid:null==n?void 0:n.gvlid;null==l&&null!=c.gvlid&&At("Alias '".concat(t,"' will NOT re-use the GVL ID of the original adapter ('").concat(c.code,"', gvlid: ").concat(c.gvlid,"). Functionality that requires TCF consent may not work as expected."));var u=n&&n.skipPbsAliasing;o=Qr(Object.assign({},c,{code:t,gvlid:l,skipPbsAliasing:u})),ms[t]=e}gs.registerBidAdapter(o,t,{supportedMediaTypes:s})}catch(t){wt(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else bt('alias name "'+t+'" has been already specified.')},gs.resolveAlias=function(e){for(var t,n=e;ms[n]&&(!t||!t.has(n));)n=ms[n],(t=t||new Set).add(n);return n},gs.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,i=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,bs[n]={adapter:t,gvlid:i},Fo.register(yi,n,i)):wt('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):wt("Prebid Error: analyticsAdapter or analyticsCode not specified")},gs.enableAnalytics=function(e){Ut(e)||(e=[e]),e.forEach((function(e){var t=bs[e.provider];t&&t.adapter?hs.isAllowed("reportAnalytics",ys(yi,e.provider,l({},"_config",e)))&&t.adapter.enableAnalytics(e):wt("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},gs.getBidAdapter=function(e){return fs[e]},gs.getAnalyticsAdapter=function(e){return bs[e]},gs.callTimedOutBidders=function(e,t,n){t=un(t=t.map((function(t){return t.params=hn(e,t.adUnitCode,t.bidder),t.timeout=n,t})),"bidder"),Object.keys(t).forEach((function(e){Cs(e,"onTimeout",t[e])}))},gs.callBidWonBidder=function(e,t,n){t.params=hn(n,t.adUnitCode,t.bidder),function(e,t){io(e,"winsCounter",t)}(t.adUnitCode,t.bidder),Cs(e,"onBidWon",t)},gs.triggerBilling=(xs=new WeakSet,function(e){var t;xs.has(e)||(xs.add(e),((null===(t=as(e.eventtrackers)[os])||void 0===t?void 0:t[rs])||[]).forEach((function(e){return it.triggerPixel(e)})),Cs(e.bidder,"onBidBillable",e))}),gs.callSetTargetingBidder=function(e,t){Cs(e,"onSetTargeting",t)},gs.callBidViewableBidder=function(e,t){Cs(e,"onBidViewable",t)},gs.callBidderError=function(e,t,n){Cs(e,"onBidderError",{error:t,bidderRequest:n})},gs.callAdRenderSucceededBidder=function(e,t){Cs(e,"onAdRenderSucceeded",t)},gs.callDataDeletionRequest=Si("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i="onDataDeletionRequest";Object.keys(fs).filter((function(e){return!ms.hasOwnProperty(e)})).forEach((function(e){var n=Ts(e,i);if(null!=n){var r=Ia.getBidsRequested().filter((function(t){return function(e){for(var t=new Set;ms.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=ms[e];return e}(t.bidderCode)===e}));Os.apply(void 0,[e,i].concat(a(n),[r],t))}})),Object.entries(bs).forEach((function(e){var n,r=s(e,2),o=r[0],a=r[1],d=null==a||null===(n=a.adapter)||void 0===n?void 0:n[i];if("function"==typeof d)try{d.apply(a.adapter,t)}catch(e){wt("error calling ".concat(i," of ").concat(o),e)}}))}));const Rs=gs;var Us=Ni((function(e){return Rs.resolveAlias(e)})),ks=new WeakMap,Ds=["debugging","outstream","aaxBlockmeter","adagio","adloox","akamaidap","arcspan","airgrid","browsi","brandmetrics","clean.io","humansecurity","confiant","contxtful","hadron","mediafilter","medianet","azerionedge","a1Media","geoedge","qortex","dynamicAdBoost","51Degrees","symitridap","wurfl","nodalsAi","anonymised","optable","justtag","tncId","ftrackId","id5"];function Bs(e,t,n,i,r,o){if(Vi("loadExternalScript",Us(t,n)))if(n&&e){if(Ds.includes(n)){r||(r=document);var a=l(r,e);if(a)return i&&"function"==typeof i&&(a.loaded?i():a.callbacks.push(i)),a.tag;var d=ks.get(r)||{},c={loaded:!1,tag:null,callbacks:[]};return d[e]=c,ks.set(r,d),i&&"function"==typeof i&&c.callbacks.push(i),At("module ".concat(n," is loading external JavaScript")),function(t,n,i,r){i||(i=document);var o=i.createElement("script");o.type="text/javascript",o.async=!0;var a=l(i,e);a&&(a.tag=o);o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,n())}:o.onload=function(){n()};o.src=t,r&&function(e,t){Object.entries(t).forEach((function(t){var n=s(t,2),i=n[0],r=n[1];return e.setAttribute(i,r)}))}(o,r);return Ft(o,i),o}(e,(function(){c.loaded=!0;try{for(var e=0;e<c.callbacks.length;e++)c.callbacks[e]()}catch(e){wt("Error executing callback","adloader.js:loadExternalScript",e)}}),r,o)}wt("".concat(n," not whitelisted for loading external JavaScript"))}else wt("cannot load external script without url and moduleCode");function l(e,t){var n=ks.get(e);return n&&n[t]?n[t]:null}}var js=h();function Ns(e){var t=this,n=e.url,i=e.config,r=e.id,o=e.callback,s=e.loaded,a=e.adUnitCode,d=e.renderNow;this.url=n,this.config=i,this.handlers={},this.id=r,this.renderNow=d,this.adUnitCode=a,this.loaded=s,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):wt("Commands given to Renderer.push must be wrapped in a function")},this.callback=o||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,i=function(){e._render?e._render.apply(e,t):At("No render function was provided, please use .setRender on the renderer")};!function(e){var t,n=js.adUnits,i=n.find((function(t){return t.code===e}));if(!i)return!1;var r=null==i?void 0:i.renderer,o=!!(r&&r.url&&r.render),s=null==i||null===(t=i.mediaTypes)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.renderer,a=!!(s&&s.url&&s.render);return!!(o&&!0!==r.backupOnly||a&&!0!==s.backupOnly)}(a)?d?i():(this.cmd.unshift(i),Bs(n,fi,"outstream",this.callback,this.documentContext)):(At("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(a)),i())}.bind(this)}Ns.install=function(e){return new Ns({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},Ns.prototype.getConfig=function(){return this.config},Ns.prototype.setRender=function(e){this._render=e},Ns.prototype.setEventHandlers=function(e){this.handlers=e},Ns.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),bt("Prebid Renderer event for id ".concat(t," type ").concat(n))},Ns.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){wt("Error processing Renderer command on ad unit '".concat(this.adUnitCode,"':"),e)}};var Ls="native",Ms="video",zs="banner",Fs="adpod",qs=[Ls,Ms,zs];function Hs(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.index,s=void 0===o?Ia.index:o,a=r.bs,d=void 0===a?gi:a;n=n||s.getBidRequest(t);var c=null==t?void 0:t.adapterCode,l=(null==t?void 0:t.bidderCode)||(null===(i=n)||void 0===i?void 0:i.bidder),u=d.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),p=d.getOwn(l,"bidCpmAdjustment")||d.get(u?c:l,"bidCpmAdjustment");if(p&&"function"==typeof p)try{return p(e,Object.assign({},t),n)}catch(e){wt("Error during bid adjustment",e)}return e}var Vs="minBidCacheTTL",$s=1,Gs=null,Ws=[];function Ks(){return Gs}function Qs(e){Ws.push(e)}Se.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?$s=e.ttlBuffer:wt("Invalid value for ttlBuffer",e.ttlBuffer)})),Se.getConfig(Vs,(function(e){Gs!==(Gs="number"==typeof(Gs=null==e?void 0:e[Vs])?Gs:null)&&Ws.forEach((function(e){return e(Gs)}))}));var Js=tr.syncUsers,Ys="completed";Er(R.BID_ADJUSTMENT,(function(e){!function(e){var t=Hs(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));var Xs={},Zs={},ea=[],ta=h();function na(e){var t=e.adUnits,n=e.adUnitCodes,i=e.callback,r=e.cbTimeout,o=e.labels,s=e.auctionId,c=e.ortb2Fragments,l=e.metrics;l=Mr(l);var u,p,h,g,f=t,m=o,v=n,b=s||at(),_=r,x=new Set,P=Fe(),T=Fe(),O=[],C=i,U=[],k=gr({startTime:function(e){return e.responseTimestamp},ttl:function(e){return null==Ks()?null:1e3*Math.max(Ks(),e.ttl)}}),D=[],B=[],j=[];function N(){return{auctionId:b,timestamp:u,auctionEnd:p,auctionStatus:g,adUnits:f,adUnitCodes:v,labels:m,bidderRequests:U,noBids:D,bidsReceived:k.toArray(),bidsRejected:O,winningBids:B,timeout:_,metrics:l,seatNonBids:j}}function L(e){if(e?Pr(R.AUCTION_TIMEOUT,N()):clearTimeout(h),void 0===p){var n=[];e&&(bt("Auction ".concat(b," timedOut")),(n=U.filter((function(e){return!x.has(e.bidderRequestId)})).flatMap((function(e){return e.bids}))).length&&Pr(R.BID_TIMEOUT,n)),g=Ys,p=Date.now(),l.checkpoint("auctionEnd"),l.timeBetween("requestBids","auctionEnd","requestBids.total"),l.timeBetween("callBids","auctionEnd","requestBids.callBids"),P.resolve(),Pr(R.AUCTION_END,N()),sa(f,(function(){try{if(null!=C){var i=k.toArray().filter((function(e){return v.includes(e.adUnitCode)})).reduce(ba,{});C.apply(ta,[i,e,b]),C=null}}catch(e){wt("Error executing bidsBackHandler",null,e)}finally{n.length&&Rs.callTimedOutBidders(t,n,_);var r=Se.getConfig("userSync")||{};r.enableOverride||Js(r.syncDelay)}}))}}function M(){Se.resetBidder(),yt("Bids Received for Auction with id: ".concat(b),k.toArray()),g=Ys,L(!1)}function z(e){x.add(e)}function F(e){var t=this;e.forEach((function(e){var t;t=e,U=U.concat(t)}));var n={},i={bidRequests:e,run:function(){h=setTimeout((function(){return L(!0)}),_),g="inProgress",Pr(R.AUCTION_INIT,N());var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,r=void 0===i?Ia.index:i,o=0,s=!1,c=new Set,l={};function u(){o--,s&&0===o&&e()}function p(e,t,n){return l[t.requestId]=!0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,r=void 0===i?Ia.index:i,o=r.getBidderRequest(e),s=r.getAdUnit(e),a=o&&o.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||sn(),requestTimestamp:e.requestTimestamp||a,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==s?void 0:s.ttlBuffer)&&(e.ttlBuffer=s.ttlBuffer);e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),o++,n(u)}function h(e,n){p(e,n,(function(e){var i=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.index,o=void 0===r?Ia.index:r;Pr(R.BID_ADJUSTMENT,e);var s=o.getAdUnit(e);e.instl=1===(null==s||null===(t=s.ortb2Imp)||void 0===t?void 0:t.instl);var a=(null===(n=o.getBidRequest(e))||void 0===n?void 0:n.renderer)||s.renderer,c=e.mediaType,l=o.getMediaTypes(e),u=l&&l[c],p=u&&u.renderer,h=null;!p||!p.render||!0===p.backupOnly&&e.renderer?!a||!a.render||!0===a.backupOnly&&e.renderer||(h=a):h=p;h&&(e.renderer=Ns.install({url:h.url,config:h.options,renderNow:null==h.url}),e.renderer.setRender(h.render));var g=ca(e.mediaType,l,Se.getConfig("mediaTypePriceGranularity")),f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=parseFloat(e);return isNaN(i)&&(i=""),{low:""===i?"":E(e,y,n),med:""===i?"":E(e,A,n),high:""===i?"":E(e,w,n),auto:""===i?"":E(e,I,n),dense:""===i?"":E(e,S,n),custom:""===i?"":E(e,t,n)}}(e.cpm,"object"===d(g)?g:Se.getConfig("customPriceBucket"),Se.getConfig("currency.granularityMultiplier"));return e.pbLg=f.low,e.pbMg=f.med,e.pbHg=f.high,e.pbAg=f.auto,e.pbDg=f.dense,e.pbCg=f.custom,e}(n);Pr(R.BID_ACCEPTED,i),i.mediaType===Ms?function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.index,s=void 0===o?Ia.index:o,a=!0,d=null===(i=s.getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId}))||void 0===i?void 0:i.video,c=d&&(null==d?void 0:d.context),l=d&&(null==d?void 0:d.useCacheKey),u=Se.getConfig("cache")||{},p=u.useLocal,h=u.url,g=u.ignoreBidderCacheKey;p?function(e){var t=$n(e),n=URL.createObjectURL(new Blob([t],{type:"text/xml"}));Qn(e,n),Hn.set(e.videoCacheKey,n)}(t):h&&(l||c!==nr)&&(!t.videoCacheKey||g?(a=!1,da(e,t,n,d)):t.vastUrl||(wt("videoCacheKey specified but not required vastUrl for video bid"),a=!1));a&&(aa(e,t),n())}(t,i,e):(function(e){return e.native&&"object"===d(e.native)}(i)&&function(e,t){var n,i=null==t?void 0:t.nativeOrtbRequest,r=null===(n=e.native)||void 0===n?void 0:n.ortb;if(i&&r){var o=function(e,t){var n,i={},r=(null==t?void 0:t.assets)||[];i.clickUrl=null===(n=e.link)||void 0===n?void 0:n.url,i.privacyLink=e.privacy;var o,s=bd((null==e?void 0:e.assets)||[]);try{var d=function(){var e=o.value,t=r.find((function(t){return e.id===t.id}));if(e.title)i.title=e.title.text;else if(e.img){var n;i[(null==t||null===(n=t.img)||void 0===n?void 0:n.type)===re?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}}else if(e.data){var s;i[_d[xd[null==t||null===(s=t.data)||void 0===s?void 0:s.type]]]=e.data.value}};for(s.s();!(o=s.n()).done;)d()}catch(e){s.e(e)}finally{s.f()}i.impressionTrackers=[];var c,l=[];e.imptrackers&&(c=i.impressionTrackers).push.apply(c,a(e.imptrackers));var u,p=bd((null==e?void 0:e.eventtrackers)||[]);try{for(p.s();!(u=p.n()).done;){var h=u.value;h.event===os&&h.method===rs&&i.impressionTrackers.push(h.url),h.event===os&&2===h.method&&l.push(h.url)}}catch(e){p.e(e)}finally{p.f()}l=l.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&l.push(e.jstracker);l.length&&(i.javascriptTrackers=l.join("\n"));return i}(r,i);Object.assign(e.native,o)}["rendererUrl","adTemplate"].forEach((function(n){var i,r=null==t||null===(i=t.nativeParams)||void 0===i?void 0:i[n];r&&(e.native[n]=kd(r))}))}(i,r.getAdUnit(i)),aa(t,i),e())}))}function g(e,n,i){return p(e,n,(function(e){n.rejectionReason=i,At("Bid from ".concat(n.bidder||"unknown bidder"," was rejected: ").concat(i),n),Pr(R.BID_REJECTED,n),t.addBidRejected(n),e()}))}function f(){var n=this,i=t.getBidRequests(),r=Se.getConfig("auctionOptions");if(c.add(n),r&&!jt(r)){var a=r.secondaryBidders;a&&!i.every((function(e){return a.includes(e.bidderCode)}))&&(i=i.filter((function(e){return!a.includes(e.bidderCode)})))}s=i.every((function(e){return c.has(e)})),n.bids.forEach((function(e){l[e.bidId]||(t.addNoBid(e),Pr(R.NO_BID,e))})),s&&0===o&&e()}return{addBidResponse:function(){function e(e,t){var n;ia.call({dispatch:h},e,t,(n=!1,function(i){n||(g(e,t,i),n=!0)}))}return e.reject=g,e}(),adapterDone:function(){var e=this;ra(Me.resolve()).finally((function(){return f.call(e)}))}}}(M,t);Rs.callBids(f,e,i.addBidResponse,i.adapterDone,{request:function(e,t){o(Xs,t),o(n,e),Zs[e]||(Zs[e]={SRA:!0,origin:t}),n[e]>1&&(Zs[e].SRA=!1)},done:function(e){Xs[e]--,ea[0]&&r(ea[0])&&ea.shift()}},_,z,c),T.resolve()}};function r(e){var t=!0,n=Se.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((function(e){var i=1,r=void 0!==e.src&&e.src===$?"s2s":e.bidderCode;return Zs[r]&&(!1===Zs[r].SRA&&(i=Math.min(e.bids.length,n)),Xs[Zs[r].origin]+i>n&&(t=!1)),!t})),t&&e.run(),t}function o(e,t){void 0===e[t]?e[t]=1:e[t]++}r(i)||(At("queueing auction due to limited endpoint capacity"),ea.push(i))}return Qs((function(){return k.refresh()})),Er(R.SEAT_NON_BID,(function(e){var t;e.auctionId===b&&(t=e.seatnonbid,j=j.concat(t))})),{addBidReceived:function(e){k.add(e)},addBidRejected:function(e){O=O.concat(e)},addNoBid:function(e){D=D.concat(e)},callBids:function(){g="started",u=Date.now();var e=l.measureTime("requestBids.makeRequests",(function(){return Rs.makeBidRequests(f,u,b,_,m,c,l)}));yt("Bids Requested for Auction with id: ".concat(b),e),l.checkpoint("callBids"),e.length<1?(At("No valid bid requests returned for auction"),M()):oa.call({dispatch:F,context:this},e)},addWinningBid:function(e){B=B.concat(e),Rs.callBidWonBidder(e.adapterCode||e.bidder,e,t),e.deferBilling||Rs.triggerBilling(e)},setBidTargeting:function(e){Rs.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return B},getAuctionStart:function(){return u},getAuctionEnd:function(){return p},getTimeout:function(){return _},getAuctionId:function(){return b},getAuctionStatus:function(){return g},getAdUnits:function(){return f},getAdUnitCodes:function(){return v},getBidRequests:function(){return U},getBidsReceived:function(){return k.toArray()},getNoBids:function(){return D},getNonBids:function(){return j},getFPD:function(){return c},getMetrics:function(){return l},end:P.promise,requestsDone:T.promise,getProperties:N}}var ia=function(e){return Ci(e,(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.push((function(){})),e.apply(this,n)}))}(Si("async",(function(e,t,n){!function(e){var t=Se.getConfig("maxBid");return!t||!e.cpm||t>=Number(e.cpm)}(t)?n(ee):this.dispatch.call(null,e,t)}),"addBidResponse")),ra=Si("sync",(function(e){return e}),"responsesReady"),oa=Si("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),sa=Si("async",(function(e,t){t&&t()}),"bidsBackCallback");function aa(e,t){!function(e){var t,n=!0===gi.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(n||e.dealId)&&(t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,r=void 0===i?Ia.index:i;if(!t)return{};var o=r.getBidRequest(t),s={},a=ma(t.mediaType,e);va(s,a,t,o),e&&gi.getOwn(e,P)&&(va(s,gi.ownSettingsFor(e),t,o),t.sendStandardTargeting=gi.get(e,"sendStandardTargeting"));t.native&&(s=Object.assign({},s,function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.index,o=void 0===r?Ia.index:r,s={},a=o.getAdUnit(e),d=null==(null==a||null===(t=a.nativeParams)||void 0===t?void 0:t.ortb)&&!1!==(null==a||null===(n=a.nativeParams)||void 0===n?void 0:n.sendTargetingKeys),c=function(e){var t,n={};null!=e&&null!==(t=e.nativeParams)&&void 0!==t&&t.ext&&Object.keys(e.nativeParams.ext).forEach((function(e){n[e]="hb_native_".concat(e)}));return wd(wd({},V),n)}(a),l=wd(wd({},e.native),e.native.ext);return delete l.ext,Object.keys(l).forEach((function(t){var n,i,r,o=c[t],l=kd(e.native[t])||kd(null==e||null===(n=e.native)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n[t]);if("adTemplate"!==t&&o&&l){var u,p=null==a||null===(i=a.nativeParams)||void 0===i||null===(i=i[t])||void 0===i?void 0:i.sendId;if("boolean"!=typeof p)p=null==a||null===(u=a.nativeParams)||void 0===u||null===(u=u.ext)||void 0===u||null===(u=u[t])||void 0===u?void 0:u.sendId;if(p)l="".concat(o,":").concat(e.adId);var h,g=null==a||null===(r=a.nativeParams)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.sendTargetingKeys;if("boolean"!=typeof g)g=null==a||null===(h=a.nativeParams)||void 0===h||null===(h=h.ext)||void 0===h||null===(h=h[t])||void 0===h?void 0:h.sendTargetingKeys;("boolean"==typeof g?g:d)&&(s[o]=l)}})),s}(t)));return s}(e.bidderCode,e));e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)}(t),Mr(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),Pr(R.BID_RESPONSE,t)}var da=Si("async",(function(e,t,n,i){Xn(e,t,n)}),"callPrebidCache");function ca(e,t,n){if(e&&n){if(e===Ms){var i,r,o=null!==(i=null==t||null===(r=t[Ms])||void 0===r?void 0:r.context)&&void 0!==i?i:"instream";if(n["".concat(Ms,"-").concat(o)])return n["".concat(Ms,"-").concat(o)]}return n[e]}}var la=function(e){return function(t){var n=e||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?Ia.index:t,i=ca(e.mediaType,n.getMediaTypes(e),Se.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":Se.getConfig("priceGranularity")}(t);return n===M?t.pbAg:n===z?t.pbDg:n===j?t.pbLg:n===N?t.pbMg:n===L?t.pbHg:n===F?t.pbCg:void 0}},ua=function(){return function(e){return e.creativeId?e.creativeId:""}},pa=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},ha=function(){return function(e){var t,n;return e.meta&&(e.meta.networkId||e.meta.networkName)?(null==e||null===(t=e.meta)||void 0===t?void 0:t.networkName)||(null==e||null===(n=e.meta)||void 0===n?void 0:n.networkId):""}},ga=function(){return function(e){var t,n=null==e||null===(t=e.meta)||void 0===t?void 0:t.primaryCatId;return Array.isArray(n)?n[0]||"":n||""}};function fa(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return e[t]}}}function ma(e,t){var n=Object.assign({},gi.settingsFor(null));if(n[P]||(n[P]=[fa(q.BIDDER,"bidderCode"),fa(q.AD_ID,"adId"),fa(q.PRICE_BUCKET,la()),fa(q.SIZE,"size"),fa(q.DEAL,"dealId"),fa(q.SOURCE,"source"),fa(q.FORMAT,"mediaType"),fa(q.ADOMAIN,pa()),fa(q.ACAT,ga()),fa(q.DSP,ha()),fa(q.CRID,ua())]),"video"===e){var i=n[P].slice();if(n[P]=i,[q.UUID,q.CACHE_ID].forEach((function(e){void 0===i.find((function(t){return t.key===e}))&&i.push(fa(e,"videoCacheKey"))})),Se.getConfig("cache.url")&&(!t||!1!==gi.get(t,"sendStandardTargeting"))){var r=wn(Se.getConfig("cache.url"));void 0===i.find((function(e){return e.key===q.CACHE_HOST}))&&i.push(fa(q.CACHE_HOST,(function(e){var t;return(null==e||null===(t=e.adserverTargeting)||void 0===t?void 0:t[q.CACHE_HOST])||r.hostname})))}}return n}function va(e,t,n,i){var r=t[P];return n.size=n.getSize(),(r||[]).forEach((function(r){var o=r.key,s=r.val;if(e[o]&&At("The key: "+o+" is being overwritten"),Ct(s))try{s=s(n,i)}catch(e){wt("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==q.DEAL&&o!==q.ACAT&&o!==q.DSP&&o!==q.CRID||!Nt(s)&&null!=s?e[o]=s:yt("suppressing empty key '"+o+"' from adserver targeting")})),e}function ba(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function ya(e){Object.assign(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.adUnitId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.adUnitId===n}))},getMediaTypes:function(e){var t=e.adUnitId,n=e.requestId;if(null!=n){var i=this.getBidRequest({requestId:n});if(null!=i&&(null==t||i.adUnitId===t))return i.mediaTypes}else if(null!=t){var r=this.getAdUnit({adUnitId:t});if(null!=r)return r.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,i=t.bidderRequestId;if(null!=n||null!=i){var r=e().flatMap((function(e){return e.getBidRequests()}));return null!=i&&(r=r.filter((function(e){return e.bidderRequestId===i}))),null==n?r[0]:r.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))},getOrtb2:function(e){var t,n;return(null===(t=this.getBidderRequest(e))||void 0===t?void 0:t.ortb2)||(null===(n=this.getAuction(e))||void 0===n||null===(n=n.getFPD())||void 0===n||null===(n=n.global)||void 0===n?void 0:n.ortb2)}})}function Aa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Sa,Ia=function(){var e=gr({startTime:function(e){return e.end.then((function(){return e.getAuctionEnd()}))},ttl:function(e){return null==Ks()?null:e.end.then((function(){return 1e3*Math.max.apply(Math,[Ks()].concat(a(e.getBidsReceived().map((function(e){return e.ttl})))))}))}});Qs((function(){return e.refresh()}));var t={onExpiry:e.onExpiry};function n(t){var n,i=Aa(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.getAuctionId()===t)return r}}catch(e){i.e(e)}finally{i.f()}}function i(){return e.toArray().flatMap((function(e){return e.getBidsReceived()}))}return t.addWinningBid=function(e){var t=Mr(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","adserver.pending"),t.timeBetween("requestBids","bidWon","adserver.e2e");var i=n(e.auctionId);i?i.addWinningBid(e):At("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===Ys}},getAdUnitCodes:{post:Wt}}).forEach((function(n){var i=s(n,2),r=i[0],o=i[1],a=o.name,d=void 0===a?r:a,c=o.pre,l=o.post,u=null==c?function(e){return e[d]()}:function(e){return c(e)?e[d]():[]},p=null==l?function(e){return e}:function(e){return e.filter(l)};t[r]=function(){return p(e.toArray().flatMap(u))}})),t.getAllBidsForAdUnitCode=function(e){return i().filter((function(t){return t&&t.adUnitCode===e}))},t.createAuction=function(t){var n=na(t);return function(t){e.add(t)}(n),n},t.findBidByAdId=function(e){return i().find((function(t){return t.adId===e}))},t.getStandardBidderAdServerTargeting=function(){return ma()[P]},t.setStatusForBids=function(e,i){var r=t.findBidByAdId(e);if(r&&(r.status=i),r&&i===G.BID_TARGETING_SET){var o=n(r.auctionId);o&&o.setBidTargeting(r)}},t.getLastAuctionId=function(){var t=e.toArray();return t.length&&t[t.length-1].getAuctionId()},t.clearAllAuctions=function(){e.clear()},t.index=new ya((function(){return e.toArray()})),t}(),Ea=Si("sync",(function(e){return'(()=>{"use strict";window.render=function({ad:e,adUrl:t,width:n,height:i,instl:d},{mkFrame:r},s){if(!e&&!t)throw{reason:"noAd",message:"Missing ad markup or URL"};{if(null==i){const e=s.document?.body;[e,e?.parentElement].filter((e=>null!=e?.style)).forEach((e=>e.style.height="100%"))}const h=s.document,o={width:n??"100%",height:i??"100%"};if(t&&!e?o.src=t:o.srcdoc=e,h.body.appendChild(r(h,o)),d&&s.frameElement){const e=s.frameElement.style;e.width=n?`${n}px`:"100vw",e.height=i?`${i}px`:"100vh"}}}})();'})),_a=(Sa={},function(e){var t=Ea(e);return Sa.hasOwnProperty(t)||(Sa[t]=new Me((function(e){var n=Pt();n.srcdoc="<script>".concat(t,"<\/script>"),n.onload=function(){return e(n.contentWindow.render)},document.body.appendChild(n)}))),Sa[t]});function xa(e,t){return e===t?0:e<t?-1:1}function Pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,n){return xa(e(t),e(n))}}function Ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa;return function(t,n){return-e(t,n)||0}}function Oa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var i=0,r=t;i<r.length;i++){var o=(0,r[i])(e,n);if(0!==o)return o}return 0}}function Ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa;return function(t,n){return e(n,t)<0?n:t}}function Ra(){return Ca(Ta(arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa))}var Ua=Pa((function(e){return e.cpm})),ka=Pa((function(e){return e.responseTimestamp})),Da=Ra(Oa(Ua,Ta(Pa((function(e){return e.timeToRespond}))))),Ba=Ra(Oa(Ua,Ta(ka))),ja=(Ra(Oa(Ua,ka)),[]),Na=20,La="targetingControls.allowTargetingKeys",Ma="targetingControls.addTargetingKeys",za='Only one of "'.concat(La,'" or "').concat(Ma,'" can be set'),Fa=Object.keys(q).map((function(e){return q[e]})),qa={isActualBid:function(e){return e.getStatusCode()===C},isBidNotExpired:function(e){return e.responseTimestamp+1e3*function(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:$s)}(e)>sn()},isUnusedBid:function(e){return e&&(e.status&&![G.RENDERED].includes(e.status)||!e.status)}};function Ha(e){return!Object.values(qa).some((function(t){return!t(e)}))}var Va=Si("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xt;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var r=[],o=Se.getConfig("sendBidsControl.dealPrioritization"),s=un(e,"adUnitCode");return Object.keys(s).forEach((function(e){var d=[],c=un(s[e],"bidderCode");Object.keys(c).forEach((function(e){d.push(c[e].reduce(t))})),n?(d=o?d.sort($a(!0)):d.sort((function(e,t){return t.cpm-e.cpm})),r.push.apply(r,a(d.slice(0,n)))):(d=d.sort(i),r.push.apply(r,a(d)))})),r}return e}));function $a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}function Ga(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return window.googletag.pubads().getSlots()})().reduce((function(e,n){var i=Ct(t)&&t(n);return Object.keys(e).filter(Ct(i)?i:function(e){return function(t){return gn(e,t)}}(n)).forEach((function(t){return e[t].push(n)})),e}),Object.fromEntries(e.map((function(e){return[e,[]]}))))}var Wa=function(e){var t={},n={};function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Fa.concat(Id),r=Se.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),o=r?r.map((function(e){return q[e]})):i;return e.reduce((function(e,r){if(t||n&&r.dealId){var s=function(e,t){return t.reduce((function(t,n){return e.adserverTargeting[n]&&t.push(l({},"".concat(n,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[n]])),t}),[])}(r,i.filter((function(e){return void 0!==r.adserverTargeting[e]&&(n||-1!==o.indexOf(e))})));s&&e.push(l({},r.adUnitCode,s))}return e}),[])}function r(t){return"string"==typeof t?[t]:Ut(t)?t:e.getAdUnitCodes()||[]}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.getBidsReceived().reduce((function(e,t){var i=Se.getConfig("useBidCache"),r=Se.getConfig("bidCacheFilterFunction"),o=n[t.adUnitCode]===t.auctionId,s=!(i&&!o&&"function"==typeof r)||!!r(t);return(i||o)&&s&&x(t,"video.context")!==Fs&&Ha(t)&&(t.latestTargetedAuctionId=n[t.adUnitCode],e.push(t)),e}),[]);return Va(r,t,void 0,void 0,void 0,i)}function d(e,n){var i=t.getWinningBids(n,e),r=c();return i=i.map((function(e){return l({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===r.indexOf(t)})).reduce((function(t,n){var i=[e.adserverTargeting[n]],r=l({},n.substring(0,Na),i);if(n===q.DEAL){var o=l({},"".concat(n,"_").concat(e.bidderCode).substring(0,Na),i);return[].concat(a(t),[r,o])}return[].concat(a(t),[r])}),[]))})),i}function c(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(Fa).filter(Wt)}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(e,t){if(Yt()){var n=r(e);Object.values(Ga(n,t)).forEach((function(e){e.forEach((function(e){!function(e){ja.forEach((function(t){e.getTargeting(t)&&e.clearTargeting(t)}))}(e)}))}))}},t.resetPresetTargetingAST=function(e){r(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),i={};n.forEach((function(e){ja.includes(e.toLowerCase())||(i[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:i})}}))},t.getAllTargeting=function(t,n,s){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Da,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xt;s||(s=o(u,p));var h=r(t),g=Se.getConfig("enableSendAllBids"),f=Se.getConfig("sendBidsControl.bidLimit"),m=g&&(n||f)||0,v=function(e,t){var n=[],i={},r=Se.getConfig("targetingControls.alwaysIncludeDeals");return t.forEach((function(t){var o=e.includes(t.adUnitCode),s=!0===gi.get(t.bidderCode,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0,a=r&&t.dealId;o&&(a||s)&&(n.push(t),Object.keys(t.adserverTargeting).filter(function(){var e=c();e=e.concat(Id);return function(t){return-1===e.indexOf(t)}}()).forEach((function(e){var n=e.substring(0,Na),r=i[t.adUnitCode]||{},o=[t.adserverTargeting[e]];r[n]?r[n]=r[n].concat(o).filter(Wt):r[n]=o,i[t.adUnitCode]=r})))})),{filteredBids:n,customKeysByUnit:i}}(h,s),b=v.customKeysByUnit,y=v.filteredBids,A=function(t,n,r){var o=!1!==Se.getConfig("targetingControls.allBidsCustomTargeting"),s=d(t,r).concat((c=t,u=Se.getConfig("targetingControls.alwaysIncludeDeals"),i(c,Se.getConfig("enableSendAllBids"),u))).concat(function(t){function n(e){return null==e?void 0:e[P]}function i(e){var t=n(e);return Object.keys(t).map((function(e){return Rt(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),Ut(t[e])||(t[e]=[t[e]]),l({},e,t[e])}))}return e.getAdUnits().filter((function(e){return t.includes(e.code)&&n(e)})).reduce((function(e,t){var n=i(t);return n&&e.push(l({},t.code,n)),e}),[])}(r));var c,u;o&&s.push.apply(s,a(function(e,t){return e.reduce((function(e,n){var i=Object.assign({},n),r=t[i.adUnitCode],o=[];return r&&Object.keys(r).forEach((function(e){e&&r[e]&&o.push(l({},e,r[e]))})),e.push(l({},i.adUnitCode,o)),e}),[])}(t,n)));return s.forEach((function(e){!function(e){Object.keys(e).forEach((function(t){e[t].forEach((function(e){var t=Object.keys(e);-1===ja.indexOf(t[0])&&(ja=t.concat(ja))}))}))}(e)})),s}(Va(y,u,m,void 0,p),b,h),w=Object.keys(Object.assign({},H,V)),S=Se.getConfig(La),I=Se.getConfig(Ma);if(null!=I&&null!=S)throw new Error(za);S=null!=I?w.concat(I):S||w,Array.isArray(S)&&S.length>0&&(A=function(e,t){var n=Object.assign({},q,V),i=Object.keys(n),r={};yt("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var o=Object.keys(e)[0],s=e[o].filter((function(e){var o=Object.keys(e)[0],s=0===i.filter((function(e){return 0===o.indexOf(n[e])})).length||t.find((function(e){var t=n[e];return 0===o.indexOf(t)}));return r[o]=!s,s}));e[o]=s}));var o=Object.keys(r).filter((function(e){return r[e]}));return yt("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}(A,S)),A=function(e){var t=e.map((function(e){return l({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return l({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))}));return t=t.reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{}),t}(A);var E=Se.getConfig("targetingControls.auctionKeyMaxChars");return E&&(yt("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(E," characters.  Running checks on auction keys...")),A=function(e,t){var n=en(e),i=Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort($a());return i.reduce((function(e,i,r,o){var s,a=(s=i.adserverTargeting,Object.keys(s).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(s[t]),"%26")}),""));r+1===o.length&&(a=a.slice(0,-3));var d=i.adUnitCode,c=a.length;return c<=t?(t-=c,yt("AdUnit '".concat(d,"' auction keys comprised of ").concat(c," characters.  Deducted from running threshold; new limit is ").concat(t),n[d]),e[d]=n[d]):At("The following keys for adUnitCode '".concat(d,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(c,", the current allotted amount was ").concat(t,".\n"),n[d]),r+1===o.length&&0===Object.keys(e).length&&wt("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(A,E)),h.forEach((function(e){A[e]||(A[e]={})})),A},Se.getConfig("targetingControls",(function(e){null!=x(e,La)&&null!=x(e,Ma)&&wt(za)})),t.setTargetingForGPT=Si("sync",(function(n,i){var r=t.getAllTargeting(n),o=Object.fromEntries(ja.map((function(e){return[e,null]})));Object.entries(Ga(Object.keys(r),i)).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];i.length>1&&At("Multiple slots found matching: ".concat(n,". Targeting will be set on all matching slots, which can lead to duplicate impressions if more than one are requested from GAM. To resolve this, ensure the arguments to setTargetingForGPTAsync resolve to a single slot by explicitly matching the desired slotElementID.")),i.forEach((function(e){Object.keys(r[n]).forEach((function(e){var t=r[n][e];"string"==typeof t&&-1!==t.indexOf(",")&&(t=t.split(",")),r[n][e]=t})),bt("Attempting to set targeting-map for slot: ".concat(e.getSlotElementId()," with targeting-map:"),r[n]),e.updateTargetingFromMap(Object.assign({},o,r[n]))}))})),Object.keys(r).forEach((function(t){Object.keys(r[t]).forEach((function(n){"hb_adid"===n&&e.setStatusForBids(r[t][n],G.BID_TARGETING_SET)}))})),t.targetingDone(r),Pr(R.SET_TARGETING,r)}),"setTargetingForGPT"),t.targetingDone=Si("sync",(function(e){return e}),"targetingDone"),t.getWinningBids=function(e,t){var n=t||o(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Da,arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xt),i=r(e);return n.filter((function(e){return i.includes(e.adUnitCode)})).filter((function(e){return!0===gi.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(Wt).map((function(e){return n.filter((function(t){return t.adUnitCode===e?t:null})).reduce(Da)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){wt("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if(bt("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),Rt(n[e][t])||Ut(n[e][t])){var i={};t.search(/pt[0-9]/)<0?i[t.toUpperCase()]=n[e][t]:i[t]=n[e][t],window.apntag.setKeywords(e,i,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&Ct(window.apntag.setKeywords))return!0},t}(Ia),Ka=R.AD_RENDER_FAILED,Qa=R.AD_RENDER_SUCCEEDED,Ja=R.STALE_RENDER,Ya=R.BID_WON,Xa=R.EXPIRED_RENDER,Za=k,ed=Si("sync",(function(e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Me.resolve()).then((function(t){return null!=t?t:Ia.findBidByAdId(e)})).catch((function(){}))})),td=Si("sync",(function(e){var t;((null===(t=as(e.eventtrackers)[ss])||void 0===t?void 0:t[rs])||[]).forEach((function(e){return Ht(e)})),Pr(Ya,e),Ia.addWinningBid(e)}));function nd(e){var t=e.reason,n=e.message,i=e.bid,r=e.id,o={reason:t,message:n};i&&(o.bid=i,o.adId=i.adId),r&&(o.adId=r),wt("Error rendering ad (id: ".concat(r,"): ").concat(n)),Pr(Ka,o)}function id(e){var t=e.doc,n=e.bid,i=e.id,r={doc:t};n&&(r.bid=n),i&&(r.adId=i),Rs.callAdRenderSucceededBidder(n.adapterCode||n.bidder,n),Pr(Qa,r)}function rd(e,t){switch(e.event){case R.AD_RENDER_FAILED:nd({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case R.AD_RENDER_SUCCEEDED:id({doc:null,bid:t,id:t.adId});break;default:wt("Received event request for unsupported event: '".concat(e.event,"' (adId: '").concat(t.adId,"')"))}}function od(e,t,n){var i=n.resizeFn,r=n.fireTrackers,o=void 0===r?Od:r;if("resizeNativeHeight"===e.action)i(e.width,e.height);else o(e,t)}var sd=l({},ce,rd);sd[de]=od;var ad=Si("sync",(function(e,t){var n=e.ad,i=e.adUrl,r=e.cpm,o=e.originalCpm,s=e.width,a=e.height,d=e.instl,c={AUCTION_PRICE:o||r,CLICKTHROUGH:(null==t?void 0:t.clickUrl)||""};return{ad:on(n,c),adUrl:on(i,c),width:s,height:a,instl:d}})),dd=Si("sync",(function(e){var t=e.renderFn,n=e.resizeFn,i=e.bidResponse,r=e.options,o=e.doc,s=e.isMainDocument,a=void 0===s?o===document&&!tn():s,d=i.mediaType===Ms;if(a||d)nd({reason:U,message:d?"Cannot render video ad without a renderer":"renderAd was prevented from writing to the main document.",bid:i,id:i.adId});else{var c=ad(i,r);t(Object.assign({adId:i.adId},c));var l=c.width,u=c.height;null!=(null!=l?l:u)&&n(l,u)}}));function cd(e){var t=e.renderFn,n=e.resizeFn,i=e.adId,r=e.options,o=e.bidResponse,s=e.doc;hd(o,(function(){if(null!=o){var e,a;if(o.status===G.RENDERED)if(At("Ad id ".concat(i," has been rendered before")),Pr(Ja,o),null!==(e=Se.getConfig("auctionOptions"))&&void 0!==e&&e.suppressStaleRender)return;if(!qa.isBidNotExpired(o))if(At("Ad id ".concat(i," has been expired")),Pr(Xa,o),null!==(a=Se.getConfig("auctionOptions"))&&void 0!==a&&a.suppressExpiredRender)return;try{dd({renderFn:t,resizeFn:n,bidResponse:o,options:r,doc:s})}catch(e){nd({reason:k,message:e.message,id:i,bid:o})}}else nd({reason:D,message:"Cannot find ad '".concat(i,"'"),id:i})}))}function ld(e){var t=Mr(e.metrics);t.checkpoint("bidRender"),t.timeBetween("bidWon","bidRender","render.deferred"),t.timeBetween("auctionEnd","bidRender","render.pending"),t.timeBetween("requestBids","bidRender","render.e2e"),e.status=G.RENDERED}dd.before((function(e,t){var n=t.bidResponse,i=t.doc;!function(e){return!(!e||!e.url&&!e.renderNow)}(n.renderer)?e(t):(!function(e,t,n){var i=null;e.config&&e.config.documentResolver&&(i=e.config.documentResolver(t,document,n)),i||(i=document),e.documentContext=i,e.render(t,e.documentContext)}(n.renderer,n,i),id({doc:i,bid:n,id:n.adId}),e.bail())}),100);var ud=new WeakMap,pd=new WeakSet;function hd(e,t){null!=e?(ud.set(e,t),e.deferRendering||fd(e),gd(e)):t()}function gd(e){pd.has(e)||(pd.add(e),td(e))}function fd(e){var t=ud.get(e);t&&(t(),ld(e),ud.delete(e))}function md(e,t,n){var i;function r(e,n){nd(Object.assign({id:t,bid:i},{reason:e,message:n}))}function o(t,n){var i,r=null===(i=e.defaultView)||void 0===i?void 0:i.frameElement;r&&(t&&(r.width=t,r.style.width&&(r.style.width="".concat(t,"px"))),n&&(r.height=n,r.style.height&&(r.style.height="".concat(n,"px"))))}var s,a=(s={resizeFn:o},function(e,t,n){sd.hasOwnProperty(e)&&sd[e](t,n,s)});function d(t){t.ad?(e.write(t.ad),e.close(),id({doc:e,bid:i,id:i.adId})):_a(i).then((function(n){return n(t,{sendMessage:function(e,t){return a(e,t,i)},mkFrame:xt},e.defaultView)})).then((function(){return id({doc:e,bid:i,id:i.adId})}),(function(e){r((null==e?void 0:e.reason)||k,null==e?void 0:e.message),(null==e?void 0:e.stack)&&wt(e)})),Ft(document.createComment("Creative ".concat(i.creativeId," served by ").concat(i.bidder," Prebid.js Header Bidding")),e,"html")}try{t&&e?ed(t).then((function(r){i=r,cd({renderFn:d,resizeFn:o,adId:t,options:{clickUrl:null==n?void 0:n.clickThrough},bidResponse:r,doc:e})})):r(B,"missing ".concat(t?"doc":"adId"))}catch(e){r(Za,e.message)}}function vd(){if(!window.frames[le])if(document.body){var e=Pt();e.name=le,document.body.appendChild(e)}else window.requestAnimationFrame(vd)}function bd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sd=[],Id=Object.keys(V).map((function(e){return V[e]})),Ed={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},_d=Md(te),xd=Md(ne);function Pd(e){if(e&&e.type&&function(e){if(!e||!Object.keys(Ed).includes(e))return wt("".concat(e," nativeParam is not supported")),!1;return!0}(e.type)&&(e=Ed[e.type]),!e||!e.ortb||Td(e.ortb))return e}function Td(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return wt("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?(wt("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(wt("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!Dt(e))return wt("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!kt(e.img.w)&&!kt(e.img.wmin))return wt("for img asset there must be 'w' or 'wmin' property"),!1;if(!kt(e.img.h)&&!kt(e.img.hmin))return wt("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!kt(e.title.len))return wt("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!kt(e.data.type))return wt("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&kt(e.video.minduration)&&kt(e.video.maxduration)))return wt("video asset is not properly configured"),!1;return!0}(e)}))}function Od(e,t){var n=t.native.ortb||Nd(t.native);return"click"===e.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.fetchURL,r=void 0===i?Ht:i;if(t){var o,s=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),a=(null===(o=e.link)||void 0===o?void 0:o.clicktrackers)||[],d=s[t],c=a;d&&(c=d.clicktrackers||[]),c.forEach((function(e){return r(e)}))}else{var l;((null===(l=e.link)||void 0===l?void 0:l.clicktrackers)||[]).forEach((function(e){return r(e)}))}}(n,null==e?void 0:e.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,i=void 0===n?function(e){return function(e){if(e){var t,n=Pt();it.insertElement(n,document,"body"),(t=n.contentWindow.document).open(),t.write(e),t.close()}}(e)}:n,r=t.fetchURL,o=void 0===r?Ht:r,s=as(e.eventtrackers||[])[os]||{},a=s[rs],d=void 0===a?[]:a,c=s[2],l=void 0===c?[]:c;e.imptrackers&&(d=d.concat(e.imptrackers));d.forEach((function(e){return o(e)})),l=l.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(l=l.concat([e.jstracker]));l.length&&i(l.join("\n"))}(n),e.action}function Cd(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return Object.entries(e).filter((function(e){var i=s(e,2),r=i[0];return i[1]&&(!1===n&&"ext"===r||null==t||t.includes(r))})).forEach((function(e){var r=s(e,2),o=r[0],d=r[1];!1===n&&"ext"===o?i.push.apply(i,a(Cd(d,t,!0))):(n||V.hasOwnProperty(o))&&i.push({key:o,value:kd(d)})})),i}function Rd(e,t,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,r=void 0===i?Ia.index:i,o={message:"assetResponse",adId:e.adId},s=ad(t).native;return s?(o.native=Object.assign({},s),o.renderer=Ea(t),o.rendererVersion=3,null!=n&&(s.assets=s.assets.filter((function(e){var t=e.key;return n.includes(t)})))):s=function(e,t,n){var i,r=wd(wd({},pn(e.native,["rendererUrl","adTemplate"])),{},{assets:Cd(e.native,n),nativeKeys:V});return e.native.ortb?r.ortb=e.native.ortb:null!==(i=t.mediaTypes)&&void 0!==i&&null!==(i=i.native)&&void 0!==i&&i.ortb&&(r.ortb=Ld(e.native,t.nativeOrtbRequest)),r}(t,r.getAdUnit(t),n),Object.assign(o,s)}var Ud=Object.fromEntries(Object.entries(V).map((function(e){var t=s(e,2),n=t[0];return[t[1],n]})));function kd(e){return(null==e?void 0:e.url)||e}function Dd(e){if(e||Dt(e)){var t={ver:"1.2",assets:[]};for(var n in e)if(!oe.includes(n))if(V.hasOwnProperty(n))if("privacyLink"!==n){var i=e[n],r=0;i.required&&Bt(i.required)&&(r=Number(i.required));var o={id:t.assets.length,required:r};if(n in te)o.data={type:ne[te[n]]},i.len&&(o.data.len=i.len);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?ie:re},i.aspect_ratios)if(Ut(i.aspect_ratios))if(i.aspect_ratios.length){var s=i.aspect_ratios[0],a=s.min_width,d=s.min_height;fn(a)&&fn(d)?(o.img.wmin=a,o.img.hmin=d):wt("image.aspect_ratios min_width or min_height are invalid: ",a,d);var c=i.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));c.length>0&&(o.img.ext={aspectratios:c})}else wt("image.aspect_ratios was passed, but it's empty:",i.aspect_ratios);else wt("image.aspect_ratios was passed, but it's not a an array:",i.aspect_ratios);i.sizes&&(2===i.sizes.length&&fn(i.sizes[0])&&fn(i.sizes[1])?(o.img.w=i.sizes[0],o.img.h=i.sizes[1],delete o.img.hmin,delete o.img.wmin):wt("image.sizes was passed, but its value is not an array of integers:",i.sizes))}else"title"===n?o.title={len:i.len||140}:"ext"===n&&(o.ext=i,delete o.required);t.assets.push(o)}else t.privacy=1;else wt("Unrecognized native asset code: ".concat(n,". Asset will be ignored."));return t}wt("Native assets object is empty or not an object: ",e)}function Bd(e){if(Td(e)){var t,n={},i=bd(e.assets);try{var r=function(){var i=t.value;if(i.title){var r={required:!!i.required&&Boolean(i.required),len:i.title.len};n.title=r}else if(i.img){var o={required:!!i.required&&Boolean(i.required)};if(i.img.w&&i.img.h)o.sizes=[i.img.w,i.img.h];else if(i.img.wmin&&i.img.hmin){var s=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(i.img.wmin,i.img.hmin);o.aspect_ratios=[{min_width:i.img.wmin,min_height:i.img.hmin,ratio_width:i.img.wmin/s,ratio_height:i.img.hmin/s}]}i.img.type===re?n.image=o:n.icon=o}else if(i.data){var a=Object.keys(ne).find((function(e){return ne[e]===i.data.type})),d=Object.keys(te).find((function(e){return te[e]===a}));n[d]={required:!!i.required&&Boolean(i.required)},i.data.len&&(n[d].len=i.data.len)}e.privacy&&(n.privacyLink={required:!1})};for(i.s();!(t=i.n()).done;)r()}catch(e){i.e(e)}finally{i.f()}return n}}function jd(e){if(!e||!Ut(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[Ls])||void 0===t?void 0:t.ortb})))return e;var t,n=en(e),i=bd(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.mediaTypes&&r.mediaTypes[Ls]&&r.mediaTypes[Ls].ortb&&(r.mediaTypes[Ls]=Object.assign(vn(r.mediaTypes[Ls],oe),Bd(r.mediaTypes[Ls].ortb)),r.nativeParams=Pd(r.mediaTypes[Ls]))}}catch(e){i.e(e)}finally{i.f()}return n}function Nd(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=s(e,2),i=n[0],r=n[1];switch(i){case"clickUrl":t.link.url=r;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(r)?r:[r];break;case"impressionTrackers":(Array.isArray(r)?r:[r]).forEach((function(e){t.eventtrackers.push({event:os,method:rs,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(r)?r.join(""):r;break;case"privacyLink":t.privacy=r}})),t}function Ld(e,t){var n=wd(wd({},Nd(e)),{},{assets:[]});function i(e,i){var r=t.assets.find(e);null!=r&&(i(r=en(r)),n.assets.push(r))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=kd(e[t]);switch(t){case"title":i((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var r="image"===t?re:ie;i((function(e){return null!=e.img&&e.img.type===r}),(function(e){e.img={url:n}}));break;default:t in te&&i((function(e){return null!=e.data&&e.data.type===ne[te[t]]}),(function(e){e.data={value:n}}))}})),n}function Md(e){var t={};for(var n in e)t[e[n]]=n;return t}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qd=ae,Hd=de,Vd=ce,$d=l(l({},se,(function(e,t,n){cd({renderFn:function(t){e(Object.assign({message:qd,renderer:Ea(n),rendererVersion:3},t))},resizeFn:Wd(t.adId,n),options:t.options,adId:t.adId,bidResponse:n})})),Vd,(function(e,t,n){if(null==n)return void wt("Cannot find ad '".concat(t.adId,"' for x-origin event request"));if(n.status!==G.RENDERED)return void At("Received x-origin event request without corresponding render request for ad '".concat(n.adId,"'"));return rd(t,n)}));function Gd(){window.addEventListener("message",(function(e){!function(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message&&$d.hasOwnProperty(n.message))ed(n.adId,n.message===se).then((function(t){var i,r;$d[n.message]((i=n.adId,r=function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw wt(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return r.apply(void 0,[Object.assign({},e,{adId:i})].concat(n))}),n,t)}))}(e)}),!1)}function Wd(e,t){return function(n,i){!function(e){var t=e.instl,n=e.adId,i=e.adUnitCode,r=e.width,o=e.height;if(t)return;function s(e){return e?e+"px":"100%"}function a(e){var t=d(n,i),r=document.getElementById(t);return r&&r.querySelector(e)}function d(e,t){return Yt()?c(e):function(){if(window.apntag&&Ct(window.apntag.getTag))return!0}()?l(t):t}function c(e){var t=window.googletag.pubads().getSlots().find((function(t){return t.getTargetingKeys().find((function(n){return t.getTargeting(n).includes(e)}))}));return t?t.getSlotElementId():null}function l(e){var t=window.apntag.getTag(e);return t&&t.targetId}["div","iframe"].forEach((function(e){var t=a(e+':not([style*="display: none"])');if(t){var n=t.style;n.width=s(r),n.height=s(o)}else wt("Unable to locate matching page element for adUnitCode ".concat(i,".  Can't resize it to ad's dimensions.  Please review setup."))}))}(Fd(Fd({},t),{},{width:n,height:i,adId:e}))}}Object.assign($d,l({},Hd,(function(e,t,n){if(null==n)return void wt("Cannot find ad for x-origin event request: '".concat(t.adId,"'"));switch(t.action){case"assetRequest":hd(n,(function(){return e(function(e,t){var n=e.assets.map((function(e){return Ud[e]}));return Rd(e,t,n)}(t,n))}));break;case"allAssetRequest":hd(n,(function(){return e(function(e,t){return Rd(e,t,null)}(t,n))}));break;default:od(t,n,{resizeFn:Wd(t.adId,n)}),gd(n)}})));var Kd="__pgPrebid_debugging__";function Qd(){return h().installedModules.includes("debugging")}function Jd(e){return new Me((function(t){Bs(e,fi,"debugging",t)}))}function Yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?Qd:t,i=e.script,r=void 0===i?Jd:i,o=null;return function(){return null==o&&(o=new Me((function(e,t){setTimeout((function(){if(n())e();else{var i="https://cdn.jsdelivr.net/npm/prebid.js@9.50.0/dist/debugging-standalone.js";bt('Debugging module not installed, loading it from "'.concat(i,'"...')),h()._installDebugging=!0,r(i).then((function(){h()._installDebugging({DEBUG_KEY:Kd,hook:Si,config:Se,createBid:li,logger:St("DEBUG:")})})).then(e,t)}}))}))),o}}var Xd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?Yd():t,i=e.hook,r=void 0===i?_i("requestBids"):i,o=null,s=!1;function a(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(o||Me.resolve()).then((function(){return e.apply(t,i)}))}function d(){r.getHooks({hook:a}).remove(),s=!1}return{enable:function(){s||(o=n(),r.before(a,99),s=!0)},disable:d,reset:function(){o=null,d()}}}();Xd.reset;Se.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?Xd.enable():Xd.disable()}));var Zd=Xi("fpdEnrichment"),ec=On((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!Zd.cookiesAreEnabled())return e;var t,n,i=e.split(".");if(2===i.length)return e;var r=-2,o="_rdc".concat(Date.now()),s="writeable";do{t=i.slice(r).join(".");var a=new Date(sn()+1e4).toUTCString();Zd.setCookie(o,s,a,"Lax",t,void 0),Zd.getCookie(o,void 0)===s?(n=!1,Zd.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(r+=-1,n=Math.abs(r)<=i.length)}while(n);return t})),tc=["architecture","bitness","model","platformVersion","fullVersionList"],nc=["brands","mobile","platform"],ic=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=t&&nc.some((function(e){return void 0!==t[e]}))?Object.freeze(oc(1,t)):null;return function(){return n}}(),rc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},i=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tc;if(!i.has(e)){var r=Array.from(e);r.sort(),i.set(e,r.join("|"))}var o=i.get(e);if(!n.hasOwnProperty(o))try{n[o]=t.getHighEntropyValues(e).then((function(e){return jt(e)?null:Object.freeze(oc(2,e))})).catch((function(){return null}))}catch(e){n[o]=Me.resolve(null)}return n[o]}}();function oc(e,t){function n(e,t){var n={brand:e};return Rt(t)&&!Nt(t)&&(n.version=t.split(".")),n}var i={source:e};return t.platform&&(i.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(i.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),void 0!==t.mobile&&(i.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];Rt(n)&&(i[e]=n)})),i}var sc=["dooh","app","site"];function ac(e){return function(t){return sc.reduce((function(n,i){return dc(t,i)&&(null!=n?(At("".concat(e," specifies both '").concat(n,"' and '").concat(i,"'; dropping the latter.")),delete t[i]):n=i),n}),null),t}}function dc(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}function cc(){try{var e=gt(),t=e.scrollY,n=e.scrollX,i=lc(),r=i.height;return{top:t,right:n+i.width,bottom:t+r,left:n}}catch(e){return{}}}function lc(){var e=nt();try{var t=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight||0;return{width:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth||0,height:t}}catch(e){return{}}}function uc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var hc={getRefererInfo:go,findRootDomain:ec,getWindowTop:gt,getWindowSelf:ft,getHighEntropySUA:rc,getLowEntropySUA:ic,getDocument:function(){return document}},gc=ac("FPD"),fc=Si("sync",(function(e){var t,n=[e,(t=Se.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?hc.getHighEntropySUA(t):Me.resolve(hc.getLowEntropySUA())).catch((function(){return null})),Me.resolve("cookieDeprecationLabel"in navigator&&Vi(Zn,Us(fi,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((function(){return null}))];return Me.all(n).then((function(e){var t=s(e,3),n=t[0],i=t[1],r=t[2],o=hc.getRefererInfo();if(Object.entries(bc).forEach((function(e){var t=s(e,2),i=t[0],r=(0,t[1])(n,o);r&&Object.keys(r).length>0&&(n[i]=En({},r,n[i]))})),i&&Dn(n,"device.sua",Object.assign({},i,n.device.sua)),r){var a={cdep:r};Dn(n,"device.ext",Object.assign({},a,n.device.ext))}var d=hc.getDocument().documentElement.lang;d&&Dn(n,"site.ext.data.documentLang",d),n=gc(n);var c,l=uc(sc);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(dc(n,u)){n[u]=En({},yc(n,o),n[u]);break}}}catch(e){l.e(e)}finally{l.f()}return n}))}));function mc(e){try{return e(hc.getWindowTop())}catch(t){return e(hc.getWindowSelf())}}function vc(e){return pn(e,Object.keys(e))}var bc={site:function(e,t){if(!sc.filter((function(e){return"site"!==e})).some(dc.bind(null,e)))return vc({page:t.page,ref:t.ref})},device:function(){return mc((function(e){var t,n=nt().screen.width,i=nt().screen.height,r=lc(),o=r.width,s=r.height,a={w:n,h:i,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift(),ext:{vpw:o,vph:s}};return null!==(t=e.navigator)&&void 0!==t&&t.webdriver&&Dn(a,"ext.webdriver",!0),a}))},regs:function(){var e={};mc((function(e){return e.navigator.globalPrivacyControl}))&&Dn(e,"ext.gpc","1");var t=Se.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function yc(e,t){var n,i,r=uo(t.page,{noLeadingWww:!0}),o=null===(n=mc((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===n||null===(n=n.content)||void 0===n||null===(i=n.replace)||void 0===i?void 0:i.call(n,/\s/g,"");return vc({domain:r,keywords:o,publisher:vc({domain:hc.findRootDomain(r)})})}var Ac=new Map([["format",function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"object"===d(e)}))}],["w",fn],["h",fn],["btype",bn],["battr",bn],["pos",fn],["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e}))}],["topframe",function(e){return[1,0].includes(e)}],["expdir",bn],["api",bn],["id",Rt],["vcm",function(e){return[1,0].includes(e)}]]);function wc(e,t){return function(){if(document.prerendering&&e()){var n=this,i=Array.from(arguments);return new Promise((function(e){document.addEventListener("prerenderingchange",(function(){yt("Auctions were suspended while page was prerendering"),e(t.apply(n,i))}),{once:!0})}))}return Promise.resolve(t.apply(this,arguments))}}var Sc=h(),Ic=tr.triggerUserSyncs,Ec=R.ADD_AD_UNITS,_c=R.REQUEST_BIDS,xc=R.SET_TARGETING,Pc={bidWon:function(e){if(!Ia.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(Kt).filter(Wt).includes(e))return void wt('The "'+e+'" placement is not defined.');return!0}};function Tc(e,t){var n=[];return Ut(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return bn(e,2)}))?n=e:bn(e,2)&&n.push(e)),n}function Oc(e,t){var n=x(e,"ortb2Imp.".concat(t)),i=x(e,"mediaTypes.".concat(t));if(n||i){var r=l(l({},Ms,rr),zs,Ac)[t];r&&a(r).forEach((function(n){var i=s(n,2),r=i[0],o=(i[1],x(e,"mediaTypes.".concat(t,".").concat(r))),a=x(e,"ortb2Imp.".concat(t,".").concat(r));null==o&&null==a||(null==o?Dn(e,"mediaTypes.".concat(t,".").concat(r),a):null==a?Dn(e,"ortb2Imp.".concat(t,".").concat(r),o):(At("adUnit ".concat(e.code,": specifies conflicting ortb2Imp.").concat(t,".").concat(r," and mediaTypes.").concat(t,".").concat(r,", the latter will be ignored"),e),Dn(e,"mediaTypes.".concat(t,".").concat(r),a)))}))}}function Cc(e){var t,n,i,r,o,s,a=en(e),d=a.mediaTypes.banner,c=null==d.sizes?null:Tc(d.sizes),l=null!==(t=null===(n=e.ortb2Imp)||void 0===n||null===(n=n.banner)||void 0===n?void 0:n.format)&&void 0!==t?t:null==d?void 0:d.format;if(null!=l){Dn(a,"ortb2Imp.banner.format",l),d.format=l;try{s=l.filter((function(t){var n=t.w,i=t.h,r=t.wratio,o=t.hratio;return null!=(null!=n?n:i)&&null!=(null!=r?r:o)?(At("Ad unit banner.format specifies both w/h and wratio/hratio",e),!1):null!=n&&null!=i||null!=r&&null!=o})).map((function(e){var t=e.w,n=e.h,i=e.wratio,r=e.hratio;return[null!=t?t:i,null!=n?n:r]}))}catch(t){wt("Invalid format definition on ad unit ".concat(e.code),l)}null==s||null==c||In(c,s)||At("Ad unit ".concat(e.code," has conflicting sizes and format definitions"),e)}var u=null!==(i=null!=s?s:c)&&void 0!==i?i:[],p=null!==(r=null===(o=e.ortb2Imp)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.expdir)&&void 0!==r?r:d.expdir;return null!=p&&(d.expdir=p,Dn(a,"ortb2Imp.banner.expdir",p)),u.length>0?(d.sizes=u,a.sizes=u):(wt("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete a.mediaTypes.banner),Oc(a,"banner"),a}function Rc(e){var t=en(e),n=t.mediaTypes.video;if(n.playerSize){var i="number"==typeof n.playerSize[0]?2:1,r=Tc(n.playerSize,i);r.length>0?(2===i&&yt("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=r,t.sizes=r):(wt("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return or(t),Oc(t,"video"),t}function Uc(e){function t(t){return wt('Error in adUnit "'.concat(e.code,'": ').concat(t,". Removing native request from ad unit"),e),delete i.mediaTypes.native,i}function n(e){for(var t=0,n=["sendTargetingKeys","types"];t<n.length;t++){var i=n[t];if(r.hasOwnProperty(i)){var o=e(i);if(o)return o}}}var i=en(e),r=i.mediaTypes.native;if(r.ortb){var o;if(null!==(o=r.ortb.assets)&&void 0!==o&&o.some((function(e){return!kt(e.id)||e.id<0||e.id%1!=0})))return t("native asset ID must be a nonnegative integer");if(n((function(e){return t('ORTB native requests cannot specify "'.concat(e,'"'))})))return i;var s=Object.keys(V).filter((function(e){return V[e].includes("hb_native_")})),a=Object.keys(r).filter((function(e){return s.includes(e)}));a.length>0&&(wt("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(a," keys from request.")),a.forEach((function(e){return delete i.mediaTypes.native[e]})))}else n((function(e){return"mediaTypes.native.".concat(e," is deprecated, consider using native ORTB instead")}));return r.image&&r.image.sizes&&!Array.isArray(r.image.sizes)&&(wt("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete i.mediaTypes.native.image.sizes),r.image&&r.image.aspect_ratios&&!Array.isArray(r.image.aspect_ratios)&&(wt("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete i.mediaTypes.native.image.aspect_ratios),r.icon&&r.icon.sizes&&!Array.isArray(r.icon.sizes)&&(wt("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete i.mediaTypes.native.icon.sizes),i}function kc(e,t){var n,i=null==e||null===(n=e.mediaTypes)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.pos;kt(i)&&!isNaN(i)&&isFinite(i)||(At("Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number")),delete e.mediaTypes[t].pos);return e}function Dc(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,i=e.bids;return null==i||Ut(i)?null==i&&null==e.ortb2Imp?(wt(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=i&&0!==i.length||(e.bids=[{bidder:null}],bt(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(wt(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(wt(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=Xd,n=null;try{n=e.getItem(Kd)}catch(e){}null!==n&&t.enable()}}(),Sc.bidderSettings=Sc.bidderSettings||{},Sc.libLoaded=!0,Sc.version="v9.50.0",yt("Prebid.js v9.50.0 loaded"),Sc.installedModules=Sc.installedModules||[],Sc.adUnits=Sc.adUnits||[],Sc.triggerUserSyncs=Ic;var Bc={validateAdUnit:Dc,validateBannerMediaType:Cc,validateSizes:Tc};Object.assign(Bc,{validateNativeMediaType:Uc}),Object.assign(Bc,{validateVideoMediaType:Rc});var jc,Nc=Si("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=Dc(e))){var n,i,r,o=e.mediaTypes;o.banner&&(n=Cc(e),o.banner.hasOwnProperty("pos")&&(n=kc(n,"banner"))),o.video&&(i=Rc(n||e),o.video.hasOwnProperty("pos")&&(i=kc(i,"video"))),o.native&&(r=Uc(i||(n||e)));var s=Object.assign({},n,i,r);t.push(s)}})),t}),"checkAdUnitSetup");function Lc(e){e.forEach((function(e){var t,n,i;null!=(i=null==(t=e)||null===(n=t.mediaTypes)||void 0===n?void 0:n.video)&&null==i.plcmt&&(i.context===nr||[2,3,4].includes(i.placement)?i.plcmt=4:i.context!==nr&&[2,6].includes(i.playbackmethod)&&(i.plcmt=2))}))}function Mc(e){var t=Ia[e]().filter((function(e){return Ia.getAdUnitCodes().includes(e.adUnitCode)})),n=Ia.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(Wt).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return l({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}Sc.getAdserverTargetingForAdUnitCodeStr=function(e){if(yt("Invoking pgPrebid.getAdserverTargetingForAdUnitCodeStr",arguments),e)return function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"):""}(Sc.getAdserverTargetingForAdUnitCode(e));bt("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},Sc.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=Ia.getAllBidsForAdUnitCode(e).filter(Ha);return t.length?t.reduce(Da):{}}bt("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},Sc.getAdserverTargetingForAdUnitCode=function(e){return Sc.getAdserverTargeting(e)[e]},Sc.getAdserverTargeting=function(e){return yt("Invoking pgPrebid.getAdserverTargeting",arguments),Wa.getAllTargeting(e)},Sc.getConsentMetadata=function(){return yt("Invoking pgPrebid.getConsentMetadata"),Ho.getConsentMeta()},Sc.getNoBids=function(){return yt("Invoking pgPrebid.getNoBids",arguments),Mc("getNoBids")},Sc.getNoBidsForAdUnitCode=function(e){return{bids:Ia.getNoBids().filter((function(t){return t.adUnitCode===e}))}},Sc.getBidResponses=function(){return yt("Invoking pgPrebid.getBidResponses",arguments),Mc("getBidsReceived")},Sc.getBidResponsesForAdUnitCode=function(e){return{bids:Ia.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},Sc.setTargetingForGPTAsync=function(e,t){yt("Invoking pgPrebid.setTargetingForGPTAsync",arguments),Yt()?Wa.setTargetingForGPT(e,t):wt("window.googletag is not defined on the page")},Sc.setTargetingForAst=function(e){yt("Invoking pgPrebid.setTargetingForAn",arguments),Wa.isApntagDefined()?(Wa.setTargetingForAst(e),Pr(xc,Wa.getAllTargeting())):wt("window.apntag is not defined on the page")},Sc.renderAd=Si("async",(function(e,t,n){yt("Invoking pgPrebid.renderAd",arguments),bt("Calling renderAd with adId :"+t),md(e,t,n)})),Sc.removeAdUnit=function(e){(yt("Invoking pgPrebid.removeAdUnit",arguments),e)?(Ut(e)?e:[e]).forEach((function(e){for(var t=Sc.adUnits.length-1;t>=0;t--)Sc.adUnits[t].code===e&&Sc.adUnits.splice(t,1)})):Sc.adUnits=[]},Sc.requestBids=(jc=Si("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,i=e.adUnits,r=e.adUnitCodes,o=e.labels,a=e.auctionId,d=e.ttlBuffer,c=e.ortb2,l=e.metrics,u=e.defer;Pr(_c);var p=n||Se.getConfig("bidderTimeout");yt("Invoking pgPrebid.requestBids",arguments),null==r||Array.isArray(r)||(r=[r]),r&&r.length?i=i.filter((function(e){return r.includes(e.code)})):r=i&&i.map((function(e){return e.code})),r=r.filter(Wt);var h={global:En({},Se.getAnyConfig("ortb2")||{},c||{}),bidder:Object.fromEntries(Object.entries(Se.getBidderConfig()).map((function(e){var t=s(e,2);return[t[0],en(t[1].ortb2)]})).filter((function(e){var t=s(e,2);return t[0],null!=t[1]})))};return fc(Me.resolve(h.global)).then((function(e){return h.global=e,zc({bidsBackHandler:t,timeout:p,adUnits:i,adUnitCodes:r,labels:o,auctionId:a,ttlBuffer:d,ortb2Fragments:h,metrics:l,defer:u})}))}),"requestBids"),Ci(jc,wc((function(){return!Se.getConfig("allowPrerendering")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||Sc.adUnits;return e.adUnits=Ut(t)?t.slice():[t],e.metrics=Fr(),e.metrics.checkpoint("requestBids"),e.defer=Fe({promiseFactory:function(e){return new Promise(e)}}),jc.call(this,e),e.defer.promise}))));var zc=Si("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,i=e.adUnits,r=e.ttlBuffer,o=e.adUnitCodes,s=e.labels,a=e.auctionId,d=e.ortb2Fragments,c=e.metrics,l=e.defer,u=_s(Se.getConfig("s2sConfig")||[]);function p(e,n,i){if("function"==typeof t)try{t(e,n,i)}catch(e){wt("Error executing bidsBackHandler",null,e)}l.resolve({bids:e,timedOut:n,auctionId:i})}Lc(i),i=Mr(c).measureTime("requestBids.validate",(function(){return Nc(i)}));var h={};if(i.forEach((function(e){var t,n=Object.keys(e.mediaTypes||{banner:"banner"}),i=e.bids.map((function(e){return e.bidder})),o=Rs.bidderRegistry,s=i.filter((function(e){return!u.has(e)}));e.adUnitId=at();var a=null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid;a&&(h.hasOwnProperty(e.code)?At("Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '".concat(e.code,"'")):h[e.code]=a),null==r||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=r),s.forEach((function(t){var i=o[t],r=i&&i.getSpec&&i.getSpec(),s=r&&r.supportedMediaTypes||["banner"];n.some((function(e){return s.includes(e)}))||(At(function(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))}))})),i&&0!==i.length){i.forEach((function(e){var t,n=(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid)||h[e.code]||at();h.hasOwnProperty(e.code)||(h[e.code]=n),e.transactionId=n,Dn(e,"ortb2Imp.ext.tid",n)}));var g=Ia.createAuction({adUnits:i,adUnitCodes:o,callback:p,cbTimeout:n,labels:s,auctionId:a,ortb2Fragments:d,metrics:c}),f=i.length;f>15&&yt("Current auction ".concat(g.getAuctionId()," contains ").concat(f," adUnits."),i),o.forEach((function(e){return Wa.setLatestAuctionForAdUnit(e,g.getAuctionId())})),g.callBids()}else bt("No adUnits configured. No bids requested."),p()}),"startAuction");Sc.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(Qi),n(Fc),e.call(this,t)}),49),Sc.addAdUnits=function(e){yt("Invoking pgPrebid.addAdUnits",arguments),Sc.adUnits.push.apply(Sc.adUnits,Ut(e)?e:[e]),Pr(Ec)},Sc.onEvent=function(e,t,n){yt("Invoking pgPrebid.onEvent",arguments),Ct(t)?!n||Pc[e].call(null,n)?Er(e,t,n):wt('The id provided is not valid for event "'+e+'" and no handler was set.'):wt('The event handler provided is not a function and was not set on event "'+e+'".')},Sc.offEvent=function(e,t,n){yt("Invoking pgPrebid.offEvent",arguments),n&&!Pc[e].call(null,n)||_r(e,t,n)},Sc.getEvents=function(){return yt("Invoking pgPrebid.getEvents"),xr()},Sc.registerBidAdapter=function(e,t,n){yt("Invoking pgPrebid.registerBidAdapter",arguments);try{var i=n?Qr(n):e();Rs.registerBidAdapter(i,t)}catch(e){wt("Error registering bidder adapter : "+e.message)}},Sc.registerAnalyticsAdapter=function(e){yt("Invoking pgPrebid.registerAnalyticsAdapter",arguments);try{Rs.registerAnalyticsAdapter(e)}catch(e){wt("Error registering analytics adapter : "+e.message)}},Sc.createBid=function(e){return yt("Invoking pgPrebid.createBid",arguments),li(e)};var Fc=[],qc=Si("async",(function(e){e&&!jt(e)?(yt("Invoking pgPrebid.enableAnalytics for: ",e),Rs.enableAnalytics(e)):wt("pgPrebid.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");function Hc(e){if("function"==typeof e)try{e.call()}catch(e){wt("Error processing command :",e.message,e.stack)}else wt("Commands written into pgPrebid.cmd.push must be wrapped in a function")}function Vc(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){wt("Error processing command :","prebid.js",e)}}))}Sc.enableAnalytics=function(e){Fc.push(qc.bind(this,e))},Sc.aliasBidder=function(e,t,n){yt("Invoking pgPrebid.aliasBidder",arguments),e&&t?Rs.aliasBidAdapter(e,t,n):wt("bidderCode and alias must be passed as arguments","pgPrebid.aliasBidder")},Sc.aliasRegistry=Rs.aliasRegistry,Se.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete Sc.aliasRegistry})),Sc.getAllWinningBids=function(){return Ia.getAllWinningBids()},Sc.getAllPrebidWinningBids=function(){return At("getAllPrebidWinningBids may be removed or renamed in a future version. This function returns bids that have won in prebid and have had targeting set but have not (yet?) won in the ad server. It excludes bids that have been rendered."),Ia.getBidsReceived().filter((function(e){return e.status===G.BID_TARGETING_SET}))},Sc.getHighestCpmBids=function(e){return Wa.getWinningBids(e)},Sc.clearAllAuctions=function(){Ia.clearAllAuctions()},Sc.markWinningBidAsUsed=function(e){var t,n=e.adId,i=e.adUnitCode,r=e.analytics,o=void 0!==r&&r,s=e.events,a=void 0!==s&&s;i&&null==n?t=Wa.getWinningBids(i):n?t=Ia.getBidsReceived().filter((function(e){return e.adId===n})):At("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(o||a?td(t[0]):Ia.addWinningBid(t[0]),ld(t[0]))},Sc.getConfig=Se.getAnyConfig,Sc.readConfig=Se.readAnyConfig,Sc.mergeConfig=Se.mergeConfig,Sc.mergeBidderConfig=Se.mergeBidderConfig,Sc.setConfig=Se.setConfig,Sc.setBidderConfig=Se.setBidderConfig,Sc.que.push((function(){return Gd()})),Sc.processQueue=wc((function(){return h().delayPrerendering}),(function(){Sc.que.push=Sc.cmd.push=Hc,vd(),Si.ready(),Vc(Sc.que),Vc(Sc.cmd)})),Sc.triggerBilling=function(e){var t=e.adId,n=e.adUnitCode;Ia.getAllWinningBids().filter((function(e){return e.adId===t||null==t&&e.adUnitCode===n})).forEach((function(e){Rs.triggerBilling(e),fd(e)}))};const $c=Sc;var Gc=[];var Wc=Hr("fpd",(function(e,t){var n=this;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.global,n=void 0===t?{}:t,i=e.bidder,r=void 0===i?{}:i,o=Se.getConfig("firstPartyData")||{},s=Me.resolve({global:n,bidder:r});return Gc.sort((function(e,t){return(e.queue||1)-(t.queue||1)})).forEach((function(e){s=s.then((function(t){var n=t.global,i=t.bidder;return Me.resolve(e.processFpd(o,{global:n,bidder:i})).catch((function(t){return wt("Error in FPD module ".concat(e.name),t),{}})).then((function(e){return{global:e.global||n,bidder:e.bidder||i}}))}))})),s})(t.ortb2Fragments).then((function(i){Object.assign(t.ortb2Fragments,i),e.call(n,t)}))}));Ti("firstPartyData",(function(e){Gc.push(e)})),_i("startAuction").before(Wc,10),g("fpdModule");var Kc=["request","imp","bidResponse","response"],Qc=["default","pbs"],Jc=Kc[0],Yc=Kc[1],Xc=Kc[2],Zc=Kc[3],el=Qc[0],tl=Qc[1],nl=new Set(Kc);var il,rl=(il={},{registerOrtbProcessor:function(e){var t=e.type,n=e.name,i=e.fn,r=e.priority,o=void 0===r?0:r,s=e.dialects,a=void 0===s?[el]:s;if(!nl.has(t))throw new Error("ORTB processor type must be one of: ".concat(Kc.join(", ")));a.forEach((function(e){il.hasOwnProperty(e)||(il[e]={}),il[e].hasOwnProperty(t)||(il[e][t]={}),il[e][t][n]={priority:o,fn:i}}))},getProcessors:function(e){return il[e]||{}}}),ol=rl.registerOrtbProcessor,sl=rl.getProcessors;function al(){var e=[];return{submit:function(t,n,i){var r=[n,setTimeout((function(){e.splice(e.indexOf(r),1),i()}),t)];e.push(r)},resume:function(){for(;e.length;){var t=s(e.shift(),2),n=t[0],i=t[1];clearTimeout(i),n()}}}}var dl,cl,ll=[],ul={},pl=!1,hl=!0,gl="USD",fl=!1,ml={},vl={},bl=Fe(),yl=al(),Al=0;function wl(e){if(dl="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",null!==e.rates&&"object"===d(e.rates)&&(ml.conversions=e.rates,pl=!0,hl=!1),null!==e.defaultRates&&"object"===d(e.defaultRates)&&(cl=e.defaultRates,ml.conversions=cl,pl=!0),"string"==typeof e.adServerCurrency){Al=e.auctionDelay,yt("enabling currency support",arguments),gl=e.adServerCurrency,e.conversionRateFile&&(yt("currency using override conversionRateFile:",e.conversionRateFile),dl=e.conversionRateFile);var t=dl.indexOf("$$TODAY$$");if(-1!==t){var n=new Date,i="".concat(n.getMonth()+1),r="".concat(n.getDate());i.length<2&&(i="0".concat(i)),r.length<2&&(r="0".concat(r));var o="".concat(n.getFullYear()).concat(i).concat(r);dl="".concat(dl.substring(0,t)).concat(o).concat(dl.substring(t+9,dl.length))}ul={},fl||(fl=!0,h().convertCurrency=function(e,t,n){return parseFloat(e)*Tl(t,n)},_i("addBidResponse").before(_l,100),_i("responsesReady").before(El),fc.before(Cl),_i("requestBids").before(Ul,50),Er(R.AUCTION_TIMEOUT,xl),Er(R.AUCTION_INIT,Il),Il())}else Al=0,yt("disabling currency support"),fl&&(_i("addBidResponse").getHooks({hook:_l}).remove(),_i("responsesReady").getHooks({hook:El}).remove(),fc.getHooks({hook:Cl}).remove(),_i("requestBids").getHooks({hook:Ul}).remove(),_r(R.AUCTION_TIMEOUT,xl),_r(R.AUCTION_INIT,Il),delete h().convertCurrency,gl="USD",ul={},fl=!1,pl=!1,hl=!0,ml={},vl={},bl=Fe());"object"===d(e.bidderCurrencyDefault)&&(vl=e.bidderCurrencyDefault)}function Sl(e){cl?(At(e),At("Currency failed loading rates, falling back to currency.defaultRates")):wt(e)}function Il(){hl?(hl=!1,pl=!1,Fn(dl,{success:function(e){try{ml=JSON.parse(e),yt("currencyRates set to "+JSON.stringify(ml)),ul={},pl=!0,Pl(),yl.resume()}catch(t){Sl("Failed to parse currencyRates response: "+e)}},error:function(){Sl.apply(void 0,arguments),pl=!0,Pl(),yl.resume(),hl=!0}})):Pl()}function El(e,t){e(t.then((function(){return bl.promise})))}Se.getConfig("currency",(function(e){return wl(e.currency)}));var _l=Vr("currency",(function(e,t,n,i){if(!n)return e.call(this,t,n,i);var r=n.bidderCode||n.bidder;if(vl[r]){var o=vl[r];n.currency&&o!==n.currency?At("Currency default '".concat(r,": ").concat(o,"' ignored. adapter specified '").concat(n.currency,"'")):n.currency=o}if(n.currency||(At('Currency not specified on bid.  Defaulted to "USD"'),n.currency="USD"),n.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*Tl(this.currency,e)).toFixed(3)},n.currency===gl)return e.call(this,t,n,i);ll.push([e,this,t,n,i]),fl&&!pl||Pl()}));function xl(e){var t=e.auctionId;ll=ll.filter((function(e){var n=s(e,5),i=(n[0],n[1],n[2],n[3]),r=n[4];if(i.auctionId!==t)return!0;r(Y)}))}function Pl(){for(;ll.length>0;){var e=s(ll.shift(),5),t=e[0],n=e[1],i=e[2],r=e[3],o=e[4];if(void 0!==r&&"currency"in r&&"cpm"in r){var a=r.currency;try{var d=Tl(a);1!==d&&(r.cpm=(parseFloat(r.cpm)*d).toFixed(4),r.currency=gl)}catch(e){At("getCurrencyConversion threw error: ",e),o(Y);continue}}t.call(n,i,r,o)}bl.resolve()}function Tl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gl,i=null,r="".concat(e,"->").concat(n);if(r in ul)bt("Using conversionCache value "+(i=ul[r])+" for "+r);else if(!1===fl){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");i=1}else if(e===n)i=1;else if(e in ml.conversions){if(!(n in(t=ml.conversions[e])))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");yt("getCurrencyConversion using direct "+e+" to "+n+" conversionRate "+(i=t[n]))}else if(n in ml.conversions){if(!(e in(t=ml.conversions[n])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");yt("getCurrencyConversion using reciprocal "+e+" to "+n+" conversionRate "+(i=Ol(1/t[e],4)))}else{var o=Object.keys(ml.conversions)[0];if(!(e in ml.conversions[o]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var s=1/ml.conversions[o][e];if(!(n in ml.conversions[o]))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");yt("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+n+" conversionRate "+(i=Ol(s*ml.conversions[o][n],4)))}return r in ul||(bt("Adding conversionCache value "+i+" for "+r),ul[r]=i),i}function Ol(e,t){for(var n=1,i=0;i<t;i++)n+="0";return Math.round(e*n)/n}function Cl(e,t){return e(t.then((function(e){return Dn(e,"ext.prebid.adServerCurrency",gl),e})))}ol({type:Jc,name:"currency",fn:function(e,t,n){fl&&(e.cur=e.cur||[n.currency||gl])}});var Rl,Ul=Hr("currency",(function(e,t){var n,i=(n=this,function(){return e.call(n,t)});!pl&&Al>0?yl.submit(Al,i,(function(){At("".concat("currency",": Fetch attempt did not return in time for auction ").concat(t.auctionId)),i()})):i()}));g("currency");var kl={},Dl=Vr("dsa",(function(e,t,n,i){var r,o;kl.hasOwnProperty(n.auctionId)||(kl[n.auctionId]=null===(r=Ia.index.getAuction(n))||void 0===r||null===(o=r.getFPD)||void 0===o||null===(o=o.call(r))||void 0===o||null===(o=o.global)||void 0===o||null===(o=o.regs)||void 0===o||null===(o=o.ext)||void 0===o?void 0:o.dsa);var s,a,d=kl[n.auctionId];d&&(null!==(a=n.meta)&&void 0!==a&&a.dsa?(0===d.pubrender&&0===n.meta.dsa.adrender||2===d.pubrender&&1===n.meta.dsa.adrender)&&(s=Z):1===d.dsarequired?At("dsaControl: ".concat(X,"; will still be accepted as regs.ext.dsa.dsarequired = 1"),n):[2,3].includes(d.dsarequired)&&(s=X));if(!s)return e.call(this,t,n,i);i(s)}));function Bl(e){e&&null==Rl?(_i("addBidResponse").before(Dl),Rl=Ia.onExpiry((function(e){delete kl[e.getAuctionId()]})),yt("dsaControl: DSA bid validation is enabled")):e||null==Rl||(_i("addBidResponse").getHooks({hook:Dl}).remove(),Rl(),Rl=null,yt("dsaControl: DSA bid validation is disabled"))}function jl(e){return function(t){return gn(t,e)}}function Nl(e){var t;return Yt()&&(t=window.googletag.pubads().getSlots().find(jl(e))),t}function Ll(e){var t=Nl(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}Bl(!0),Se.getConfig("consentManagement",(function(e){var t,n;Bl(null===(t=null===(n=e.consentManagement)||void 0===n||null===(n=n.dsa)||void 0===n?void 0:n.validateBids)||void 0===t||t)})),g("dsaControl");var Ml=new Map;function zl(e){var t;return Ml.has(e)?t=Ml.get(e):(t=e.getBoundingClientRect(),Ml.set(e,t)),t}zc.before((function(e,t){Ml.clear(),e(t)}));var Fl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.w,i=t.h,r=zl(e),o=r.width,s=r.height,a=r.left,d=r.top,c=r.right,l=r.bottom;return(0===o||0===s)&&n&&i&&(o=n,s=i,c=a+n,l=d+i),{width:o,height:s,left:a,top:d,right:c,bottom:l,x:r.x,y:r.y}}(e,{w:t.w,h:t.h}),i=nt(),r=i.innerHeight,o=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:i.innerWidth,bottom:r},n]);return null!==o?o.width*o.height/(n.width*n.height)*100:0};function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vl="https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",$l=/^[a-zA-Z0-9_-]{22}$/,Gl="siab",Wl="inview",Kl="instream",Ql=["mimes","minduration","maxduration","placement","plcmt","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],Jl={uniqueSiteIds:[]},Yl="nm";function Xl(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function Zl(e){return"".concat(e.bidId)}function eu(e){var t,n=e.bidRequests,i=e.gdprConsent,r=void 0===i?{}:i,o=e.uspConsent,s=e.gppConsent,a=void 0===s?{}:s,d=e.pageUrl,c=e.referer,l=e.ttxSettings,u=e.bidderRequest,p={},h=n[0],g=h.params,f=g.siteId,m=g.test,v=Se.getConfig("coppa");p.imp=[],n.forEach((function(e){p.imp.push(function(e){var t=x(e,"ortb2Imp.ext.gpid"),n={id:e.bidId,ext:Hl({ttx:{prod:x(e,"params.productId")}},t?{gpid:t}:{})};x(e,"mediaTypes.banner")&&(n.banner=Hl({},function(e){var t,n=x(e,"mediaTypes.banner",{}),i=(o=e.adUnitCode,document.getElementById(o)||document.getElementById(function(e){if(Yt())for(var t=googletag.pubads().getSlots(),n=jl(e),i=0;i<t.length;i++)if(n(t[i])){var r=t[i].getSlotElementId();return yt("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(r)),r}return At("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(o))),r=function(e){if(Ut(e)&&2===e.length&&!Ut(e[0]))return[nu(e)];return e.map(nu)}(n.sizes);var o;t="function"==typeof e.getFloor?r.map((function(t){var n,i=ou(e,t,zs);return i&&(n={ext:{ttx:{bidfloors:[i]}}}),Object.assign({},t,n)})):r;var s=function(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}(r),a=function(e){var t=isNaN(e)?e:Math.round(e);return{ttx:{viewability:{amount:t}}}}(function(e){return!function(){try{return ft()!==gt()}catch(e){return!0}}()&&null!==e}(i)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.w,r=n.h;return"visible"===t.document.visibilityState?Fl(e,{w:i,h:r}):0}(i,gt(),s):Yl);return{format:t,ext:a}}(e)));x(e,"mediaTypes.video")&&(n.video=function(e){var t,n=x(e,"mediaTypes.video",{}),i=x(e,"params.video",{}),r=Hl(Hl({},n),i),o={},s=nu(r.playerSize[0]),a=s.w,d=s.h;o.w=a,o.h=d,Ql.forEach((function(e){r.hasOwnProperty(e)&&(o[e]=r[e])}));var c=ru(e),l=function(){var e=2;return o.placement?(At("[33Across Adapter] The ORTB field `placement` is deprecated, please use `plcmt` instead"),o.placement):e};null!==(t=o.plcmt)&&void 0!==t||(o.plcmt=l()),c===Kl&&(o.startdelay=o.startdelay||0);if("function"==typeof e.getFloor){var u=ou(e,{w:o.w,h:o.h},Ms);u&&Object.assign(o,{ext:{ttx:{bidfloors:[u]}}})}return o}(e));return n}(e))})),p.site={id:f},p.device=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ft(),n={ext:{ttx:Hl(Hl({},au()),{},{pxr:t.devicePixelRatio,vp:su(),ah:t.screen.availHeight,mtp:t.navigator.maxTouchPoints})}};e.sua&&(n.sua=vn(e.sua,["browsers","platform","model","mobile"]));return n}(null===(t=h.ortb2)||void 0===t?void 0:t.device),d&&(p.site.page=d),c&&(p.site.ref=c),p.id=null==u?void 0:u.bidderRequestId,r.consentString&&(p.user=tu(p.user,{consent:r.consentString})),Array.isArray(h.userIdAsEids)&&h.userIdAsEids.length>0&&(p.user=tu(p.user,{eids:h.userIdAsEids})),p.regs=tu(p.regs,{gdpr:Number(r.gdprApplies)}),o&&(p.regs=tu(p.regs,{us_privacy:o})),a.gppString&&Object.assign(p.regs,{gpp:a.gppString,gpp_sid:a.applicableSections}),void 0!==v&&(p.regs.coppa=Number(!!v)),p.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"9.50.0"}]}},h.schain&&(p.source=tu(p.source,{schain:h.schain})),1===m&&(p.test=1);return{method:"POST",url:l&&l.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(f),data:JSON.stringify(p),options:{contentType:"text/plain",withCredentials:!0}}}function tu(){return En({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{ext:arguments.length>1?arguments[1]:void 0})}function nu(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function iu(e){return En({},e,{params:{productId:ru(e)}})}function ru(e){var t=e.params,n=e.mediaTypes,i=n.banner,r=n.video;return r&&!i&&"instream"===r.context?Kl:t.productId===Wl?t.productId:Gl}function ou(e,t,n){var i=e.getFloor({currency:"USD",mediaType:n,size:[t.w,t.h]});if(!isNaN(null==i?void 0:i.floor)&&"USD"===(null==i?void 0:i.currency))return i.floor}function su(){var e=function(){var e=ft();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement;return{w:e.clientWidth,h:e.clientHeight}}function au(){var e=nt(),t=e.innerWidth,n=e.innerHeight,i=e.screen,r=[Math.max(i.width,i.height),Math.min(i.width,i.height)],o=r[0],s=r[1];return n>t?{w:s,h:o}:{w:o,h:s}}var du={NON_MEASURABLE:Yl,code:"33across",aliases:["33across_mgni"],supportedMediaTypes:[zs,Ms],gvlid:58,isBidRequestValid:function(e){return function(e){if(!e.params)return!1;if(!function(e){var t=x(e,"params.siteId","")||"";if(null===t.trim().match($l))return!1;return!0}(e))return!1;return!0}(e)&&function(e){var t=x(e,"mediaTypes.banner");if(void 0===t)return!0;if(!Array.isArray(t.sizes))return!1;return!0}(e)&&function(e){var t=x(e,"mediaTypes.video"),n=x(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;var i=Hl(Hl({},t),n);if(!Array.isArray(i.mimes)||0===i.mimes.length)return!1;if(!Array.isArray(i.protocols)||0===i.protocols.length)return!1;if([i.placement,i.plcmt].some((function(e){return void 0!==e&&"number"!=typeof e})))return!1;if("instream"===t.context&&void 0!==i.startdelay&&"number"!=typeof i.startdelay)return!1;return!0}(e)},buildRequests:function(e,t){var n=function(e,t){var n,i,r=Object.assign({},Se.getConfig("ttxSettings")),o=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent);return Jl.uniqueSiteIds=e.map((function(e){return e.params.siteId})).filter(Wt),{ttxSettings:r,gdprConsent:o,uspConsent:null==t?void 0:t.uspConsent,gppConsent:null==t?void 0:t.gppConsent,pageUrl:null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.page,referer:null==t||null===(i=t.refererInfo)||void 0===i?void 0:i.ref}}(e,t),i=n.ttxSettings,r=n.gdprConsent,o=n.uspConsent,s=n.gppConsent,a=n.pageUrl,d=n.referer,c=function(e,t){var n=t.map(iu),i=e&&e.enableSRAMode;return function(e,t){var n={};return e.forEach((function(e){var i=t(e);n[i]=n[i]||[],n[i].push(e)})),n}(n,!0===i?Xl:Zl)}(i,e),l=[];for(var u in c)l.push(eu({bidRequests:c[u],gdprConsent:r,uspConsent:o,gppConsent:s,pageUrl:a,referer:d,ttxSettings:i,bidderRequest:t}));return l},interpretResponse:function(e,t){var n=e.body,i=n.seatbid,r=n.cur,o=void 0===r?"USD":r;return Ut(i)?i.filter((function(e){return Ut(e.bid)&&e.bid.length>0})).reduce((function(e,t){return e.concat(t.bid.map((function(e){return function(e,t){var n=e.adomain&&e.adomain.length,i={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:x(e,"ext.ttx.mediaType",zs),currency:t,netRevenue:!0};n&&(i.meta={advertiserDomains:e.adomain});if(i.mediaType===Ms){"xml"===x(e,"ext.ttx.vastType","xml")?i.vastXml=i.ad:i.vastUrl=i.ad}return i}(e,o)})))}),[]):[]},getUserSyncs:function(e,t,n,i,r){var o=e.iframeEnabled?Jl.uniqueSiteIds.map((function(e){return function(e){var t=e.siteId,n=void 0===t?"zzz000000000003zzz":t,i=e.gdprConsent,r=void 0===i?{}:i,o=e.uspConsent,s=e.gppConsent,a=void 0===s?{}:s,d=Se.getConfig("ttxSettings"),c=d&&d.syncUrl||Vl,l=r.consentString,u=r.gdprApplies,p=a.gppString,h=void 0===p?"":p,g=a.applicableSections,f=void 0===g?[]:g,m={type:"iframe",url:"".concat(c,"&id=").concat(n,"&gdpr_consent=").concat(encodeURIComponent(l),"&us_privacy=").concat(encodeURIComponent(o),"&gpp=").concat(encodeURIComponent(h),"&gpp_sid=").concat(encodeURIComponent(f.join(",")))};"boolean"==typeof u&&(m.url+="&gdpr=".concat(Number(u)));return m}({gdprConsent:n,uspConsent:i,gppConsent:r,siteId:e})})):[];return Jl.uniqueSiteIds=[],o}};function cu(){return vt()?gt():ft()}Wr(du),g("33acrossBidAdapter");var lu,uu=((lu=cu()).ADAGIO=lu.ADAGIO||{},lu.ADAGIO.pageviewId=lu.ADAGIO.pageviewId||at(),lu.ADAGIO.adUnits=lu.ADAGIO.adUnits||{},lu.ADAGIO.pbjsAdUnits=lu.ADAGIO.pbjsAdUnits||[],lu.ADAGIO.queue=lu.ADAGIO.queue||[],lu.ADAGIO.versions=lu.ADAGIO.versions||{},lu.ADAGIO.versions.pbjs="9.50.0",lu.ADAGIO.windows=lu.ADAGIO.windows||[],lu.ADAGIO.isSafeFrameWindow=nn(),lu.ADAGIO);function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gu="Adagio:",fu=[zs,Ls,Ms],mu="adagio",vu="https://".concat(mu,".bbvms.com/r/$RENDERER.js");var bu={canAccessWindowTop:vt,getAdagioNs:function(){return uu},getDevice:function(e){var t={};null!=e&&e.device&&En(t,e.device),t.geo||(t.geo={});var n=navigator.language?"language":"userLanguage";return En(t,{userAgent:navigator.userAgent,language:navigator[n],js:1}),t},getSite:function(e){var t=e.refererInfo;return{domain:uo(t.topmostLocation)||"",page:t.topmostLocation||"",referrer:t.ref||ft().document.referrer||"",top:t.reachedTop}},getRefererInfo:go,hasRtd:function(){return(Se.getConfig("realTimeData.dataProviders")||[]).find((function(e){return"adagio"===e.name}))},isRendererPreferredFromPublisher:function(e){var t=x(e,"renderer"),n=!!(t&&t.url&&t.render),i=x(e,"mediaTypes.video.renderer"),r=!!(i&&i.url&&i.render);return!!(n&&!0!==t.backupOnly||r&&!0!==i.backupOnly)}};function yu(e){var t=x(e,"mediaTypes.video",{}),n=x(e,"params.video",{}),i={};if(Array.isArray(t.playerSize)){var r=Array.isArray(t.playerSize[0])?t.playerSize[0]:t.playerSize;i.w=r[0],i.h=r[1]}var o=hu(hu(hu({},i),t),n);o.context&&o.context===nr&&(o.playerName=function(e){return bu.isRendererPreferredFromPublisher(e)?"other":"adagio"}(e)),e.mediaTypes.video=o,or(e)}function Au(e){if(e.admNative&&Array.isArray(e.admNative.assets)){var t={};e.admNative.assets.forEach((function(e){if(e.title)t.title=e.title.text;else if(e.data)n=e.data,(i={1:"sponsoredBy",2:"body",3:"rating",4:"likes",5:"downloads",6:"price",7:"salePrice",8:"phone",9:"address",10:"body2",11:"displayUrl",12:"cta"}).hasOwnProperty(n.type)&&"string"==typeof n.value&&(t[i[n.type]]=n.value);else if(e.img)if(1===e.img.type)t.icon={url:e.img.url,width:e.img.w,height:e.img.h};else t.image={url:e.img.url,width:e.img.w,height:e.img.h};var n,i})),e.admNative.link&&(e.admNative.link.url&&(t.clickUrl=e.admNative.link.url),Array.isArray(e.admNative.link.clicktrackers)&&(t.clickTrackers=e.admNative.link.clicktrackers)),Array.isArray(e.admNative.eventtrackers)?(t.impressionTrackers=[],e.admNative.eventtrackers.forEach((function(e){if(1===e.event)switch(e.method){case 1:t.impressionTrackers.push(e.url);break;case 2:var n='<script async src="'.concat(e.url,'"><\/script>');t.javascriptTrackers?t.javascriptTrackers+="\n".concat(n):t.javascriptTrackers=n}}))):(t.impressionTrackers=Array.isArray(e.admNative.imptrackers)?e.admNative.imptrackers:[],e.admNative.jstracker&&(t.javascriptTrackers=e.admNative.jstracker)),e.admNative.privacy&&(t.privacyLink=e.admNative.privacy),e.admNative.ext&&(t.ext={},e.admNative.ext.bvw&&(t.ext.adagio_bvw=e.admNative.ext.bvw)),e.native=t}else wt("".concat(gu," Invalid native response"))}function wu(e,t){if(e.params=e.params||{},!e.params[t]){var n=Se.getConfig("adagio")||{},i=e.ortb2,r=n[t]||x(i,"site.ext.data.".concat(t),null);if(r){if(Array.isArray(r))return void(r.length&&(e.params[t]=r[0].toString()));e.params[t]=r.toString()}}}function Su(e){var t=Se.getConfig("adagio")||{};e.params=e.params||{},t.siteId&&(e.params.organizationId=t.siteId.split(":")[0],e.params.site=t.siteId.split(":")[1]),e.params.placement=x(e,"ortb2Imp.ext.data.placement",e.params.placement),e.params.placement||!0!==t.useAdUnitCodeAsPlacement&&!0!==e.params.useAdUnitCodeAsPlacement||(e.params.placement=e.adUnitCode),e.params.adUnitElementId=x(e,"ortb2Imp.ext.data.divId",e.params.adUnitElementId),e.params.adUnitElementId||(!0===t.useAdUnitCodeAsAdUnitElementId||!0===e.params.useAdUnitCodeAsAdUnitElementId?e.params.adUnitElementId=e.adUnitCode:e.params.adUnitElementId=function(e){var t=Ll(e);if(t.divId)return t.divId}(e.adUnitCode)),wu(e,"pagetype"),wu(e,"category")}var Iu={bootstrapPlayer:function(e){var t=e.outstreamRendererCode,n={code:e.adUnitCode};if(e.vastXml?n.vastXml=e.vastXml:e.vastUrl&&(n.vastUrl=e.vastUrl),e.vastXml||e.vastUrl)if(window.bluebillywig&&window.bluebillywig.renderers&&window.bluebillywig.renderers.length){var i=this.getRendererId(mu,t),r={};e.skipOffset&&(r.skipOffset=e.skipOffset.toString());var o=window.bluebillywig.renderers.find((function(e){return e._id===i}));if(o){var s=document.getElementById(e.adUnitCode);o.bootstrap(n,s,r)}else wt("".concat(gu," couldn't find a renderer with ID ").concat(i))}else wt("".concat(gu," no BlueBillywig renderers found!"));else wt("".concat(gu," no vastXml or vastUrl on bid"))},newRenderer:function(e,t){var n=vu.replace("$RENDERER",t),i=Ns.install({url:n,loaded:!1,adUnitCode:e});try{i.setRender(this.outstreamRender)}catch(e){wt("".concat(gu," error trying to setRender"),e)}return i},outstreamRender:function(e){e.renderer.push((function(){Iu.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},Eu={code:"adagio",gvlid:617,supportedMediaTypes:fu,isBidRequestValid:function(e){return e.params=e.params||{},Su(e),!!(e.params.organizationId&&e.params.site&&e.params.placement)||(At("".concat(gu," at least one required param is missing.")),!1)},buildRequests:function(e,t){e=jd(e);var n="https:"===location.protocol?1:0,i=bu.getDevice(null==t?void 0:t.ortb2),r=bu.getSite(t),o=bu.getAdagioNs().pageviewId,a=function(e){if(!x(e,"gdprConsent"))return!1;var t=e.gdprConsent,n=t.apiVersion,i=t.gdprApplies;return mn({apiVersion:n,consentString:t.consentString,consentRequired:i?1:0,allowAuctionWithoutConsent:t.allowAuctionWithoutConsent?1:0})}(t)||{},d=function(e){return!!x(e,"uspConsent")&&{uspConsent:e.uspConsent}}(t)||{},c={required:!0===Se.getConfig("coppa")?1:0},l=x(t,"ortb2.regs",{}),u=l.gpp,p=l.gpp_sid,h=x(e[0],"schain"),g=function(e){if(x(e,"userIdAsEids"))return e.userIdAsEids}(e[0])||[],f=x(Se.getConfig("userSync"),"syncEnabled")&&tr.canBidderRegisterSync("iframe","adagio"),m=x(t,"ortb2.regs.ext.dsa"),v=x(t,"ortb2.site.ext.data.adg_rtd.session",{});Object.keys(v).length||(yt(gu,"No session data provided. A new session is be generated."),v.new=!0,v.rnd=Math.random());var b=x(t,"ortb2.site.ext.data.adg_rtd.uid")||at(),y=e.map((function(e){var t=en(e);if(t.auctionId=b,t.params.splitKeyword&&(Rt(t.params.splitKeyword)||kt(t.params.splitKeyword)?t.params.splitKeyword=t.params.splitKeyword.toString():(delete t.params.splitKeyword,At(gu,"The splitKeyword param have been removed because the type is invalid, accepted type: number or string."))),t.params.organizationId=t.params.organizationId.toString(),t.params.dataLayer)if(Rt(t.params.dataLayer)||kt(t.params.dataLayer)||Ut(t.params.dataLayer)||Ct(t.params.dataLayer))At(gu,"The dataLayer param is invalid, only object is accepted as a type."),delete t.params.dataLayer;else{var n=!1;t.params.dl=t.params.dataLayer,delete t.params.dataLayer,Object.keys(t.params.dl).forEach((function(e){t.params.dl[e]&&(Rt(t.params.dl[e])||kt(t.params.dl[e])?t.params.dl[e]=t.params.dl[e].toString():(n=!0,delete t.params.dl[e]))})),n&&At(gu,"Some parameters of the dataLayer property have been removed because the type is invalid, accepted type: number or string.")}var i=function(e){if(!Ct(e.getFloor))return!1;var t=[],n=function(n,i){var r=e.getFloor({currency:"USD",mediaType:n,size:i});t.push(mn({mt:n,s:Ut(i)?"".concat(i[0],"x").concat(i[1]):void 0,f:isNaN(null==r?void 0:r.floor)||"USD"!==(null==r?void 0:r.currency)||null==r?void 0:r.floor}))};return Object.keys(e.mediaTypes).forEach((function(t){if(-1!==fu.indexOf(t)){var i=t===Ms?"playerSize":"sizes";e.mediaTypes[t][i]&&e.mediaTypes[t][i].length?Ut(e.mediaTypes[t][i][0])?e.mediaTypes[t][i].forEach((function(e){n(t,[e[0],e[1]])})):n(t,[e.mediaTypes[t][i][0],e.mediaTypes[t][i][1]]):n(t,"*")}})),t}(e);if(Ut(i)&&i.length){if(t.floors=i,x(t,"mediaTypes.banner")){var r=t.mediaTypes.banner,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={size:e,floor:null},i=t.floors.filter((function(e){return e.mt===zs})),r=i.find((function(t){return t.s===e.join("x")}));return n.floor=i?r?r.f:i[0].f:null,n};t.mediaTypes.banner.bannerSizes=Ut(r.sizes[0])?r.sizes.map((function(e){return o(e)})):o(r.sizes)}if(x(t,"mediaTypes.video")){var a=t.mediaTypes.video,d=t.floors.filter((function(e){return e.mt===Ms})),c=a.playerSize&&Ut(a.playerSize[0])?a.playerSize[0]:a.playerSize,l=c?d.find((function(e){return e.s===c.join("x")})):void 0;t.mediaTypes.video.floor=d?l?l.f:d[0].f:null}if(x(t,"mediaTypes.native")){var u=t.floors.filter((function(e){return e.mt===Ls}));u.length&&(t.mediaTypes.native.floor=u[0].f)}}x(t,"mediaTypes.video")&&yu(t);var p=x(t,"ortb2Imp.ext.gpid")||x(t,"ortb2Imp.ext.data.pbadslot");p&&(t.gpid=p);var h=x(t,"ortb2Imp.instl");void 0!==h&&(t.instl=1===h||"1"===h?1:void 0);var g=x(t,"ortb2Imp.rwdd");void 0!==g&&(t.rwdd=1===g||"1"===g?1:void 0);var f=hu(hu({},x(t,"ortb2.site.ext.data.adg_rtd.features",{})),{},{print_number:(t.bidderRequestsCount||1).toString(),adunit_position:x(t,"ortb2Imp.ext.data.adg_rtd.adunit_position",null)});return t.features=Object.entries(f).reduce((function(e,t){var n=s(t,2),i=n[0],r=n[1];return null==r||(e[i]=r),e}),{}),delete t.params.siteId,{adUnitCode:t.adUnitCode,auctionId:t.auctionId,bidder:t.bidder,bidId:t.bidId,params:t.params,features:t.features,gpid:t.gpid,mediaTypes:t.mediaTypes,nativeParams:t.nativeParams,score:t.score,transactionId:t.transactionId,instl:t.instl,rwdd:t.rwdd}})),A=y.reduce((function(e,t){var n=t.params.organizationId;return e[n]=e[n]||[],e[n].push(t),e}),{});return e.forEach((function(e){e.params.pageviewId=o})),Object.keys(A).map((function(e){return{method:"POST",url:"https://mp.4dex.io/prebid",data:{organizationId:e,hasRtd:bu.hasRtd()?1:0,secure:n,device:i,site:r,pageviewId:o,adUnits:A[e],data:{session:v},regs:{gdpr:a,coppa:c,ccpa:d,gpp:u||"",gppSid:p||[],dsa:m},schain:h,user:{eids:g},prebidVersion:"9.50.0",usIfr:f},options:{contentType:"text/plain"}}}))},interpretResponse:function(e,t){var n=[];try{var i=e.body;i&&(i.data&&bu.hasRtd()&&bu.getAdagioNs().queue.push({action:"ssp-data",ts:Date.now(),data:i.data}),i.bids&&i.bids.forEach((function(e){var i=t.data.adUnits.find((function(t){return t.bidId===e.requestId}));if(i){if(e.meta=x(e,"meta",{}),e.meta.mediaType=e.mediaType,e.meta.advertiserDomains=Array.isArray(e.aDomain)&&e.aDomain.length?e.aDomain:[],e.mediaType===Ms){var r=x(i,"mediaTypes.video.context");if(!e.vastUrl&&e.vastXml&&(e.vastUrl="data:text/xml;charset=utf-8;base64,"+window.btoa(e.vastXml.replace(/\\"/g,'"'))),r===nr){if(e.outstreamRendererCode=x(i,"params.rendererCode","renderer"),x(i,"mediaTypes.video.skip")){var o=x(i,"mediaTypes.video.skipafter",5);e.skipOffset=o}e.renderer=Iu.newRenderer(e.adUnitCode,e.outstreamRendererCode)}}e.mediaType===Ls&&Au(e),e.site=i.params.site,e.placement=i.params.placement,e.pagetype=i.params.pagetype,e.category=i.params.category}n.push(e)})))}catch(e){wt(e)}return n},getUserSyncs:function(e,t){return!(!t.length||""===t[0].body||!t[0].body.userSyncs)&&t[0].body.userSyncs.map((function(e){return{type:"p"===e.t?"image":"iframe",url:e.u}}))}};Wr(Eu),g("adagioBidAdapter");var _u=Se.getConfig,xu={code:"adf",aliases:[{code:"adformOpenRTB",gvlid:50},{code:"adform",gvlid:50}],gvlid:50,supportedMediaTypes:[Ls,zs,Ms],isBidRequestValid:function(e){var t=e.params||{},n=t.mid,i=t.inv,r=t.mname;return!!(n||i&&r)},buildRequests:function(e,t){var n,i,r=t.ortb2||{},o=r.user||{};"object"===d(_u("app"))?(n=_u("app")||{},r.app&&En(n,r.app)):(i=_u("site")||{},r.site&&En(i,r.site),i.page||(i.page=t.refererInfo.page));var a=_u("device")||{};r.device&&En(a,r.device);var c=nt(),l=c.innerWidth,u=c.innerHeight;a.w=a.w||l,a.h=a.h||u,a.ua=a.ua||navigator.userAgent;var p=r.source||{};p.fd=1;var h=r.regs||{},g=Cn(e,"params.adxDomain")||"adx.adform.net",f=Cn(e,"params.pt")||Cn(e,"params.priceType")||"net",m=Cn(e,"params.test"),v=function(e){var t;return null==e||null===(t=e.ortb2)||void 0===t||null===(t=t.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.adServerCurrency}(t),b=v&&[v],y=Cn(e,"userIdAsEids"),A=Cn(e,"schain");y&&Dn(o,"ext.eids",y),A&&Dn(p,"ext.schain",A);var w=e.map((function(e,t){var n;e.netRevenue=f;var i=e.getFloor?e.getFloor({currency:v||"USD",size:"*",mediaType:"*"}):{},r=null==i?void 0:i.floor,o=null==i?void 0:i.currency,a=e.params,d=a.mid,c=a.inv,l=a.mname,u={id:t+1,tagid:d,bidfloor:r,bidfloorcur:o,ext:{data:null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.data,bidder:{inv:c,mname:l}}};if(e.nativeOrtbRequest&&e.nativeOrtbRequest.assets){for(var p=e.nativeOrtbRequest.assets,h=[],g=0;g<p.length;g++){var m=en(p[g]),b=m.img;if(b){var y=b.ext&&b.ext.aspectratios;if(y){var A=parseInt(y[0].split(":")[0],10),w=parseInt(y[0].split(":")[1],10);b.wmin=b.wmin||0,b.hmin=w*b.wmin/A|0}}h.push(m)}u.native={request:{assets:h}}}var S=x(e,"mediaTypes.banner");if(S&&S.sizes){var I=lt(S.sizes).map((function(e){var t=s(e.split("x"),2),n=t[0],i=t[1];return{w:parseInt(n,10),h:parseInt(i,10)}}));u.banner={format:I}}var E=x(e,"mediaTypes.video");return E&&(u.video=E),u})),S={id:t.bidderRequestId,site:i,app:n,user:o,device:a,source:p,ext:{pt:f},cur:b,imp:w,regs:h};return m&&(S.is_debug=!!m,S.test=1),{method:"POST",url:"https://"+g+"/adx/openrtb",data:JSON.stringify(S),bids:e}},interpretResponse:function(e,t){var n=t.bids;if(e.body){var i,r,o=e.body,s=o.seatbid,d=o.cur,c=(i=s.map((function(e){return e.bid})),(r=[]).concat.apply(r,a(i))).reduce((function(e,t){return e[t.impid-1]=t,e}),[]);return n.map((function(e,t){var n=c[t];if(n){var i,r,o=x(n,"ext.prebid.type"),s=x(n,"ext.dsa"),a={requestId:e.bidId,cpm:n.price,creativeId:n.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:d,mediaType:o,width:n.w,height:n.h,dealId:n.dealid,meta:{mediaType:o,advertiserDomains:n.adomain,dsa:s,primaryCatId:null===(i=n.cat)||void 0===i?void 0:i[0],secondaryCatIds:null===(r=n.cat)||void 0===r?void 0:r.slice(1)}};return n.native?a.native={ortb:n.native}:o===Ms?(a.vastXml=n.adm,n.nurl&&(a.vastUrl=n.nurl)):a.ad=n.adm,e.renderer||o!==Ms||"outstream"!==x(e,"mediaTypes.video.context")||(a.renderer=Ns.install({id:e.bidId,url:"https://s2.adform.net/banners/scripts/video/outstream/render.js",adUnitCode:e.adUnitCode}),a.renderer.setRender(Pu)),a}})).filter(Boolean)}}};function Pu(e){e.renderer.push((function(){window.Adform.renderOutstream(e)}))}function Tu(e){var t;return null==e||!e.gdprApplies||!0===(null==e||null===(t=e.vendorData)||void 0===t||null===(t=t.purpose)||void 0===t||null===(t=t.consents)||void 0===t?void 0:t[1])}Wr(xu),g("adfBidAdapter");var Ou={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"},Cu=["user.keywords"].concat(sc.flatMap((function(e){return["keywords","content.keywords"].map((function(t){return"".concat(e,".").concat(t)}))})));function Ru(){for(var e=new Set,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.filter((function(e){return e})).flatMap((function(e){return Array.isArray(e)?e:e.split(",")})).map((function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")})).filter((function(e){return e})).forEach((function(t){return e.add(t)})),Array.from(e.keys())}function Uu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ru.apply(void 0,a(Cu.map((function(t){return x(e,t)}))).concat(n))}var ku={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid"},Du=["user.data"].concat(sc.map((function(e){return"".concat(e,".content.data")})));function Bu(e,t,n){return null==t?n:Rt(t)?t:kt(t)?t.toString():void At("Unsuported type for param: "+e+" required type: String")}function ju(e){var t={};return e.forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),i=n[0],r=n[1];t.hasOwnProperty(i)?t[i].push(r):t[i]=[r]}else t.hasOwnProperty(e)||(t[e]=[])})),t}function Nu(e){return ju(Uu(e))}function Lu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return Lt(e,(function(e,i){if(Ut(e)){var r=[];Lt(e,(function(e){((e=Bu(t+"."+i,e))||""===e)&&r.push(e)})),e=r}else{if(!Rt(e=Bu(t+"."+i,e)))return;e=[e]}e=e.filter((function(e){return""!==e}));var o={key:i};e.length>0&&(o.value=e),n.push(o)})),n}(En.apply(void 0,a(t.map((function(e){return Object.fromEntries(Object.entries(e||{}).map((function(e){var t=s(e,2),n=t[0],i=t[1];return[n,kt(i)||Rt(i)?[i]:i]})))})))))}function Mu(e){var t={};return Du.forEach((function(n){(x(e,n)||[]).forEach((function(e){var n,i=ku[null==e||null===(n=e.ext)||void 0===n?void 0:n.segtax];i&&e.segment.forEach((function(e){t[i]?t[i].push(e.id):t[i]=[e.id]}))}))})),t}function zu(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function Fu(e,t){for(var n=[],i=0;i<t;i++){var r=Dt(e)?en(e):e;n.push(r)}return n}function qu(e,t){return Object.keys(e).forEach((function(n){var i,r;t[n]&&(Ct(e[n])?t[n]=e[n](t[n]):t[n]=(i=e[n],r=t[n],"string"===i?r&&r.toString():"number"===i?Number(r):r),isNaN(t[n])&&delete t.key)})),t}function Hu(e,t){for(var n=[],i=0;i<Math.ceil(e.length/t);i++){var r=i*t,o=r+t;n.push(e.slice(r,o))}return n}var Vu="appnexus",$u="https://ib.adnxs.com/ut/v3/prebid",Gu="https://ib.adnxs-simple.com/ut/v3/prebid",Wu=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],Ku=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],Qu=["age","externalUid","external_uid","segments","gender","dnt","language"],Ju=["geo","device_id"],Yu=["enabled","dongle","member_id","debug_timeout"],Xu={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},Zu={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},ep={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},tp="<script",np=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,ip="trk.js",rp=Yi({bidderCode:Vu}),op=new Map([[1,"Mobile/Tablet - General"],[2,"Personal Computer"],[3,"Connected TV"],[4,"Phone"],[5,"Tablet"],[6,"Connected Device"],[7,"Set Top Box"],[8,"OOH Device"]]),sp={code:Vu,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"stailamedia",gvlid:32},{code:"uol",gvlid:32},{code:"adzymic",gvlid:723}],supportedMediaTypes:[zs,Ms,Ls],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var n,i,r,o,s=(e=jd(e)).map(ap),d=(e||[]).find(cp),c={};!0===Se.getConfig("coppa")&&(c={coppa:!0}),d&&Object.keys(d.params.user).filter((function(e){return Qu.includes(e)})).forEach((function(e){var t=zu(e);if("segments"===e&&Ut(d.params.user[e])){var n=[];d.params.user[e].forEach((function(e){kt(e)?n.push({id:e}):Dt(e)&&n.push(e)})),c[t]=n}else"segments"!==e&&(c[t]=d.params.user[e])}));var l,u=(e||[]).find(up);u&&u.params&&u.params.app&&(l={},Object.keys(u.params.app).filter((function(e){return Ju.includes(e)})).forEach((function(e){return l[e]=u.params.app[e]})));var p,h=(e||[]).find(pp);h&&h.params&&u.params.app&&u.params.app.id&&(p={appid:h.params.app.id});var g={},f={},m=rp.getCookie("apn_prebid_debug")||null;if(m)try{g=JSON.parse(m)}catch(e){wt("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(Xu).forEach((function(e){var t=Tt(e);Rt(t)&&""!==t&&(g[Xu[e]]=t,g.enabled=!0)})),g=qu({member_id:"number",debug_timeout:"number"},g);var v=(e||[]).find(hp);v&&v.debug&&(g=v.debug)}g&&g.enabled&&Object.keys(g).filter((function(e){return Yu.includes(e)})).forEach((function(e){f[e]=g[e]}));var b,y,A=(e||[]).find(lp),w=A?parseInt(A.params.member,10):0,S=e[0].schain,I=(e||[]).find(fp),E={tags:a(s),user:c,sdk:{source:"pbjs",version:"9.50.0"},schain:S};I&&(E.iab_support={omidpn:"Appnexus",omidpv:"9.50.0"}),w>0&&(E.member_id=w),u&&(E.device=l),h&&(E.app=p),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&n.device&&(E.device=E.device||{},En(E.device,(b=t.ortb2.device,y={useragent:b.ua,devicetype:op.get(b.devicetype),make:b.make,model:b.model,os:b.os,os_version:b.osv,w:b.w,h:b.h,ppi:b.ppi,pxratio:b.pxratio},Object.keys(y).reduce((function(e,t){return y[t]&&(e[t]=y[t]),e}),{}))));var _=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Lu.apply(void 0,[Nu(e),Mu(e)].concat(n))}(en(t&&t.ortb2),en(Se.getConfig("appnexusAuctionKeywords"))||{});if(_.length>0&&(E.keywords=_),Se.getConfig("adpod.brandCategoryExclusion")&&(E.brand_category_uniqueness=!0),f.enabled&&(E.debug=f,yt("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(f,null,4))),t&&t.gdprConsent&&(E.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var x=t.gdprConsent.addtlConsent,P=x.substring(x.indexOf("~")+1);E.gdpr_consent.addtl_consent=P.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(E.us_privacy=t.uspConsent),null!=t&&t.gppConsent?E.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(i=t.ortb2)&&void 0!==i&&null!==(i=i.regs)&&void 0!==i&&i.gpp&&(E.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var T={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},O=t.refererInfo.canonicalUrl;Rt(O)&&""!==O&&(T.rd_can=O),E.referrer_detection=T}if((e||[]).find(gp)&&e.filter(gp).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,i=n.durationRangeSec,r=n.requireExactDuration,o=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,i=e.requireExactDuration,r=Math.min.apply(Math,a(n)),o=Math.floor(t/r);return i?Math.max(o,n.length):o}(t.mediaTypes.video),s=Math.max.apply(Math,a(i)),d=e.filter((function(e){return e.uuid===t.bidId})),c=Fu.apply(void 0,a(d).concat([o]));if(r){var l=Hu(c,Math.ceil(o/i.length));i.forEach((function(e,t){l[t].map((function(t){mp(t,"minduration",e),mp(t,"maxduration",e)}))}))}else c.map((function(e){return mp(e,"maxduration",s)}));return c}(s,e),n=E.tags.filter((function(t){return t.uuid!==e.bidId}));E.tags=[].concat(a(n),a(t))})),(null===(r=e[0].userIdAsEids)||void 0===r?void 0:r.length)>0){var C=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var n={source:e.source,id:t.id};"adserver.org"==e.source?n.rti_partner="TDID":"uidapi.com"==e.source&&(n.rti_partner="UID2"),C.push(n)}))})),C.length&&(E.eids=C)}if(null!=t&&null!==(o=t.ortb2)&&void 0!==o&&null!==(o=o.regs)&&void 0!==o&&null!==(o=o.ext)&&void 0!==o&&o.dsa){var R=t.ortb2.regs.ext.dsa,U={};if(["dsarequired","pubrender","datatopub"].forEach((function(e){kt(R[e])&&(U[e]=R[e])})),Ut(R.transparency)&&R.transparency.every((function(e){return Dt(e)}))){var k=[];R.transparency.forEach((function(e){Rt(e.domain)&&""!=e.domain&&Ut(e.dsaparams)&&e.dsaparams.every((function(e){return kt(e)}))&&k.push(e)})),k.length>0&&(U.transparency=k)}jt(U)||(E.dsa=U)}s[0].publisher_id&&(E.publisher_id=s[0].publisher_id);var D=function(e,t){var n=[],i={withCredentials:!0},r=$u;Tu(null==t?void 0:t.gdprConsent)||(r=Gu);"TRUE"!==Tt("apn_test").toUpperCase()&&!0!==Se.getConfig("apn_test")||(i.customHeaders={"X-Is-Test":1});if(e.tags.length>15){var o=en(e);Hu(e.tags,15).forEach((function(e){o.tags=e;var s=JSON.stringify(o);n.push({method:"POST",url:r,data:s,bidderRequest:t,options:i})}))}else{var s=JSON.stringify(e);n={method:"POST",url:r,data:s,bidderRequest:t,options:i}}return n}(E,t);return D},interpretResponse:function(e,t){var n=this,i=t.bidderRequest;e=e.body;var r=[];if(!e||e.error){var o="in response for ".concat(i.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),wt(o),r}if(e.tags&&e.tags.forEach((function(e){var t,o=(t=e)&&t.ads&&t.ads.length&&(t.ads||[]).find((function(e){return e.rtb}));if(o&&((!0===gi.get(i.bidderCode,"allowZeroCpmBids")?o.cpm>=0:o.cpm>0)&&n.supportedMediaTypes.includes(o.ad_type))){var s=function(e,t,n){var i=Qt(e.uuid,[n]),r=st(),o={adId:r,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]}));t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id}));t.dsa&&(o.meta=Object.assign({},o.meta,{dsa:t.dsa}));function s(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:s(t)}));t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id}));if(t.rtb.video){switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),x(i,"mediaTypes.video.context")){case Fs:var a=Ou[t.brand_category_id]?Ou[t.brand_category_id]:null;o.meta=Object.assign({},o.meta,{primaryCatId:a});var d=t.deal_priority;o.video={context:Fs,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:d},o.vastUrl=t.rtb.video.asset_url;break;case nr:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var c=(n.bids||[]).find((function(t){return t.bidId===e.uuid})),l=x(c,"mediaTypes.video.renderer.options");l||(l=x(c,"renderer.options")),o.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Ns.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{i.setRender(vp)}catch(e){At("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:function(){return bt("AppNexus outstream video impression event")},loaded:function(){return bt("AppNexus outstream video loaded event")},ended:function(){bt("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),i}(o.adUnitCode,t,l)}break;case ir:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}}else if(t.rtb[Ls]){var u,p=t.rtb[Ls];if(function(e){if(!e||""===e)return!1;var t=e.match(np),n=null!=t&&t.length>=1,i=e.match(ip),r=null!=i&&i.length>=1;return e.startsWith(tp)&&r&&n}(t.viewability.config)){var h="pbjs_adid="+r+";pbjs_auc="+i.adUnitCode;u=t.viewability.config.replace("dom_id=%native_dom_id%",h)}var g=p.javascript_trackers;null==g?g=u:Rt(g)?g=[g,u]:g.push(u),o[Ls]={title:p.title,body:p.desc,body2:p.desc2,cta:p.ctatext,rating:p.rating,sponsoredBy:p.sponsored,privacyLink:p.privacy_link,address:p.address,downloads:p.downloads,likes:p.likes,phone:p.phone,price:p.price,salePrice:p.saleprice,clickUrl:p.link.url,displayUrl:p.displayurl,clickTrackers:p.link.click_trackers,impressionTrackers:p.impression_trackers,video:p.video,javascriptTrackers:g},p.main_img&&(o[Ls].image={url:p.main_img.url,height:p.main_img.height,width:p.main_img.width}),p.icon&&(o[Ls].icon={url:p.icon.url,height:p.icon.height,width:p.icon.width}),o[Ls].ext={video:p.video,customImage1:p.image1&&{url:p.image1.url,height:p.image1.height,width:p.image1.width},customImage2:p.image2&&{url:p.image2.url,height:p.image2.height,width:p.image2.width},customImage3:p.image3&&{url:p.image3.url,height:p.image3.height,width:p.image3.width},customImage4:p.image4&&{url:p.image4.url,height:p.image4.height,width:p.image4.width},customImage5:p.image5&&{url:p.image5.url,height:p.image5.height,width:p.image5.width},customIcon1:p.icon1&&{url:p.icon1.url,height:p.icon1.height,width:p.icon1.width},customIcon2:p.icon2&&{url:p.icon2.url,height:p.icon2.height,width:p.icon2.width},customIcon3:p.icon3&&{url:p.icon3.url,height:p.icon3.height,width:p.icon3.width},customIcon4:p.icon4&&{url:p.icon4.url,height:p.icon4.height,width:p.icon4.width},customIcon5:p.icon5&&{url:p.icon5.url,height:p.icon5.height,width:p.icon5.width},customSocialIcon1:p.socialicon1&&{url:p.socialicon1.url,height:p.socialicon1.height,width:p.socialicon1.width},customSocialIcon2:p.socialicon2&&{url:p.socialicon2.url,height:p.socialicon2.height,width:p.socialicon2.width},customSocialIcon3:p.socialicon3&&{url:p.socialicon3.url,height:p.socialicon3.height,width:p.socialicon3.width},customSocialIcon4:p.socialicon4&&{url:p.socialicon4.url,height:p.socialicon4.height,width:p.socialicon4.width},customSocialIcon5:p.socialicon5&&{url:p.socialicon5.url,height:p.socialicon5.height,width:p.socialicon5.width},customTitle1:p.title1,customTitle2:p.title2,customTitle3:p.title3,customTitle4:p.title4,customTitle5:p.title5,customBody1:p.body1,customBody2:p.body2,customBody3:p.body3,customBody4:p.body4,customBody5:p.body5,customCta1:p.ctatext1,customCta2:p.ctatext2,customCta3:p.ctatext3,customCta4:p.ctatext4,customCta5:p.ctatext5,customDisplayUrl1:p.displayurl1,customDisplayUrl2:p.displayurl2,customDisplayUrl3:p.displayurl3,customDisplayUrl4:p.displayurl4,customDisplayUrl5:p.displayurl5,customSocialUrl1:p.socialurl1,customSocialUrl2:p.socialurl2,customSocialUrl3:p.socialurl3,customSocialUrl4:p.socialurl4,customSocialUrl5:p.socialurl5}}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var f=0;f<t.rtb.trackers[0].impression_urls.length;f++){var m=$t(t.rtb.trackers[0].impression_urls[f]);o.ad+=m}}catch(e){wt("Error appending tracking pixel",e)}}return o}(e,o,i);s.mediaType=function(e){var t=e.ad_type;return t===Ms?Ms:t===Ls?Ls:zs}(o),r.push(s)}})),e.debug&&e.debug.debug_info){var s="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;s=s.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),bt("https://console.appnexus.com/docs/understanding-the-debug-auction"),bt(s)}return r},getUserSyncs:function(e,t,n,i,r){if(e.iframeEnabled&&Tu(n))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}];if(e.pixelEnabled){return["https://px.ads.linkedin.com/setuid?partner=appNexus"].map((function(e){return{type:"image",url:e}}))}}};function ap(e){var t,n={};Object.keys(e.params).forEach((function(t){var n=zu(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),n.sizes=dp(e.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=e.bidId,e.params.placement_id?n.id=parseInt(e.params.placement_id,10):n.code=e.params.inv_code;var i=Tt("ast_override_div");if(Rt(i)&&""!==i){var r=decodeURIComponent(i).split(",").find((function(t){return t.startsWith("".concat(e.adUnitCode,":"))}));if(r){var o=r.split(":")[1];o&&(n.force_creative_id=parseInt(o,10))}}n.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,n.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,n.prebid=!0,n.disable_psa=!0;var s=function(e){if(!Ct(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if(Dt(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor;return null}(e);if(s&&(n.reserve=s),e.params.position)n.position={above:1,below:2}[e.params.position]||0;else{var a=x(e,"mediaTypes.banner.pos")||x(e,"mediaTypes.video.pos");0!==a&&1!==a&&3!==a||(n.position=3===a?2:a)}e.params.traffic_source_code&&(n.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(n.private_sizes=dp(e.params.private_sizes)),e.params.supply_type&&(n.supply_type=e.params.supply_type),e.params.pub_click&&(n.pubclick=e.params.pub_click),e.params.ext_inv_code&&(n.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(n.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(n.external_imp_id=e.params.external_imp_id);var d,c=Lu(Rt(d=x(e,"ortb2Imp.ext.data.keywords"))&&""!==d?ju(d.split(/\s*(?:,)\s*/)):{},null===(t=e.params)||void 0===t?void 0:t.keywords);c.length>0&&(n.keywords=c);var l=x(e,"ortb2Imp.ext.gpid")||x(e,"ortb2Imp.ext.data.pbadslot");if(l&&(n.gpid=l),(e.mediaType===Ls||x(e,"mediaTypes.".concat(Ls)))&&(n.ad_types.push(Ls),0===n.sizes.length&&(n.sizes=dp([1,1])),e.nativeParams)){var u=function(e){var t={};return Object.keys(e).forEach((function(n){var i=ep[n]&&ep[n].serverName||ep[n]||n,r=ep[n]&&ep[n].requiredParams;if(t[i]=Object.assign({},r,e[n]),!(i!==ep.image.serverName&&i!==ep.icon.serverName)&&t[i].sizes){var o=t[i].sizes;(bn(o)||Ut(o)&&o.length>0&&o.every((function(e){return bn(e)})))&&(t[i].sizes=dp(t[i].sizes))}i===ep.privacyLink&&(t.privacy_supported=!0)})),t}(e.nativeParams);n[Ls]={layouts:[u]}}var p=x(e,"mediaTypes.".concat(Ms)),h=x(e,"mediaTypes.video.context");return n.hb_source=p&&"adpod"===h?7:1,(e.mediaType===Ms||p)&&n.ad_types.push(Ms),(e.mediaType===Ms||p&&"outstream"!==h)&&(n.require_asset_url=!0),e.params.video&&(n.video={},Object.keys(e.params.video).filter((function(e){return Wu.includes(e)})).forEach((function(t){switch(t){case"context":case"playback_method":var i=e.params.video[t];i=Ut(i)?i[0]:i,n.video[t]=Zu[t][i];break;case"frameworks":break;default:n.video[t]=e.params.video[t]}})),e.params.video.frameworks&&Ut(e.params.video.frameworks)&&(n.video_frameworks=e.params.video.frameworks)),p&&(n.video=n.video||{},Object.keys(p).filter((function(e){return Ku.includes(e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof n.video[e]&&(n.video[e]=p[e]);break;case"skip":"boolean"!=typeof n.video.skippable&&(n.video.skippable=1===p[e]);break;case"skipafter":"number"!=typeof n.video.skipoffset&&(n.video.skippoffset=p[e]);break;case"playbackmethod":if("number"!=typeof n.video.playback_method){var t=p[e];(t=Ut(t)?t[0]:t)>=1&&t<=4&&(n.video.playback_method=t)}break;case"api":if(!n.video_frameworks&&Ut(p[e])){var i=p[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));n.video_frameworks=i}break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof n.video.context){var r=p.plcmt,o=p.placement,s=p.startdelay,a=function(e,t){if(!e)return;if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";if(-2===t)return"accompanying_content_post_roll"}else{if(3===e)return"interstitial";if(4===e)return"outstream"}}(r,s)||function(e){if(!e)return;if(2===e)return"in-banner";if(3===e)return"outstream";if(4===e)return"in-feed";if(5===e)return"intersitial"}(o)||function(e){if(void 0===e)return;if(0===e)return"pre_roll";if(-1===e)return"mid_roll";if(-2===e)return"post_roll"}(s);n.video.context=Zu.context[a]}}}))),e.renderer&&(n.video=Object.assign({},n.video,{custom_renderer_present:!0})),e.params.frameworks&&Ut(e.params.frameworks)&&(n.banner_frameworks=e.params.frameworks),x(e,"mediaTypes.".concat(zs))&&n.ad_types.push(zs),0===n.ad_types.length&&delete n.ad_types,n}function dp(e){var t=[],n={};if(Ut(e)&&2===e.length&&!Ut(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===d(e))for(var i=0;i<e.length;i++){var r=e[i];(n={}).width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t}function cp(e){return!!e.params.user}function lp(e){return!!parseInt(e.params.member,10)}function up(e){if(e.params)return!!e.params.app}function pp(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function hp(e){return!!e.debug}function gp(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===Fs}function fp(e){var t=!1,n=e.params,i=e.params.video;return n.frameworks&&Ut(n.frameworks)&&(t=e.params.frameworks.includes(6)),!t&&i&&i.frameworks&&Ut(i.frameworks)&&(t=e.params.video.frameworks.includes(6)),t}function mp(e,t,n){jt(e.video)&&(e.video={}),e.video[t]=n}function vp(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},bp.bind(null,e))}))}function bp(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}Wr(sp),g("appnexusBidAdapter");var yp=new WeakMap;var Ap={1:zs,2:Ms,4:Ls};var wp=l(l(l({},Jc,{fpd:{priority:99,fn:function(e,t){En(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:ac("ORTB request")},props:{fn:function(e,t){Object.assign(e,{id:e.id||at(),test:e.test||0});var n=parseInt(t.timeout,10);isNaN(n)||(e.tmax=n)}}}),Yc,{fpd:{priority:99,fn:function(e,t){En(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:function(e,t,n){var i;if(!n.mediaType||n.mediaType===zs){var r=null==t||null===(i=t.mediaTypes)||void 0===i?void 0:i.banner;if(r){var o,s={topframe:!0===tn()?0:1};r.sizes&&null==(null===(o=t.ortb2Imp)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.format)&&(s.format=ct(r.sizes).map(pt)),r.hasOwnProperty("pos")&&(s.pos=r.pos),e.banner=En(s,e.banner)}}}},pbadslot:{fn:function(e){var t,n,i=null===(t=e.ext)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.pbadslot;i&&"string"==typeof i||(null===(n=e.ext)||void 0===n||null===(n=n.data)||void 0===n||delete n.pbadslot)}},secure:{fn:function(e,t){var n;e.secure=null!==(n=e.secure)&&void 0!==n?n:1}}}),Xc,{mediaType:{priority:99,fn:function(e,t,n){if(!e.mediaType){var i=n.mediaType;if(!i&&!Ap.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=i||Ap[t.mtype]}}},banner:{fn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,t=void 0===e?function(e){return $t(decodeURIComponent(e),Gt)}:e;return function(e,n){e.mediaType===zs&&(n.adm&&n.nurl?e.ad=t(n.nurl)+n.adm:n.adm?e.ad=n.adm:n.nurl&&(e.adUrl=n.nurl))}}()},props:{fn:function(e,t,n){var i,r,o,a;(Object.entries({requestId:null===(i=n.bidRequest)||void 0===i?void 0:i.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,wratio:t.wratio,hratio:t.hratio,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((function(e){var t=s(e,2);t[0];return void 0!==t[1]})).forEach((function(t){var n=s(t,2),i=n[0],r=n[1];return e[i]=r})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),null!==(r=t.ext)&&void 0!==r&&r.dsa&&(e.meta.dsa=t.ext.dsa),t.cat&&(e.meta.primaryCatId=t.cat[0],e.meta.secondaryCatIds=t.cat.slice(1)),t.attr&&(e.meta.attr=t.attr),null!==(o=t.ext)&&void 0!==o&&o.eventtrackers)&&(e.eventtrackers=(null!==(a=e.eventtrackers)&&void 0!==a?a:[]).concat(t.ext.eventtrackers))}}});function Sp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=t.length>1?Sp.apply(void 0,t):t[0];return Object.fromEntries(Kc.map((function(e){return[e,Object.assign({},i[e],r[e])]})))}function Ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,i=e.processors,r=void 0===i?Ep:i,o=e.overrides,a=void 0===o?{}:o,d=e.imp,c=e.request,l=e.bidResponse,u=e.response,p=new WeakMap;function h(e,t,n,i){var o;return function(){return null==o&&(o=function(){var o=n.bind(this,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!yp.has(e)){var n=Object.entries(e);n.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),yp.set(e,n.map((function(e){var t=s(e,2);return[t[0],t[1].fn]})))}var i=yp.get(e).filter((function(e){var n=s(e,1)[0];return!t.hasOwnProperty(n)||t[n]})).map((function(e){var n=s(e,2),i=n[0],r=n[1];return t.hasOwnProperty(i)?t[i].bind(this,r):r}));return function(){var e=this,t=Array.from(arguments);i.forEach((function(n){n.apply(e,t)}))}}(r()[e]||{},a[e]||{}));return t&&(o=t.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),o.apply(this,arguments)}}var g=h(Yc,d,(function(e,t,n){var i={};return e(i,t,n),i}),(function(e,t,n){wt("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),f=h(Jc,c,(function(e,t,n,i){var r={imp:t};return e(r,n,i),r}),(function(e,t,n,i){throw wt("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:i}),e})),m=h(Xc,l,(function(e,t,n){var i={};return e(i,t,n),i}),(function(e,t,n){wt("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),v=h(Zc,u,(function(e,t,n,i){var r={bids:t};return e(r,n,i),r}),(function(e,t,n,i){throw wt("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:i}),e}));return{toORTB:function(e){var t=e.bidderRequest,i=e.bidRequests,r=e.context,o=void 0===r?{}:r;i=i||t.bids;var s={req:Object.assign({bidRequests:i},n,o),imp:{}};s.req.impContext=s.imp;var a=i.map((function(e){var i=Object.assign({bidderRequest:t,reqContext:s.req},n,o),r=g(e,i);if(null!=r){if(r.hasOwnProperty("id"))return Object.assign(i,{bidRequest:e,imp:r}),s.imp[r.id]=i,r;wt("Converted ORTB imp does not specify an id, ignoring bid request",e,r)}})).filter(Boolean),d=f(a,t,s.req);return s.req.bidderRequest=t,null!=d&&p.set(d,s),d},fromORTB:function(e){var t=e.request,n=e.response,i=p.get(t);if(null==i)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},n)}var o=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),s=(n.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(o.hasOwnProperty(t.impid)&&i.imp.hasOwnProperty(t.impid))return m(t,r(i.imp[t.impid],{imp:o[t.impid],seatbid:e,ortbResponse:n}));wt("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return v(s,n,r(i.req))}}}wp[Yc].native={fn:function(e,t,n){if(!n.mediaType||n.mediaType===Ls){var i,r=t.nativeOrtbRequest;r&&(null!==(i=(r=Object.assign({},n.nativeRequest,r)).assets)&&void 0!==i&&i.length?e.native=En({},{request:JSON.stringify(r),ver:r.ver},e.native):At("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}}},wp[Xc].native={fn:function(e,t){if(e.mediaType===Ls){var n;if(!Dt(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},wp[Yc].video={fn:function(e,t,n){var i;if(!n.mediaType||n.mediaType===Ms){var r=null==t||null===(i=t.mediaTypes)||void 0===i?void 0:i.video;if(!jt(r)){var o=Object.fromEntries(Object.entries(r).filter((function(e){var t=s(e,1)[0];return rr.has(t)})));if(r.playerSize){var a=ct(r.playerSize).map(pt);a.length>1&&At("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(o,a[0])}e.video=En(o,e.video)}}}},wp[Xc].video={fn:function(e,t,n){if(e.mediaType===Ms){var i,r;if(null!=n&&null!==(i=n.imp)&&void 0!==i&&null!==(i=i.video)&&void 0!==i&&i.w&&null!=n&&null!==(r=n.imp)&&void 0!==r&&null!==(r=r.video)&&void 0!==r&&r.h){var o=[n.imp.video.w,n.imp.video.h];e.playerWidth=o[0],e.playerHeight=o[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}}};var Ep=On((function(){return Sp(wp,sl(el))}));var _p=Object.freeze([].concat(a(["device.sua","source.schain","regs.gdpr","regs.us_privacy","regs.gpp","regs.gpp_sid","user.consent","user.eids"].map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return"".concat(e,".ext.").concat(t)},n=s(function(e){var t=e.split(".");return[t.slice(0,t.length-1).join("."),t[t.length-1]]}(e),2),i=n[0],r=n[1];return t=t(i,r),function(e){var n=x(e,i);if(null!=(null==n?void 0:n[r]))return Dn(e,t,n[r]),function(){return delete n[r]}}}(e)}))),a(["app","content","site","user"].map((function(e){return function(t){var n,i=null===(n=t[e])||void 0===n?void 0:n.kwarray;if(null!=i){var r=(t[e].keywords||"").split(",");return Array.isArray(i)&&r.push.apply(r,a(i)),t[e].keywords=r.join(","),function(){return delete t[e].kwarray}}}})))));function xp(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_p;return function(n){return t.forEach((function(t){try{var i=t(n);"function"==typeof i&&e&&i()}catch(e){wt("Error translating request to ORTB 2.5",e)}})),n}}xp();function Pp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tp(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rp="criteo",Up="https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request",kp=Yi({bidderCode:Rp}),Dp="Criteo: ",Bp=xp(),jp="https://static.criteo.net/js/ld/publishertag.renderer.js",Np="cto_optout",Lp="cto_bundle",Mp=Ip({context:{netRevenue:!0,ttl:60},imp:function(e,t,n){var i,r=e(t,n),o=t.params;r.tagid=t.adUnitCode,Dn(r,"ext",Cp(Cp(Cp({},t.params.ext),r.ext),{},{rwdd:r.rwdd,floors:Wp(t),bidder:{publishersubid:null==o?void 0:o.publisherSubId,zoneid:null==o?void 0:o.zoneId,uid:null==o?void 0:o.uid}})),delete r.rwdd,!n.fledgeEnabled&&null!==(i=r.ext.igs)&&void 0!==i&&i.ae&&delete r.ext.igs.ae;if(Gp(t)){var s,a=t.params.video;void 0!==a&&Dn(r,"video",Cp(Cp({},r.video),{},{skip:r.video.skip||a.skip||0,placement:r.video.placement||a.placement,minduration:r.video.minduration||a.minduration,playbackmethod:r.video.playbackmethod||a.playbackmethod,startdelay:r.video.startdelay||a.startdelay||0})),Dn(r,"video.ext",{context:t.mediaTypes.video.context,playersizes:Vp(null==t||null===(s=t.mediaTypes)||void 0===s||null===(s=s.video)||void 0===s?void 0:s.playerSize,$p),plcmt:t.mediaTypes.video.plcmt,poddur:t.mediaTypes.video.adPodDurationSec,rqddurs:t.mediaTypes.video.durationRangeSec})}if(r.native&&void 0!==r.native.request){var d=JSON.parse(r.native.request);d.assets&&(1!==d.assets.length||Object.keys(d.assets[0]).length)||delete d.assets,Dn(r,"native.request_native",d),delete r.native.request}return r},request:function(e,t,n,i){var r=e(t,n,i);void 0!==i.publisherId&&(void 0!==r.app?Dn(r,"app.publisher.id",i.publisherId):Dn(r,"site.publisher.id",i.publisherId));n&&n.gdprConsent&&Dn(r,"regs.ext.gdprversion",n.gdprConsent.apiVersion);return r=Bp(r),r},bidResponse:function(e,t,n){var i,r,o,s;n.mediaType=null==t||null===(i=t.ext)||void 0===i?void 0:i.mediatype,n.mediaType===Ls&&void 0!==t.adm_native&&(t.adm=t.adm_native,delete t.adm_native);var a=e(t,n),d=n.bidRequest;a.currency=null==t||null===(r=t.ext)||void 0===r?void 0:r.cur,void 0!==(null==t||null===(o=t.ext)||void 0===o?void 0:o.meta)&&Dn(a,"meta",Cp(Cp({},a.meta),t.ext.meta));void 0!==(null==t||null===(s=t.ext)||void 0===s||null===(s=s.paf)||void 0===s?void 0:s.content_id)&&Dn(a,"meta.paf.content_id",t.ext.paf.content_id);if(a.mediaType===Ms){var c,l;a.vastUrl=null===(c=t.ext)||void 0===c?void 0:c.displayurl,(null==d||null===(l=d.mediaTypes)||void 0===l||null===(l=l.video)||void 0===l?void 0:l.context)===nr&&(a.renderer=function(e){var t,n;if(void 0===(null===(t=e.ext)||void 0===t?void 0:t.videoPlayerConfig)||void 0===(null===(n=e.ext)||void 0===n?void 0:n.videoPlayerType))return;var i={documentResolver:function(e,t,n){return null!=n?n:t}},r=function(t,n){var i,r={slotid:e.id,vastUrl:null===(i=e.ext)||void 0===i?void 0:i.displayurl,vastXml:e.adm,documentContext:n},o=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(r,o)},o=Ns.install({url:jp,config:i});return o.setRender(r),o}(t))}return a},response:function(e,t,n,i){var r,o=e(t,n,i),s=null==n||null===(r=n.ext)||void 0===r||null===(r=r.paf)||void 0===r?void 0:r.transmission;return o.bids.forEach((function(e){var t;void 0!==s&&void 0!==(null==e||null===(t=e.meta)||void 0===t||null===(t=t.paf)||void 0===t?void 0:t.content_id)?Dn(e,"meta.paf.transmission",s):delete e.meta.paf})),o}});var zp={code:Rp,gvlid:91,supportedMediaTypes:[zs,Ms,Ls],getUserSyncs:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.gppString,s=void 0===o?"":o,a=r.applicableSections,d=void 0===a?[]:a,c=go(),l="criteoPrebidAdapter";if(e.iframeEnabled&&Tu(n)){var u=[];if(u.push("origin=".concat(l)),u.push("topUrl=".concat(c.domain)),n&&(n.gdprApplies&&u.push("gdpr=".concat(1==n.gdprApplies?1:0)),n.consentString&&u.push("gdpr_consent=".concat(n.consentString))),i&&u.push("us_privacy=".concat(i)),u.push("gpp=".concat(s)),Array.isArray(d)){var p,h=Pp(d);try{for(h.s();!(p=h.n()).done;){var g=p.value;u.push("gpp_sid=".concat(g))}}catch(e){h.e(e)}finally{h.f()}}var f=Math.random().toString(),m={bundle:Fp(Lp),cw:kp.cookiesAreEnabled(),lsw:kp.localStorageIsEnabled(),optoutCookie:Fp(Np),origin:l,requestId:f,tld:c.domain,topUrl:c.domain,version:"9.50.0".replace(/\./g,"_")};window.addEventListener("message",(function e(t){if(t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===f){this.removeEventListener("message",e),t.stopImmediatePropagation();var n,i,r=t.data;if(r.optout)Hp(Lp),qp(Np,!0,43200,c.domain);else r.bundle&&qp(Lp,r.bundle,9360,c.domain),null==r||null===(n=r.callbacks)||void 0===n||null===(i=n.forEach)||void 0===i||i.call(n,Ht)}}),!0);var v=JSON.stringify(m).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(u.join("&"),"#").concat(v)}]}if(e.pixelEnabled&&Tu(n)){var b=[];if(b.push("profile=207"),n&&(!0===n.gdprApplies&&b.push("gdprapplies=true"),n.consentString&&b.push("gdpr=".concat(n.consentString))),i&&b.push("ccpa=".concat(i)),b.push("gpp=".concat(s)),Array.isArray(d)){var y,A=Pp(d);try{for(A.s();!(y=A.n()).done;){var w=y.value;b.push("gpp_sid=".concat(w))}}catch(e){A.e(e)}finally{A.f()}}return[{type:"image",url:"https://ssp-sync.criteo.com/user-sync/redirect?".concat(b.join("&"))}]}return[]},isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId)&&!(Gp(e)&&!function(e){var t=!0;return["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){var i,r,o,s,a,d;"placement"===n?void 0===(null==e||null===(i=e.mediaTypes)||void 0===i||null===(i=i.video)||void 0===i?void 0:i[n])&&void 0===(null==e||null===(r=e.params)||void 0===r||null===(r=r.video)||void 0===r?void 0:r[n])&&void 0===(null==e||null===(o=e.mediaTypes)||void 0===o||null===(o=o.video)||void 0===o?void 0:o.plcmt)&&void 0===(null==e||null===(s=e.params)||void 0===s||null===(s=s.video)||void 0===s?void 0:s.plcmt)&&(t=!1,wt("Criteo Bid Adapter: mediaTypes.video."+n+" or mediaTypes.video.plcmt is required")):void 0===(null==e||null===(a=e.mediaTypes)||void 0===a||null===(a=a.video)||void 0===a?void 0:a[n])&&void 0===(null==e||null===(d=e.params)||void 0===d||null===(d=d.video)||void 0===d?void 0:d[n])&&(t=!1,wt("Criteo Bid Adapter: mediaTypes.video."+n+" is required"))})),t}(e))},buildRequests:function(e,t){e.forEach((function(e){var t;(function(e){var t;return void 0!==(null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.native)})(e)&&(function(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}(e)||At(Dp+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),null==(null==e||null===(t=e.nativeOrtbRequest)||void 0===t?void 0:t.assets)&&(At(Dp+"native asset requirements are missing"),Dn(e,"nativeOrtbRequest.assets",[{}])))}));var n=function(e,t){var n,i,r,o,s,a=wn(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search;return{url:(null==t||null===(i=t.refererInfo)||void 0===i?void 0:i.page)||"",debug:"1"===a.pbt_debug,noLog:"1"===a.pbt_nolog,fledgeEnabled:null===(r=t.paapi)||void 0===r?void 0:r.enabled,amp:e.some((function(e){return"amp"===e.params.integrationMode})),networkId:null===(o=e.find((function(e){var t;return null===(t=e.params)||void 0===t?void 0:t.networkId})))||void 0===o?void 0:o.params.networkId,publisherId:null===(s=e.find((function(e){var t;return null===(t=e.params)||void 0===t?void 0:t.pubid})))||void 0===s?void 0:s.params.pubid}}(e,t),i=function(e){var t=Up;t+="?profileId=207",t+="&av="+String(37),t+="&wv="+encodeURIComponent("9.50.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),kp.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0";e.amp&&(t+="&im=1");e.debug&&(t+="&debug=1");e.noLog&&(t+="&nolog=1");var n=Fp(Lp);n&&(t+="&bundle=".concat(n));Fp(Np)&&(t+="&optout=1");e.networkId&&(t+="&networkId="+e.networkId);return t}(n),r=Mp.toORTB({bidderRequest:t,bidRequests:e,context:n});if(r)return{method:"POST",url:i,data:r,bidRequests:e}},interpretResponse:function(e,t){var n;if(void 0===(null==e?void 0:e.body))return[];var i=Mp.fromORTB({response:e.body,request:t.data}).bids||[],r=null===(n=e.body)||void 0===n||null===(n=n.ext)||void 0===n||null===(n=n.igi)||void 0===n?void 0:n.filter((function(e){return Ut(null==e?void 0:e.igs)})).flatMap((function(e){return e.igs}));return null!=r&&r.length?{bids:i,paapi:r}:i},onDataDeletionRequest:function(e){var t=Fp(Lp);t&&(Hp(Lp),Fn("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function Fp(e){var t=kp.getCookie(e),n=kp.getDataFromLocalStorage(e);return t||n||void 0}function qp(e,t,n,i){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3);for(var o="expires=".concat(r.toUTCString()),s=i.split("."),a=0;a<s.length;++a){var d=s.slice(s.length-a-1,s.length).join(".");try{kp.setCookie(e,t,o,null,"."+d);var c=kp.getCookie(e);if(c&&c===t)break}catch(e){}}kp.setDataInLocalStorage(e,t)}function Hp(e){kp.setCookie(e,"",0),kp.removeDataFromLocalStorage(e)}function Vp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return null==e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function $p(e){return e[0]+"x"+e[1]}function Gp(e){var t;return void 0!==(null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video)}function Wp(e){try{var t={},n=function(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}(e);if(n){var i,r,o,s,a;if(null!==(i=e.mediaTypes)&&void 0!==i&&i.banner)t.banner={},Vp(null==e||null===(s=e.mediaTypes)||void 0===s||null===(s=s.banner)||void 0===s?void 0:s.sizes).forEach((function(i){return t.banner[$p(i).toString()]=n.call(e,{size:i,mediaType:zs})}));if(null!==(r=e.mediaTypes)&&void 0!==r&&r.video)t.video={},Vp(null==e||null===(a=e.mediaTypes)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.playerSize).forEach((function(i){return t.video[$p(i).toString()]=n.call(e,{size:i,mediaType:Ms})}));return null!==(o=e.mediaTypes)&&void 0!==o&&o.native&&(t.native={},t.native["*"]=n.call(e,{size:"*",mediaType:Ls})),t}}catch(e){wt("Could not parse floors from Prebid: "+e)}}function Kp(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t===n)return e;var r=e;try{r=h().convertCurrency(e,t,n)}catch(e){if(!i)throw e}return r}function Qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return[e.cpm,e.currency]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kp;return function(i,r){return null==e&&(e=r),n(i,r,e,t)}}();return Pa((function(n){return t.apply(null,e(n))}))}function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wr(zp),g("criteoBidAdapter");var Xp="improvedigital",Zp="USD",eh={DEFAULT_MIMES:["video/mp4"]},th={code:Xp,gvlid:253,aliases:["id"],supportedMediaTypes:[zs,Ls,Ms],syncStore:{extendMode:!1,placementId:null},isBidRequestValid:function(e){return!!(e&&e.params&&e.params.placementId&&e.params.publisherId)},buildRequests:function(e,t){return this.syncStore.placementId=this.syncStore.placementId||e[0].params.placementId,ih.buildServerRequests(e,t)},interpretResponse:function(e,t){var n=t.ortbRequest;return nh.fromORTB({request:n,response:e.body}).bids},getUserSyncs:function(e,t,n,i){if(!0===Se.getConfig("coppa")||!Tu(n))return[];var r=[];if(!this.syncStore.extendMode&&e.pixelEnabled||!e.iframeEnabled)e.pixelEnabled&&t.forEach((function(e){x(e,"body.ext.".concat(Xp,".sync"),[]).forEach((function(e){r.some((function(t){return t.url===e}))||r.push({type:"image",url:e})}))}));else{var o=n||{},s=o.gdprApplies,d=o.consentString,c=new Set;this.syncStore.extendMode&&t&&t.forEach((function(e){var t;null!=e&&null!==(t=e.body)&&void 0!==t&&null!==(t=t.ext)&&void 0!==t&&t.responsetimemillis&&Object.keys(e.body.ext.responsetimemillis).forEach((function(e){return c.add(e)}))})),r.push({type:"iframe",url:"https://hb.360yield.com/prebid-universal-creative/load-cookie.html"+"?placement_id=".concat(this.syncStore.placementId)+(this.syncStore.extendMode?"&pbs=1":"")+("boolean"==typeof s?"&gdpr=".concat(Number(s)):"")+(d?"&gdpr_consent=".concat(d):"")+(i?"&us_privacy=".concat(encodeURIComponent(i)):"")+(c.size?"&bidders=".concat(a(c).join(",")):"")})}return r}};Wr(th);var nh=Ip({context:{ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp:function(e,t,n){var i,r,o=e(t,n);o.secure=null!==(i=null===(r=t.ortb2Imp)||void 0===r?void 0:r.secure)&&void 0!==i?i:1,!o.bidfloor&&t.params.bidFloor&&(o.bidfloor=t.params.bidFloor,o.bidfloorcur=dt("bidFloorCur",t.params).toUpperCase()||Zp),o.bidfloor&&o.bidfloorcur&&o.bidfloorcur!==Zp&&function(e){try{var t=Kp(e.bidfloor,e.bidfloorcur,Zp,!1);e.bidfloor=t,e.bidfloorcur=Zp}catch(e){At("Failed to convert bid floor to ".concat(Zp,". Passing floor price in its original currency."),e)}}(o);var s=n.extendMode?"ext.prebid.bidder.improvedigital":"ext.bidder",a=t.params.placementId,d=t.params.publisherId;return Dn(o,"".concat(s,".placementId"),a),Dn(o,"".concat(s,".publisherId"),d),n.extendMode&&Dn(o,"ext.prebid.storedrequest.id",""+a),Dn(o,"".concat(s,".keyValues"),dt("keyValues",t.params)||void 0),n.bidderRequest.bidLimit&&Dn(o,"ext.max_bids",n.bidderRequest.bidLimit),o},request:function(e,t,n,i){var r=e(t,n,i);return En(r,{id:st(),source:{},ext:{improvedigital:{sdk:{name:"pbjs",version:"9.50.0"}}}}),r},bidResponse:function(e,t,n){if(t.adm&&t.price&&!t.hasOwnProperty("errorCode")){var i,r=n.bidRequest;n.mediaType=1===(i=Object.keys(r.mediaTypes)).length?i[0]:-1!==t.adm.search(/^(<\?xml|<vast)/i)?Ms:"{"===t.adm[0]?Ls:zs;var o=e(t,n),s=x(t,"ext.".concat(Xp),{});return 1===s.pg&&(o.adserverTargeting={hb_deal_type_improve:"pg"}),Object.assign(o,{dealId:"string"==typeof s.buying_type&&"rtb"!==s.buying_type?s.line_item_id:void 0,netRevenue:s.is_net||!1}),o.mediaType===Ms&&ih.isOutstreamVideo(r)&&Object.assign(o,{adResponse:{content:o.vastXml},renderer:rh.createRenderer(r)}),o}},overrides:{imp:{banner:function(e,t,n,i){if(n.mediaTypes[zs]){if(!1===Se.getConfig("improvedigital.usePrebidSizes")){var r=Object.assign({},n.mediaTypes[zs],{sizes:null});n=Yp(Yp({},n),{},{mediaTypes:l({},zs,r)})}e(t,n,i)}},video:function(e,t,n,i){var r;if(n.mediaTypes[Ms]){var o=Object.assign({mimes:eh.DEFAULT_MIMES},n.mediaTypes[Ms],null===(r=n.params)||void 0===r?void 0:r.video);e(t,Yp(Yp({},n),{},{mediaTypes:l({},Ms,o)}),i),Dn(t,"ext.is_rewarded_inventory",1===o.rewarded||1===x(o,"ext.rewarded")||void 0)}}}}}),ih={buildServerRequests:function(e,t){var n=this,i=!0===Se.getConfig("improvedigital.extend"),r=[],o=!0===Se.getConfig("improvedigital.singleRequest"),s=[],a=[];function d(e,n){if(e)return"https://pbs.360yield.com/openrtb2/auction";var i=[];return i.push(Tu(null==t?void 0:t.gdprConsent)?"https://ad.360yield.com":"https://ad.360yield-basic.com"),n&&i.push(n),i.push("pb"),i.join("/")}function c(e,n,i){var r=nh.toORTB({bidRequests:e,bidderRequest:t,context:{extendMode:i}});return{method:"POST",url:d(i,n),data:JSON.stringify(r),ortbRequest:r,bidderRequest:t,options:{endpointCompression:!0}}}var l=null;return e.map((function(e){var t=e.params.publisherId,d=n.isExtendModeEnabled(i,e.params);if(o){if(l){if(t&&l!==t)throw new Error("All Improve Digital placements in a single call must have the same publisherId. Please check your 'params.publisherId' or turn off the single request mode.")}else l=t;d?s.push(e):a.push(e)}else r.push(c([e],t,d))})),o?(s.length&&r.push(c(s,l,!0)),a.length&&r.push(c(a,l,!1)),r):r},isExtendModeEnabled:function(e,t){var n="boolean"==typeof t.extend?t.extend:e;return n&&!th.syncStore.extendMode&&(th.syncStore.extendMode=!0),n},isOutstreamVideo:function(e){return"outstream"===x(e,"mediaTypes.video.context")}},rh={RENDERER_URL:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",createRenderer:function(e){var t=Ns.install({id:e.adUnitCode,url:this.RENDERER_URL,config:x(e,"renderer.options"),adUnitCode:e.adUnitCode});try{t.setRender(this.render)}catch(e){At("Prebid Error calling setRender on renderer",e)}return t},render:function(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},rh.handleRendererEvents.bind(null,e))}))},handleRendererEvents:function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}};function oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ah(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dh(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function dh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}g("improvedigitalBidAdapter");var ch="ix",lh=[zs,Ms,Ls],uh=[144,144],ph={JPY:1},hh="p",gh="x",fh={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},mh={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID"},vh=["lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],bh=["mimes","minduration","maxduration"],yh=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],Ah="".concat(ch,"_features"),wh=Yi({bidderCode:ch}),Sh={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return x(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(wh.localStorageIsEnabled()){var e=Pn(wh.getDataFromLocalStorage(Ah));x(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,i=x(t,"ext.features");i&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:i},wh.localStorageIsEnabled()&&wh.setDataInLocalStorage(Ah,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},wh.localStorageIsEnabled()&&wh.removeDataFromLocalStorage(Ah)}},Ih=0,Eh="",_h="",xh=!1,Ph=2;function Th(e){var t=Oh(e,Ms),n=x(e,"mediaTypes.video"),i=x(e,"params.video");if(Dh(n,i).length)return{};t.video=i?en(e.params.video):{};var r=x(e,"ortb2Imp.ext.tid");for(var o in r&&Dn(t,"ext.tid",r),function(e,t){if(x(t,"mediaTypes.video.context")===nr){var n=x(t,"mediaTypes.video.renderer");if(n||(n=x(t,"renderer")),x(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(n&&"object"===d(n)){if(void 0!==n.url){var i="";try{i=new URL(n.url).hostname}catch(e){return}i.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=n.url}}else e.displaymanager="ix"}}(t,e),Fh(t,e),n)-1===yh.indexOf(o)||t.video.hasOwnProperty(o)||(t.video[o]=n[o]);if(t.video.minduration>t.video.maxduration)return wt("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]")),{};var s=i&&i.context||n&&n.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!fn(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&(At("IX Bid Adapter: video.plcmt [".concat(e.video.plcmt,"] must be an integer between 1-4 inclusive")),delete e.video.plcmt)}(t),s&&!t.video.hasOwnProperty("placement")&&(s===ir?t.video.placement=1:s===nr?x(i,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,xh=!0):At("IX Bid Adapter: Video context '".concat(s,"' is not supported"))),!t.video.w||!t.video.h){var a=Bh(x(t,"video.playerSize"))||Bh(x(e,"params.size"));if(!a)return At("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=a[0],t.video.h=a[1]}return Ch(e,t,Ms),t}function Oh(e,t){var n={};if(n.id=e.bidId,Xh()&&x(e,"params.externalId")&&Dn(n,"ext.externalID",e.params.externalId),x(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case zs:Dn(n,"ext.siteID",e.params.banner.siteId.toString());break;case Ms:Dn(n,"ext.siteID",e.params.video.siteId.toString());break;case Ls:Dn(n,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&Dn(n,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||Dn(n,"ext.sid",String(e.params.id)),n}function Ch(e,t,n){var i=null,r=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),Ct(e.getFloor)){var o="*",s="*";if(n&&Mt(lh,n)){var a=t[n];o=n,s=[a.w,a.h]}try{r=e.getFloor({mediaType:o,size:s})}catch(e){At("priceFloors module call getFloor failed, error : ",e)}}var d=!1;r?(t.bidfloor=r.floor,t.bidfloorcur=r.currency,Dn(t,"ext.fl",hh),d=!0):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,Dn(t,"ext.fl",gh),d=!0),d&&(n==zs?(Dn(t,"banner.ext.bidfloor",t.bidfloor),Dn(t,"banner.ext.fl",t.ext.fl)):n==Ms?(Dn(t,"video.ext.bidfloor",t.bidfloor),Dn(t,"video.ext.fl",t.ext.fl)):(Dn(t,"native.ext.bidfloor",t.bidfloor),Dn(t,"native.ext.fl",t.ext.fl)))}function Rh(e,t,n){var i,r,o={},s=!(!x(e,"exp")||!fn(e.exp)),a=x(e,"dealid")||x(e,"ext.dealid");ph.hasOwnProperty(t)?o.cpm=e.price/ph[t]:o.cpm=e.price/100,o.requestId=e.impid,a&&(o.dealId=a),o.netRevenue=true,o.currency=t,o.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=Ph||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(o.vastUrl=e.ext.vasturl):o.vastXml=e.adm;var d=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{d=JSON.parse(e.adm)}catch(e){At("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==Ph?(o.width=n.video.w,o.height=n.video.h,o.mediaType=Ms,o.mediaTypes=n.mediaTypes,o.ttl=s?e.exp:3600):d&&d.native?(o.native={ortb:d.native},o.width=e.w?e.w:1,o.height=e.h?e.h:1,o.mediaType=Ls,o.ttl=s?e.exp:3600):(o.ad=e.adm,o.width=e.w,o.height=e.h,o.mediaType=zs,o.ttl=s?e.exp:300),o.meta={},o.meta.networkId=x(e,"ext.dspid"),o.meta.brandId=x(e,"ext.advbrandid"),o.meta.brandName=x(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(o.meta.advertiserDomains=e.adomain),null!==(i=e.ext)&&void 0!==i&&i.dsa&&(o.meta.dsa=e.ext.dsa),null!==(r=e.ext)&&void 0!==r&&r.ibv&&(o.ext=o.ext||{},o.ext.ibv=e.ext.ibv),o}function Uh(e){return Array.isArray(e)&&2===e.length&&fn(e[0])&&fn(e[1])}function kh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Uh(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Dh(e,t){var n=[];e||At("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var i,r=ah(bh);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=e&&e.hasOwnProperty(o),a=t&&t.hasOwnProperty(o);s||a||n.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){r.e(e)}finally{r.f()}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),l=t&&t.hasOwnProperty("protocol"),u=t&&t.hasOwnProperty("protocols");return d||c||l||u||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Bh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Uh(e)?e:!!Uh(e[0])&&e[0]}function jh(e,t,n){if(e){var i=sh(sh({},n.find((function(t){return t.bidId===e}))),t.find((function(t){return t.id===e})));return i}}function Nh(e,t,n,i){var r="https://htlb.casalemedia.com/openrtb/pbjs",o=function(e){var t=[],n={};if(Ut(e)){var i,r=ah(e);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=mh.hasOwnProperty(o.source);if(x(o,"uids.0")&&(n[o.source]=!0,s&&""!==mh[o.source]&&(o.uids[0].ext={rtiPartner:mh[o.source]}),t.push(o),t.length>=50))break}}catch(e){r.e(e)}finally{r.f()}}return{toSend:t,seenSources:n}}(x(e,"0.userIdAsEids")),s=o.toSend;window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var n=window.headertag.getIdentityInfo();if(n&&"object"===d(n))for(var i in n){if(e.length>=50)return;if(n.hasOwnProperty(i)){var r=n[i];!r.responsePending&&r.data&&"object"===d(r.data)&&Object.keys(r.data).length&&!t.seenSources[r.data.source]&&e.push(r.data)}}}(s,o);var a=[],c=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=wh.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);c=function(e,t){t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:Sh.isFeatureEnabled(t)}})));return e}(c,Sh.REQUESTED_FEATURE_TOGGLES);var l=function(e,t){var n,i=e.map((function(e){return e.adUnitCode})).filter((function(e,t,n){return n.indexOf(e)===t})),r=x(e,"0.userIdAsEids",[]),o={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"9.50.0",userIds:Hh(e[0]),url:window.location.href.split("?")[0],vpd:xh,ae:t,eidLength:r.length},s=ah(i);try{var a=function(){var t=n.value,i=e.filter((function(e){return e.adUnitCode===t}))[0];x(i,"mediaTypes")&&(Object.keys(i.mediaTypes).length>1&&o.mfu++,x(i,"mediaTypes.native")&&o.nu++,x(i,"mediaTypes.banner")&&o.bu++,"outstream"===x(i,"mediaTypes.video.context")&&(o.ou++,Yh(i)&&(o.ren=!0)),"instream"===x(i,"mediaTypes.video.context")&&o.iu++,o.allu++)};for(s.s();!(n=s.n()).done;)a()}catch(e){s.e(e)}finally{s.f()}return o}(e,x(t,"paapi.enabled"));for(var u in l)c.ext.ixdiag[u]=l[u];c=function(e,t,n,i,r){var o,s=x(t,"timeout");s&&(e.ext.ixdiag.tmax=s);Se.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=Se.getConfig("userSync").syncsPerBidder);e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:null==t||null===(o=t.ortb2)||void 0===o||null===(o=o.source)||void 0===o?void 0:o.tid},i[0].schain&&(e.source.ext={},e.source.ext.schain=i[0].schain);r.length>0&&(e.user={},e.user.eids=r);document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer);return e}(c,t,n,e,s),c=function(e,t){if(t){t.gdprConsent&&((Eh=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:Eh.gdprApplies?1:0}}),Eh.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:Eh.consentString||""},Eh.hasOwnProperty("addtlConsent")&&Eh.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:Eh.addtlConsent}))),t.uspConsent&&(Dn(e,"regs.ext.us_privacy",t.uspConsent),_h=t.uspConsent);var n=x(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(Dn(e,"regs.gpp",t.gppConsent.gppString),Dn(e,"regs.gpp_sid",t.gppConsent.applicableSections))}Se.getConfig("coppa")&&Dn(e,"regs.coppa",1);return e}(c,t);var p={};e[0].params.siteId&&(Ih=e[0].params.siteId,p.s=Ih);for(var h=Object.keys(n),g=!1,f=0;f<h.length&&!(a.length>=4);f++){c=Lh(n,h,c,f);var m=x(t,"ortb2")||{},v=sh({},m.site||m.context);v.page=Mh(t);var b=sh({},m.user);jt(m)||g||((c=zh(t,c,m,v,b)).site=En({},c.site,v),c.user=En({},c.user,b),g=!0),c=qh(n,c,h,f,p,r);var y=f===h.length-1;if(c=ng(c=tg(c=rg(c))),y){var A="".concat(r,"?");0!==Ih&&(A+="s=".concat(Ih)),Xh()&&(A+=0!==Ih?"&":"",A+="p=".concat(Se.getConfig("exchangeId"))),a.push({method:"POST",url:A,data:en(c),options:{contentType:"text/plain",withCredentials:!0},validBidRequests:e}),c.imp=[],g=!1}}return a}function Lh(e,t,n,i){var r=e[t[i]],o=r.missingImps,s=void 0===o?[]:o,d=r.ixImps,c={ixImps:void 0===d?[]:d,missingBannerImpressions:s},l=Object.keys(c).map((function(e){return c[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,a(t))}),[]),u=e[t[i]].gpid,p=e[t[i]].dfp_ad_unit_code,h=e[t[i]].tid,g=e[t[i]].sid,f=e[t[i]].ae,m=e[t[i]].paapi,v=l.filter((function(e){return zs in e})),b=l.filter((function(e){return!(zs in e)}));if(v.length>0){var y=v.reduce((function(e,t){return e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e}),{});for(var A in y){for(var w=y[A],S=w[0],I=S.id,E=S.banner.topframe,_=x(w[0],"ext.externalID"),P={id:I,banner:{topframe:E,format:w.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},T=0;T<P.banner.format.length;T++)null!=P.banner.format[T].ext&&(null!=P.banner.format[T].ext.sid&&delete P.banner.format[T].ext.sid,null!=P.banner.format[T].ext.externalID&&delete P.banner.format[T].ext.externalID),"bidfloor"in w[T]&&(P.banner.format[T].ext.bidfloor=w[T].bidfloor),"{}"===JSON.stringify(P.banner.format[T].ext)&&delete P.banner.format[T].ext;var O=e[t[i]].pos;fn(O)&&(P.banner.pos=O),(p||u||h||g||f||_||m)&&(P.ext={},P.ext.dfp_ad_unit_code=p,P.ext.gpid=u,P.ext.tid=h,P.ext.sid=g,P.ext.externalID=_,1==f&&(P.ext.ae=1,P.ext.paapi=m)),"bidfloor"in w[0]&&(P.bidfloor=w[0].bidfloor),"bidfloorcur"in w[0]&&(P.bidfloorcur=w[0].bidfloorcur);var C=e[t[i]].adUnitFPD;C&&Dn(P,"ext.data",C),n.imp.push(P)}}return b.length>0&&b.forEach((function(e){if(u&&Dn(e,"ext.gpid",u),n.imp.length>0){var t=!1;n.imp.forEach((function(i,r){e.id===i.id&&Ms in e?(i.video=e.video,i.video.ext=Object.assign({},e.video.ext,e.ext),x(i,"video.ext.bidfloor",!1)&&x(i,"bidfloor",!1)&&i.video.ext.bidfloor<i.bidfloor&&(i.bidfloor=i.video.ext.bidfloor),!x(i,"ext.siteID",!1)&&x(e,"video.ext.siteID")&&(Dn(i,"ext.siteID",e.video.ext.siteID),Dn(n,"ext.ixdiag.usid",!0)),t=!0):e.id===i.id&&Ls in e&&(i.native=e.native,i.native.ext=Object.assign({},e.native.ext,e.ext),x(i,"native.ext.bidfloor",!1)&&x(i,"bidfloor",!1)&&i.native.ext.bidfloor<i.bidfloor&&(i.bidfloor=i.native.ext.bidfloor),!x(i,"ext.siteID",!1)&&x(e,"native.ext.siteID",!1)&&(Dn(i,"ext.siteID",e.native.ext.siteID),Dn(n,"ext.ixdiag.usid",!0)),t=!0)})),t||n.imp.push(e)}else n.imp.push(e)})),n}function Mh(e){var t=e&&e.bidderCode||"ix",n=Se.getConfig(t),i="";if((i=x(e,"ortb2.site.page")?e.ortb2.site.page:x(e,"refererInfo.page"),n)&&"object"===d(n.firstPartyData))return function(e,t,n){var i;try{i=new URL(t)}catch(n){At("IX Bid Adapter: Invalid URL set in ortb2.site.page: ".concat(t,". Using referer URL instead.")),i=new URL(x(e,"refererInfo.page"))}for(var r=new URLSearchParams(i.search),o=0,a=Object.entries(n);o<a.length;o++){var d=s(a[o],2),c=d[0],l=d[1];r.has(c)||r.append(c,l)}return i.search=r.toString(),i.toString()}(e,i,n.firstPartyData);return i}function zh(e,t,n,i,r){if(t.ext.ixdiag.fpd=!0,Object.keys(i).forEach((function(e){-1===fh.SITE.indexOf(e)&&delete i[e]})),Object.keys(r).forEach((function(e){-1===fh.USER.indexOf(e)&&delete r[e]})),n.device){var o=sh({},n.device.sua);jt(o)||Dn(t,"device.sua",o);var s=n.device.ip;s&&Dn(t,"device.ip",s);var a=n.device.ipv6;a&&Dn(t,"device.ipv6",a)}var d;if(n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&Dn(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&Dn(t,"regs.gpp_sid",n.regs.gpp_sid),null!==(d=n.regs.ext)&&void 0!==d&&d.dsa)){var c=n.regs.ext.dsa,l={};if(["dsarequired","pubrender","datatopub"].forEach((function(e){kt(c[e])&&(l[e]=c[e])})),Ut(c.transparency)){var u=[];c.transparency.forEach((function(e){Dt(e)&&Rt(e.domain)&&""!=e.domain&&Ut(e.dsaparams)&&e.dsaparams.every((function(e){return kt(e)}))&&u.push(e)})),u.length>0&&(l.transparency=u)}jt(l)||Dn(t,"regs.ext.dsa",l)}return t}function Fh(e,t){var n=x(t,"ortb2Imp.ext.data");n&&Dn(e,"ext.data",n)}function qh(e,t,n,i,r,o){var s=e[n[i]].pbadslot,a=e[n[i]].tagId,d=e[n[i]].adUnitCode,c=e[n[i]].divId;return(s||a||d||c)&&(t.ext.ixdiag.pbadslot=s,t.ext.ixdiag.tagid=a,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}function Hh(e){var t=e.userId||{};return vh.filter((function(e){return"lipbid"===e?x(t,"lipb.lipbid"):t[e]}))}function Vh(e,t){if(t)for(var n=0;n<e.length;n++){var i=e[n];if(t[0]===i[0]&&t[1]===i[1]){e.splice(n,1);break}}}function $h(e,t){var n=function(e){var t=Oh(e,Ls),n=e.nativeOrtbRequest;n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"};var i=x(e,"ortb2Imp.ext.tid");return i&&Dn(t,"ext.tid",i),Fh(t,e),Ch(e,t,Ls),t}(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=x(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=x(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=x(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=x(e,"params.tagId");var i=e.adUnitCode,r=document.getElementById(i)?i:Ll(i).divId;t[e.adUnitCode].adUnitCode=i,t[e.adUnitCode].divId=r}}function Gh(e,t){var n=Th(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=x(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=x(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=x(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=x(e,"params.tagId");var i=e.adUnitCode,r=document.getElementById(i)?i:Ll(i).divId;t[e.adUnitCode].adUnitCode=i,t[e.adUnitCode].divId=r}}function Wh(e,t,n,i){var r=function(e){var t=Oh(e,zs);t.banner={},t.adunitCode=e.adUnitCode;var n=x(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=tn()?0:1,Ch(e,t,zs),t}(e),o=kh(x(e,"mediaTypes.banner.sizes"),x(e,"params.size"));if(n.hasOwnProperty(e.adUnitCode)||(n[e.adUnitCode]={}),n[e.adUnitCode].gpid=x(e,"ortb2Imp.ext.gpid"),n[e.adUnitCode].dfp_ad_unit_code=x(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.adUnitCode].tid=x(e,"ortb2Imp.ext.tid"),n[e.adUnitCode].pbadslot=x(e,"ortb2Imp.ext.data.pbadslot"),n[e.adUnitCode].tagId=x(e,"params.tagId"),n[e.adUnitCode].pos=x(e,"mediaTypes.banner.pos"),x(i,"paapi.enabled")){var s=x(e,"ortb2Imp.ext.ae"),a=x(e,"ortb2Imp.ext.paapi");a&&(n[e.adUnitCode].paapi=a),s&&(fn(s)?n[e.adUnitCode].ae=s:At("error setting auction environment flag - must be an integer"))}var d=x(e,"ortb2Imp.ext.data");d&&(n[e.adUnitCode].adUnitFPD=d);var c=x(e,"params.id");!c||"string"!=typeof c&&"number"!=typeof c||(n[e.adUnitCode].sid=String(c));var l=e.adUnitCode,u=document.getElementById(l)?l:Ll(l).divId;n[e.adUnitCode].adUnitCode=l,n[e.adUnitCode].divId=u,o&&(n[e.adUnitCode].hasOwnProperty("ixImps")||(n[e.adUnitCode].ixImps=[]),n[e.adUnitCode].ixImps.push(r)),function(e,t,n){if(t.hasOwnProperty(e.adUnitCode)){var i=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(i=t[e.adUnitCode].missingSizes),Vh(i,e.params.size),t[e.adUnitCode].missingSizes=i}else if(x(e,"mediaTypes.banner.sizes")){var r=en(e.mediaTypes.banner.sizes);Vh(r,e.params.size);var o={missingSizes:r,impression:n};t[e.adUnitCode]=o}}(e,t,r)}function Kh(e,t,n){var i=en(t);return i.banner.w=n[0],i.banner.h=n[1],Ch(e,i,zs),i}function Qh(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:Ll(t).divId;n?window.createIXPlayer(n,e):At("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function Jh(e,t){var n=Ns.install({id:e,url:t,loaded:!1});try{n.setRender(Qh)}catch(e){return At("Prebid Error calling setRender on renderer",e),null}return t?n:(At("Outstream renderer URL not found"),null)}function Yh(e){if("outstream"!==x(e,"mediaTypes.video.context"))return!1;var t=x(e,"mediaTypes.video.renderer");return t||(t=x(e,"renderer")),!!("object"!==d(t)||!t.url||!t.render)||t.backupOnly}function Xh(){var e=Se.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}var Zh={code:ch,gvlid:10,supportedMediaTypes:lh,isBidRequestValid:function(e){var t,n,i=x(e,"params.video"),r=x(e,"params.size"),o=x(e,"mediaTypes.banner.sizes"),s=x(e,"mediaTypes.video"),a=x(e,"mediaTypes.video.playerSize"),d=e.params.hasOwnProperty("bidFloor"),c=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!Mt(lh,e.mediaType))return At("IX Bid Adapter: media type is not supported."),!1;if(x(e,"mediaTypes.banner")&&!o)return!1;if(r){var l=Bh(r);if(!l)return wt("IX Bid Adapter: size has invalid format."),!1;if(!kh(e.sizes,l)&&!kh(a,l)&&!kh(o,l))return wt("IX Bid Adapter: bid size is not included in ad unit sizes or player size."),!1}if(!Xh()&&null==e.params.siteId)return wt("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return wt("IX Bid Adapter: siteId must be string or number type."),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return wt("IX Bid Adapter: siteId must valid value"),!1}if((d||c)&&!(d&&c&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return wt("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format."),!1;if(s&&i){var u=Th(e).video,p=Dh(s,i);if(x(e,"mediaTypes.video.context")===nr&&Yh(e)&&u){var h=[x(u,"w"),x(u,"h")];if(!(h[0]>=uh[0]&&h[1]>=uh[1]))return wt("IX Bid Adapter: ".concat(h," is an invalid size for IX outstream renderer")),!1}if(p.length)return p.forEach((function(e){wt(e)})),!1}return function(e){return void 0===x(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:function(){Ih=0},buildRequests:function(e,t){var n=[],i={},r={},o={},s={};for(var d in Sh.getFeatureToggles(),e.forEach((function(e){var n=Object.keys(x(e,"mediaTypes",{}));for(var a in n)switch(n[a]){case zs:Wh(e,s,i,t);break;case Ms:Gh(e,r);break;case Ls:$h(e,o);break;default:At("IX Bid Adapter: ad unit mediaTypes ".concat(a," is not supported"))}})),s)if(s.hasOwnProperty(d)){var c=s[d].missingSizes;i.hasOwnProperty(d)||(i[d]={}),i[d].hasOwnProperty("missingImps")||(i[d].missingImps=[],i[d].missingCount=0);for(var l=s[d].impression,u=0;u<c.length;u++){var p=Kh(e[0],l,c[u]);i[d].missingImps.push(p),i[d].missingCount++}}var h,g=[];return Object.keys(i).length>0&&g.push(i),Object.keys(r).length>0&&g.push(r),Object.keys(o).length>0&&g.push(o),Sh.isFeatureEnabled("pbjs_enable_multiformat")?n.push.apply(n,a(Nh(e,t,(h={},g.forEach((function(e){Object.keys(e).forEach((function(t){Object.keys(h).includes(t)?h[t].hasOwnProperty("ixImps")&&e[t].hasOwnProperty("ixImps")?h[t].ixImps=[].concat(a(h[t].ixImps),a(e[t].ixImps)):h[t].hasOwnProperty("missingImps")&&e[t].hasOwnProperty("missingImps")?h[t].missingImps=[].concat(a(h[t].missingImps),a(e[t].missingImps)):e[t].hasOwnProperty("ixImps")?h[t].ixImps=e[t].ixImps:e[t].hasOwnProperty("missingImps")&&(h[t].missingImps=e[t].missingImps):h[t]=e[t]}))})),h)))):(Object.keys(i).length>0&&n.push.apply(n,a(Nh(e,t,i))),Object.keys(r).length>0&&n.push.apply(n,a(Nh(e,t,r))),Object.keys(o).length>0&&n.push.apply(n,a(Nh(e,t,o)))),n},interpretResponse:function(e,t){var n=[],i=null,r=x(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(Sh.setFeatureToggles(e),!e.hasOwnProperty("body"))return n;for(var o=e.body,s=o.seatbid||[],a=0;a<s.length;a++)if(s[a].hasOwnProperty("bid")){for(var c=s[a].bid,l=t.data,u=0;u<c.length;u++){var p=jh(c[u].impid,l.imp,t.validBidRequests);if((i=Rh(c[u],o.cur,p)).mediaType===Ms&&Yh(p)){var h=x(o,"ext.videoplayerurl");if(i.renderer=Jh(c[u].bidId,h),!i.renderer)continue}n.push(i)}if(x(l,"ext.ixdiag.err")&&wh.localStorageIsEnabled())try{wh.removeDataFromLocalStorage("ixdiag")}catch(e){wt("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(r)&&r.length>0))return n;r=r.filter((function(e){return!!function(e){return"object"===d(e)&&null!==e}(e)||(At("Malformed auction config detected:",e),!1)}));try{return{bids:n,paapi:r}}catch(e){return At("Error attaching AuctionConfigs",e),n}},getUserSyncs:function(e,t){var n=[],i=null;if(t.length>0&&(i=x(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==i&&0==i)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var r=null;Se.getConfig("userSync")&&(r=Se.getConfig("userSync").syncsPerBidder),0===r&&(r=i),r=i&&(0===r||r)?i>r?r:i:1;for(var o=0;o<r;o++)n.push({type:"image",url:eg(r,o)})}return n}};function eg(e,t){var n="",i="0";return Eh&&Eh.hasOwnProperty("gdprApplies")&&(i=Eh.gdprApplies?"1":"0"),Eh&&Eh.hasOwnProperty("consentString")&&(n=Eh.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==Ih?"&site_id="+Ih.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+i+"&gdpr_consent="+n+"&us_privacy="+(_h||"")}function tg(e){return e.imp.forEach((function(t,n){var i=t.ext;if(null==i)return e;ig(t)<2||Object.keys(i).forEach((function(r){if(zs in t){var o=t.banner.ext;if(void 0!==o&&void 0!==o[r]&&o[r]==i[r]&&delete e.imp[n].banner.ext[r],void 0!==t.banner.format)for(var s=0;s<t.banner.format.length;s++)null!=t.banner.format[s].ext&&null!=t.banner.format[s].ext[r]&&t.banner.format[s].ext[r]==i[r]&&delete e.imp[n].banner.format[s].ext[r]}if(Ms in t){var a=t.video.ext;void 0!==a&&void 0!==a[r]&&a[r]==i[r]&&delete e.imp[n].video.ext[r]}if(Ls in t){var d=t.native.ext;void 0!==d&&void 0!==d[r]&&d[r]==i[r]&&delete e.imp[n].native.ext[r]}}))})),e}function ng(e){return e.imp.forEach((function(t,n){if(null==t.ext)return e;if(!(ig(t)<2)){if(zs in t){var i=t.banner.ext;if(void 0!==i&&void 0!==i.siteID&&delete e.imp[n].banner.ext.siteID,void 0!==t.banner.format)for(var r=0;r<t.banner.format.length;r++)void 0!==t.banner.format[r].ext&&void 0!==t.banner.format[r].ext.siteID&&(Dn(e.imp[n],"ext.siteID",t.banner.format[r].ext.siteID),Dn(e,"ext.ixdiag.usid",!0),delete e.imp[n].banner.format[r].ext.siteID)}if(Ms in t){var o=t.video.ext;void 0!==o&&void 0!==o.siteID&&delete e.imp[n].video.ext.siteID}if(Ls in t){var s=t.native.ext;void 0!==s&&void 0!==s.siteID&&delete e.imp[n].native.ext.siteID}}})),e}function ig(e){var t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function rg(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}function og(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return Object.entries(e).every((function(e){var n=s(e,2),i=n[0],r=n[1];return t[i]===r}))}))}Wr(Zh),g("ixBidAdapter");function sg(e){try{return e||window.top.document.referrer}catch(e){return document.referrer}}var ag={auctions:{},infoByAdIdMap:{},bdpMap:{},configuration:{},logsQueue:[],errorQueue:[],eventQueue:null,refererInfo:null},dg=(l(l(l(l(l(l(l({},1,4),2,3),5,2),3,1),6,1),7,0),12,0),"outstream");l(l({},"instream",1),dg,6);function cg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function lg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cg(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ug(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Dt(e)?lg(lg({},e),{},{logData:t}):{name:e,relatedData:t},r=i.name,o=i.cid,a=i.value,c=i.relatedData,l=i.logData,u=i.project,p=ag.refererInfo||go(),g=Object.assign({},{logid:"kfk",evtid:"projectevents",project:u||(n?"prebidanalytics":"prebid"),dn:p.domain||"",requrl:p.topmostLocation||"",pbav:h().medianetGlobals.analyticsEnabled?"2.0.0":"",pbver:"9.50.0",cid:o||ag.configuration.cid||"",event:r||"",value:a||"",rd:c||""},l),f=n?"https://qsearch-a.akamaihd.net/log":"https://navvy.media.net/log",m=n?function(e){return zt(e,(function(e,t){return void 0===e?t+"=":(Dt(e)&&(e=JSON.stringify(e)),t+"="+encodeURIComponent(e))})).join("&")}(g):An(g);function v(){return f+"?"+m}return{send:function(){if(n){var e=v();ag.errorQueue.push(e),Ht(e)}else pg(f,m,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"!==d(e)||null===e)return{};var i={};return t.forEach((function(r,o){if("function"!=typeof r){var a,d,c=s(r.split(/\sas\s/i),2),l=c[0],u=c[1];l=l.trim(),d=(null==u?void 0:u.trim())||l.split(".").pop(),a=x(e,l),"function"==typeof t[o+1]&&(a=t[o+1](a,i,e)),void 0===a&&n||(i[d]=a)}})),i}(g,["cid","project","event as value"]))},getUrl:v}}function pg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Fn(e,{success:function(){},error:function(e,t){var i=t.reason;return ug(Object.assign(n,{name:"ajax_log_failed",relatedData:i})).send()}},t,{method:"POST"})}var hg,gg,fg="medianet",mg="trustedstack",vg="https://prebid.media.net/video/bundle.js",bg=0,yg=1,Ag=2,wg="client_timeout",Sg="client_bid_won",Ig="client_set_targeting",Eg="client_bidder_error";window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[];var _g=[{code:mg,gvlid:1288}];function xg(e,t){var n=t.refererInfo,i={domain:(e=e||{}).domain||n.domain,page:e.page||n.page,ref:sg(e.ref),topMostLocation:n.topmostLocation,isTop:e.isTop||n.reachedTop};return hg||(hg=function(){if(hg)return hg;var e=(t='link[rel="canonical"]',n="href",i=function(e,t){try{var n=gt().document.querySelector(e);if(null!==n&&n[t])return n[t]}catch(e){}}(t,n),i&&(r=i,o=gt().document.createElement("a"),o.href=r,o.href));var t,n,i,r,o;return hg=Object.assign({},e&&{canonical_url:e})}()),Object.assign(i,hg)}function Pg(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function Tg(e,t){var n=x(e,"params"),i=x(t,"gdprConsent"),r=x(t,"uspConsent"),o=x(e,"userId"),s=x(e,"schain")||{},a=Lg.getWindowSize(),d=!(!i||!i.gdprApplies),c=!!r,l=!!Se.getConfig("coppa"),u=cc(),p=u.top,g=void 0===p?-1:p,f=u.right,m=void 0===f?-1:f,v=u.bottom,b=void 0===v?-1:v,y=u.left,A=void 0===y?-1:y;return Object.assign({},{customer_id:n.cid},{prebid_version:"v9.50.0"},{gdpr_applies:d},d&&{gdpr_consent_string:i.consentString||""},{usp_applies:c},c&&{usp_consent_string:r||""},{coppa_applies:l},-1!==a.w&&-1!==a.h&&{screen:a},o&&{user_id:o},h().medianetGlobals.analyticsEnabled&&{analytics:!0},!jt(s)&&{schain:s},{vcoords:{top_left:{x:A,y:g},bottom_right:{x:m,y:b}}})}function Og(e,t){var n,i,r={id:e.bidId,transactionId:null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.tid,ext:{dfp_id:e.adUnitCode,display_count:e.auctionsCount},all:e.params};e.ortb2Imp&&(r.ortb2Imp=e.ortb2Imp);var o,s=x(e,"mediaTypes.banner.sizes")||[],a=x(e,"mediaTypes.video")||{},d=x(e,"params.video")||{},c=Object.assign({},d,a);if(jt(c)||(r.video=c),s.length>0&&(r.banner=Ut(o=s)&&2===o.length&&!Ut(o[0])?[Pg(o)]:o.map((function(e){return Pg(e)}))),e.nativeParams)try{r.native=JSON.stringify(e.nativeParams)}catch(e){wt("".concat(fg," : Incorrect JSON : bidRequest.nativeParams"))}e.params.crid&&(r.tagid=e.params.crid.toString());var l=parseFloat(e.params.bidfloor||e.params.bidFloor);l&&(r.bidfloor=l);var u=function(e){var t=document.getElementById(e);if(!t&&-1!==e.indexOf("/")){var n=Ll(e).divId;Rt(n)&&(t=document.getElementById(n))}if(t){var i=zl(t),r={};return r.top_left={y:i.top,x:i.left},r.bottom_right={y:i.bottom,x:i.right},r}return null}(e.adUnitCode);if(u&&r.banner&&0!==r.banner.length){var p=function(e){var t=window,n=t.scrollX,i=t.scrollY;return{top_left:{x:e.top_left.x+n,y:e.top_left.y+i},bottom_right:{x:e.bottom_right.x+n,y:e.bottom_right.y+i}}}(u);r.ext.coordinates=p,r.ext.viewability=Ug(u.top_left,Rg(r.banner)),Ug(p.top_left,Rg(r.banner))>.5?r.ext.visibility=yg:r.ext.visibility=Ag}else r.ext.visibility=bg;var h,g=function(e){var t=[];"function"==typeof e.getFloor&&[zs,Ms,Ls].forEach((function(n){e.mediaTypes.hasOwnProperty(n)&&(n===zs?e.mediaTypes.banner.sizes.forEach((function(i){Cg(e,n,i,t)})):Cg(e,n,"*",t))}));return t}(e);(g&&g.length>0&&(r.bidfloors=g),null!==(i=t.paapi)&&void 0!==i&&i.enabled)&&(r.ext.ae=null==e||null===(h=e.ortb2Imp)||void 0===h||null===(h=h.ext)||void 0===h?void 0:h.ae);return r}function Cg(e,t,n,i){var r=e.getFloor({currency:"USD",mediaType:t,size:n})||{};n.length>1&&(r.size=n),r.mediaType=t,i.push(r)}function Rg(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}function Ug(e,t){var n=t.w*t.h,i=Lg.getWindowSize(),r={x:e.x+t.w,y:e.y+t.h};return 0===n||-1===i.w||-1===i.h?0:function(e,t,n,i){if(e.x>i.x||t.x<n.x||e.y>i.y||t.y<n.y)return 0;return(Math.min(t.x,i.x)-Math.max(e.x,n.x))*(Math.min(t.y,i.y)-Math.max(e.y,n.y))}(e,r,{x:0,y:0},{x:i.w,y:i.h})/n}function kg(e,t){return(e===mg?"https://prebid.trustedstack.com/rtb/trustedstack":"https://prebid.media.net/rtb/prebid")+"?cid="+encodeURIComponent(t)}function Dg(e,t){var n=en(e),i=x(t,"0.userIdAsEids");return i&&Dn(n,"user.ext.eids",i),n}function Bg(e){var t={};return Ut(e)||(e=[]),e.forEach((function(e){var n=function(e){var t={};t.acid=e.auctionId||"",t.crid=x(e,"params.crid")||x(e,"params.0.crid")||e.adUnitCode||"",t.ext=Tn(e.ext)||"";var n=en(e);return delete n.ad,delete n.vastXml,t.rawobj=Tn(n),t}(e);Object.keys(n).forEach((function(e){t[e]=t[e]||[],t[e].push(encodeURIComponent(n[e]))}))})),t}function jg(e,t){var n=Bg(t);e.cid=gg,ug(e,n,!1).send()}function Ng(e){var t=x(e,"context")||"",n=x(e,"vto");"outstream"===t&&n&&(e.renderer=function(){var e=Ns.install({url:vg});return e.setRender((function(e){window.mnet.queue.push((function(){var t={width:e.width,height:e.height,vastTimeout:e.vto,maxAllowedVastTagRedirects:e.mavtr,allowVpaid:e.avp,autoPlay:e.ap,preload:e.pl,mute:e.mt},n=e.dfp_id,i=Ll(n).divId||n;window.mnet.mediaNetoutstreamPlayer(e,i,t)}))})),e}())}h().medianetGlobals=h().medianetGlobals||{};var Lg={code:fg,gvlid:142,aliases:_g,supportedMediaTypes:[zs,Ls,Ms],isBidRequestValid:function(e){return e.params?e.params.cid&&Rt(e.params.cid)&&!Nt(e.params.cid)?(gg=e.params.cid,!0):(wt("".concat(fg," : cid should be a string")),!1):(wt("".concat(fg," : Missing bid parameters")),!1)},buildRequests:function(e,t){var n=function(e,t){return{site:xg(e[0].params.site,t),ext:Tg(e[0],t),id:e[0].auctionId,imp:e.map((function(e){return Og(e,t)})),ortb2:Dg(t.ortb2,e),tmax:t.timeout}}(e=jd(e),t);return{method:"POST",url:kg(t.bidderCode,n.ext.customer_id),data:JSON.stringify(n)}},interpretResponse:function(e,t){var n=[];if(!e||!e.body)return yt("".concat(fg," : response is empty")),n;var i=e.body.bidList;Ut(i)&&0!==i.length?(n=i.filter((function(e){return function(e){return!1===e.no_bid&&parseFloat(e.cpm)>0}(e)}))).forEach(Ng):yt("".concat(fg," : no bids"));var r=x(e,"body.ext.paApiAuctionConfigs")||[],o=x(e,"body.ext.igi")||[];return 0===r.length&&0===o.length?n:(o.length>0&&r.push.apply(r,a(o.map((function(e){return e.igs||[]})).flat())),{bids:n,paapi:r})},getUserSyncs:function(e,t){var n=function(e){return!jt(e)&&e[0].body&&e[0].body.ext&&Ut(e[0].body.ext.csUrl)?e[0].body.ext.csUrl:[]}(t);return e.iframeEnabled?og(n,{type:"iframe"}):e.pixelEnabled?og(n,{type:"image"}):void 0},onTimeout:function(e){try{jg({name:wg,value:e.length,relatedData:e[0].timeout||Se.getConfig("bidderTimeout")},e)}catch(e){}},onBidWon:function(e){try{jg({name:Sg,value:e.cpm},[e])}catch(e){}},onSetTargeting:function(e){try{var t={name:Ig,value:e.cpm};Se.getConfig("enableSendAllBids")||jg(t,[e])}catch(e){}},onBidderError:function(e){var t=e.error,n=e.bidderRequest;try{jg({name:Eg,relatedData:"timedOut:".concat(t.timedOut,"|status:").concat(t.status,"|message:").concat(t.reason.message)},n.bids)}catch(e){}},clearPageMeta:function(){hg=void 0},getWindowSize:function(){return{w:window.screen.width||-1,h:window.screen.height||-1}}};function Mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function zg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mg(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wr(Lg),g("medianetBidAdapter");var Fg="https://ms-cookie-sync.presage.io",qg={context:{netRevenue:!0,ttl:60,mediaType:"banner"},request:function(e,t,n,i){var r=e(t,n,i);r.tmax=1e3,Dn(r,"device.pxratio",window.devicePixelRatio),Dn(r,"site.page",$g().location.href),r.ext=En({},r.ext,{adapterversion:"2.0.4",prebidversion:"9.50.0"});var o=n.bids.find((function(e){return Boolean(x(e,"params.assetKey",!1))}));return o&&Dn(r,"site.id",o.params.assetKey),r},imp:function(e,t,n){var i=e(t,n),r=document.timeline&&document.timeline.currentTime?document.timeline.currentTime:0,o=t.adUnitCode;i.tagid=t.adUnitCode,i.ext=En({},t.params,{timeSpentOnPage:r,gpid:o},i.ext);var s=Vg(t);return s?i.bidfloor=s:delete i.bidfloor,i},bidResponse:function(e,t,n){var i=t.nurl;delete t.nurl;var r=e(t,n);return r.currency="USD",r.nurl=i,r}},Hg=Ip(qg);function Vg(e){if(!Ct(e.getFloor))return 0;var t=e.getFloor({currency:"USD",mediaType:"banner",size:"*"});return Dt(t)&&"USD"===t.currency?t.floor:0}function $g(){try{return gt()}catch(e){return ft()}}var Gg={code:"ogury",gvlid:31,supportedMediaTypes:[zs],isBidRequestValid:function(e){var t=function(e){if(e){var t=[];if(e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)){var n=e.mediaTypes.banner.sizes;Array.isArray(n[0])?t=n:t.push(n)}else Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes));return t}}(e),n=Boolean(t)&&t.length>0,i=!!x(e,"params.adUnitId")&&!!x(e,"params.assetKey"),r=!!x(e,"ortb2.site.publisher.id")&&!!e.adUnitCode;return n&&(i||r)},getUserSyncs:function(e,t,n,i,r){var o=n&&n.consentString||"",s=r&&r.gppString||"",a=r&&r.applicableSections&&r.applicableSections.toString()||"";return e.iframeEnabled?[{type:"iframe",url:"".concat(Fg,"/user-sync.html?gdpr_consent=").concat(o,"&source=prebid&gpp=").concat(s,"&gpp_sid=").concat(a)}]:e.pixelEnabled?[{type:"image",url:"".concat(Fg,"/v1/init-sync/bid-switch?iab_string=").concat(o,"&source=prebid&gpp=").concat(s,"&gpp_sid=").concat(a)},{type:"image",url:"".concat(Fg,"/ttd/init-sync?iab_string=").concat(o,"&source=prebid&gpp=").concat(s,"&gpp_sid=").concat(a)},{type:"image",url:"".concat(Fg,"/xandr/init-sync?iab_string=").concat(o,"&source=prebid&gpp=").concat(s,"&gpp_sid=").concat(a)}]:[]},buildRequests:function(e,t){return{method:"POST",url:"https://mweb-hb.presage.io/api/header-bidding-request",data:Hg.toORTB({bidRequests:e,bidderRequest:t}),options:{contentType:"application/json"}}},interpretResponse:function(e,t){return Hg.fromORTB({response:e.body,request:t.data}).bids},getFloor:Vg,onBidWon:function(e){$g().OG_PREBID_BID_OBJECT=zg({},e&&zg({},e)),e&&e.nurl&&Fn(e.nurl,null)},getWindowContext:$g,onTimeout:function(e){Fn("".concat("https://ms-ads-monitoring-events.presage.io","/bid_timeout"),null,JSON.stringify(zg(zg({},e[0]),{},{location:window.location.href})),{method:"POST",contentType:"application/json"})}};function Wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wg(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wr(Gg),g("oguryBidAdapter");var Qg="https://onetag-sys.com/usync/",Jg="onetag",Yg="Ad",Xg=Yi({bidderCode:Jg});function Zg(e){return void 0!==e.mediaTypes&&void 0!==e.mediaTypes.video}function ef(e,t){if(e===zs)return cf(t).length>0;if(e===Ms&&Zg(t)){var n=t.mediaTypes.video.context;if("outstream"===n||"instream"===n)return df(t).length>0}else if(e===Ls){var i,r;if("object"!==d(t.mediaTypes.native)||null===t.mediaTypes.native)return!1;if(!of(t)){if(void 0===t.nativeParams)return!1;var o=Dd(t.nativeParams);return o&&o.assets&&Array.isArray(o.assets)&&o.assets.length>0&&o.assets.every((function(e){return nf(e)}))}var s=!1,a=!1,c=null===(i=t.mediaTypes.native)||void 0===i||null===(i=i.ortb)||void 0===i?void 0:i.assets,l=null===(r=t.mediaTypes.native)||void 0===r||null===(r=r.ortb)||void 0===r?void 0:r.eventtrackers;return c&&Array.isArray(c)&&c.length>0&&c.every((function(e){return nf(e)}))&&(s=!0),l&&Array.isArray(l)&&l.length>0?l.every((function(e){return tf(e)}))&&(a=!0):l||(a=!0),s&&a}return!1}var tf=function(e){return!(!(e.event&&e.methods&&Number.isInteger(e.event)&&Array.isArray(e.methods))||!e.methods.length>0)},nf=function(e){return!(!e.hasOwnProperty("id")||!Number.isInteger(e.id))&&(!!(e.title||e.img||e.data||e.video)&&(!!(!e.title||e.title.len&&Number.isInteger(e.title.len))&&(!!(!e.data||e.data.type&&Number.isInteger(e.data.type))&&!(e.video&&!(e.video.mimes&&e.video.minduration&&e.video.maxduration&&e.video.protocols)))))};function rf(e){try{return void 0!==e.document.hidden?e.document.hidden:void 0!==e.document.msHidden?e.document.msHidden:void 0!==e.document.webkitHidden?e.document.webkitHidden:null}catch(e){return null}}function of(e){return e.mediaTypes.native.ortb&&"object"===d(e.mediaTypes.native.ortb)}function sf(e){var t=e.params;this.adUnitCode=e.adUnitCode,this.bidId=e.bidId,this.bidderRequestId=e.bidderRequestId,this.auctionId=x(e,"ortb2.source.tid"),this.transactionId=x(e,"ortb2Imp.ext.tid"),this.gpid=x(e,"ortb2Imp.ext.gpid")||x(e,"ortb2Imp.ext.data.pbadslot"),this.pubId=t.pubId,this.ext=t.ext,this.ortb2Imp=x(e,"ortb2Imp"),t.pubClick&&(this.click=t.pubClick),t.dealId&&(this.dealId=t.dealId);var n=function(e){var t=document.getElementById(e);try{for(var n=zl(t),i=n.top,r=n.left,o=n.width,s=n.height,a=t.ownerDocument.defaultView,d={top:i+a.pageYOffset,left:r+a.pageXOffset,width:o,height:s},c=a.frameElement;null!=c;){var l=zl(c),u=l.top,p=l.left;d.top+=u+a.pageYOffset,d.left+=p+a.pageXOffset,c=(a=a.parent).frameElement}return d}catch(e){return null}}(e.adUnitCode);n&&(this.coords=n)}function af(){try{if(null!=window.performance&&null!=window.performance.timing){var e={},t=window.performance.timing;return e.pageLoadTime=t.loadEventEnd-t.navigationStart,e.connectTime=t.responseEnd-t.requestStart,e.renderTime=t.domComplete-t.domLoading,e}}catch(e){return null}return null}function df(e){var t=e.mediaTypes.video.playerSize;return void 0!==t&&Array.isArray(t)&&t.length>0?lf(t):[]}function cf(e){return void 0!==e.mediaTypes&&void 0!==e.mediaTypes.banner&&void 0!==e.mediaTypes.banner.sizes&&Array.isArray(e.mediaTypes.banner.sizes)&&e.mediaTypes.banner.sizes.length>0?lf(e.mediaTypes.banner.sizes):!Zg(e)&&e.sizes&&Array.isArray(e.sizes)?lf(e.sizes):[]}function lf(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({width:i[0],height:i[1]})}return t}function uf(e,t,n){if("function"!=typeof e.getFloor)return[];var i=function(n){var i=e.getFloor({currency:"EUR",mediaType:t||"*",size:n||"*"})||{};return Kg(Kg({},i),{},{size:n?en(n):void 0,floor:null!=i.floor?i.floor:null})};return Array.isArray(n)&&n.length>0?n.map((function(e){return i([e.width,e.height])})):[i("*")]}var pf={code:Jg,gvlid:241,supportedMediaTypes:[zs,Ms,Ls],isBidRequestValid:function(e){return void 0!==e&&void 0!==e.params&&"string"==typeof e.params.pubId&&(ef(zs,e)||ef(Ms,e)||ef(Ls,e))},buildRequests:function(e,t){var n,i,r,o,s,a=Kg({bids:(i=e,r=i.filter((function(e){return Zg(e)})).map((function(e){var t={};return sf.call(t,e),t.context=e.mediaTypes.video.context,t.playerSize=df(e),t.mediaTypeInfo=en(e.mediaTypes.video),t.type=Ms,t.priceFloors=uf(e,Ms,t.playerSize),t})),o=i.filter((function(e){return ef(zs,e)})).map((function(e){var t={};return sf.call(t,e),t.sizes=cf(e),t.type=zs,t.mediaTypeInfo=en(e.mediaTypes.banner),t.priceFloors=uf(e,zs,t.sizes),t})),s=i.filter((function(e){return ef(Ls,e)})).map((function(e){var t={};if(sf.call(t,e),t.sizes=cf(e),t.type=Ls+Yg,t.mediaTypeInfo=en(e.mediaTypes.native),!of(e)){var n=Dd(e.nativeParams);t.mediaTypeInfo={},t.mediaTypeInfo.adTemplate=e.nativeParams.adTemplate,t.mediaTypeInfo.ortb=n}return t.priceFloors=uf(e,Ls,t.sizes),t})),r.concat(o).concat(s))},function(e){var t=nt(),n=function(){var e=window;window.parent;try{for(;e!==e.parent;)e.parent.location.href,e=e.parent}catch(e){}return e}();return{location:x(e,"refererInfo.page",null),referrer:x(e,"refererInfo.ref",null),stack:x(e,"refererInfo.stack",[]),numIframes:x(e,"refererInfo.numIframes",0),wWidth:nt().innerWidth,wHeight:nt().innerHeight,oWidth:t.outerWidth,oHeight:t.outerHeight,sWidth:t.screen.width,sHeight:t.screen.height,aWidth:t.screen.availWidth,aHeight:t.screen.availHeight,sLeft:"screenLeft"in n?n.screenLeft:n.screenX,sTop:"screenTop"in n?n.screenTop:n.screenY,xOffset:n.pageXOffset,yOffset:n.pageYOffset,docHidden:rf(n),docHeight:n.document.body?n.document.body.scrollHeight:null,hLength:history.length,timing:af(),version:{prebid:"9.50.0",adapter:"1.1.3"}}}(t));t&&t.gdprConsent&&(a.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:t.gdprConsent.gdprApplies,addtlConsent:t.gdprConsent.addtlConsent}),t&&t.gppConsent&&(a.gppConsent={consentString:t.gppConsent.gppString,applicableSections:t.gppConsent.applicableSections}),t&&t.uspConsent&&(a.usPrivacy=t.uspConsent),t&&t.ortb2&&(a.ortb2=t.ortb2),e&&0!==e.length&&e[0].userIdAsEids&&(a.userId=e[0].userIdAsEids),e&&0!==e.length&&e[0].schain&&function(e){var t=!1,n=["asi","sid","hp"];if(!e||!e.nodes)return t;t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0),t||wt("OneTag: required schain params missing");return t}(e[0].schain)&&(a.schain=e[0].schain);try{Xg.hasLocalStorage()&&(a.onetagSid=Xg.getDataFromLocalStorage("onetag_sid"))}catch(e){}var d=navigator.connection||navigator.webkitConnection;return a.networkConnectionType=d&&d.type?d.type:null,a.networkEffectiveConnectionType=d&&d.effectiveType?d.effectiveType:null,a.fledgeEnabled=Boolean(null==t||null===(n=t.paapi)||void 0===n?void 0:n.enabled),{method:"POST",url:"https://onetag-sys.com/prebid-request",data:JSON.stringify(a)}},interpretResponse:function(e,t){var n=e.body,i=[],r=JSON.parse(t.data);if(!n||n.nobid&&!0===n.nobid)return i;if(!(n.fledgeAuctionConfigs||n.bids&&Array.isArray(n.bids)&&0!==n.bids.length))return i;if(Array.isArray(n.bids)&&n.bids.forEach((function(e){var t={requestId:e.requestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.creativeId,dealId:null==e.dealId?e.dealId:"",currency:e.currency,netRevenue:e.netRevenue||!1,mediaType:e.mediaType===Ls+Yg?Ls:e.mediaType,meta:{mediaType:e.mediaType,advertiserDomains:e.adomain},ttl:e.ttl||300};if(e.dsa&&(t.meta.dsa=e.dsa),e.mediaType===zs)t.ad=e.ad;else if(e.mediaType===Ms){var n=(r.bids||[]).find((function(t){return t.bidId===e.requestId&&t.type===Ms})),o=n.context,s=n.adUnitCode;o===ir?(t.vastUrl=e.vastUrl,t.videoCacheKey=e.videoCacheKey):o===nr&&(t.vastXml=e.ad,t.vastUrl=e.vastUrl,e.rendererUrl&&(t.renderer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ns.install({id:e.requestId,url:e.rendererUrl,config:t,adUnitCode:e.adUnitCode,loaded:!1});try{n.setRender((function(t){var n=t.renderer,i=t.width,r=t.height,o=t.vastXml,s=t.adUnitCode;n.push((function(){window.onetag.Player.init(Kg(Kg({},e),{},{width:i,height:r,vastXml:o,nodeId:s,config:n.getConfig()}))}))}))}catch(e){}return n}(Kg(Kg({},e),{},{adUnitCode:s}))))}else e.mediaType!==Ls&&e.mediaType!==Ls+Yg||(t.native=e.native);i.push(t)})),n.fledgeAuctionConfigs&&Array.isArray(n.fledgeAuctionConfigs)){var o=n.fledgeAuctionConfigs;return{bids:i,paapi:o}}return i},getUserSyncs:function(e,t,n,i,r){var o=[],s="";return n&&("boolean"==typeof n.gdprApplies&&(s+="&gdpr="+(n.gdprApplies?1:0)),"string"==typeof n.consentString&&(s+="&gdpr_consent="+n.consentString)),r&&"string"==typeof r.gppString&&(s+="&gpp_consent="+r.gppString),i&&"string"==typeof i&&(s+="&us_privacy="+i),e.iframeEnabled&&o.push({type:"iframe",url:Qg+"?cb="+(new Date).getTime()+s}),e.pixelEnabled&&o.push({type:"image",url:Qg+"?tag=img"+s}),o}};function hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hf(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wr(pf),g("onetagBidAdapter");var ff={code:"openx",gvlid:69,supportedMediaTypes:[zs,Ms,Ls],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;if(x(e,"mediaTypes.banner")&&t)return!!e.params.unit||x(e,"mediaTypes.banner.sizes.length")>0;return!(!e.params.unit||!t)},buildRequests:function(e,t){var n=e.filter((function(e){return bf(e)})),i=e.filter((function(e){return function(e){var t=!bf(e)&&!yf(e);return x(e,"mediaTypes.banner")||t}(e)||yf(e)})).map((function(e){return gf(gf({},e),{},{mediaTypes:gf(gf({},e.mediaTypes),{},{video:void 0})})})),r=i.length?[vf(i,t,null)]:[];return n.forEach((function(e){r.push(vf([e],t,Ms))})),r},interpretResponse:function(e,t){e.body||(e.body={nbr:0});return mf.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,n,i){if(e.iframeEnabled||e.pixelEnabled){var r=e.iframeEnabled?"iframe":"image",o=[],s="https://u.openx.net/w/1.0/pd";if(n&&(o.push("gdpr="+(n.gdprApplies?1:0)),o.push("gdpr_consent="+encodeURIComponent(n.consentString||""))),i&&o.push("us_privacy="+encodeURIComponent(i)),t.length>0&&t[0].body&&t[0].body.ext){var a=t[0].body.ext;a.delDomain?s="https://".concat(a.delDomain,"/w/1.0/pd"):a.platform&&o.push("ph="+a.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:r,url:"".concat(s).concat(o.length>0?"?"+o.join("&"):"")}]}}};Wr(ff);var mf=Ip({context:{netRevenue:!0,ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp:function(e,t,n){var i=e(t,n);return En(i,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&Dn(i,"ext.customParams",t.params.customParams),t.params.customFloor&&!i.bidfloor&&(i.bidfloor=t.params.customFloor),i},request:function(e,t,n,i){var r=e(t,n,i);En(r,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0"),pv:"9.50.0"}});var o=i.bidRequests[0];return o.params.coppa&&Dn(r,"regs.coppa",1),o.params.doNotTrack&&Dn(r,"device.dnt",1),o.params.platform&&Dn(r,"ext.platform",o.params.platform),o.params.delDomain&&Dn(r,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&Dn(r,"ext.response_template_name",o.params.response_template_name),o.params.test&&(r.test=1),r},bidResponse:function(e,t,n){var i=e(t,n);return t.ext&&(i.meta.networkId=t.ext.dsp_id,i.meta.advertiserId=t.ext.buyer_id,i.meta.brandId=t.ext.brand_id),i},response:function(e,t,n,i){var r=i.ortbRequest;r.ext&&(r.ext.delDomain&&Dn(n,"ext.delDomain",r.ext.delDomain),r.ext.platform&&Dn(n,"ext.platform",r.ext.platform));var o=e(t,n,i),a=x(n,"ext.fledge_auction_configs");return a?(a=Object.entries(a).map((function(e){var t,n=s(e,2),r=n[0],o=n[1];return{bidId:r,config:En(Object.assign({},o),{auctionSignals:{ortb2Imp:null===(t=i.impContext[r])||void 0===t?void 0:t.imp}})}})),{bids:o.bids,paapi:a}):o},overrides:{imp:{bidfloor:function(e,t,n,i){var r={};e(r,n,gf(gf({},i),{},{currency:"USD"})),"USD"===r.bidfloorcur&&Object.assign(t,r)},video:function(e,t,n,i){var r=n.mediaTypes[Ms];r&&(r=Object.assign({},r,n.params.video),n=gf(gf({},n),{},{mediaTypes:l({},Ms,r)})),e(t,n,i)}}}});function vf(e,t,n){return{method:"POST",url:Se.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:mf.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:n}})}}function bf(e){return x(e,"mediaTypes.video")}function yf(e){return x(e,"mediaTypes.native")}function Af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g("openxBidAdapter");var Sf,If="PubMatic: ",Ef=void 0,_f="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),xf=Object.values(te),Pf={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:""},Tf={1:"PMP",5:"PREF",6:"PMPG"},Of={banner:360,video:1800,native:1800},Cf={},Rf=[],Uf=[],kf=0,Df=Ip({context:{netRevenue:!0,ttl:360},imp:function(e,t,n){var i=t.params,r=i.kadfloor,o=i.currency,s=i.adSlot,a=void 0===s?"":s,d=i.deals,c=i.dctr,l=i.pmzoneid,u=i.hashedKey,p=t.adUnitCode,h=t.mediaTypes,g=t.rtd,f=e(t,n);return f.hasOwnProperty("banner")||f.hasOwnProperty("video")||f.hasOwnProperty("native")?(d&&Vf(f,d),c&&Hf(f,c),null!=g&&g.jwplayer&&qf(f,g.jwplayer),f.bidfloor=tm("kadfloor",r),f.bidfloorcur=o?tm("currency",o):"USD",Nf(f,t),f.hasOwnProperty("banner")&&Lf(f.banner,a),f.hasOwnProperty("video")&&Ff(null==h?void 0:h.video,p,f),f.hasOwnProperty("native")&&zf(f,null==h?void 0:h.native),(f.hasOwnProperty("banner")||f.hasOwnProperty("video"))&&im(f,p,null==t?void 0:t.sizes),l&&(f.ext.pmZoneId=l),Mf(f,a.trim(),u),jf(f),["banner","video","native"].forEach((function(e){var t;null!==(t=f[e])&&void 0!==t&&t.battr&&!Array.isArray(f[e].battr)&&delete f[e].battr})),f):null},request:function(e,t,n,i){var r,o=e(t,n,i);if(Rf.length||o.bcat){var s=Xf([].concat(a(Rf||[]),a(o.bcat||[])));s.length&&(o.bcat=s)}if(Uf.length||o.acat){var d=Yf([].concat(a(Uf||[]),a(o.acat||[])));d.length&&(o.acat=d)}return Gf(o),Wf(o,null==i?void 0:i.bidRequests),Qf(o),(null!=n&&n.bidderCode?gi.get(n.bidderCode,"allowAlternateBidderCodes"):void 0)&&$f(o,n),null!=n&&null!==(r=n.ortb2)&&void 0!==r&&null!==(r=r.ext)&&void 0!==r&&null!==(r=r.prebid)&&void 0!==r&&r.previousauctioninfo&&Dn(o,"ext.previousAuctionInfo",n.ortb2.ext.prebid.previousauctioninfo),o},bidResponse:function(e,t,n){var i=e(t,n);i.meta&&(i.meta.mediaType=i.mediaType),Kf(i,t,n);var r=i.mediaType,o=i.playerWidth,s=i.playerHeight,a=null==n?void 0:n.bidRequest,d=a.params,c=a.adUnitCode,l=a.mediaTypes;if(r===Ms){i.width||(i.width=o),i.height||(i.height=s);var u=l[r],p=u.context,h=u.maxduration;"outstream"===p&&d.outstreamAU&&c&&(i.rendererCode=d.outstreamAU,i.renderer=em.newRenderer(i.rendererCode,c)),Jf(i,p,h)}if(r===Ls&&t.adm){try{var g=JSON.parse(t.adm.replace(/\\/g,""));i.native={ortb:wf({},g.native)}}catch(e){return void At("".concat(If,"Error: Cannot parse native response for ad response: ").concat(t.adm))}i.width=t.w||0,i.height=t.h||0}return i},response:function(e,t,n,i){return e(t,n,i)},overrides:{imp:{bidfloor:!1,extBidfloor:!1},bidResponse:{native:!1}}});var Bf=function(e){var t={};if(e.aspect_ratios&&Ut(e.aspect_ratios)&&e.aspect_ratios.length){var n=e.aspect_ratios[0],i=n.min_width,r=n.min_height;fn(i)&&fn(r)&&(t.wmin=i,t.hmin=r),t.ext={aspectratios:e.aspect_ratios.filter((function(e){var t=e.ratio_width,n=e.ratio_height;return t&&n})).map((function(e){var t=e.ratio_width,n=e.ratio_height;return"".concat(t,":").concat(n)}))}}return t.w=e.w||e.width,t.h=e.h||e.height,e.sizes&&2===e.sizes.length&&fn(e.sizes[0])&&fn(e.sizes[1])&&(t.w=e.sizes[0],t.h=e.sizes[1],delete t.wmin,delete t.hmin),e.ext&&(t.ext=e.ext),e.mimes&&(t.mimes=e.mimes),t},jf=function(e){var t,n;e.displaymanager||(e.displaymanager="Prebid.js"),e.displaymanagerver||(e.displaymanagerver="9.50.0");var i=null===(t=e.ext)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.adserver)||void 0===t?void 0:t.adslot;i&&(e.ext.dfp_ad_unit_code=i),null!==(n=e.ext)&&void 0!==n&&n.data&&0===Object.keys(e.ext.data).length&&delete e.ext.data};var Nf=function(e,t){var n=-1,i=Object.keys(t.mediaTypes),r=i.length>1;"function"!=typeof t.getFloor||Se.getConfig("pubmatic.disableFloors")||[zs,Ms,Ls].forEach((function(i){var o;e.hasOwnProperty(i)&&((("banner"===i?null===(o=e[i])||void 0===o||null===(o=o.format)||void 0===o?void 0:o.map((function(e){return[e.w,e.h]})):["*"])||["*"]).forEach((function(o){var s=t.getFloor({currency:e.bidfloorcur,mediaType:i,size:o});if(yt(If,"floor from floor module returned for mediatype:",i," and size:",o," is: currency",s.currency,"floor",s.floor),Dt(s)&&(null==s?void 0:s.currency)===e.bidfloorcur&&!isNaN(parseInt(s.floor))){var a=parseFloat(s.floor);r&&i!==zs&&(yt(If,"floor from floor module returned for mediatype:",i,"is : ",a,"with currency :",e.bidfloorcur),e[i].ext={bidfloor:a,bidfloorcur:e.bidfloorcur}),yt(If,"floor from floor module:",a,"previous floor value",n,"Min:",Math.min(a,n)),n=-1===n?a:Math.min(a,n),yt(If,"new floor value:",n)}})),r&&i===zs&&(e[i].ext={bidfloor:n,bidfloorcur:e.bidfloorcur}))})),e.bidfloor&&(yt(If,"Comparing floors:","from floor module:",n,"impObj.bidfloor:",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=n>0?n:Ef,yt(If,"Updated imp.bidfloor:",e.bidfloor),r&&function(e,t){t.forEach((function(t){var n;null!==(n=e[t])&&void 0!==n&&n.ext&&e[t].ext.bidfloor===e.bidfloor&&e[t].ext.bidfloorcur===e.bidfloorcur&&delete e[t].ext}))}(e,i)},Lf=function(e,t){var n,i,r,o=null===(n=t.split(":")[0])||void 0===n?void 0:n.split("@");o=2==(null===(i=o)||void 0===i?void 0:i.length)?o[1].split("x"):3==o.length?o[2].split("x"):[];var s=e.format[0];2!==o.length||0==parseInt(o[0])&&0==parseInt(o[1])?(e.w=s.w,e.h=s.h):(e.w=parseInt(o[0]),e.h=parseInt(o[1])),e.format=e.format.filter((function(t){return!(t.w===e.w&&t.h===e.h)})),null!==(r=e.pos)&&void 0!==r||(e.pos=0)},Mf=function(e,t,n){var i=t.split(":")[0].split("@");e.tagid=n||i[0]},zf=function(e,t){if(null!=t&&t.ortb||(e.native.request=JSON.stringify(function(e){var t={ver:"1.2",assets:[]};for(var n in e)if(!oe.includes(n))if(V.hasOwnProperty(n)||xf.includes(n)){var i=e[n],r=i.required&&Bt(i.required)?1:0,o={id:t.assets.length,required:r};n in te?o.data=wf(wf({type:ne[te[n]]},i.len&&{len:i.len}),i.ext&&{ext:i.ext}):"icon"===n||"image"===n?o.img=wf({type:"icon"===n?ie:re},Bf(i)):"title"===n?o.title=wf({len:i.len||140},i.ext&&{ext:i.ext}):"ext"===n&&(o.ext=i,delete o.required),t.assets.push(o)}else At("".concat(If,": Unrecognized asset: ").concat(n,". Ignored."));return t}(t))),null!=t&&t.ortb){var n=JSON.parse(e.native.request),i=n.assets;null!=i&&i.some((function(e){return e.title||e.img||e.data||e.video}))?e.native.request=JSON.stringify(wf({ver:"1.2"},n)):(At("".concat(If,": Native assets object is empty or contains invalid objects")),delete e.native)}},Ff=function(e,t,n){var i=n.video;x(e,"plcmt")||At("Video.plcmt param missing for "+t),e&&(i.w||i.h)||(delete n.video,At("".concat(If,"Error: Missing ").concat(e?"video size params (playersize or w&h)":"video config params"," for adunit: ").concat(t," with mediaType set as video. Ignoring video impression in the adunit.")))},qf=function(e,t){var n,i=null==t?void 0:t.targeting;if(i&&null!==(n=i.segments)&&void 0!==n&&n.length){var r="".concat("jw-","id=").concat(i.content.id),o=i.segments.map((function(e){return"".concat("jw-").concat(e,"=1")})).join("|"),s="".concat(r,"|").concat(o);e.ext=e.ext||{},e.ext.key_val=e.ext.key_val?"".concat(e.ext.key_val,"|").concat(s):s}},Hf=function(e,t){if(Rt(t)&&t.length>0){var n=t.split("|").filter((function(e){return e.trim().length>0}));t=n.map((function(e){return e.trim()})).join("|"),e.ext.key_val=t}else At(If+"Ignoring param : dctr with value : "+t+", expects string-value, found empty or non-string value")},Vf=function(e,t){Ut(t)?t.forEach((function(t){"string"==typeof t&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):At("".concat(If,"Error: deal-id present in array bid.params.deals should be a string with more than 3 characters length, deal-id ignored: ").concat(t))})):At("".concat(If,"Error: bid.params.deals should be an array of strings."))},$f=function(e,t){var n=["all"],i=gi.get(t.bidderCode,"allowedAlternateBidderCodes"),r=Ut(i)?i.map((function(e){return e.trim().toLowerCase()})).filter(Wt):n;e.ext.marketplace={allowedbidders:r.includes("*")||r.includes("all")?n:a(new Set(["pubmatic"].concat(a(r.filter((function(e){return e&&e.trim()}))))))}},Gf=function(e){var t;Dn(e,"at",1),Dn(e,"cur",["USD"]),e.test=window.location.href.includes("pubmaticTest=true")?1:void 0,e.source&&!Object.keys(e.source).length&&delete e.source,null!==(t=e.app)&&void 0!==t&&t.publisher&&(e.app.publisher.id=kf)},Wf=function(e,t){var n,i,r,o=Cf,s=o.gender,a=o.yob,d=o.pubId,c=o.refURL,l=o.kadpageurl,u=e.user;e.device&&Object.assign(e.device,{js:1,connectiontype:Zf()}),e.user=wf(wf({},e.user),{},{gender:(null==u?void 0:u.gender)||(null==s?void 0:s.trim())||Ef,yob:(null==u?void 0:u.yob)||tm("yob",a)});var p=x(t,"0.userIdAsEids");!t.length||null==p||!p.length||null!==(n=e.user.ext)&&void 0!==n&&n.eids||(e.user.ext=e.user.ext||{},e.user.ext.eids=p),null!==(i=e.site)&&void 0!==i&&i.publisher&&(e.site.ref=e.site.ref||c,e.site.publisher.id=null==d?void 0:d.trim()),null!==(r=e.site)&&void 0!==r&&r.page&&l&&(e.site.page=l.trim()),e.device.geo&&!e.user.geo?e.user.geo=e.device.geo:e.user.geo&&!e.device.geo&&(e.device.geo=e.user.geo)},Kf=function(e,t,n){var i,r,o,s,a,d,c=n.ortbRequest,l=n.seatbid;(e.referrer=(null===(i=c.site)||void 0===i?void 0:i.ref)||"",e.sspID=e.partnerImpId=t.id||"",e.ad=t.adm,e.pm_dspid=null!==(r=t.ext)&&void 0!==r&&r.dspid?t.ext.dspid:null,e.pm_seat=l.seat,e.creativeId||(e.creativeId=t.id),360==e.ttl&&(e.ttl=Of[e.mediaType]),t.dealid)&&(e.dealChannel=null!==(d=t.ext)&&void 0!==d&&d.deal_channel?Tf[t.ext.deal_channel]||null:"PMP");if(null!==(o=l.ext)&&void 0!==o&&o.buyid&&(e.adserverTargeting={hb_buyid_pubmatic:l.ext.buyid}),null!==(s=t.ext)&&void 0!==s&&s.marketplace&&(e.bidderCode=t.ext.marketplace),t.ext){var u=t.ext,p=u.dspid,h=u.dchain,g=u.dsa,f=u.ibv;p&&(e.meta.networkId=e.meta.demandSource=p),h&&(e.meta.dchain=h),g&&Object.keys(g).length&&(e.meta.dsa=g),f&&(e.ext=e.ext||{},e.ext.ibv=f,e.meta.mediaType=Ms)}var m=l.seat||(null===(a=t.ext)||void 0===a?void 0:a.advid);m&&(e.meta.advertiserId=e.meta.agencyId=e.meta.buyerId=m),nm(t.adomain)&&(e.meta.clickUrl=e.meta.brandId=t.adomain[0]),t.cat&&nm(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])},Qf=function(e){var t=Cf,n=t.profId,i=t.verId,r=t.wiid,o=t.transactionId;e.ext={epoch:(new Date).getTime(),wrapper:{profile:n?parseInt(n):void 0,version:i?parseInt(i):void 0,wiid:r,wv:"prebid_prebid_9.50.0",transactionId:o,wp:"pbjs"},cpmAdjustment:Sf}},Jf=function(e,t,n){var i,r;if(null!=e&&null!==(i=e.ext)&&void 0!==i&&i.prebiddealpriority&&t==Fs){var o=(null==e||null===(r=e.ext)||void 0===r||null===(r=r.video)||void 0===r?void 0:r.duration)||n;e.video={context:Fs,durationSeconds:o,dealTier:e.ext.prebiddealpriority}}},Yf=function(e){return a(new Set(e.filter((function(e){if("string"==typeof e)return!0;At(If+"acat: Each category should be a string, ignoring category: "+e)})).map((function(e){return e.trim()}))))},Xf=function(e){var t=(e=e.map((function(e){return"string"==typeof e?e.trim():e}))).filter((function(e){return"string"!=typeof e||e.length<3}));return At(If+"bcat: Each category must be a string with a length greater than 3, ignoring "+t),a(new Set(e.filter((function(e){return"string"==typeof e&&e.length>=3}))))},Zf=function(){var e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);return{ethernet:1,wifi:2,"slow-2g":4,"2g":4,"3g":5,"4g":6}[null==e?void 0:e.effectiveType]||0},em={bootstrapPlayer:function(e){var t={code:e.adUnitCode,vastXml:e.vastXml||null,vastUrl:e.vastUrl||null};if(t.vastXml||t.vastUrl){var n=em.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),r=window.bluebillywig.renderers.find((function(e){return e._id===n}));r?r.bootstrap(t,i):At("".concat(If,": Couldn't find a renderer with ").concat(n))}else At("".concat(If,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=_f.replace("$RENDERER",e),i=Ns.install({url:n,loaded:!1,adUnitCode:t});try{i.setRender(em.outstreamRender)}catch(e){At("".concat(If,": Error tying to setRender on renderer"),e)}return i},outstreamRender:function(e){e.renderer.push((function(){return em.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}};function tm(e,t){var n;if(!Rt(t))return t&&At(If+"Ignoring param key: "+e+", expects string-value, found "+d(t)),Ef;var i={pmzoneid:function(){return t.split(",").slice(0,50).map((function(e){return e.trim()})).join()},kadfloor:function(){return parseFloat(t)},lat:function(){return parseFloat(t)},lon:function(){return parseFloat(t)},yob:function(){return parseInt(t)}};return(null===(n=i[e])||void 0===n?void 0:n.call(i))||t}function nm(e){return!0===Ut(e)&&e.length>0}var im=function(e,t,n){var i,r,o={w:0,h:0};(null===(i=e.video)||void 0===i?void 0:i.w)>0&&(null===(r=e.video)||void 0===r?void 0:r.h)>0?(o.w=e.video.w,o.h=e.video.h):o=function(e){return e&&e.length?e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}),e[0]):{w:0,h:0}}(n);var s=document.getElementById(t);if(s){var a=function(e){return!tn()&&null!==e}(s)?function(e,t,n){return"visible"===t.document.visibilityState?Fl(e,n):0}(s,gt(),o):"na";e.ext||(e.ext={}),e.ext.viewability={amount:isNaN(a)?a:Math.round(a)}}},rm={code:"pubmatic",gvlid:76,supportedMediaTypes:[zs,Ms,Ls],isBidRequestValid:function(e){if(!e||!e.params)return!1;var t=e.params.publisherId,n=e.mediaTypes||{},i=n[Ms]||{};if(!Rt(t))return At(If+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(n.hasOwnProperty(Ms)){var r=x(e,"mediaTypes.video.mimes"),o=x(e,"params.video.mimes");if(!nm(r)&&!nm(o))return At(If+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!i.context)return wt("".concat(If,": No context specified in bid. Rejecting bid: "),e),!1;if("outstream"===i.context&&!Rt(e.params.outstreamAU)&&!e.renderer&&!i.renderer)return n.hasOwnProperty(zs)||n.hasOwnProperty(Ls)?(delete n[Ms],At("".concat(If,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(wt("".concat(If,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0},buildRequests:function(e,t){var n,i,r,o,s,a=(null==t?void 0:t.refererInfo)||{},c=a.page,l=a.ref,u=(null==t||null===(n=t.bids)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.params)||{},p=u.publisherId,h=u.profId,g=u.verId;kf=(null==p?void 0:p.trim())||(null===(o=null==t?void 0:t.bids,i=Array.isArray(o)&&o.length>0&&(null===(s=o.find((function(e){var t;return null===(t=e.params)||void 0===t||null===(t=t.publisherId)||void 0===t?void 0:t.trim()})))||void 0===s?void 0:s.params.publisherId)||null)||void 0===i?void 0:i.trim());var f,m=at();Rf=[],Uf=[],Cf={pageURL:c||window.location.href,refURL:l||window.document.referrer,pubId:kf,kadpageurl:c||window.location.href,profId:h,verId:g},e.forEach((function(e){var n;e.params.wiid=e.params.wiid||t.auctionId||m,function(e,t){Object.keys(Pf).forEach((function(n){var i=e[n];i&&(Rt(i)?t[n]=i:At("".concat(If,"Ignoring param: ").concat(n," with value: ").concat(Pf[n],", expects string value, found ").concat(d(i))))}))}((f=en(e)).params,Cf),Cf.transactionId=null===(n=f.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.tid;var i=f.params,r=i.bcat,o=i.acat;r&&(Rf=Rf.concat(r)),o&&(Uf=Uf.concat(o))}));var v=Df.toORTB({validBidRequests:e,bidderRequest:t}),b={method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:v,bidderRequest:t,options:{endpointCompression:!0}};return null!=v&&null!==(r=v.imp)&&void 0!==r&&r.length?b:null},interpretResponse:function(e,t){var n=Df.fromORTB({response:e.body,request:t.data}).bids,i=x(e.body,"ext.fledge_auction_configs");return i?{bids:n,paapi:Object.entries(i).map((function(e){var t=s(e,2);return{bidId:t[0],config:wf({auctionSignals:{}},t[1])}}))}:n},getUserSyncs:function(e,t,n,i,r){var o,s=kf;n&&(s+="&gdpr=".concat(n.gdprApplies?1:0,"&gdpr_consent=").concat(encodeURIComponent(n.consentString||""))),i&&(s+="&us_privacy=".concat(encodeURIComponent(i))),null!=r&&r.gppString&&null!=r&&null!==(o=r.applicableSections)&&void 0!==o&&o.length&&(s+="&gpp=".concat(encodeURIComponent(r.gppString),"&gpp_sid=").concat(encodeURIComponent(r.applicableSections.join(",")))),!0===Se.getConfig("coppa")&&(s+="&coppa=1");var a=e.iframeEnabled?"iframe":"image";return[{type:a,url:("iframe"===a?"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p=":"https://image8.pubmatic.com/AdServer/ImgSync?p=")+s}]},onBidWon:function(e){!function(e){var t;if(e){var n=e.originalCurrency,i=e.currency,r=e.cpm,o=e.originalCpm,s=e.meta,a=n!==i&&Ct(e.getCpmInNewCurrency)?e.getCpmInNewCurrency(n):r,d=e.mediaType,c=null==s?void 0:s.mediaType;Sf=Sf||{currency:i,originalCurrency:n,adjustment:[]};var l={cpmAdjustment:Number(((o-a)/o).toFixed(2)),mediaType:d,metaMediaType:c,cpm:a,originalCpm:o},u=null===(t=Sf)||void 0===t||null===(t=t.adjustment)||void 0===t?void 0:t.findIndex((function(e){return(null==e?void 0:e.mediaType)===d&&(null==e?void 0:e.metaMediaType)===c}));-1!==u?Sf.adjustment.splice(u,1,l):Sf.adjustment.push(l)}}(e)}};Wr(rm),g("pubmaticBidAdapter");var om=l(l(l({},zs,"banner"),Ls,"native"),Ms,"video");function sm(e,t){var n=t.params;n&&Dn(e,"ext.prebid.bidder.".concat(t.bidder),n)}var am=l(l(l(l({},Jc,{extPrebid:{fn:function(e,t){var n;Dn(e,"ext.prebid",En({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(n=e.ext)||void 0===n?void 0:n.prebid)),Se.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t;Dn(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:h().version},null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.channel))}},extPrebidAliases:{fn:function(e,t,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,r=void 0===i?Rs:i;if(r.aliasRegistry[t.bidderCode]){var o=r.bidderRegistry[t.bidderCode];if(!o||!o.getSpec().skipPbsAliasing){var s;Dn(e,"ext.prebid.aliases.".concat(t.bidderCode),r.aliasRegistry[t.bidderCode]);var a=Se.getConfig("gvlMapping.".concat(t.bidderCode))||(null==o||null===(s=o.getSpec)||void 0===s?void 0:s.call(o).gvlid);a&&Dn(e,"ext.prebid.aliasgvlids.".concat(t.bidderCode),a)}}}}}),Yc,{params:{fn:sm},adUnitCode:{fn:function(e,t){var n=t.adUnitCode;n&&Dn(e,"ext.prebid.adunitcode",n)}}}),Xc,{mediaType:{fn:function(e,t,n){var i,r=n.mediaType;r||(r=Ap.hasOwnProperty(t.mtype)?Ap[t.mtype]:null===(i=t.ext)||void 0===i||null===(i=i.prebid)||void 0===i?void 0:i.type,om.hasOwnProperty(r)||(r=zs)),e.mediaType=r},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===Ms){var n=x(t,"ext.prebid.cache.vastXml")||{},i=n.cacheId,r=n.url;if(!i||!r){var o=x(t,"ext.prebid.targeting")||{},s=o.hb_uuid,a=o.hb_cache_host,d=o.hb_cache_path;s&&a&&d&&(i=s,r="https://".concat(a).concat(d,"?uuid=").concat(s))}i&&r&&Object.assign(e,{videoCacheKey:i,vastUrl:r})}},priority:-10},bidderCode:{fn:function(e,t,n){var i;e.bidderCode=n.seatbid.seat,e.adapterCode=x(t,"ext.prebid.meta.adaptercode")||(null===(i=n.bidRequest)||void 0===i?void 0:i.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var n=x(t,"ext.prebid.bidid");Rt(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,t){var n=x(t,"ext.prebid.targeting");Dt(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,t){e.meta=En({},x(t,"ext.prebid.meta"),e.meta)}},pbsWinTrackers:{fn:function(e,t){var n;e.eventtrackers=e.eventtrackers||[],[[t.burl,os],[null==t||null===(n=t.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.events)||void 0===n?void 0:n.win,ss]].filter((function(t){var n=s(t,2),i=n[0],r=n[1];return i&&null==e.eventtrackers.find((function(e){var t=e.method,n=e.event,o=e.url;return n===r&&t===rs&&o===i}))})).forEach((function(t){var n=s(t,2),i=n[0],r=n[1];e.eventtrackers.push({method:rs,event:r,url:i})}))}}}),Zc,{serverSideStats:{fn:function(e,t,n){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var i=s(e,2),r=i[0],o=i[1],a=x(t,"ext.".concat(r,".").concat(n.bidderRequest.bidderCode));a&&(n.bidderRequest[o]=a,n.bidRequests.forEach((function(e){return e[o]=a})))}))}}}),dm=On((function(){return Sp(Ep(),am,sl(tl))}));function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function lm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var um="https://video-outstream.rubiconproject.com/apex-2.2.1.js",pm=Se.getConfig("rubicon")||{};Se.getConfig("rubicon",(function(e){En(pm,e.rubicon)}));var hm={},gm={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450",680:"970x570",682:"300x240",684:"970x550",686:"300x210",688:"300x220",690:"970x170",710:"600x250",712:"340x430"};Lt(gm,(function(e,t){return gm[e]=t}));var fm=Ip({request:function(e,t,n,i){var r,o=i.bidRequests,s=e(t,n,i);s.cur=["USD"],s.test=Se.getConfig("debug")?1:0,Dn(s,"ext.prebid.cache",{vastxml:{returnCreative:!0===pm.returnVast}}),Dn(s,"ext.prebid.bidders",{rubicon:{integration:pm.int_type||"pbjs"}}),Dn(s,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}(Se));var c=h().installedModules;return!c||c.length&&-1===c.indexOf("rubiconAnalyticsAdapter")||Dn(s,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t,n){var i,r={},o=Uu.apply(void 0,[n].concat(a(t.map((function(e){return e.params.keywords})))));t.forEach((function(t){var n,i={user:{ext:{data:lm({},t.params.visitor)}},site:{ext:{data:lm({},t.params.inventory)}}},o=e.imp.find((function(e){var t;return null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.bidder)||void 0===t||null===(t=t.rubicon)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.language}));o&&(i.site.content={language:null===(n=o.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.bidder)||void 0===n||null===(n=n.rubicon)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.language});r=En(r,t.ortb2||{},i);var s=Se.getConfig("user.id");r.user.id=r.user.id||s})),En(e,r),o&&o.length&&Dn(e,"site.keywords",o.join(","));null==e||null===(i=e.ext)||void 0===i||null===(i=i.prebid)||void 0===i||delete i.storedrequest}(s,o,n.ortb2),null==s||null===(r=s.ext)||void 0===r||null===(r=r.prebid)||void 0===r||delete r.storedrequest,!0===pm.disableFloors&&delete s.ext.prebid.floors,o.filter((function(e){return"object"===d(e.floorData)})).length>0&&(s.ext.prebid.floors={enabled:!1}),s},imp:function(e,t,n){var i,r=Sm(t);if(!r.includes(zs)||1!=r.length){var o=e(t,n);return o.id=t.adUnitCode,delete o.banner,"atf"===t.params.position&&o.video&&(o.video.pos=1),"btf"===t.params.position&&o.video&&(o.video.pos=3),null===(i=o.ext)||void 0===i||null===(i=i.prebid)||void 0===i||delete i.storedrequest,!0===t.params.bidonmultiformat&&r.length>1&&Dn(o,"ext.prebid.bidder.rubicon.formats",r),function(e,t){"USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur);if(!t.bidfloor){var n=parseFloat(x(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,o),o.id=hm[o.id]?o.id+hm[o.id]++:(hm[o.id]=2,o.id),o}},bidResponse:function(e,t,n){var i,r=e(t,n);r.meta.mediaType=x(t,"ext.prebid.type");var o=n.bidRequest,a=s("outstream"===(null===(i=o.mediaTypes.video)||void 0===i?void 0:i.context)?ym(o,Ms):[void 0,void 0],2),d=a[0],c=a[1];return r.width=t.w||d||r.playerWidth||0,r.height=t.h||c||r.playerHeight||0,r.mediaType===Ms&&"outstream"===o.mediaTypes.video.context&&(r.renderer=function(e){var t=Ns.install({id:e.adId,url:pm.rendererUrl||um,config:pm.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(bm)}catch(e){At("Prebid Error calling setRender on renderer",e)}return t}(r)),x(t,"ext.bidder.rp.advid")&&Dn(r,"meta.advertiserId",t.ext.bidder.rp.advid),r},context:{netRevenue:!1!==pm.netRevenue,ttl:360},processors:dm}),mm={code:"rubicon",gvlid:52,supportedMediaTypes:[zs,Ms,Ls],isBidRequestValid:function(e){var t=!0;if("object"!==d(e.params))return!1;for(var n=0,i=["accountId","siteId","zoneId"];n<i.length;n++)if(e.params[i[n]]=parseInt(e.params[i[n]]),isNaN(e.params[i[n]]))return wt("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var r=Sm(e,!0);if(!r.length)return!1;r.includes(Ms)&&(t=function(e){var t=!0,n=Object.prototype.toString.call([]),i=Object.prototype.toString.call(0),r={mimes:n,protocols:n,linearity:i};return Object.keys(r).forEach((function(n){Object.prototype.toString.call(x(e,"mediaTypes.video."+n))!==r[n]&&(t=!1,wt("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+r[n]))})),t}(e));var o=[zs,Ls].filter((function(e){return r.includes(e)})).length>0;return o?t&&o:t},buildRequests:function(e,t){var n,i=[],r=[];if((n=e.filter((function(e){var t=Sm(e)||[],n=t.length,i=e.params||{},r=i.bidonmultiformat,o=i.video;return 1===n&&(t.includes(Ms)||t.includes(Ls))||2===n&&!t.includes(zs)||o&&t.includes(Ms)||r&&(t.includes(Ms)||t.includes(Ls))})))&&n.length){var o=fm.toORTB({bidRequests:n,bidderRequest:t});Im(),r.push({method:"POST",url:"https://".concat(pm.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:n})}var s=e.filter((function(e){var t=Sm(e)||[],n=e.params||{},i=n.bidonmultiformat,r=n.video;return t.includes(zs)&&(1===t.length||i||!i&&!r||!i&&r&&!t.includes(Ms))}));if(!0!==pm.singleRequest)i=r.concat(s.map((function(e){var n=mm.createSlotParams(e,t);return{method:"GET",url:"https://".concat(pm.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:mm.getOrderedParams(n).reduce((function(e,t){var i=n[t];return Rt(i)&&""!==i||kt(i)?"".concat(e).concat(_m(t,i),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var a=s.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});i=r.concat(Object.keys(a).reduce((function(e,n){var i,r;return(i=a[n],r=10,i.map((function(e,t){return t%r==0?i.slice(t,t+r):null})).filter((function(e){return e}))).forEach((function(n){var i=mm.combineSlotUrlParams(n.map((function(e){return mm.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(pm.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:mm.getOrderedParams(i).reduce((function(e,t){var n=i[t];return Rt(n)&&""!==n||kt(n)?"".concat(e).concat(_m(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return i},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,i=/^eid_|^tpid_/,r=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter((function(e){return i.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return r.concat(Object.keys(e).filter((function(e){return-1===r.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,i){return Object.keys(n).forEach((function(r){t.hasOwnProperty(r)||(t[r]=new Array(e.length)),t[r].splice(i,1,n[r])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var i=t[e].join(";"),r=i.match(n);t[e]=r?r[1]:i})),t},createSlotParams:function(e,t){var n,i,r,o,a,c,l,u,p;e.startTime=(new Date).getTime();var h=e.params,g=ym(e,"banner"),f=s(h.latLong||[],2),m=f[0],v=f[1],b={account_id:h.accountId,site_id:h.siteId,zone_id:h.zoneId,size_id:g[0],alt_size_ids:g.slice(1).join(",")||void 0,rp_floor:(h.floor=parseFloat(h.floor))>=.01?h.floor:void 0,rp_secure:"1",tk_flint:"".concat(pm.int_type||"pbjs_lite","_v9.50.0"),"x_source.tid":null===(n=t.ortb2)||void 0===n||null===(n=n.source)||void 0===n?void 0:n.tid,"x_imp.ext.tid":null===(i=e.ortb2Imp)||void 0===i||null===(i=i.ext)||void 0===i?void 0:i.tid,l_pb_bid_id:e.bidId,o_cdep:null===(r=e.ortb2)||void 0===r||null===(r=r.device)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.cdep,ip:null===(o=e.ortb2)||void 0===o||null===(o=o.device)||void 0===o?void 0:o.ip,ipv6:null===(a=e.ortb2)||void 0===a||null===(a=a.device)||void 0===a?void 0:a.ipv6,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:h.userId,"p_geo.latitude":isNaN(parseFloat(m))?void 0:parseFloat(m).toFixed(4),"p_geo.longitude":isNaN(parseFloat(v))?void 0:parseFloat(v).toFixed(4),"tg_fl.eid":e.code,rf:vm(e,t)};if("function"==typeof e.getFloor&&!pm.disableFloors){var y;try{y=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){wt("Rubicon: getFloor threw an error: ",e)}b.rp_hard_floor=Dt(y)&&"USD"===y.currency&&!isNaN(parseInt(y.floor))?y.floor:void 0}!0===h.bidonmultiformat&&x(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(b.p_formats=Object.keys(e.mediaTypes).join(","));var A={1:"atf",3:"btf"}[x(e,"mediaTypes.banner.pos")]||"";b.p_pos="atf"===h.position||"btf"===h.position?h.position:A;var w,S=Se.getConfig("user.id");(S&&(b.ppuid=S),null!=e&&null!==(c=e.ortb2Imp)&&void 0!==c&&null!==(c=c.ext)&&void 0!==c&&c.ae&&(b.o_ae=1),"number"==typeof(null==e||null===(l=e.ortb2)||void 0===l||null===(l=l.site)||void 0===l?void 0:l.mobile)&&(b["p_site.mobile"]=e.ortb2.site.mobile),function(e,t){var n,i,r,o;if(!1===pm.readTopics)return;var s=[1,2,5,6,7,507].concat((null===(n=pm.sendSiteSegtax)||void 0===n?void 0:n.map((function(e){return Number(e)})))||[]),a=[4,508].concat((null===(i=pm.sendUserSegtax)||void 0===i?void 0:i.map((function(e){return Number(e)})))||[]),d=(null===(r=e.ortb2)||void 0===r||null===(r=r.user)||void 0===r?void 0:r.data)||[],c=(null===(o=e.ortb2)||void 0===o||null===(o=o.site)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.data)||[];d.forEach(Am(t,"v",a)),c.forEach(Am(t,"i",s))}(t,b),null!=e&&null!==(u=e.ortb2)&&void 0!==u&&null!==(u=u.user)&&void 0!==u&&null!==(u=u.ext)&&void 0!==u&&u.eids&&e.ortb2.user.ext.eids.forEach((function(e){var t=e.source,n=e.uids,i=void 0===n?[]:n,r=e.inserter,o=e.matcher,s=e.mm;e.ext;try{var a=i[0];if(!a)return;var d=function(e){var t,n;return[e.id,e.atype||"","",r||"",o||"",s||"",(null==e||null===(t=e.ext)||void 0===t?void 0:t.rtiPartner)||(null==e||null===(n=e.ext)||void 0===n?void 0:n.rtipartner)||""].join("^")}(a);if(b["eid_".concat(t)]=d,!b.ppuid){var c=i.find((function(e){var t;return"ppuid"===(null===(t=e.ext)||void 0===t?void 0:t.stype)}));null!=c&&c.id&&(b.ppuid=c.id)}}catch(e){At("Rubicon: error reading eid:",{source:t,uids:i},e)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(b.gdpr=Number(t.gdprConsent.gdprApplies)),b.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(b.us_privacy=encodeURIComponent(t.uspConsent)),null!==(p=t.gppConsent)&&void 0!==p&&p.gppString)&&(b.gpp=t.gppConsent.gppString,b.gpp_sid=null===(w=t.gppConsent)||void 0===w||null===(w=w.applicableSections)||void 0===w?void 0:w.toString());return b.rp_maxbids=t.bidLimit||1,function(e,t,n){var i={user:{ext:{data:lm({},e.params.visitor)}},site:{ext:{data:lm({},e.params.inventory)}}};e.params.keywords&&(i.site.keywords=Ut(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var r=En({},e.ortb2||{},i),o=x(e.ortb2Imp,"ext")||{},a=x(e.ortb2Imp,"ext.data")||{},c=x(e,"ortb2Imp.ext.gpid"),l=x(r,"regs.ext.dsa"),u={user:[4],site:[1,2,5,6,7]},p={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},h=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&x(e,"ext.segtax")&&u[n]&&-1!==u[n].indexOf(x(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():("object"!==d(e)||Array.isArray(e))&&void 0!==e?Array.isArray(e)?e.filter((function(e){if("object"!==d(e)&&void 0!==e)return e.toString();At("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString():void 0},g=function(e,t,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=h(e,i,t),s=p[i]&&r?"".concat(p[i]):"data"===i?"".concat(p[t],"iab"):"".concat(p[t]).concat(i);n[s]=n[s]?n[s].concat(",",o):o};if(t===zs){["site","user"].forEach((function(e){Object.keys(r[e]).forEach((function(t){"site"===e&&"content"===t&&r[e][t].data?g(r[e][t].data,e,"data"):"ext"!==t?g(r[e][t],e,t):r[e][t].data&&Object.keys(r[e].ext.data).forEach((function(t){g(r[e].ext.data[t],e,t,!1)}))}))})),Object.keys(a).forEach((function(e){"adserver"!==e?g(a[e],"site",e):"gam"===a[e].name&&g(a[e].adslot,name,e)})),c&&(n.p_gpid=c),l&&Object.keys(l).length&&vn(l,["dsainfo",function(e){return n.dsainfo=e},"dsarequired",function(e){return n.dsarequired=e},"pubrender",function(e){return n.dsapubrender=e},"datatopub",function(e){return n.dsadatatopubs=e},"transparency",function(e){Array.isArray(e)&&e.length&&(n.dsatransparency=e.reduce((function(e,t){var n=t.domain||"";if(!n)return e;var i=t.dsaparams||t.params;return Array.isArray(i)&&0!==i.length?(e&&(e+="~~"),e+"".concat(n,"~").concat(i.join("_"))):e}),""))}]),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"];var f=x(r,"device.sua");f&&!1!==pm.chEnabled&&vn(f,["architecture",function(e){return n.m_ch_arch=e},"bitness",function(e){return n.m_ch_bitness=e},"browsers",function(e){var t,i;if(Array.isArray(e)){var r=s(e.reduce((function(e,t){var n,i,r,o;(e[0].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(n=t.version)||void 0===n?void 0:n[0],'"')),(null==t||null===(i=t.version)||void 0===i?void 0:i.length)>1)&&e[1].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(r=t.version)||void 0===r||null===(o=r.join)||void 0===o?void 0:o.call(r,"."),'"'));return e}),[[],[]]),2),o=r[0],a=r[1];n.m_ch_ua=null==o||null===(t=o.join)||void 0===t?void 0:t.call(o,","),n.m_ch_full_ver=null==a||null===(i=a.join)||void 0===i?void 0:i.call(a,",")}},"mobile",function(e){return n.m_ch_mobile="?".concat(e)},"model",function(e){return n.m_ch_model=e},"platform",function(e){var t,i;n.m_ch_platform=null==e?void 0:e.brand,n.m_ch_platform_ver=null==e||null===(t=e.version)||void 0===t||null===(i=t.join)||void 0===i?void 0:i.call(t,".")}])}else Object.keys(o).length&&En(n.imp[0].ext,o),c&&(n.imp[0].ext.gpid=c),En(n,r)}(e,zs,b),!0===Se.getConfig("coppa")&&(b.coppa=1),e.schain&&Em(e.schain)&&(b.rp_schain=mm.serializeSupplyChain(e.schain)),b},serializeSupplyChain:function(e){if(!Em(e))return"";var t=e.ver,n=e.complete,i=e.nodes;return"".concat(t,",").concat(n,"!").concat(mm.serializeSupplyChainNodes(i))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){var n;e=e.body;var i=t.data;if(!e||"object"!==d(e))return[];if(e.seatbid){var r=x(e,"ext.errors.rubicon");return Array.isArray(r)&&r.length>0&&At("Rubicon: Error in video response"),fm.fromORTB({request:i,response:e}).bids}var o,a=e.ads,c=0,l=t.bidRequest;if("object"===d(l)&&!Array.isArray(l)&&Sm(l).includes(Ms)&&"object"===d(a)&&(a=a[l.adUnitCode]),!Array.isArray(a)||a.length<1)return[];var u=a.reduce((function(t,n,i){if(n.impression_id&&o===n.impression_id?c++:o=n.impression_id,"ok"!==n.status)return t;var r,a,u=Array.isArray(l)?l[i-c]:l;if(u&&"object"===d(u)){var p={requestId:u.bidId,currency:"USD",creativeId:n.creative_id||"".concat(n.network||"","-").concat(n.advertiser||""),cpm:n.cpm||0,dealId:n.deal,ttl:360,netRevenue:!1!==pm.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:zs}};if(n.creative_type&&(p.mediaType=n.creative_type),n.dsa&&Object.keys(n.dsa).length&&(p.meta.dsa=n.dsa),n.adomain&&(p.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.emulated_format&&(p.meta.mediaType=n.emulated_format),n.creative_type===Ms)p.width=u.params.video.playerWidth,p.height=u.params.video.playerHeight,p.vastUrl=n.creative_depot_url,p.impression_id=n.impression_id,p.videoCacheKey=n.impression_id;else{p.ad=(r=n.script,a=n.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(a,"'>\n<script type='text/javascript'>").concat(r,"<\/script>\n</div>\n</body>\n</html>"));var h=s(gm[n.size_id].split("x").map((function(e){return Number(e)})),2);p.width=h[0],p.height=h[1]}p.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:u.adUnitCode}),t.push(p)}else wt("Rubicon: bidRequest undefined at index position:".concat(i),l,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)})),p=null===(n=e.component_auction_config)||void 0===n?void 0:n.map((function(e){return{config:e,bidId:e.bidId}}));return p?{bids:u,paapi:p}:u},getUserSyncs:function(e,t,n,i,r){if(!xm&&e.iframeEnabled){var o=function(e,t,n){var i,r={};return e&&("boolean"==typeof e.gdprApplies&&(r.gdpr=Number(e.gdprApplies)),"string"==typeof e.consentString&&(r.gdpr_consent=e.consentString)),t&&(r.us_privacy=encodeURIComponent(t)),null!=n&&n.gppString&&(r.gpp=n.gppString,r.gpp_sid=null===(i=n.applicableSections)||void 0===i?void 0:i.toString()),r}(n,i,r);return o=Object.keys(o).length?"?".concat(An(o)):"",xm=!0,{type:"iframe",url:"https://".concat(pm.syncHost||"eus",".rubiconproject.com/usync.html")+o}}}};function vm(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function bm(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var i=lm(lm({},{align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0}),e.renderer.getConfig());e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:"#".concat(e.adUnitCode),align:i.align,position:i.position},closeButton:i.closeButton,label:i.label,collapse:i.collapse})}))}function ym(e,t){var n=e.params;if(t===Ms){var i=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?i=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(x(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?i=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(i=e.sizes[0]),i}var r=[];return Array.isArray(n.sizes)?r=n.sizes:void 0!==x(e,"mediaTypes.banner.sizes")?r=wm(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?r=wm(e.sizes):At("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var i=t.indexOf(e),r=t.indexOf(n);return i>-1||r>-1?-1===i?1:-1===r?-1:i-r:e-n}))}(r)}function Am(e,t,n){return function(i){var r,o,s=Number(null===(r=i.ext)||void 0===r?void 0:r.segtax);n.includes(s)&&(e["tg_".concat(t,".tax").concat(s)]=null===(o=i.segment)||void 0===o?void 0:o.map((function(e){return e.id})).join(","))}}function wm(e){return lt(e).reduce((function(e,t){var n=parseInt(gm[t],10);return n&&e.push(n),e}),[])}function Sm(e){var t,n,i,r,o,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if(n=void 0!==x(t=e,"mediaTypes.".concat(Ms)),i=void 0!==x(t,"mediaTypes.".concat(zs)),r=void 0!==x(t,"params.bidonmultiformat"),o="object"!==d(x(t,"params.video")),n&&r||(i&&o&&(n=!1),n&&o&&Dn(t,"params.video",{}),n)){if(-1===["outstream","instream"].indexOf(x(e,"mediaTypes.".concat(Ms,".context"))))return s&&wt("Rubicon: mediaTypes.video.context must be outstream or instream"),a;if(ym(e,Ms).length<2)return s&&wt("Rubicon: could not determine the playerSize of the video"),a;s&&bt("Rubicon: making video request for adUnit",e.adUnitCode),a.push(Ms)}if(void 0!==x(e,"mediaTypes.".concat(Ls))&&a.push(Ls),void 0!==x(e,"mediaTypes.".concat(zs))){if(0===ym(e,zs).length)return s&&wt("Rubicon: could not determine the sizes for banner request"),a;s&&bt("Rubicon: making banner request for adUnit",e.adUnitCode),a.push(zs)}return a}var Im=function(){return hm={}};function Em(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||wt("Rubicon: required schain params missing"),t):t}function _m(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var xm=!1;Wr(mm),g("rubiconBidAdapter");var Pm=l(l({},zs,"display"),Ms,"video"),Tm="fixed",Om="mobile",Cm="unknown";var Rm=function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{};switch(e.type||e.effectiveType){case"wifi":case"ethernet":return Tm;case"cellular":case"wimax":return Om;default:return/iPad|iPhone|iPod/.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?Cm:Tm}};function Um(e){return!!e.mediaTypes&&!!e.mediaTypes.video}function km(e){var t=e.params;return!!t.publisherId&&!!t.adUnitId}function Dm(e){var t=jm(e);return!!e.params.publisherId&&!!e.params.adUnitId&&Um(e)&&!!t.playerSize&&Ut(t.playerSize)&&t.playerSize.length>0}function Bm(e){var t,n,i=e.params,r=zt(Object.keys(e.mediaTypes),(function(e){return Pm[e]})),o={id:e.bidId,transactionId:null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid,gpid:null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.gpid,sizes:e.sizes,supplyTypes:r,adUnitId:i.adUnitId,adUnitCode:e.adUnitCode,geom:Mm(e.adUnitCode),placement:i.placement,requestCount:e.bidderRequestsCount||1};Um(e)&&(o.videoParams=jm(e));var s=function(e){var t,n={};return"function"==typeof e.getFloor&&(n=e.getFloor({currency:"USD",mediaType:"*",size:"*"})),null===(t=n)||void 0===t?void 0:t.floor}(e);return s&&(o.bidFloor=s),o}function jm(e){var t=e.mediaTypes.video||{};return t.playerSize&&(t.w=t.playerSize[0][0],t.h=t.playerSize[0][1]),t}function Nm(e){var t,n="display"===(t=e.mediaType)?zs:"video"===t?Ms:t,i={requestId:e.bidId,cpm:e.price,width:e.width,height:e.height,creativeId:e.creativeId,currency:e.currency,netRevenue:!0,mediaType:n,ttl:e.ttl,nurl:e.nurl,meta:{advertiserDomains:e&&e.adomain&&e.adomain.length>0?e.adomain:[],mediaType:e.realMediaType}};return n===Ms?i.vastXml=e.content:i.ad=e.content,i}function Lm(){var e=function(){try{var e=performance.getEntriesByType("navigation")[0];return Math.round(e.responseStart-e.startTime)}catch(e){try{var t=performance.timing;return Math.round(t.responseStart-t.fetchStart)}catch(e){return 0}}}();return e>=0&&e<=performance.now()?e:0}function Mm(e){var t=document.getElementById(e);if(t){var n=zl(t),i=n.top,r=n.left,o=n.width,s=n.height,a={width:nt().innerWidth,height:nt().innerHeight};return{scrollY:cc().top||0,top:i,left:r,width:o,height:s,viewport:a}}}var zm={code:"seedtag",gvlid:157,aliases:["st"],supportedMediaTypes:[zs,Ms],isBidRequestValid:function(e){var t=Um(e),n=function(e){return!!e.mediaTypes&&!!e.mediaTypes.banner}(e);return t&&n?Dm(e)&&"outstream"===jm(e).context&&km(e):t?Dm(e):!!n&&km(e)},buildRequests:function(e,t){var n,i,r,o,s,a,d,c,l={url:t.refererInfo.page,publisherToken:e[0].params.publisherId,cmp:!!t.gdprConsent,timeout:t.timeout,version:"9.50.0",connectionType:Rm(),auctionStart:t.auctionStart||Date.now(),ttfb:Lm(),bidRequests:zt(e,Bm),user:{topics:[],eids:[]},site:{}};if(l.cmp){var u=t.gdprConsent.gdprApplies;void 0!==u&&(l.ga=u),l.cd=t.gdprConsent.consentString}t.uspConsent&&(l.uspConsent=t.uspConsent),e[0].schain&&(l.schain=e[0].schain);var p,h,g=Se.getConfig("coppa");(g&&(l.coppa=g),t.gppConsent?l.gppConsent={gppString:t.gppConsent.gppString,applicableSections:t.gppConsent.applicableSections}:null!==(n=t.ortb2)&&void 0!==n&&null!==(n=n.regs)&&void 0!==n&&n.gpp&&(l.gppConsent={gppString:t.ortb2.regs.gpp,applicableSections:t.ortb2.regs.gpp_sid}),null!==(i=t.ortb2)&&void 0!==i&&null!==(i=i.user)&&void 0!==i&&i.data&&(l.user.topics=t.ortb2.user.data),e[0]&&e[0].userIdAsEids&&(l.user.eids=e[0].userIdAsEids),null!==(r=t.ortb2)&&void 0!==r&&r.bcat)&&(l.bcat=null===(p=t.ortb2)||void 0===p?void 0:p.bcat);null!==(o=t.ortb2)&&void 0!==o&&o.badv&&(l.badv=null===(h=t.ortb2)||void 0===h?void 0:h.badv);return null!==(s=t.ortb2)&&void 0!==s&&null!==(s=s.device)&&void 0!==s&&s.sua&&(l.sua=t.ortb2.device.sua),null!==(a=t.ortb2)&&void 0!==a&&null!==(a=a.site)&&void 0!==a&&a.cat&&(l.site.cat=t.ortb2.site.cat),null!==(d=t.ortb2)&&void 0!==d&&null!==(d=d.site)&&void 0!==d&&d.cattax&&(l.site.cattax=t.ortb2.site.cattax),null!==(c=t.ortb2)&&void 0!==c&&null!==(c=c.site)&&void 0!==c&&c.pagecat&&(l.site.pagecat=t.ortb2.site.pagecat),{method:"POST",url:"https://s.seedtag.com/c/hb/bid",data:JSON.stringify(l)}},interpretResponse:function(e){var t=e.body;return t&&t.bids&&Ut(t.bids)?zt(t.bids,(function(e){return Nm(e)})):[]},getUserSyncs:function(e,t){var n=t[0];if(e.iframeEnabled&&n){var i=n.body.cookieSync;return i?[{type:"iframe",url:i}]:[]}return[]},onTimeout:function(e){var t=function(e){var t="";if(Ut(e)&&e[0]&&Ut(e[0].params)&&e[0].params[0]){var n=e[0].params[0],i=e[0].timeout;t="?publisherToken="+n.publisherId+"&adUnitId="+n.adUnitId+"&timeout="+i}return"https://s.seedtag.com/se/hb/timeout"+t}(e);Ht(t)},onBidWon:function(e){e&&e.nurl&&Ht(e.nurl)}};function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wr(zm),g("seedtagBidAdapter");var Hm="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),Vm={getProtocol:function(){return window.location.protocol}},$m={code:"sharethrough",supportedMediaTypes:[Ms,zs],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey},buildRequests:function(e,t){var n,i,r,o,a,d,c=t.timeout,l=t.ortb2||{},u=Vm.getProtocol().indexOf("http")<0||Vm.getProtocol().indexOf("https")>-1,p={id:at(),at:1,cur:["USD"],tmax:c,site:qm({domain:x(t,"refererInfo.domain",window.location.hostname),page:x(t,"refererInfo.page",window.location.href),ref:x(t,"refererInfo.ref")},l.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:!0===Se.getConfig("coppa")?1:0,ext:{}},source:{tid:null===(n=t.ortb2)||void 0===n||null===(n=n.source)||void 0===n?void 0:n.tid,ext:{version:"9.50.0",str:"4.3.0",schain:e[0].schain}},bcat:x(t.ortb2,"bcat")||e[0].params.bcat||[],badv:x(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(null!==(i=t.ortb2)&&void 0!==i&&null!==(i=i.device)&&void 0!==i&&null!==(i=i.ext)&&void 0!==i&&i.cdep&&(p.device.ext.cdep=t.ortb2.device.ext.cdep),null!=t&&null!==(r=t.ortb2)&&void 0!==r&&r.device&&En(p.device,t.ortb2.device),p.user=Wm(l.user,{}),p.user.ext||(p.user.ext={}),p.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var h=!0===t.gdprConsent.gdprApplies;p.regs.ext.gdpr=h?1:0,h&&(p.user.ext.consent=t.gdprConsent.consentString)}t.uspConsent&&(p.regs.ext.us_privacy=t.uspConsent),null!=t&&null!==(o=t.gppConsent)&&void 0!==o&&o.gppString?(p.regs.gpp=t.gppConsent.gppString,p.regs.gpp_sid=t.gppConsent.applicableSections):null!=t&&null!==(a=t.ortb2)&&void 0!==a&&null!==(a=a.regs)&&void 0!==a&&a.gpp&&(p.regs.ext.gpp=t.ortb2.regs.gpp,p.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),null!=t&&null!==(d=t.ortb2)&&void 0!==d&&null!==(d=d.regs)&&void 0!==d&&null!==(d=d.ext)&&void 0!==d&&d.dsa&&(p.regs.ext.dsa=t.ortb2.regs.ext.dsa);var g=e.map((function(e){var n,i={ext:{}},r=x(e,"ortb2Imp.ext.tid");r&&(i.ext.tid=r);var o=x(e,"ortb2Imp.ext.gpid")||x(e,"ortb2Imp.ext.data.pbadslot");o&&(i.ext.gpid=o);var a=x(e,"mediaTypes.video");if(null!==(n=t.paapi)&&void 0!==n&&n.enabled&&e.mediaTypes.banner&&En(i,{ext:{ae:1}}),a){var d=640,c=360;if(a.playerSize&&a.playerSize[0]&&a.playerSize[0][0]&&a.playerSize[0][1]){var l=s(a.playerSize[0],2);d=l[0],c=l[1]}i.video={pos:Wm(a.pos,0),topframe:tn()?0:1,w:d,h:c};["api","battr","companionad","companiontype","delivery","linearity","maxduration","mimes","minduration","placement","playbackmethod","plcmt","protocols","skip","skipafter","skipmin","startdelay"].forEach((function(e){!function(e,t,n){if(["api","battr","mimes","playbackmethod","protocols"].includes(e)&&(!Array.isArray(t[e])||0===t[e].length)&&t[e])return void At("".concat("Sharethrough:",' Invalid video request property: "').concat(e,'" must be an array with at least 1 entry.  Value supplied: "').concat(t[e],'".  This will not be added to the bid request.'));t[e]&&(n.video[e]=t[e])}(e,a,i)}))}else{i.banner={pos:x(e,"mediaTypes.banner.pos",0),topframe:tn()?0:1,format:e.sizes.map((function(e){return{w:+e[0],h:+e[1]}}))};var p=x(e,"mediaTypes.banner.battr",null)||x(e,"ortb2Imp.banner.battr");p&&(i.banner.battr=p)}return qm({id:e.bidId,tagid:String(e.params.pkey),secure:u?1:0,bidfloor:Gm(e)},i)})).filter((function(e){return!!e}));return g.map((function(e){return{method:"POST",url:Hm,data:qm(qm({},p),{},{imp:[e]})}}))},interpretResponse:function(e,t){var n,i=e.body;if(!i||!i.seatbid||0===i.seatbid.length||!i.seatbid[0].bid||0===i.seatbid[0].bid.length)return[];var r,o=null===(n=i.ext)||void 0===n?void 0:n.auctionConfigs,s=i.seatbid[0].bid.map((function(e){var n,r,o,s,a,d,c,l,u,p,h,g,f,m={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?Ms:zs,currency:i.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:(null===(n=e.ext)||void 0===n?void 0:n.networkId)||null,networkName:(null===(r=e.ext)||void 0===r?void 0:r.networkName)||null,agencyId:(null===(o=e.ext)||void 0===o?void 0:o.agencyId)||null,agencyName:(null===(s=e.ext)||void 0===s?void 0:s.agencyName)||null,advertiserId:(null===(a=e.ext)||void 0===a?void 0:a.advertiserId)||null,advertiserName:(null===(d=e.ext)||void 0===d?void 0:d.advertiserName)||null,brandId:(null===(c=e.ext)||void 0===c?void 0:c.brandId)||null,brandName:(null===(l=e.ext)||void 0===l?void 0:l.brandName)||null,demandSource:(null===(u=e.ext)||void 0===u?void 0:u.demandSource)||null,dchain:(null===(p=e.ext)||void 0===p?void 0:p.dchain)||null,primaryCatId:(null===(h=e.ext)||void 0===h?void 0:h.primaryCatId)||null,secondaryCatIds:(null===(g=e.ext)||void 0===g?void 0:g.secondaryCatIds)||null,mediaType:(null===(f=e.ext)||void 0===f?void 0:f.mediaType)||null}};return m.mediaType===Ms&&(m.ttl=3600,m.vastXml=e.adm),m}));return o?{bids:s,paapi:(null===(r=i.ext)||void 0===r?void 0:r.auctionConfigs)||{}}:s},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==x(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map((function(e){return{type:"image",url:e}})):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function Gm(e){var t=null;if("function"==typeof e.getFloor){var n=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((function(e){return{w:e[0],h:e[1]}}))});Dt(n)&&"USD"===n.currency&&!isNaN(parseFloat(n.floor))&&(t=parseFloat(n.floor))}return null!==t?t:e.params.floor}function Wm(e,t){return null==e?t:e}function Km(e){return Object.assign({wp:!0,run:function(e,t,n,i,r){var o=n&&n.hasOwnProperty(i),s=o?n[i]:void 0,a=o&&null!=s&&"object"===d(s)?en(s):s;return function(){var n=null==t?e:x(e,t),d=n&&es(n[i]),c=d?n[i]:void 0;!o&&d&&r()?delete n[i]:o===d&&c===s&&In(c,a)||!r()||Dn(e,(null==t?[]:[t]).concat(i).join("."),a)}}},e)}Wr($m),g("sharethroughBidAdapter");var Qm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return function(e){var t={},n=[];e.forEach((function(e){e.wp&&n.push(e),e.get&&e.paths.forEach((function(n){var i=t;n.split(".").forEach((function(e){i.children=i.children||{},i.children[e]=i.children[e]||{},i=i.children[e]})),i.rule=e}))}));var i=Xo(n);function r(e,t,n){return new Proxy(e,{get:function(e,i,o){var s=Reflect.get(e,i,o);if(t.hasOwnProperty(i)){var a=t[i],c=a.children,l=a.rule;if(c&&null!=s&&"object"===d(s))return r(s,c,n);if(l&&es(s)&&n(l))return l.get(s)}return s}})}return function(e){for(var n,o={},s=arguments.length,a=new Array(s>1?s-1:0),d=1;d<s;d++)a[d-1]=arguments[d];return{obj:r(e,t.children||{},Zo.apply(void 0,[o].concat(a))),verify:(n=i.apply(void 0,[o,e].concat(a)),function(){n.forEach((function(e){return e()}))})}}}(ns(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return[{name:ni,paths:Wo,applies:ts(ni,e)},{name:ti,paths:Go,applies:ts(ti,e)}].map(Km)}(e)))}();var Jm,Ym,Xm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qm;return function(t,n){t.global=t.global||{},t.bidder=t.bidder||{};var i=new Set(Object.keys(t.bidder)),r=[];function o(t){var i=e(t,n);return r.push(i.verify),i.obj}var a={global:o(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map((function(e){var t=s(e,2);return[t[0],o(t[1])]})))};return{obj:a,verify:function(){Object.entries(a.bidder).filter((function(e){var t=s(e,1)[0];return!i.has(t)})).forEach((function(i){var r=s(i,2),o=r[0],a=r[1],d={},c=e(d,n);En(c.obj,a),c.verify(),t.bidder[o]=d})),r.forEach((function(e){return e()}))}}}}(),Zm=Ni((function(e){return Rs.resolveAlias(e)})),ev=[],tv=[],nv=[];var iv,rv=(iv=!1,function(){iv||(Object.entries(l(l(l(l(l({},R.AUCTION_INIT,["onAuctionInitEvent"]),R.AUCTION_END,["onAuctionEndEvent",dv]),R.BID_RESPONSE,["onBidResponseEvent"]),R.BID_REQUESTED,["onBidRequestEvent"]),R.BID_ACCEPTED,["onBidAcceptedEvent"])).forEach((function(e){var t=s(e,2),n=t[0],i=s(t[1],2),r=i[0],o=i[1];Er(n,(function(e){o&&o(e),tv.forEach((function(t){try{t[r]&&t[r](e,t.config,Ym)}catch(e){wt("RTD provider '".concat(t.name,"': error in '").concat(r,"':"),e)}}))}))})),iv=!0)});function ov(){return{gdpr:No.getConsentData(),usp:Lo.getConsentData(),gpp:Mo.getConsentData(),coppa:!!Se.getConfig("coppa")}}function sv(){Ym=ov();var e=[];nv.forEach((function(t){var n=(ev||[]).find((function(e){return e.name===t.name}));n&&n.init&&n.init(t,Ym)&&e.push(Object.assign(n,{config:t}))})),yt("Real time data module enabled, using submodules: ".concat((tv=e).map((function(e){return e.name})).join(", ")))}var av=Hr("rtd",(function(e,t){var n;Ym=ov();var i=[],r=[];tv.forEach((function(e){if("function"==typeof e.getBidRequestData){i.push(e);var t=e.config;t&&t.waitForIt&&r.push(e)}}));var o,s=r.length&&(null===(n=Jm)||void 0===n?void 0:n.auctionDelay)>0,a=r.length,d=!1,c=[];if(!i.length)return p();var l=s?Jm.auctionDelay:0;function u(){d||(this.config&&this.config.waitForIt&&a--,0===a&&setTimeout(p,0))}function p(){d||(d=!0,clearTimeout(o),c.forEach((function(e){return e()})),e.call(this,t))}o=setTimeout(p,l),i.forEach((function(e){var n=Xm(t.ortb2Fragments||{},Zm(bi,e.name));c.push(n.verify),t.ortb2Fragments=n.obj,e.getBidRequestData(t,u.bind(e),e.config,Ym,l)}))}));function dv(e){var t=tv.filter((function(e){return"function"==typeof e.getTargetingData}));if(t.length){var n=e.adUnitCodes;if(n){for(var i=[],r=t.length-1;r>=0;r--){var o=t[r].getTargetingData(n,t[r].config,Ym,e);o&&"object"===d(o)?i.push(o):At("invalid getTargetingData response for sub module",t[r].name)}var s=function(e){if(!Array.isArray(e)||!e.length)return{};return e.reduce((function(e,t){for(var n in t)if(t.hasOwnProperty(n))if(e.hasOwnProperty(n)){var i=t[n];for(var r in i)i.hasOwnProperty(r)&&(e[n][r]=i[r])}else e[n]=t[n];return e}),{})}(i);return e.adUnits.forEach((function(e){var t=e.code&&s[e.code];t&&(yt("RTD set ad unit targeting of",t,"for",e),e[P]=Object.assign(e[P]||{},t))})),e.adUnits}}}function cv(e){tv.forEach((function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){wt("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}}));for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.apply(this,n)}function lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lv(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ti("realTimeData",(function(e){return ev.push(e),Fo.register(bi,e.name,e.gvlid),function(){var t=ev.indexOf(e);t>=0&&(ev.splice(t,1),sv())}})),function(e){var t=e.getConfig("realTimeData",(function(e){var n=e.realTimeData;n.dataProviders?(t(),Jm=n,nv=n.dataProviders,rv(),_i("startAuction").before(av,20),Rs.callDataDeletionRequest.before(cv),sv()):wt("missing parameters for real time module")}))}(Se),g("rtdModule");var pv="azerionedge",hv=Yi({moduleType:bi,moduleName:pv});var gv={name:pv,init:function(e,t){return function(e,t){var n=function(e){var t,n=null===(t=e.params)||void 0===t?void 0:t.key,i=n?"".concat(n,"/"):"";return"https://edge.hyth.io/js/".concat("v1","/").concat(i,"azerion-edge.min.js")}(e);Bs(n,bi,pv,(function(){if("function"==typeof window.azerionPublisherAudiences){var n,i,r,o=(null===(n=e.params)||void 0===n?void 0:n.process)||{};window.azerionPublisherAudiences(uv(uv({},o),{},{gdprApplies:null==t||null===(i=t.gdpr)||void 0===i?void 0:i.gdprApplies,gdprConsent:null==t||null===(r=t.gdpr)||void 0===r?void 0:r.consentString,uspConsent:null==t?void 0:t.usp}))}}))}(e,t),!0},getBidRequestData:function(e,t,n,i){var r=function(){try{var e=hv.getDataFromLocalStorage("ht-pa-v1-a");return JSON.parse(e).map((function(e){return e.id}))}catch(e){return[]}}();r.length>0&&function(e,t,n){var i;((null===(i=t.params)||void 0===i?void 0:i.bidders)||["improvedigital"]).forEach((function(t){return En(e.ortb2Fragments.bidder,l({},t,{user:{data:[{name:"azerionedge",ext:{segtax:4},segment:n.map((function(e){return{id:e}}))}]}}))}))}(e,n,r),t()},gvlid:"253"};Oi("realTimeData",gv),g("azerionedgeRtdProvider");var fv="[HadronRtdProvider] ",mv="hadron",vv="auHadronId",bv=Yi({moduleType:bi,moduleName:mv});function yv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var r=n.shift();if(Dt(e)&&Dt(r)){var o=function(t){Dt(r[t])?(e[t]||Object.assign(e,l({},t,{})),yv(e[t],r[t])):Ut(r[t])&&e[t]?Ut(e[t])&&r[t].forEach((function(n){for(var i=1,r=0;r<e[t].length;r++)if(In(e[t][r],n)){i=0;break}i&&e[t].push(n)})):Object.assign(e,l({},t,r[t]))};for(var s in r)o(s)}return yv.apply(void 0,[e].concat(n))}function Av(e,t){return Dt(e)||(e={}),Dt(t)||(t={}),yv(e,t)}var wv={name:mv,getBidRequestData:function(e,t,n,i){if(!bv.getDataFromLocalStorage(vv)){var r=0|n.params.partnerId,o=n.params&&n.params.hadronIdUrl,a=(u="https://cdn.hadronid.net/hadron.js",p={},d=Ct(l=o)?l(p):Rt(l)?l:u,c="partner_id=".concat(r,"&_it=prebid"),d+(d.indexOf("?")>-1?"&":"?")+c);Bs(a,bi,mv,(function(){yt(fv,"hadronId JS snippet loaded",a)}))}var d,c,l,u,p;if(n&&Dt(n.params)&&n.params.segmentCache){var g=bv.getDataFromLocalStorage("auHadronRtd");if(g){var f=JSON.parse(g);if(f.rtd)return function(e,t,n){if(n.params&&n.params.handleRtd)n.params.handleRtd(e,t,n,Se);else{var i,r;Dt(t.ortb2)&&Av(null===(i=e.ortb2Fragments)||void 0===i?void 0:i.global,t.ortb2),Dt(t.ortb2b)&&Av(null===(r=e.ortb2Fragments)||void 0===r?void 0:r.bidder,Object.fromEntries(Object.entries(t.ortb2b).map((function(e){var t=s(e,2);return[t[0],t[1].ortb2]}))))}}(e,f.rtd,n),void t()}}var m={},v=h().getUserIds();if(v.hasOwnProperty("hadronId"))m.hadronId=v.hadronId,yt(fv,"hadronId user module found",v.hadronId);else{var b=bv.getDataFromLocalStorage(vv);Rt(b)&&b.length>0&&(m.hadronId=b,yt(fv,"hadronId TAM found",b))}},init:function(e,t){return!0},gvlid:561};function Sv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Iv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sv(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oi("realTimeData",wv),g("hadronRtdProvider");var Ev,_v,xv="adagio",Pv="code",Tv="gpid",Ov=Yi({moduleType:bi,moduleName:xv}),Cv=St("AdagioRtdProvider:"),Rv=Cv.logError,Uv=Cv.logWarn,kv=new Set,Dv=(Ev={session:{}},{init:function(){Ov.getDataFromLocalStorage("adagio",(function(e){var t=jv.getSessionFromLocalStorage(e),n=t.rnd,i=t.vwSmplg,r=t.vwSmplgNxt,o=t.expiry,s=t.lastActivityTime,a=t.id,d=t.pages,c=t.testName,l=t.testVersion,u=function(e){return!kt(e)||Date.now()>e}(o),p=jv.getAbTestFromLocalStorage(e),h=p?2:void 0;if(Ev.session=Iv(Iv(Iv(Iv(Iv(Iv({rnd:n,pages:d||1,new:u},void 0!==h&&{v:h}),void 0!==i&&{vwSmplg:i}),void 0!==r&&{vwSmplgNxt:r}),void 0!==o&&{expiry:o}),void 0!==s&&{lastActivityTime:s}),void 0!==a&&{id:a}),u&&(Ev.session.new=!0,Ev.session.id=at(),Ev.session.rnd=Math.random()),2===h){var g=p.testName,f=p.testVersion,m=p.expiry,v=p.sessionId;m&&m>Date.now()&&(!v||v===Ev.session.id)&&g&&f&&(Ev.session.testName=g,Ev.session.testVersion=f)}else c&&l&&(Ev.session.testName=c,Ev.session.testVersion=l);jv.getAdagioNs().queue.push({action:"session",ts:Date.now(),data:{session:Iv({},Ev.session)}})}))},get:function(){return Ev.session}}),Bv=(_v={initialized:!1,data:{}},{reset:function(){_v.initialized=!1,_v.data={}},get:function(){var e=cu();return _v.initialized||(_v.data={page_dimensions:Mv().toString(),viewport_dimensions:zv().toString(),user_timestamp:(Math.floor((new Date).getTime()/1e3)-60*(new Date).getTimezoneOffset()).toString(),dom_loading:an(e).toString()},_v.initialized=!0),Iv({},_v.data)}}),jv={getAdagioNs:function(){return uu},getSession:function(){return Dv},getFeatures:function(){return Bv},getGuard:function(){return kv},isAdagioBidder:function(e){return!!e&&(e+Rs.aliasRegistry[e]).toLowerCase().includes("adagio")},getSessionFromLocalStorage:function(e){var t={new:!0,rnd:Math.random()},n=this.getObjFromStorageValue(e);return n&&n.session?n.session:t},getAbTestFromLocalStorage:function(e){var t=this.getObjFromStorageValue(e);return t&&t.abTest?t.abTest:null},getObjFromStorageValue:function(e){return JSON.parse(e,(function(e,t){if("_"!==e.charAt(0)||""===e)return t}))}};var Nv={name:xv,gvlid:617,init:function(e,t){var n,i;return Rt(null===(n=e.params)||void 0===n?void 0:n.organizationId)&&Rt(null===(i=e.params)||void 0===i?void 0:i.site)?(jv.getAdagioNs().hasRtd=!0,jv.getSession().init(),function(){var e=new Set(["impressionViewable","slotRenderEnded","slotVisibilityChanged"]),t=new Set(["noad","setHeaderBiddingWinner"]),n=new Set(["adLoaded"]),i=ft();Array.isArray(jv.getAdagioNs().windows)||(jv.getAdagioNs().windows=[]);var r=jv.getAdagioNs().windows.find((function(e){return e.self===i}));r||(r={self:i},jv.getAdagioNs().windows.push(r));var o=function(e,t,n,r,o){try{if(n.adserver===r)return;i[e]=i[e]||{},i[e][t]=i[e][t]||[],o()}catch(e){Rv(e)}};o("googletag","cmd",i,"gpt",(function(){i.googletag.cmd.push((function(){e.forEach((function(e){i.googletag.pubads().addEventListener(e,(function(t){jv.getAdagioNs().queue.push({action:"gpt-event",data:{eventName:e,args:t,_window:i},ts:Date.now()})}))})),r.adserver="gpt"}))})),o("sas","cmd",i,"sas",(function(){i.sas.cmd.push((function(){t.forEach((function(e){i.sas.events.on(e,(function(t){jv.getAdagioNs().queue.push({action:"sas-event",data:{eventName:e,args:t,_window:i},ts:Date.now()})}))})),r.adserver="sas"}))})),o("apntag","anq",i,"ast",(function(){i.apntag.anq.push((function(){n.forEach((function(e){i.apntag.onEvent(e,(function(){jv.getAdagioNs().queue.push({action:"ast-event",data:{eventName:e,args:arguments,_window:i},ts:Date.now()})}))})),r.adserver="ast"}))}))}(),function(e){Ov.localStorageIsEnabled((function(t){t&&Bs("https://script.4dex.io/a/latest/adagio.js",bi,xv,void 0,void 0,{id:"adagiojs-".concat(st()),"data-pid":e.params.organizationId})}))}(e),!0):(Rv("organizationId is required and must be a string."),!1)},getBidRequestData:function(e,t,n){var i=x(n,"params",{}),r=e.ortb2Fragments.global.site,o=jv.getFeatures().get(),s={uid:at(),pageviewId:uu.pageviewId,features:Iv({},o),session:Iv({},Dv.get())};Dn(r,"ext.data.adg_rtd",s),(e.adUnits||h().adUnits||[]).forEach((function(e){e.ortb2Imp=e.ortb2Imp||{};var t=x(e,"ortb2Imp"),n=x(t,"ext.data.divId");n||Dn(t,"ext.data.divId",(n=Ll(e.code).divId)||e.code);var o=function(e){if(!nn()&&!vt())return"";var t={x:0,y:0};if(nn()){var n=(rn()||{}).self;if(!n)return"";t.x=Math.round(n.t),t.y=Math.round(n.l)}else try{var i,r=gt(),o=r.document;if(!0===tn()){var s=ft();i=Lv(s.document.getElementById(e),s)}else i=r.document.getElementById(e);if(!i)return"";var a=zl(i),d=nt(),c=o.body,l=o.clientTop||c.clientTop||0,u=o.clientLeft||c.clientLeft||0,p=r.pageYOffset||d.document.documentElement.scrollTop||d.document.body.scrollTop,h=r.pageXOffset||d.document.documentElement.scrollLeft||d.document.body.scrollLeft;"none"===r.getComputedStyle(i,null).display&&Uv("The element is hidden. The slot position cannot be computed."),t.x=Math.round(a.left+h-u),t.y=Math.round(a.top+p-l)}catch(e){return Rv(e),""}return"".concat(t.x,"x").concat(t.y)}(n);if(Dn(t,"ext.data.adg_rtd.adunit_position",o),!x(t,"ext.data.placement")){var s=i.placementSource;switch((void 0===s?"":s).toLowerCase()){case Pv:Dn(t,"ext.data.placement",e.code);break;case Tv:Dn(t,"ext.data.placement",x(t,"ext.gpid"));break;default:Uv("`ortb2Imp.ext.data.placement` is missing and `params.definePlacement` is not set in the config.")}}var a=e.bids.find((function(e){return jv.isAdagioBidder(e.bidder)}));if(a){var d=!1;!x(r,"ext.data.pagetype")&&a.params.pagetype&&(Dn(r,"ext.data.pagetype",a.params.pagetype),d=!0),!x(r,"ext.data.category")&&a.params.category&&(Dn(r,"ext.data.category",a.params.category),d=!0);var c=!1;x(t,"ext.data.placement")||a.params.placement&&(Dn(t,"ext.data.placement",a.params.placement),c=!0),d&&Uv("`pagetype` and `category` must be defined in the FPD `ortb2.site.ext.data` object. Relying on `adUnits[].bids.adagio.params` is deprecated."),c&&Uv("`placement` must be defined in the FPD `adUnits[].ortb2Imp.ext.data` object. Relying on `adUnits[].bids.adagio.params` is deprecated.")}})),t()},onBidRequestEvent:function(e,t,n){setTimeout((function(){e.bids.forEach((function(e){var n=x(e,"ortb2.site.ext.data.adg_rtd.uid");if(n){var i="".concat(e.adUnitCode,"-").concat(n);jv.getGuard().has(i)||(jv.getGuard().add(i),function(e,t){try{var n=e.bidder,i=e.adUnitCode,r=e.mediaTypes,o=e.params,s=e.auctionId,a=e.bidderRequestsCount,d=e.ortb2,c=e.ortb2Imp,l=t.params,u=l.organizationId,p=l.site,g={bidder:n,adUnitCode:i,mediaTypes:r,params:o,auctionId:s,bidderRequestsCount:a,ortb2:x(d,"site.ext.data",{}),ortb2Imp:x(c,"ext.data",{}),localPbjs:"pgPrebid",localPbjsRef:h(),organizationId:u,site:p};jv.getAdagioNs().queue.push({action:"store",ts:Date.now(),data:g})}catch(e){Rv(e)}}(e,t))}else Rv("The `uid` is required to store the request in the ADAGIO namespace.")}))}),1)}};function Lv(e,t){try{if(gt()===t)return e.getAttribute("id")||e.setAttribute("id","adg-".concat(st())),e;var n=t.frameElement,i=zl(n),r=zl(e);return i.width===r.width&&i.height===r.height&&Lv(n,t.parent)}catch(e){return Uv(e),!1}}function Mv(){if(nn()||!vt())return"";var e=gt(),t=e.document.querySelector("body");if(!t)return"";var n=e.document.documentElement,i=Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),r=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);return"".concat(i,"x").concat(r)}function zv(){if(!nn()&&!vt())return"";var e={w:0,h:0};if(nn()){var t=(rn()||{}).win;if(!t)return"";e.w=Math.round(t.w),e.h=Math.round(t.h)}else{var n=nt(),i=n.innerWidth,r=n.innerHeight;e.w=i,e.h=r}return"".concat(e.w,"x").concat(e.h)}Oi("realTimeData",Nv),g("adagioRtdProvider");var Fv="Invalid schain object found: ",qv=" should be a string",Hv=" should be an Integer",Vv=" should be an object",$v={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},Gv=[];function Wv(e,t){var n=$v.STRICT;if(function(e){return!(void 0===e||!Dt(e)&&(wt(Fv+"the following schain config will not be used as schain is not an object.",e),1))}(e)){if(Rt(e.validation)&&-1!=Gv.indexOf(e.validation)&&(n=e.validation),n===$v.OFF)return e.config;if(function(e,t){var n="Detected something wrong within an schain config:",i="";function r(e){i+="\n"+e}function o(){!0===t?wt(n,e,i):At(n,e,i)}if(!Dt(e)&&(r("schain.config"+Vv),o(),t))return!1;if(kt(e.complete)&&fn(e.complete)||r("schain.config.complete"+Hv),Rt(e.ver)||r("schain.config.ver"+qv),e.hasOwnProperty("ext")&&(Dt(e.ext)||r("schain.config.ext"+Vv)),Ut(e.nodes))e.nodes.forEach((function(e,t){Rt(e.asi)||r("schain.config.nodes[".concat(t,"].asi")+qv),Rt(e.sid)||r("schain.config.nodes[".concat(t,"].sid")+qv),kt(e.hp)&&fn(e.hp)||r("schain.config.nodes[".concat(t,"].hp")+Hv),e.hasOwnProperty("rid")&&(Rt(e.rid)||r("schain.config.nodes[".concat(t,"].rid")+qv)),e.hasOwnProperty("name")&&(Rt(e.name)||r("schain.config.nodes[".concat(t,"].name")+qv)),e.hasOwnProperty("domain")&&(Rt(e.domain)||r("schain.config.nodes[".concat(t,"].domain")+qv)),e.hasOwnProperty("ext")&&(Dt(e.ext)||r("schain.config.nodes[".concat(t,"].ext")+Vv))}));else if(r("schain.config.nodes should be an Array"),o(),t)return!1;return!(i.length>0&&(o(),t))}(e.config,!(n!==$v.STRICT)))return e.config;wt(Fv+"due to the 'strict' validation setting, this schain config will not be passed to bidder '".concat(t,"'.  See above error for details."))}return null}function Kv(e,t){var n=Se.getConfig("schain"),i=Se.getBidderConfig();t.forEach((function(e){var t=e.bidderCode,r=function(e){return i[e]&&i[e].schain||n}(t);e.bids.forEach((function(e){var n=Wv(r,t);n&&(e.schain=en(n))}))})),e(t)}Lt($v,(function(e){return Gv.push(e)})),Rs.makeBidRequests.after(Kv),ol({type:Jc,name:"sourceExtSchain",fn:function(e,t,n){if(!x(e,"source.ext.schain")){var i=x(n,"bidRequests.0.schain");i&&Dn(e,"source.ext.schain",i)}}}),g("schain");var Qv=!1,Jv={},Yv={};function Xv(e,t){t.map((function(e){return Jv[e.bidderCode]&&(e.bidLimit=Jv[e.bidderCode].maxbids),e})),e.call(this,t)}Se.getConfig("multibid",(function(e){Array.isArray(e.multibid)&&e.multibid.length&&function(e){var t=!0,n=e.filter((function(e){return!!(e.bidder&&"string"==typeof e.bidder||e.bidders&&Array.isArray(e.bidders))||(At("Filtering multibid entry. Missing required bidder or bidders property."),t=!1,!1)})).map((function(e){return("number"!=typeof e.maxBids||e.maxBids<1||e.maxBids>9)&&(e.maxBids="number"!=typeof e.maxBids||e.maxBids<1?1:9,t=!1),e}));t||Se.setConfig({multibid:n});return t}(e.multibid)&&(nb(),Qv=!0,e.multibid.forEach((function(e){e.bidder?Jv[e.bidder]={maxbids:e.maxBids,prefix:e.targetBiddercodePrefix}:e.bidders.forEach((function(t){Jv[t]={maxbids:e.maxBids,prefix:e.targetBiddercodePrefix}}))})))}));var Zv=Vr("multibid",(function(e,t,n,i){var r=x(n,"floorData.floorValue");if(Se.getConfig("multibid")||nb(),Qv&&Jv[n.bidderCode]&&"adpod"===x(n,"video.context"))e.call(this,t,n,i);else if(Qv&&Jv[n.bidderCode])if(Jv[n.bidderCode].prefix&&(n.multibidPrefix=Jv[n.bidderCode].prefix),n.originalBidder=n.bidderCode,x(Yv,[t,n.bidderCode]))if(Yv[t][n.bidderCode].maxReached||r&&!(r<=n.cpm))At("Filtering multibid received from bidder ".concat(n.bidderCode,": ")+(Yv[t][n.bidderCode].maxReached?"Maximum bid limit reached for ad unit code ".concat(t):"Bid cpm under floors value."));else{n.originalRequestId=n.requestId,n.requestId=st(),Yv[t][n.bidderCode].ads.push(n);var o=Yv[t][n.bidderCode].ads.length;Jv[n.bidderCode].prefix&&(n.targetingBidder=Jv[n.bidderCode].prefix+o),o===Jv[n.bidderCode].maxbids&&(Yv[t][n.bidderCode].maxReached=!0),e.call(this,t,n,i)}else x(n,"floorData.floorValue")&&Dn(Yv,[t,n.bidderCode],{floor:x(n,"floorData.floorValue")}),Dn(Yv,[t,n.bidderCode],{ads:[n]}),Yv[t][n.bidderCode].ads.length===Jv[n.bidderCode].maxbids&&(Yv[t][n.bidderCode].maxReached=!0),e.call(this,t,n,i);else e.call(this,t,n,i)}));function eb(e,t){return e.bidder!==e.bidderCode&&t.bidder===t.bidderCode?1:e.bidder===e.bidderCode&&t.bidder!==t.bidderCode?-1:0}function tb(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Se.getConfig("multibid")||nb(),Qv){var r=Se.getConfig("sendBidsControl.dealPrioritization"),o=[],s=un(t,"adUnitCode"),d=[].concat.apply([],Object.keys(s).reduce((function(e,t){var d=[],c=un(s[t],"originalBidder"),l=un([].concat.apply([],Object.keys(c).map((function(e){return c[e].sort((function(e,t){return e.originalBidder&&e.originalBidder!==e.bidderCode&&(e.bidderCode=e.originalBidder),e.originalBidder&&t.originalBidder!==t.bidderCode&&(t.bidderCode=t.originalBidder),e.cpm>t.cpm?-1:e.cpm<t.cpm?1:0})).map((function(e,t){return x(Jv,"".concat(e.bidderCode,".prefix"))&&0!==t&&t<Jv[e.bidderCode].maxbids&&(e.bidderCode=Jv[e.bidderCode].prefix+(t+1)),e}))}))),"bidderCode");return Object.keys(l).forEach((function(e){return d.push(l[e].reduce(n))})),i>0?((d=r?d.sort($a(!0)):d.sort((function(e,t){return t.cpm-e.cpm}))).sort(eb),o.push.apply(o,a(d.slice(0,i)))):o.push.apply(o,a(d)),[].concat.apply([],o)}),[]));e.call(this,d,n,i,!0)}else e.call(this,t,n,i)}var nb=function(){Qv=!1,Jv={}},ib=function(){return Yv={}};Er(R.AUCTION_INIT,ib),xi(oa,Xv),_i("addBidResponse").before(Zv,3),xi(Va,tb),ol({type:Jc,name:"extPrebidMultibid",fn:function(e){var t=Se.getConfig("multibid");t&&Dn(e,"ext.prebid.multibid",t.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=s(e,2),n=t[0],i=t[1];return[n.toLowerCase(),i]})))})))},dialects:[tl]}),g("multibid");var rb,ob="paapiForGpt";Se.getConfig("paapi",(function(e){x(e,"paapi.gpt.configWithTargeting",!0)?(yt(ob,"enabling PAAPI configuration with setTargetingForGPTAsync"),Wa.setTargetingForGPT.before(lb)):Wa.setTargetingForGPT.getHooks({hook:lb}).remove()}));var sb,ab,db=(sb={},function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.length>0){var r,o=null!==(r=sb[e])&&void 0!==r?r:{},a=Object.fromEntries(n.map((function(e){return[e.seller,e]}))),d=Object.keys(a);i?(a=Object.assign(o,a),o=Object.fromEntries(d.map((function(e){return[e,null]})))):d.forEach((function(e){o[e]=null})),Object.keys(o).length?sb[e]=o:delete sb[e];var c=Object.entries(a).map((function(e){var t=s(e,2);return{configKey:t[0],auctionConfig:t[1]}}));c.length>0&&t.forEach((function(t){t.setConfig({componentAuction:c}),yt(ob,"register component auction configs for: ".concat(e,": ").concat(t.getAdUnitPath()),n)}))}else n.length>0&&At(ob,"unable to register component auction config for ".concat(e),n)}),cb=(ab=[[728,90],[336,280],[300,250],[300,50],[160,600],[1024,768],[970,250],[970,90],[768,1024],[480,320],[468,60],[320,480],[320,100],[320,50],[300,600],[300,100],[250,250],[234,60],[200,200],[180,150],[125,125],[120,600],[120,240],[120,60],[88,31],[980,120],[980,90],[950,90],[930,180],[750,300],[750,200],[750,100],[580,400],[250,360],[240,400]].sort(Pa((function(e){var t=s(e,2);return-t[0]*t[1]}))).map((function(e){return[e,ut(e)]})),function(e,t){if(null!=t&&t.length){var n=new Set(t.map(ut)),i=ab.find((function(e){var t=s(e,2),i=(t[0],t[1]);return n.has(i)}));if(i)return void e.bail(i[0])}e(t)});h().setPAAPIConfigForGPT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return rb(e,!0)},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:db,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ga;return function(){var i=arguments.length>1?arguments[1]:void 0,r=!1,o=e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{},a=n(Object.keys(o),i);Object.entries(o).forEach((function(e){var n=s(e,2),i=n[0],o=n[1];null!=o&&(r=!0),t(i,a[i],(null==o?void 0:o.componentAuctions)||[],!0)})),r||yt("".concat(ob,": No component auctions available to set"))}}();var lb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h().setPAAPIConfigForGPT;return function(t,n,i){(Array.isArray(n)?n:[n]).map((function(e){return null==e?void 0:{adUnitCode:e}})).forEach((function(t){return e(t,i)})),t(n,i)}}();Oi("paapi",{name:"gpt",init:function(e){rb=e.getPAAPIConfig,_i("getPAAPISize").before(cb)}}),g("paapiForGpt");var ub=function(){return function(e){var t=new WeakMap;return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e(n);if(null!=r)return t.has(r)||t.set(r,i),t.get(r)}}((function(e){return Ia.index.getAuction({auctionId:e})}))};function pb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pb(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gb="PAAPI",fb=[],mb=new WeakSet;Ti("paapi",(function(e){fb.push(e),e.init&&e.init({getPAAPIConfig:Lb,expandFilters:Nb})}));var vb=ub(),bb=ub(),yb=ub(),Ab=ub(),wb={},Sb={};function Ib(e,t,n,i,r){var o,s;null!==(o=i.paapi)&&void 0!==o&&o.enabled&&(s=r,r=function(e,t,n,i){var r;return(i=null!=i?i:{}).adAuctionHeaders=null===(r=i.adAuctionHeaders)||void 0===r||r,s.call(this,e,t,n,i)});for(var a=arguments.length,d=new Array(a>5?a-5:0),c=5;c<a;c++)d[c-5]=arguments[c];return e.call.apply(e,[this,t,n,i,r].concat(d))}function Eb(){var e={},t=qb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return t&&(e.requestedSize=t),e}function _b(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(n.length>0){var r=n.reduce(Ra(Qp((function(e){return[e.cpm,e.currency]}))));e=r.cpm,t=r.currency}else{var o=i.map((function(e){return"function"==typeof e.getFloor&&e.getFloor()})).filter((function(e){return e})),s=o.length&&o.reduce(Ca(Qp((function(e){return[e.floor,e.currency]}))));e=null==s?void 0:s.floor,t=null==s?void 0:s.currency}var a={};return e&&(Dn(a,"auctionSignals.prebid.bidfloor",e),t&&Dn(a,"auctionSignals.prebid.bidfloorcur",t)),a}function xb(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bb,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!==(t=null===(n=Sb)||void 0===n?void 0:n.componentSeller)&&void 0!==t?t:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{compact:function(e){return(t=e.map((function(e){return e[1]})),t.reduce((function(e,t){if(Db(t)){var n=e.find((function(e){return!e.hasOwnProperty(t.origin)||In(e[t.origin],t)}));n||(n={},e.push(n)),n[t.origin]=t}return e}),[]).map((function(e){return Object.values(e)}))).map((function(e){return[{},e]}));var t},expand:jb};return r.auctionConfig?(0,o[r.separateAuctions?"expand":"compact"])(e).map((function(e){var t=s(e,2),n=t[0],o=t[1],a=En(i(o),r.auctionConfig);return a.auctionSignals=Ob(a.auctionSignals||{},n),[n,a]})):(At(gb,"Cannot use IG buyers: paapi.componentSeller.auctionConfig not set",e.map((function(e){return e[1]}))),[])}function Pb(e){var t=e.auctionId,n=e.bidsReceived,i=e.bidderRequests,r=e.adUnitCodes,o=e.adUnits,a=Object.fromEntries((null==o?void 0:o.map((function(e){return[e.code,e]})))||[]),c=null==i?void 0:i.flatMap((function(e){return e.bids})),l=vb(t);(r||[]).forEach((function(e){l.hasOwnProperty(e)||(l[e]=null),!wb.hasOwnProperty(e)&&(wb[e]=null)}));var u=bb(t),p=yb(t);u&&p&&Object.entries(p).forEach((function(e){var t=s(e,2),n=t[0];xb(t[1]).forEach((function(e){var t=s(e,2),i=t[0].bidder,r=t[1];return Tb(u,n,{id:Rb(i),config:r})}))}));var h=Ab(t),g=Array.from(new Set(Object.keys(u).concat(Object.keys(h)))),f=Object.fromEntries(g.map((function(e){wb[e]=t;var i=function(t){return t.adUnitCode===e};return[e,hb(hb({},Eb(a[e])),_b(null==n?void 0:n.filter(i),null==c?void 0:c.filter(i)))]}))),m={};function v(e,t){Object.entries(t).forEach((function(t){var n=s(t,2),i=n[0],r=n[1],o=r.resolve,a=r.default,c=e.hasOwnProperty(i)?e[i]:null;o(c=null==c&&null==a?void 0:"object"===d(a)&&"object"===d(c)?En({},a,c):null!=c?c:a)}))}Object.entries(u||{}).forEach((function(e){var t=s(e,2),n=t[0];t[1].forEach((function(e){var t=e.id,i=e.config;return Tb(m,t,{adUnitCode:n,config:En({},f[n],i)})}))})),Object.entries(h).forEach((function(e){var t=s(e,2),n=t[0],i=t[1],r=i.top,o=i.components;v(f[n],r),Object.entries(o).forEach((function(e){var t,i=s(e,2),r=i[0],o=i[1].deferrals,a=m.hasOwnProperty(r)?m[r]:[];a.length>1&&At("Received multiple PAAPI configs for the same bidder and seller (".concat(r,"), active PAAPI auctions will only see the first")),v((null!==(t=a.shift())&&void 0!==t?t:{config:hb({},f[n])}).config,o)}))}));var b=Object.values(m).flatMap((function(e){return e})),y=Object.keys(h).length>0;Sb.parallel&&y&&b.length>0&&wt("Received PAAPI configs after PAAPI auctions were already started in parallel with their contextual auction",b),b.forEach((function(e){var t=e.adUnitCode,n=e.config;null==l[t]&&(l[t]=hb(hb({},f[t]),{},{componentAuctions:[]})),l[t].componentAuctions.push(En({},f[t],n))})),Sb.parallel&&y||fb.forEach((function(e){var n;return null===(n=e.onAuctionConfig)||void 0===n?void 0:n.call(e,t,l)}))}function Tb(e,t,n){!e.hasOwnProperty(t)&&(e[t]=[]),e[t].push(n)}function Ob(e,t){var n,i,r=t.ortb2,o=t.ortb2Imp;return null!=r&&Dn(e,"prebid.ortb2",En({},r,null===(n=e.prebid)||void 0===n?void 0:n.ortb2)),null!=o&&Dn(e,"prebid.ortb2Imp",En({},o,null===(i=e.prebid)||void 0===i?void 0:i.ortb2Imp)),e}function Cb(e,t){return"".concat(e,"::").concat(t)}function Rb(e){return Sb.componentSeller.separateAuctions?"igb::".concat(e):"igb"}function Ub(e,t,n){if(zb(Se.getCurrentBidder()).enabled){var i=function(e,t){var n=e(o);null!=n?Tb(n,r,t):At(gb,"Received PAAPI config for auction that has closed (auction '".concat(o,"', adUnit '").concat(r,"')"),t)},r=t.adUnitCode,o=t.auctionId,s=t.bidder,a=n.config,d=n.igb;if(a){var c;a.auctionSignals=Ob(a.auctionSignals||{},t);var l=a.perBuyerSignals=null!==(c=a.perBuyerSignals)&&void 0!==c?c:{};(a.interestGroupBuyers||[]).forEach((function(e){var n;l[e]=Ob(null!==(n=l[e])&&void 0!==n?n:{},t)})),i(bb,{id:Cb(s,a.seller),config:a})}d&&Db(d)&&(d.pbs=Ob(d.pbs||{},t),i(yb,[t,d]))}e(t,n)}Se.getConfig("paapi",(function(e){var t;(t=e.paapi)&&!0===t.enabled?(Sb.enabled||(_i("addPaapiConfig").before(Ub),_i("makeBidRequests").before(Hb),_i("makeBidRequests").after($b),_i("processBidderRequests").before(Jb,9),_i("processBidderRequests").before(Xb,10),_i("processBidderRequests").before(Ib),Er(R.AUCTION_INIT,Zb),Er(R.AUCTION_END,Pb)),Sb=t,yt("".concat(gb," enabled (browser ").concat(Mb()?"supports":"does NOT support"," runAdAuction)"),t)):(Sb.enabled&&(_i("addPaapiConfig").getHooks({hook:Ub}).remove(),_i("makeBidRequests").getHooks({hook:Hb}).remove(),_i("makeBidRequests").getHooks({hook:$b}).remove(),_i("processBidderRequests").getHooks({hook:Jb}).remove(),_i("processBidderRequests").getHooks({hook:Xb}).remove(),_i("processBidderRequests").getHooks({hook:Ib}).remove(),_r(R.AUCTION_INIT,Zb),_r(R.AUCTION_END,Pb)),Sb={},yt("".concat(gb," disabled"),t))}));var kb={cur:"perBuyerCurrencies",pbs:"perBuyerSignals",ps:"perBuyerPrioritySignals",maxbid:"auctionSignals.prebid.perBuyerMaxbid"};function Db(e){if(e.origin)return!0;At("PAAPI buyer does not specify origin and will be ignored",e)}function Bb(e){var t=new Set;return Object.assign(e.reduce((function(n,i){return Db(i)&&(t.has(i.origin)?At(gb,"Duplicate buyer: ".concat(i.origin,". All but the first will be ignored"),e):(t.add(i.origin),Object.entries(kb).forEach((function(e){var t=s(e,2),r=t[0],o=t[1];if(null!=i[r]){var a=x(n,o)||{};a[i.origin]=i[r],Dn(n,o,a)}})))),n}),{}),{interestGroupBuyers:Array.from(t.keys())})}function jb(e){var t={},n={};return e.forEach((function(e){var i=s(e,2),r=i[0],o=i[1];!t.hasOwnProperty(r.bidder)&&(t[r.bidder]=r),Tb(n,r.bidder,o)})),Object.entries(n).map((function(e){var n=s(e,2),i=n[0],r=n[1];return[t[i],r]}))}function Nb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.auctionId,n=e.adUnitCode,i=[];return null==n?i=Object.keys(wb):wb.hasOwnProperty(n)&&(i=[n]),Object.fromEntries(i.map((function(e){return[e,null!=t?t:wb[e]]})))}function Lb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.entries(Nb(e)).forEach((function(e){var i=s(e,2),r=i[0],o=i[1],a=vb(o);if(null!=a&&a.hasOwnProperty(r)){var d=a[r];d&&!mb.has(d)?(n[r]=d,mb.add(d)):t&&(n[r]=null)}else null==o&&t&&(n[r]=null)})),n}function Mb(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function zb(e){var t,n,i=Sb.enabled&&(null==e||!(null!==(t=Sb.bidders)&&void 0!==t&&t.length)||(null===(n=Sb.bidders)||void 0===n?void 0:n.includes(e)));return{enabled:i,ae:i?Sb.defaultForSlots:void 0}}h().getPAAPIConfig=function(e){return Lb(e)};var Fb=Si("sync",(function(e){var t,n;if(e=null===(t=e)||void 0===t?void 0:t.filter((function(e){var t=s(e,2),n=t[0];return!(n===t[1]&&n<=5)})),null!==(n=e)&&void 0!==n&&n.length)return e.reduce(Ra(Pa((function(e){var t=s(e,2);return t[0]*t[1]}))))}),"getPAAPISize");function qb(e){var t;return(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t||null===(t=t.paapi)||void 0===t?void 0:t.requestedSize)||function(t){var n=Fb(ct(null===(t=e.mediaTypes)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.sizes));if(n)return{width:n[0],height:n[1]}}()}function Hb(e,t){Mb()&&Sb.enabled&&t.forEach((function(e){var t,n,i,r=null!=(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.igs)?e.ortb2Imp.ext.igs.ae||1:null,o=null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.ae;r!==o&&null!=r&&null!=o&&At(gb,"Ad unit defines conflicting ortb2Imp.ext.ae and ortb2Imp.ext.igs, using the latter",e);var s=null!==(i=null!=r?r:o)&&void 0!==i?i:Sb.defaultForSlots;if(s){Dn(e,"ortb2Imp.ext.ae",s),e.ortb2Imp.ext.igs=Object.assign({ae:s,biddable:1},e.ortb2Imp.ext.igs);var a=qb(e);a&&Dn(e,"ortb2Imp.ext.paapi.requestedSize",a),e.bids.forEach((function(e){zb(e.bidder).enabled||(Dn(e,"ortb2Imp.ext.ae",0),e.ortb2Imp.ext.igs={ae:0,biddable:0})}))}}));for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];e.apply(void 0,[t].concat(i))}var Vb=["createAuctionNonce","getInterestGroupAdAuctionData"];function $b(e,t){Mb()&&t.forEach((function(e){var t,n=zb(e.bidderCode).enabled;Object.assign(e,{paapi:{enabled:n,componentSeller:!(null===(t=Sb.componentSeller)||void 0===t||!t.auctionConfig)}}),n&&Vb.forEach((function(t){e.paapi[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Yb((function(){var e;return(e=navigator)[t].apply(e,n)}))}}))})),e(t)}var Gb,Wb=["auctionSignals","sellerSignals","perBuyerSignals","perBuyerTimeouts","directFromSellerSignals","perBuyerCurrencies","perBuyerCumulativeTimeouts","serverResponse"],Kb=(Gb=[{props:["seller"],validate:function(e){return"string"==typeof e}},{props:["interestGroupBuyers"],validate:function(e){return Array.isArray(e)&&e.length>0}},{props:["decisionLogicURL","decisionLogicUrl"],validate:function(e){return"string"==typeof e}}],function(e){var t=Gb.find((function(t){var n=t.props,i=t.validate;return n.every((function(t){return!e.hasOwnProperty(t)||!e[t]||!i(e[t])}))}));return!t||(wt('Partial PAAPI config has missing or invalid property "'.concat(t.props[0],'"'),e),!1)});function Qb(e,t,n,i){var r,o=to(i),s=Kr(i);return o.measureTime(t,(function(){try{r=e[t](n.map(s.bidRequest),s.bidderRequest(i))}catch(e){wt('Error invoking "'.concat(t,'":'),e)}})),r}function Jb(e,t,n,i){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return[Object.fromEntries(Wb.map((function(n){var i=Fe({promiseFactory:function(e){return new Promise(e)}});return i.default=e.hasOwnProperty(n)?e[n]:null,t[n]=i.promise,[n,i]}))),t]}var o=i.auctionId,a=i.paapi,d=void 0===a?{}:a,c=d.enabled,l=d.componentSeller,u=vb(o);if(n.map((function(e){return e.adUnitCode})).forEach((function(e){wb[e]=o,u.hasOwnProperty(e)||(u[e]=null)})),c&&t.buildPAAPIConfigs){var p=Qb(t,"buildPAAPIConfigs",n,i),h=Object.fromEntries(n.map((function(e){return[e.bidId,e]})));(null!=p?p:[]).forEach((function(e){var n=e.bidId,i=e.config,a=e.igb,d=h.hasOwnProperty(n)&&h[n];if(d){var c=d.adUnitCode;wb[c]=o;var p=Ab(o),g=function(){if(!p.hasOwnProperty(c)){var e=s(r(),2),t=e[0],n=e[1];u[c]=hb(hb(hb({},Eb(Ia.index.getAdUnit(d))),n),{},{componentAuctions:[]}),p[c]={top:t,components:{},auctionConfig:u[c]}}return p[c]};if(i&&Kb(i)){var f=Cb(d.bidder,i.seller),m=g();if(m.components.hasOwnProperty(f))At("Received multiple PAAPI configs for the same bidder and seller; config will be ignored",{config:i,bidder:d.bidder});else{var v=s(r(i),2),b=v[0],y=v[1],A=hb(hb(hb({},Eb(d)),i),y);m.auctionConfig.componentAuctions.push(A),m.components[f]={auctionConfig:A,deferrals:b}}}if(l&&a&&Db(a)){var w=Rb(t.code),S=g(),I=xb([[d,a]])[0][1];if(S.components.hasOwnProperty(w)){var E=S.components[w],_=E.auctionConfig,x=E.deferrals;if(_.interestGroupBuyers.includes(a.origin))At("Received the same PAAPI buyer multiple times for the same PAAPI auction. Consider setting paapi.componentSeller.separateAuctions: true",a);else{var P={};Object.entries(I).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];x.hasOwnProperty(n)?En(x[n],{default:i}):P[n]=i})),En(_,P)}}else{var T=s(r(I),2),O=T[0],C=T[1],R=hb(hb(hb({},I),Eb(d)),C);S.components[w]={auctionConfig:R,deferrals:O},S.auctionConfig.componentAuctions.push(R)}}}else wt("Received partial PAAPI config for unknown bidId",{bidId:n,config:i})}))}for(var g=arguments.length,f=new Array(g>4?g-4:0),m=4;m<g;m++)f[m-4]=arguments[m];return e.call.apply(e,[this,t,n,i].concat(f))}var Yb=xe((function e(t){Ee(this,e),this.resolve=t}));function Xb(e,t,n,i){for(var r,o=this,a=arguments.length,d=new Array(a>4?a-4:0),c=4;c<a;c++)d[c-4]=arguments[c];if(null!==(r=i.paapi)&&void 0!==r&&r.enabled&&t.paapiParameters){var l=Qb(t,"paapiParameters",n,i);return Me.all(Object.entries(null!=l?l:{}).map((function(e){var t=s(e,2),n=t[0],i=t[1];return i instanceof Yb?i.resolve().then((function(e){return[n,e]})):Promise.resolve([n,i])}))).then((function(e){i.paapi.params=Object.fromEntries(e)})).catch((function(e){wt("Could not resolve PAAPI parameters",e)})).then((function(){e.call.apply(e,[o,t,n,i].concat(d))}))}e.call.apply(e,[this,t,n,i].concat(d))}function Zb(e){var t=e.auctionId;Sb.parallel&&Ia.index.getAuction({auctionId:t}).requestsDone.then((function(){Object.keys(Ab(t)).length>0&&fb.forEach((function(e){var n;return null===(n=e.onAuctionConfig)||void 0===n?void 0:n.call(e,t,vb(t))}))}))}function ey(e,t,n){e.forEach((function(e){var t,i=n.impContext[e.impid];null!=i&&null!==(t=i.imp)&&void 0!==t&&null!==(t=t.ext)&&void 0!==t&&t.ae?(i.paapiConfigs=i.paapiConfigs||[],i.paapiConfigs.push(e)):At(gb,"Received auction configuration for an impression that was not in the request or did not ask for it",e,null==i?void 0:i.imp)}))}ol({type:Yc,name:"impExtAe",fn:function(e,t,n){var i,r,o;null!==(i=n.bidderRequest.paapi)&&void 0!==i&&i.enabled||(null===(r=e.ext)||void 0===r||delete r.ae,null===(o=e.ext)||void 0===o||delete o.igs)}}),ol({type:Zc,name:"extPrebidFledge",fn:function(e,t,n){var i;ey((null===(i=t.ext)||void 0===i||null===(i=i.prebid)||void 0===i||null===(i=i.fledge)||void 0===i?void 0:i.auctionconfigs)||[],0,n)},dialects:[tl]}),ol({type:Zc,name:"extIgiIgs",fn:function(e,t,n){var i;ey(((null===(i=t.ext)||void 0===i?void 0:i.igi)||[]).flatMap((function(e){return((null==e?void 0:e.igs)||[]).map((function(t){var n;return t.impid!==e.impid&&null!=t.impid&&null!=e.impid&&At(gb,"ORTB response ext.igi.igs.impid conflicts with parent's impid",e),{config:t.config,impid:null!==(n=t.impid)&&void 0!==n?n:e.impid}})).concat(((null==e?void 0:e.igb)||[]).map((function(t){return{igb:t,impid:e.impid}})))})),e,n)}}),ol({type:Zc,name:"paapiConfigs",priority:-1,fn:function(e,t,n){var i=Object.values(n.impContext).flatMap((function(e){return(e.paapiConfigs||[]).map((function(t){return hb({bidId:e.bidRequest.bidId},t)}))}));i.length>0&&(e.paapi=i)}}),g("paapi");var ty=!1,ny=[];var iy=Xi("topicsFpd"),ry="prebid:topics",oy="lastUpdated",sy={1:600,2:601,3:602,4:603};function ay(e,t){return t.reduce((function(t,n){var i=n[e];return t.hasOwnProperty(i)||(t[i]=[]),t[i].push(n),t}),{})}function dy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sy;return Object.entries(ay("taxonomyVersion",t)).filter((function(e){var t=s(e,1)[0];return!!n.hasOwnProperty(t)||(At('Unrecognized taxonomyVersion from Topics API: "'.concat(t,'"; topic will be ignored')),!1)})).flatMap((function(t){var i=s(t,2),r=i[0],o=i[1];return Object.entries(ay("modelVersion",o)).map((function(t){var i=s(t,2),o=i[0],a=i[1],d={ext:{segtax:n[r],segclass:o},segment:a.map((function(e){return{id:e.topic.toString()}}))};return null!=e&&(d.name=e),d}))}))}function cy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return"browsingTopics"in e&&e.featurePolicy.allowsFeature("browsing-topics")}var ly=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=null;try{cy(e)&&(t=Me.resolve(e.browsingTopics()))}catch(e){wt("Could not call topics API",e)}return null==t&&(t=Me.resolve([])),t}().then((function(e){return dy(go().domain,e)}));function uy(e){if(e&&e.data)try{var t=Pn(e.data);if(ny.includes(e.origin)&&t&&t.segment&&!jt(t.segment.topics)){var n=t.segment,i=n.domain,r=n.topics,o=n.bidder,s=dy(i,r);s&&py(o,s)}}catch(e){}}function py(e,t){var n=new Map(Pn(iy.getDataFromLocalStorage(ry))),i=l({},oy,(new Date).getTime());t.forEach((function(e){i[e.ext.segclass]=e})),n.set(e,i),iy.setDataInLocalStorage(ry,JSON.stringify(a(n)))}function hy(e,t){var n=(new Date).getTime();return Math.ceil((n-e)/864e5)>t}function gy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gy(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oi("firstPartyData",{name:"topics",queue:1,processFpd:function(e,t){var n=t.global,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).data,r=void 0===i?ly:i;return ty||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!cy(e))return;var t=Se.getConfig("userSync.topics");if(t){window.addEventListener("message",uy,!1);var n=function(e,t){return a(e).sort((function(){return.5-Math.random()})).slice(0,t)}(t.bidders||[],t.maxTopicCaller||1);n&&n.forEach((function(t){var n,i=t.bidder,r=t.iframeURL,o=t.fetchUrl,s=t.fetchRate;if(i&&r){var a=e.createElement("iframe");a.name="ifrm_".concat(i),a.src="".concat(r,"?bidder=").concat(i),a.style.display="none",n=new URL(r).origin,ny.push(n),r&&e.documentElement.appendChild(a)}if(i&&o){var d=new Map(Pn(iy.getDataFromLocalStorage(ry))).get(i);(!d||d&&hy(d[oy],s||1))&&window.fetch("".concat(o,"?bidder=").concat(i),{browsingTopics:!0}).then((function(e){return e.json()})).then((function(e){if(e&&e.segment&&!jt(e.segment.topics)){var t=e.segment,n=t.domain,i=t.topics,r=t.bidder,o=dy(n,i);o&&py(r,o)}}))}}))}else At("Topics config not defined under userSync Object")}(),ty=!0),r.then((function(e){var t,i,r,o;return(e=[].concat(e,(t=[],i=Se.getConfig("userSync.topics"),r=(null==i?void 0:i.bidders)||[],(o=new Map(Pn(iy.getDataFromLocalStorage(ry))))&&o.forEach((function(e,n){var i=r.find((function(e){var t=e.bidder;return n===t}));i&&Vi(ti,Us(mi,n))&&(hy(e[oy],(null==i?void 0:i.expiry)||21)?(o.delete(n),iy.setDataInLocalStorage(ry,JSON.stringify(a(o)))):Object.keys(e).forEach((function(n){n!==oy&&t.push(e[n])})))})),t))).length&&En(n,{user:{data:e}}),{global:n}}))}}),g("topicsFpdModule");function my(e){var t=e.apiName,n=e.apiVersion,i=e.apiArgs,r=void 0===i?["command","callback","parameter","version"]:i,o=e.callbackArgs,d=void 0===o?["returnValue","success"]:o,c=e.mode,u=void 0===c?0:c,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,h={},g="".concat(t,"Call"),f="".concat(t,"Return");function m(e){var t,n="string"==typeof e.data&&e.data.includes(f)?JSON.parse(e.data):e.data;if(null!=n&&null!==(t=n[f])&&void 0!==t&&t.callId){var i=n[f];h.hasOwnProperty(i.callId)&&h[i.callId].apply(h,a(d.map((function(e){return i[e]}))))}}var v,b=function(){for(var e,n=p,i=!1;null!=n;){try{if("function"==typeof n[t]){e=n,i=!0;break}}catch(e){}try{if(n.frames["".concat(t,"Locator")]){e=n;break}}catch(e){}if(n===p.top)break;n=n.parent}return[e,i]}(),y=s(b,2),A=y[0],w=y[1];if(A)return w?v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Me((function(n,i){var r=A[t].apply(A,a(S(fy(fy({},e),{},{callback:e.callback||2===u?I(e.callback,n,i):void 0})).map((function(e){var t=s(e,2);t[0];return t[1]}))));(1===u||null==e.callback&&0===u)&&n(r)}))}:(p.addEventListener("message",m,!1),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Me((function(n,i){var r=Math.random().toString(),o=l({},g,fy(fy({},Object.fromEntries(S(e).filter((function(e){return"callback"!==s(e,1)[0]})))),{},{callId:r}));h[r]=I(null==e?void 0:e.callback,n,i,(t||null==(null==e?void 0:e.callback))&&function(){delete h[r]}),A.postMessage(o,"*"),1===u&&n()}))}),Object.assign(v,{isDirect:w,close:function(){!w&&p.removeEventListener("message",m)}});function S(e){return e=Object.assign({version:n},e),r.map((function(t){return[t,e[t]]}))}function I(e,t,n,i){var r="function"==typeof e;return function(o,s){(i&&i(),1!==u)&&(null==s||s?t:n)(r?void 0:o);r&&e.apply(this,arguments)}}}function vy(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.namespace,o=i.displayName,s=i.consentDataHandler,c=i.parseConsentData,u=i.getNullConsent,p=i.cmpHandlers,g=i.DEFAULT_CMP,f=void 0===g?"iab":g,m=i.DEFAULT_CONSENT_TIMEOUT,v=void 0===m?1e4:m;function b(e){return"consentManagement.".concat(r," ").concat(e)}function y(e,t){return e(Object.assign(l({},"".concat(r,"Consent"),s.getConsentData()),t))}function A(){return t().then((function(e){return{error:e.error,consentData:s.getConsentData()}}))}function w(){null==e&&(e=function(e,t){var n=new WeakSet;return Hr(e,(function(e,i){var r=this;return t().then((function(t){var o=t.consentData,s=t.error;!s||o&&n.has(s)||(n.add(s),At.apply(void 0,[s.message].concat(a(s.args||[])))),e.call(r,i)})).catch((function(t){wt.apply(void 0,["".concat(null==t?void 0:t.message," Canceling auction as per consentManagement config.")].concat(a((null==t?void 0:t.args)||[]))),e.stopTiming(),"function"==typeof i.bidsBackHandler?i.bidsBackHandler():wt("Error executing bidsBackHandler")}))}))}(r,(function(){return t()})),h().requestBids.before(e,50),Li.before(y),yt("".concat(o," consentManagement module has been activated...")))}return function(i){var a,l,g;if(!(i=null===(a=i)||void 0===a?void 0:a[r])||"object"!==d(i))return At(b("config not defined, exiting consent manager module")),null!=e&&(h().requestBids.getHooks({hook:e}).remove(),Li.getHooks({hook:y}).remove(),e=null),{};Rt(i.cmpApi)?l=i.cmpApi:(l=f,yt(b("config did not specify cmp.  Using system default setting (".concat(f,").")))),kt(i.timeout)?g=i.timeout:(g=v,yt(b("config did not specify timeout.  Using system default setting (".concat(v,")."))));var m,S=kt(i.actionTimeout)?i.actionTimeout:null;"static"===l?Dt(i.consentData)?(n=i.consentData,g=null,m=function(){return new Me((function(e){return e(s.setConsentData(c(n)))}))}):wt(b("config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")):p.hasOwnProperty(l)?m=p[l]:(s.setConsentData(null),At("".concat(o," CMP framework (").concat(l,") is not a supported framework.  Aborting consentManagement module and resuming auction.")),m=function(){return Me.resolve()});var I,E=function(){return function(e){var t,n=e.name,i=e.consentDataHandler,r=e.setupCmp,o=e.cmpTimeout,s=e.actionTimeout,a=e.getNullConsent;return i.enable(),new Promise((function(e,d){var c,l=!1;function u(r){null!=t&&clearTimeout(t),t=null!=r?setTimeout((function(){var t,r=null!==(t=i.getConsentData())&&void 0!==t?t:l?c:a(),o="timeout waiting for ".concat(l?"user action on CMP":"CMP to load");i.setConsentData(r),e({consentData:r,error:new Error("".concat(n," ").concat(o))})}),r):null}r((function(e){c=e,l||(l=!0,null!=s&&u(s))})).then((function(){return e({consentData:i.getConsentData()})}),d),null!=o&&u(o)})).finally((function(){t&&clearTimeout(t)})).catch((function(e){throw i.setConsentData(null),e}))}({name:o,consentDataHandler:s,setupCmp:m,cmpTimeout:g,actionTimeout:S,getNullConsent:u})};return t=function(){return null==I&&(I=E().catch((function(e){throw I=null,e}))),I},w(),{cmpHandler:l,cmpTimeout:g,actionTimeout:S,staticConsentData:n,loadConsentData:A,requestBidsHook:e}}}var by,yy,Ay={iab:function(e){return new Promise((function(t,n){var i=my({apiName:"__tcfapi",apiVersion:2,apiArgs:["command","version","callback","parameter"]});i||n(new Error("TCF2 CMP not found.")),i.isDirect?yt("Detected CMP API is directly accessible, calling it now..."):yt("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),i({command:"addEventListener",callback:function(i,r){if(yt("Received a response from CMP",i),r){try{e(wy(i))}catch(e){}if(!1===i.gdprApplies||"tcloaded"===i.eventStatus||"useractioncomplete"===i.eventStatus)try{No.setConsentData(wy(i)),t()}catch(e){n(e)}}else n(Error("CMP unable to register callback function.  Please check CMP setup."))}})}))}};function wy(e){if(t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:by,n=e&&e.tcString,"boolean"==typeof t&&(!0!==t||n&&Rt(n)))return Sy(e);throw Object.assign(new Error("CMP returned unexpected value during lookup process."),{args:[e]});var t,n}function Sy(e){var t={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:by};return e&&e.addtlConsent&&Rt(e.addtlConsent)&&(t.addtlConsent=e.addtlConsent),t.apiVersion=2,t}var Iy=vy({namespace:"gdpr",displayName:"TCF",consentDataHandler:No,cmpHandlers:Ay,parseConsentData:wy,getNullConsent:function(){return Sy(null)}});Se.getConfig("consentManagement",(function(e){return function(e){var t,n,i,r,o,s;return null!=(null===(t=e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))||void 0===t||null===(t=t.consentData)||void 0===t?void 0:t.getTCData)&&(e.consentData=e.consentData.getTCData),by=!0===(null===(n=e)||void 0===n?void 0:n.defaultGdprScope),yy=!(null===(i=e)||void 0===i||!i.dsaPlatform),null===(r=(o=Iy({gdpr:e})).loadConsentData)||void 0===r||null===(r=r.call(o))||void 0===r||null===(s=r.catch)||void 0===s?void 0:s.call(r,(function(){return null}))}(e.consentManagement)})),fc.before((function(e,t){return e(t.then((function(e){var t=No.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&Dn(e,"regs.ext.gdpr",t.gdprApplies?1:0),Dn(e,"user.ext.consent",t.consentString)),yy&&Dn(e,"regs.ext.dsa.dsarequired",3),e})))})),ol({type:Jc,name:"gdprAddtlConsent",fn:function(e,t){var n,i=null===(n=t.gdprConsent)||void 0===n?void 0:n.addtlConsent;i&&"string"==typeof i&&Dn(e,"user.ext.ConsentedProvidersSettings.consented_providers",i)}}),g("consentManagementTcf");var Ey,_y,xy="iab",Py=xy,Ty=50,Oy=!1,Cy={iab:function(e){var t=e.onSuccess,n=e.onError;var i=(o={},{consentDataCallback:function(e,i){i&&e.uspString&&(o.usPrivacy=e.uspString),o.usPrivacy?ky(o,{onSuccess:t,onError:n}):n("Unable to get USP consent string.")}}),r=my({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});var o;if(!r)return n("USP CMP not found.");r.isDirect?yt("Detected USP CMP is directly accessible, calling it now..."):yt("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now...");r({command:"getUSPData",callback:i.consentDataCallback}),r({command:"registerDeletion",callback:function(e,t){return(null==t||t)&&Rs.callDataDeletionRequest(e)}}).catch((function(e){wt("Error invoking CMP `registerDeletion`:",e)}))},static:function(e){var t=e.onSuccess,n=e.onError;ky(Ey,{onSuccess:t,onError:n})}};function Ry(e){var t=null,n=!1;function i(i,r){if(null!=t&&clearTimeout(t),n=!0,Lo.setConsentData(i),null!=e){for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];e.apply(void 0,[r].concat(s))}}if(Cy[Py]){var r={onSuccess:i,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(n))}};Cy[Py](r),n||(0===Ty?ky(void 0,r):t=setTimeout(r.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),Ty))}else i(null,"USP framework (".concat(Py,") is not a supported framework. Aborting consentManagement module and resuming auction."))}var Uy=Hr("usp",(function(e,t){var n=this;Oy||Dy(),Ry((function(i){if(null!=i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];At.apply(void 0,[i].concat(o))}e.call(n,t)}))}));function ky(e,t){var n=t.onSuccess,i=t.onError;!e||!e.usPrivacy?i("USPAPI returned unexpected value during lookup process.",e):(!function(e){e&&e.usPrivacy&&(_y=e.usPrivacy)}(e),n(_y))}function Dy(){Oy||(yt("USPAPI consentManagement module has been activated".concat(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"":" using default values (api: '".concat(Py,"', timeout: ").concat(Ty,"ms)"))),Oy=!0,Lo.enable()),Ry()}Se.getConfig("consentManagement",(function(e){return function(e){(e=e&&e.usp)&&"object"===d(e)||At("consentManagement.usp config not defined, using defaults"),e&&Rt(e.cmpApi)?Py=e.cmpApi:(Py=xy,yt("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(xy,")."))),e&&kt(e.timeout)?Ty=e.timeout:(Ty=50,yt("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===Py&&(Dt(e.consentData)&&Dt(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(Ey={usPrivacy:e.consentData.getUSPData.uspString}),Ty=0):wt("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Dy(!0)}(e.consentManagement)})),_i("requestBids").before(Uy,50),fc.before((function(e,t){return e(t.then((function(e){var t=Lo.getConsentData();return t&&Dn(e,"regs.ext.us_privacy",t),e})))})),g("consentManagementUsp");var By=xe((function e(t,n){Ee(this,e),this.message=t,this.args=null==n?[]:[n]})),jy=Oe("resolve"),Ny=Oe("reject"),Ly=Oe("pending"),My=function(){return xe((function e(t){var n=this;Ee(this,e),this.apiVersion="1.1",Object.defineProperty(this,jy,{writable:!0,value:void 0}),Object.defineProperty(this,Ny,{writable:!0,value:void 0}),Object.defineProperty(this,Ly,{writable:!0,value:[]}),this.initialized=!1,this.cmp=t;var i=s(["resolve","reject"].map((function(e){return function(t){for(;Pe(n,Ly)[Ly].length;)Pe(n,Ly)[Ly].pop()[e](t)}})),2);Pe(this,jy)[jy]=i[0],Pe(this,Ny)[Ny]=i[1]}),[{key:"init",value:function(e){var t=this,n=this.updateWhenReady(e);return this.initialized||(e.gppVersion!==this.apiVersion&&At("Unrecognized GPP CMP version: ".concat(e.apiVersion,". Continuing using GPP API version ").concat(this.apiVersion,"...")),this.initialized=!0,this.cmp({command:"addEventListener",callback:function(e,n){var i;null==n||n?"error"===(null==e||null===(i=e.pingData)||void 0===i?void 0:i.cmpStatus)?Pe(t,Ny)[Ny](new By('CMP status is "error"; please check CMP setup',e)):t.isCMPReady((null==e?void 0:e.pingData)||{})&&["sectionChange","signalStatus"].includes(null==e?void 0:e.eventName)&&Pe(t,jy)[jy](t.updateConsent(e.pingData)):Pe(t,Ny)[Ny](new By("Received error response from CMP",e)),null==Mo.getConsentData()||null==(null==e?void 0:e.pingData)||t.isCMPReady(e.pingData)||Mo.setConsentData(null)}})),n}},{key:"refresh",value:function(){return this.cmp({command:"ping"}).then(this.init.bind(this))}},{key:"updateConsent",value:function(e){return new Me((function(t){if(null==e||jt(e))throw new By("Received empty response from CMP",e);var n=zy(e);yt("Retrieved GPP consent from CMP:",n),Mo.setConsentData(n),t(n)}))}},{key:"nextUpdate",value:function(){var e=Fe();return Pe(this,Ly)[Ly].push(e),e.promise}},{key:"updateWhenReady",value:function(e){return this.isCMPReady(e)?this.updateConsent(e):this.nextUpdate()}},{key:"isCMPReady",value:function(e){return"ready"===e.signalStatus}}],[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:my;if(null==this.INST){var t=e({apiName:"__gpp",apiArgs:["command","callback","parameter"],mode:2});if(null==t)throw new By("GPP CMP not found");this.INST=new this(t)}return this.INST}}])}();function zy(e){if(null!=(null==e?void 0:e.applicableSections)&&!Array.isArray(e.applicableSections)||null!=(null==e?void 0:e.gppString)&&!Rt(e.gppString)||null!=(null==e?void 0:e.parsedSections)&&!Dt(e.parsedSections))throw new By("CMP returned unexpected value during lookup process.",e);return["usnatv1","uscav1"].forEach((function(t){var n;null!=e&&null!==(n=e.parsedSections)&&void 0!==n&&n[t]&&At("Received invalid section from cmp: '".concat(t,"'. Some functionality may not work as expected"),e)})),Fy(e)}function Fy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{gppString:null==e?void 0:e.gppString,applicableSections:(null==e?void 0:e.applicableSections)||[],parsedSections:(null==e?void 0:e.parsedSections)||{},gppData:e}}My.INST=void 0;var qy=vy({namespace:"gpp",displayName:"GPP",consentDataHandler:Mo,parseConsentData:zy,getNullConsent:function(){return Fy(null)},cmpHandlers:{iab:function(){return new Me((function(e){return e(My.get().refresh())}))}}});Se.getConfig("consentManagement",(function(e){return function(e){var t,n,i;return null===(t=(n=qy(e)).loadConsentData)||void 0===t||null===(t=t.call(n))||void 0===t||null===(i=t.catch)||void 0===i?void 0:i.call(t,(function(){return null}))}(e.consentManagement)})),fc.before((function(e,t){return e(t.then((function(e){var t=Mo.getConsentData();return t&&(Array.isArray(t.applicableSections)&&Dn(e,"regs.gpp_sid",t.applicableSections),Dn(e,"regs.gpp",t.gppString)),e})))})),g("consentManagementGpp");function Hy(e){return null!=e&&0!==e}function Vy(e){return["MspaServiceProviderMode","Gpc"].some((function(t){return 1===e[t]}))||2===e.PersonalDataConsents||1===e.KnownChildSensitiveDataConsents[0]||1===e.KnownChildSensitiveDataConsents[2]||Hy(e.KnownChildSensitiveDataConsents[1])||0===e.MspaCoveredTransaction}function $y(e,t){return["SensitiveDataProcessingOptOutNotice","SensitiveDataLimitUseNotice"].some((function(n){return e[n]===t}))}function Gy(e){return Vy(e)||["Sale","Sharing","TargetedAdvertising"].some((function(t){var n=e["".concat(t,"OptOut")],i=e["".concat(t,"OptOutNotice")];return 1===n||2===i||2===n&&0===i}))||2===e.SharingNotice||2===e.SharingOptOut&&0===e.SharingNotice}var Wy,Ky,Qy,Jy,Yy=(Wy=[6,7,9,10,12,14,16].map((function(e){return--e})),Ky=Array.from(Array(16).keys()).filter((function(e){return 7!==e})),Qy=Ky.filter((function(e){return!Wy.includes(e)})),Jy=Object.fromEntries(Object.entries({1:12,2:16}).map((function(e){var t=s(e,2),n=t[0],i=t[1],r=function(e){return e<i};return[n,{cannotBeInScope:Wy.filter(r),allExceptGeo:Ky.filter(r),mustHaveConsent:Qy.filter(r)}]}))),function(e){var t=Jy[e.Version],n=t.cannotBeInScope,i=t.mustHaveConsent,r=t.allExceptGeo;return Gy(e)||$y(e,2)||n.some((function(t){return Hy(e.SensitiveDataProcessing[t])}))||i.some((function(t){return 1===e.SensitiveDataProcessing[t]}))||$y(e,0)&&r.some((function(t){return 2===e.SensitiveDataProcessing[t]}))});var Xy=l(l(l(l({},ei,Gy),ni,Gy),ti,Yy),si,(function(e){var t=e.SensitiveDataProcessing[7];return 1===t||Vy(e)||$y(e,2)||$y(e,0)&&2===t}));function Zy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xy,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hi,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return Mo.getConsentData()},a=[],d="MSPA (GPP '".concat(e,"' for section").concat(t.length>1?"s":""," ").concat(t.join(", "),")");return yt("Enabling activity controls for ".concat(d)),Object.entries(i).forEach((function(i){var c=s(i,2),l=c[0],u=c[1];a.push(r(l,d,function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){var e;return null===(e=Mo.getConsentData())||void 0===e?void 0:e.applicableSections};return function(){if(i().some((function(t){return e.includes(t)}))){var r=t();if(null==r)return{allow:!1,reason:"consent data not available"};if(![1,2].includes(r.Version))return{allow:!1,reason:'unsupported consent specification version "'.concat(r.Version,'"')};if(n(r))return{allow:!1}}}}(t,(function(){var t,i;return n((i=null===(t=o())||void 0===t||null===(t=t.parsedSections)||void 0===t?void 0:t[e],Array.isArray(i)?i.reduceRight((function(e,t){return Object.assign(t,e)}),{}):i))}),u,(function(){var e;return(null===(e=o())||void 0===e?void 0:e.applicableSections)||[]}))))})),function(){return a.forEach((function(e){return e()}))}}var eA={Version:0,Gpc:0,SharingNotice:0,SaleOptOutNotice:0,SharingOptOutNotice:0,TargetedAdvertisingOptOutNotice:0,SensitiveDataProcessingOptOutNotice:0,SensitiveDataLimitUseNotice:0,SaleOptOut:0,SharingOptOut:0,TargetedAdvertisingOptOut:0,SensitiveDataProcessing:12,KnownChildSensitiveDataConsents:2,PersonalDataConsents:0,MspaCoveredTransaction:0,MspaOptOutOptionMode:0,MspaServiceProviderMode:0};function tA(e){var t=e.nullify,n=void 0===t?[]:t,i=e.move,r=void 0===i?{}:i,o=e.fn,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eA;return r=Object.fromEntries(Object.entries(r).map((function(e){var t=s(e,2),n=t[0],i=t[1];return[n,Object.fromEntries(Object.entries(i).map((function(e){var t=s(e,2),n=t[0],i=t[1];return[n,Array.isArray(i)?i:[i]]})).map((function(e){var t=s(e,2),n=t[0];return[--n,t[1].map((function(e){return--e}))]})))]}))),function(e){var t=Object.fromEntries(Object.entries(a).map((function(t){var n=s(t,2),i=n[0],o=n[1],a=null;if(o>0){if(a=Array(o).fill(null),Array.isArray(e[i])){var d=r[i]||{},c=[];e[i].forEach((function(e,t){var n=s(d.hasOwnProperty(t)?[d[t],!0]:[[t],!1],2),i=n[0],r=n[1];i.forEach((function(t){t<o&&!c.includes(t)&&(a[t]=e,r&&c.push(t))}))}))}}else null!=e[i]&&(a=Array.isArray(e[i])?null:e[i]);return[i,a]})));return n.forEach((function(e){return Dn(t,e,null)})),o&&o(e,t),t}}function nA(e,t){t.KnownChildSensitiveDataConsents=0===e.KnownChildSensitiveDataConsents?[0,0]:[1,1]}var iA,rA={7:function(e){return e},8:tA({move:{SensitiveDataProcessing:{1:9,2:10,3:8,4:[1,2],5:12,8:3,9:4}},fn:function(e,t){e.KnownChildSensitiveDataConsents.some((function(e){return 0!==e}))&&(t.KnownChildSensitiveDataConsents=[1,1])}}),9:tA({fn:nA}),10:tA({fn:nA}),11:tA({move:{SensitiveDataProcessing:{3:4,4:5,5:3}},fn:nA}),12:tA({fn:function(e,t){var n,i=e.KnownChildSensitiveDataConsents;n=i.some((function(e){return 0!==e}))?2===i[1]&&2===i[2]?[2,1]:[1,1]:[0,0],t.KnownChildSensitiveDataConsents=n}})},oA={8:"usca",9:"usva",10:"usco",11:"usut",12:"usct"},sA=(iA=Object.keys(oA).map(Number),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sections,n=void 0===t?{}:t,i=e.sids;return(void 0===i?iA:i).map((function(e){var t=St("Cannot set up MSPA controls for SID ".concat(e,":")),i=n[e]||{},r=i.normalizeAs||e;if(rA.hasOwnProperty(r)){var o=i.name||oA[e];if("string"==typeof o)return[o,[e],rA[r]];t.logError("cannot determine GPP section name")}else t.logError("no normalization rules are known for SID ".concat(r))})).filter((function(e){return null!=e}))}),aA=[];Se.getConfig("consentManagement",(function(e){var t,n=null===(t=e.consentManagement)||void 0===t?void 0:t.gpp;if(n){for(;aA.length;)aA.pop()();sA((null==n?void 0:n.mspa)||{}).forEach((function(e){var t=s(e,3),n=t[0],i=t[1],r=t[2];return aA.push(Zy(n,i,r))}))}})),g("gppControl_usstates");var dA=!1;Se.getConfig("consentManagement",(function(e){var t;null==(null==e||null===(t=e.consentManagement)||void 0===t?void 0:t.gpp)||dA||(Zy("usnat",[7]),dA=!0)})),g("gppControl_usnat");var cA="criteo",lA=Yi({moduleType:vi,moduleName:cA}),uA="cto_bidid",pA="cto_bundle",hA="html5",gA="cookie",fA=new Date(0).toString(),mA=new Date(sn()+33696e6).toString();function vA(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=wn(e,{noDecodeWholeURL:!0});return t?"".concat(n.hostname):"".concat(n.protocol,"://").concat(n.hostname).concat(n.port?":"+n.port:"","/")}function bA(e,t){var n,i;return(null==e||null===(n=e.storage)||void 0===n?void 0:n.type)===hA?lA.getDataFromLocalStorage(t):(null==e||null===(i=e.storage)||void 0===i?void 0:i.type)===gA?lA.getCookie(t):lA.getCookie(t)||lA.getDataFromLocalStorage(t)}function yA(e,t,n,i){var r,o;t&&n&&((null==e||null===(r=e.storage)||void 0===r?void 0:r.type)===hA?lA.setDataInLocalStorage(t,n):((null==e||null===(o=e.storage)||void 0===o?void 0:o.type)===gA||lA.setDataInLocalStorage(t,n),AA(t,n,mA,i,!0)))}function AA(e,t,n,i,r){for(var o=i.split("."),s=0;s<o.length;++s){var a=o.slice(o.length-s-1,o.length).join(".");try{if(lA.setCookie(e,t,n,null,"."+a),r){var d=lA.getCookie(e);if(d&&d===t)break}}catch(e){}}}function wA(e,t,n){var i,r,o,s,a=(void 0===(null==e||null===(i=e.storage)||void 0===i?void 0:i.type)||(null==e||null===(r=e.storage)||void 0===r?void 0:r.type)===gA)&&lA.cookiesAreEnabled(),d=(void 0===(null==e||null===(o=e.storage)||void 0===o?void 0:o.type)||(null==e||null===(s=e.storage)||void 0===s?void 0:s.type)===hA)&&lA.localStorageIsEnabled(),c=vA(go().page),l=vA(document.location.href,!0),u="undefined"!=typeof criteo_pubtag,p=function(e,t,n,i,r,o,s){var a="https://gum.criteo.com/sid/json?origin=prebid"+"".concat(e?"&topUrl="+encodeURIComponent(e):"")+"".concat(t?"&domain="+encodeURIComponent(t):"")+"".concat(n?"&bundle="+encodeURIComponent(n):"")+"".concat(i?"&info="+encodeURIComponent(i):"")+"".concat(r?"&cw=1":"")+"".concat(s?"&pbt=1":"")+"".concat(o?"&lsw=1":""),d=Lo.getConsentData();d&&(a+="&us_privacy=".concat(encodeURIComponent(d)));var c=No.getConsentData();c&&(a+="".concat(c.consentString?"&gdprString="+encodeURIComponent(c.consentString):""),a+="&gdpr=".concat(!0===c.gdprApplies?1:0));var l=Mo.getConsentData();return l&&(a+="".concat(l.gppString?"&gpp="+encodeURIComponent(l.gppString):""),a+="".concat(l.applicableSections?"&gpp_sid="+encodeURIComponent(l.applicableSections):"")),a}(c,l,t.bundle,t.dnaBundle,a,d,u),h={success:function(t){var i,r=JSON.parse(t);(r.pixels&&r.pixels.forEach((function(t){return function(e,t,n){n.writeBundleInStorage&&n.bundlePropertyName&&n.storageKeyName?Fn(n.pixelUrl,{success:function(i){if(i){var r=JSON.parse(i);r&&r[n.bundlePropertyName]&&yA(e,n.storageKeyName,r[n.bundlePropertyName],t)}},error:function(e){wt("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):Ht(n.pixelUrl)}(e,l,t)})),r.acwsUrl)?("string"==typeof r.acwsUrl?[r.acwsUrl]:r.acwsUrl).forEach((function(e){return Ht(e)})):r.bundle&&yA(e,pA,r.bundle,l);if(r.bidId){yA(e,uA,r.bidId,l);var o={criteoId:r.bidId};n(o)}else AA(i=uA,"",fA,l,!0),lA.removeDataFromLocalStorage(i),n()},error:function(e){wt("criteoIdSystem: unable to sync user id",e),n()}};Fn(p,h,void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}function SA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function IA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SA(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oi("userId",{name:cA,gvlid:91,decode:function(e){return e},getId:function(e){var t=function(e){return{bundle:bA(e,pA),dnaBundle:bA(e,"cto_dna_bundle"),bidId:bA(e,uA)}}(e);return{id:t.bidId?{criteoId:t.bidId}:void 0,callback:function(n){return wA(e,t,n)}}},eids:{criteoId:{source:"criteo.com",atype:1}}}),g("criteoIdSystem");var EA="id5id",_A="User ID - ID5 submodule: ",xA="id5-sync.com",PA=Yi({moduleType:vi,moduleName:"id5Id"}),TA={id5id:{getValue:function(e){return e.uid},source:xA,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}},trueLinkId:{getValue:function(e){return e.uid},getSource:function(e){return"true-link-id5-sync.com"},atype:1,getUidExt:function(e){if(e.ext)return e.ext}}},OA={name:"id5Id",gvlid:131,decode:function(e,t){if(e&&void 0!==e.ids){var n={},i={};return Object.entries(e.ids).forEach((function(e){var t,r=s(e,2),o=r[0],a=r[1].eid,d=null==a||null===(t=a.uids)||void 0===t?void 0:t[0];n[o]={uid:null==d?void 0:d.id,ext:null==d?void 0:d.ext},i[o]=function(){return a}})),this.eids=i,n}var r,o,a={};if(e&&"string"==typeof e.universal_uid){r=e.universal_uid,a=e.ext||a,o=e.publisherTrueLinkId,this.eids=TA;var d={id5id:{uid:r,ext:a}};switch(Dt(a.euid)&&(d.euid={uid:a.euid.uids[0].id,source:a.euid.source,ext:{provider:xA}}),o&&(d.trueLinkId={uid:o}),x(e,"ab_testing.result")){case"control":yt(_A+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),Dn(d,"id5id.ext.abTestingControlGroup",!0);break;case"error":wt(_A+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":yt(_A+"A/B Testing - user is NOT in the Control Group"),Dn(d,"id5id.ext.abTestingControlGroup",!1)}return yt(_A+"Decoded ID",d),d}},getId:function(e,t,n){if(function(e){if(!e||!e.params||!e.params.partner)return wt(_A+"partner required to be defined"),!1;var t=e.params.partner;if("string"==typeof t||t instanceof String){var n=parseInt(t);if(isNaN(n)||n<0)return wt(_A+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=n}else if("number"!=typeof t)return wt(_A+"partner required to be a number or a String parsable to a positive integer"),!1;if(!e.storage||!e.storage.type||!e.storage.name)return wt(_A+"storage required to be set"),!1;e.storage.name!==EA&&At(_A+"storage name recommended to be '".concat(EA,"'."));return!0}(e)){if(iw(null==t?void 0:t.gdpr)){return{callback:function(i){new MA(e,null==t?void 0:t.gdpr,n,null==t?void 0:t.usp,null==t?void 0:t.gpp).execute().then((function(e){i(e)})).catch((function(e){wt(_A+"getId fetch encountered an error",e),i()}))}}}yt(_A+"Skipping ID5 local storage write because no consent given.")}},extendId:function(e,t,n){return iw(null==t?void 0:t.gdpr)?(yt(_A+"using cached ID",n),n&&(n.nbPage=nw(n)),n):(yt(_A+"No consent given for ID5 local storage writing, skipping nb increment."),n)},primaryIds:["id5id","trueLinkId"],eids:TA,_reset:function(){this.eids=TA}},CA=Oe("isExternalModule"),RA=Oe("externalModuleFlow"),UA=Oe("getExternalIntegration"),kA=Oe("regularFlow"),DA=Oe("callForConfig"),BA=Oe("callForExtensions"),jA=Oe("callId5Fetch"),NA=Oe("createFetchRequestData"),LA=Oe("processFetchCallResponse"),MA=function(){return xe((function e(t,n,i,r,o){Ee(this,e),Object.defineProperty(this,LA,{value:ZA}),Object.defineProperty(this,NA,{value:XA}),Object.defineProperty(this,jA,{value:JA}),Object.defineProperty(this,BA,{value:KA}),Object.defineProperty(this,DA,{value:GA}),Object.defineProperty(this,kA,{value:VA}),Object.defineProperty(this,UA,{value:HA}),Object.defineProperty(this,RA,{value:FA}),Object.defineProperty(this,CA,{value:zA}),this.submoduleConfig=t,this.gdprConsentData=n,this.cacheIdObj=i,this.usPrivacyData=r,this.gppData=o}),[{key:"execute",value:(e=m(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Pe(this,DA)[DA](),!Pe(this,CA)[CA]()){e.next=4;break}return e.prev=1,e.next=2,Pe(this,RA)[RA](t);case 2:return e.abrupt("return",e.sent);case 3:return e.prev=3,n=e.catch(1),wt(_A+"Error while performing ID5 external module flow. Continuing with regular flow.",n),e.abrupt("return",Pe(this,kA)[kA](t));case 4:return e.abrupt("return",Pe(this,kA)[kA](t));case 5:case"end":return e.stop()}}),e,this,[[1,3]])}))),function(){return e.apply(this,arguments)})}]);var e}();function zA(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}function FA(e){return qA.apply(this,arguments)}function qA(){return(qA=m(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,ew(this.submoduleConfig.params.externalModuleUrl);case 1:return e.next=2,t;case 2:return n=e.sent,e.abrupt("return",Pe(this,UA)[UA]().fetchId5Id(n,this.submoduleConfig.params,go(),this.gdprConsentData,this.usPrivacyData,this.gppData));case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function HA(){return window.id5Prebid&&window.id5Prebid.integration}function VA(e){return $A.apply(this,arguments)}function $A(){return($A=m(b().mark((function e(t){var n,i,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t;case 1:return n=e.sent,e.next=2,Pe(this,BA)[BA](n.extensionsCall);case 2:return i=e.sent,e.next=3,Pe(this,jA)[jA](n.fetchCall,i);case 3:return r=e.sent,e.abrupt("return",Pe(this,LA)[LA](r));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function GA(){return WA.apply(this,arguments)}function WA(){return WA=m(b().mark((function e(){var t,n,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.submoduleConfig.params.configUrl||"https://id5-sync.com/api/config/prebid",e.next=1,qn(t,{method:"POST",body:JSON.stringify(IA(IA({},this.submoduleConfig),{},{bounce:!0})),credentials:"include"});case 1:if((n=e.sent).ok){e.next=2;break}throw new Error("Error while calling config endpoint: ",n);case 2:return e.next=3,n.json();case 3:return i=e.sent,yt(_A+"config response received from the server",i),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),WA.apply(this,arguments)}function KA(e){return QA.apply(this,arguments)}function QA(){return QA=m(b().mark((function e(t){var n,i,r,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=1;break}return e.abrupt("return",void 0);case 1:return n=t.url,i=t.method||"GET",r="GET"===i?void 0:JSON.stringify(t.body||{}),e.next=2,qn(n,{method:i,body:r});case 2:if((o=e.sent).ok){e.next=3;break}throw new Error("Error while calling extensions endpoint: ",o);case 3:return e.next=4,o.json();case 4:return s=e.sent,yt(_A+"extensions response received from the server",s),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)}))),QA.apply(this,arguments)}function JA(e,t){return YA.apply(this,arguments)}function YA(){return YA=m(b().mark((function e(t,n){var i,r,o,s,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,r=t.overrides||{},o=JSON.stringify(IA(IA(IA({},Pe(this,NA)[NA]()),r),{},{extensions:n})),e.next=1,qn(i,{method:"POST",body:o,credentials:"include"});case 1:if((s=e.sent).ok){e.next=2;break}throw new Error("Error while calling fetch endpoint: ",s);case 2:return e.next=3,s.json();case 3:return a=e.sent,yt(_A+"fetch response received from the server",a),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),YA.apply(this,arguments)}function XA(){var e=this.submoduleConfig.params,t=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,n=go(),i=this.cacheIdObj?this.cacheIdObj.signature:void 0,r=nw(this.cacheIdObj),o=window.id5Bootstrap?window.id5Bootstrap.getTrueLinkInfo():{booted:!1},s={partner:e.partner,gdpr:t,nbPage:r,o:"pbjs",tml:n.topmostLocation,ref:n.ref,cu:n.canonicalUrl,top:n.reachedTop?1:0,u:n.stack[0]||window.location.href,v:"9.50.0",storage:this.submoduleConfig.storage,localStorage:PA.localStorageIsEnabled()?1:0,true_link:o};!t||void 0===this.gdprConsentData.consentString||jt(this.gdprConsentData.consentString)||Nt(this.gdprConsentData.consentString)||(s.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||jt(this.usPrivacyData)||Nt(this.usPrivacyData)||(s.us_privacy=this.usPrivacyData),this.gppData&&(s.gpp_string=this.gppData.gppString,s.gpp_sid=this.gppData.applicableSections),void 0===i||Nt(i)||(s.s=i),void 0===e.pd||Nt(e.pd)||(s.pd=e.pd),void 0===e.provider||Nt(e.provider)||(s.provider=e.provider);var a=e.abTesting||{enabled:!1};return a.enabled&&(s.ab_testing={enabled:!0,control_group_pct:a.controlGroupPct}),s}function ZA(e){try{e.privacy&&window.id5Bootstrap&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e.privacy)}catch(e){wt(_A+"Error while writing privacy info into local storage.",e)}return e}function ew(e){return tw.apply(this,arguments)}function tw(){return(tw=m(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Me((function(e,n){if(window.id5Prebid)e();else try{Bs(t,vi,"id5",e)}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nw(e){return e&&void 0!==e.nbPage?e.nbPage+1:1}function iw(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,n=x(e,"vendorData.purpose.consents.1"),i=x(e,"vendorData.vendor.consents.".concat(131..toString()));return!!(!t||n&&i)}function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oi("userId",OA),g("id5IdSystem");var sw={tdid:{source:"adserver.org",atype:1,getValue:function(e){return e.id?e.id:e},getUidExt:function(e){return ow(ow({},{rtiPartner:"TDID"}),e.ext)}}};function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aw(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cw="unifiedId",lw={name:cw,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(t&&("string"==typeof t.partner||"string"==typeof t.url)){var n=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){var t={success:function(t){var n;if(t)try{n=JSON.parse(t)}catch(e){wt(e)}e(n)},error:function(t){wt("".concat(cw,": ID fetch encountered an error"),t),e()}};Fn(n,t,void 0,{method:"GET",withCredentials:!0})}}}wt("User ID - unifiedId submodule requires either partner or url to be defined")},eids:{tdid:dw(dw({},sw.tdid),{},{mm:4,inserter:"adserver.org",matcher:"adserver.org"})}};Oi("userId",lw),g("unifiedIdSystem");var uw="identityLink",pw=Yi({moduleType:vi,moduleName:uw}),hw="_lr_env",gw={name:uw,gvlid:97,decode:function(e){return{idl_env:e}},getId:function(e,t){var n=e&&e.params||{};if(n&&"string"==typeof n.pid){var i=null!=t?t:{},r=i.gdpr,o=i.gpp,s=r&&"boolean"==typeof r.gdprApplies&&r.gdprApplies?1:0,a=s?r.consentString:"";if(!s||a&&""!==a){var d=!(!o||!o.gppString)&&o.gppString,c=!!(o&&o.gppString&&o.applicableSections.length>0&&-1!==o.applicableSections[0])&&o.applicableSections[0],l=d&&c,u="https://api.rlcdn.com/api/identity/envelope?pid=".concat(n.pid).concat(s?"&ct=4&cv="+a:"").concat(l?"&gpp="+d+"&gpp_sid="+c:"");return{callback:function(e){if(window.ats&&window.ats.retrieveEnvelope)yt("identityLink: ATS exists!"),window.ats.retrieveEnvelope((function(t){t?(yt("identityLink: An envelope can be retrieved from ATS!"),mw(!0),e(JSON.parse(t).envelope)):fw(u,e,n)}));else{var t=(i=pw.getCookie(hw)||pw.getDataFromLocalStorage(hw))?window.atob(i):void 0;t?(yt("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(t).envelope)):fw(u,e,n)}var i}}}yt("identityLink: Consent string is required to call envelope API.")}else wt("identityLink: requires partner id to be defined")},eids:{idl_env:{source:"liveramp.com",atype:3}}};function fw(e,t,n){var i,r={success:function(e){var n;if(e)try{n=JSON.parse(e)}catch(e){yt(e)}t(n&&n.envelope?n.envelope:"")},error:function(e){yt("identityLink: identityLink: ID fetch encountered an error",e),t()}};n.notUse3P||pw.getCookie("_lr_retry_request")?t():((i=new Date).setTime(i.getTime()+36e5),pw.setCookie("_lr_retry_request","true",i.toUTCString()),yt("identityLink: A 3P retrieval is attempted!"),mw(!1),Fn(e,r,void 0,{method:"GET",withCredentials:!0}))}function mw(e){var t=new Date;t.setTime(t.getTime()+2592e6),pw.setCookie("_lr_env_src_ats",e,t.toUTCString())}function vw(e,t){return function(){for(var n,i,r=document.domain.split("."),o="_gd".concat(Date.now(),"_").concat(t),s=0;s<r.length;s++){var a=r.slice(s).join(".");if(e.setCookie(o,"1",void 0,void 0,a),i=e.getCookie(o),e.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a),"1"!==i)return n;n=a}}}Oi("userId",gw),g("identityLinkIdSystem");var bw=Yi({moduleType:vi,moduleName:"sharedId"}),yw="cookie",Aw="html5",ww="_pubcid_optout",Sw="PublisherCommonId";function Iw(e,t){if(t===yw)return bw.getCookie(e);if(t===Aw&&bw.hasLocalStorage()){var n=bw.getDataFromLocalStorage("".concat(e,"_exp"));if(!n)return bw.getDataFromLocalStorage(e);if(new Date(n).getTime()-Date.now()>0)return bw.getDataFromLocalStorage(e)}}function Ew(e,t){return function(n,i){t?_w(t,e,(function(){n(i()||e)}))():n(e)}}function _w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(e){var i=wn(e);i.search.id=encodeURIComponent("pubcid:"+t);var r=Sn(i);return function(){Ht(r,n)}}}function xw(){return!!(bw.cookiesAreEnabled()&&Iw(ww,yw)||bw.hasLocalStorage()&&Iw(ww,Aw))}var Pw={name:"sharedId",aliasName:"pubCommonId",gvlid:wo,decode:function(e,t){if(!xw())return yt(" Decoded value PubCommonId "+e),{pubcid:e};yt("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(xw())yt("PubCommonId: Has opted-out");else{if(null==t||!t.coppa){var i=e.params,r=void 0===i?{}:i,o=r.create,s=void 0===o||o,a=r.pixelUrl,c=n;if(!c){try{"object"===d(window[Sw])&&(c=window[Sw].getId())}catch(e){}c||(c=s&&dn()?at():void 0)}return{id:c,callback:Ew(c,a)}}yt("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(xw())return yt("PubCommonId: Has opted-out"),{id:void 0};if(null!=t&&t.coppa)yt("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var i=e.params,r=void 0===i?{}:i,o=r.extend,s=void 0!==o&&o,a=r.pixelUrl;if(s)return a?{callback:_w(a,n)}:{id:n}}},domainOverride:vw(bw,"sharedId"),eids:{pubcid:function(e,t){var n,i={source:"pubcid.org",uids:e.map((function(e){return{id:e,atype:1}}))};return null!=(null==t||null===(n=t.params)||void 0===n?void 0:n.inserter)&&(i.inserter=t.params.inserter),i}}};Oi("userId",Pw),g("sharedIdSystem");var Tw,Ow="panoramaId",Cw="".concat(Ow,"_expiry"),Rw="_cc_id",Uw="lotamePanoramaId",kw=!1,Dw=Yi({moduleType:vi,moduleName:Uw}),Bw={name:"lotamePanoramaId",storage:{type:"cookie&html5",name:"panoramaId"}};function jw(e){var t=null;return Mw(kw)&&(t=Dw.getCookie(e,void 0)),null===t&&zw(kw)&&(t=Dw.getDataFromLocalStorage(e,void 0)),t}function Nw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn()+6048e5;if(e&&t){var i=new Date(n).toUTCString();Mw()&&Dw.setCookie(e,t,i,"Lax",Tw,void 0),zw()&&Dw.setDataInLocalStorage(e,t,void 0)}}function Lw(e){if(e){if(Mw(kw)){var t=new Date(0).toUTCString();Dw.setCookie(e,"",t,"Lax",Tw,void 0)}zw(kw)&&Dw.removeDataFromLocalStorage(e,void 0)}}function Mw(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?Dw.cookiesAreEnabled()&&Bw.storage.type.includes("cookie"):Dw.cookiesAreEnabled()}function zw(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?Dw.hasLocalStorage()&&Bw.storage.type.includes("html5"):Dw.hasLocalStorage()}var Fw={name:Uw,gvlid:95,decode:function(e,t){return Rt(e)?{lotamePanoramaId:e}:void 0},getId:function(e,t,n){if(!function(e){var t=null;if(void 0!==e.storage){Object.assign(Bw.storage,Bw.storage,e.storage);var n="Lotame ID module",i=["cookie","html5","cookie&html5"];void 0!==e.storage.name&&e.storage.name!==Ow?(wt("Misconfigured ".concat(n,', "storage.name" is expected to be "').concat(Ow,'", actual is "').concat(e.storage.name,'"')),t=!0):"undefined"===e.storage.type||i.includes(e.storage.type)||wt("Misconfigured ".concat(n,', "storage.type" is expected to be one of "').concat(i.join(", "),'", actual is "').concat(e.storage.type,'"'))}return t}(e)){Tw=Fw.findRootDomain();var i=(e&&e.params||{}).clientId,r=!jt(i),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t={data:jw(Ow),expiryTimestampMs:0,clientExpiryTimestampMs:0};try{if(e){var n=jw("".concat(Cw,"_").concat(e));Rt(n)&&(t.clientExpiryTimestampMs=parseInt(n,10))}var i=jw(Cw);Rt(i)&&(t.expiryTimestampMs=parseInt(i,10))}catch(e){wt(e)}return t}(i),s=Date.now()>o.expiryTimestampMs;if(r)if(Date.now()<o.clientExpiryTimestampMs)return{id:void 0,reason:"NO_CLIENT_CONSENT"};if(!s)return{id:o.data};var a,d=(Mw(kw)&&(a=Dw.getCookie(Rw,void 0)),!a&&zw(kw)&&(a=Dw.getDataFromLocalStorage(Rw,void 0)),a);return{callback:function(e){var n,o,s,a={};(d&&(a.fp=d),t)&&(Bt(null===(o=t.gdpr)||void 0===o?void 0:o.gdprApplies)&&(a.gdpr_applies=t.gdpr.gdprApplies),n=null===(s=t.gdpr)||void 0===s?void 0:s.consentString);n&&(a.gdpr_consent=n),r&&(a.c=i);var c=Sn({protocol:"https",host:navigator.userAgent&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"c.ltmsphrcl.net":"id.crwdcntrl.net",pathname:"/id",search:jt(a)?void 0:a});Fn(c,(function(t){var n;if(t)try{var o=JSON.parse(t),s=!(Ut(o.errors)&&-1!==o.errors.indexOf(111));if(r)if(s)Lw("".concat(Cw,"_").concat(i));else if(Rt(o.no_consent)&&"CLIENT"===o.no_consent)return Nw("".concat(Cw,"_").concat(i),o.expiry_ts,o.expiry_ts),void e();Nw(Cw,o.expiry_ts,o.expiry_ts),Rt(o.profile_id)?(s&&function(e){if(Mw()){var t=new Date(sn()+23328e6).toUTCString();Dw.setCookie(Rw,e,t,"Lax",Tw,void 0)}zw()&&Dw.setDataInLocalStorage(Rw,e,void 0)}(o.profile_id),Rt(o.core_id)?(Nw(Ow,o.core_id,o.expiry_ts),n=o.core_id):Lw(Ow)):(s&&Lw(Rw),Lw(Ow))}catch(e){wt(e)}e(n)}),void 0,{method:"GET",withCredentials:!0})}}}},eids:{lotamePanoramaId:{source:"crwdcntrl.net",atype:1}}};function qw(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}Oi("userId",Fw),g("lotamePanoramaIdSystem");var Hw=["enabledStorageTypes","expires"],Vw="33acrossId",$w="33acrossIdFp",Gw="33acrossIdTp",Ww="33acrossIdHm",Kw=Yi({moduleType:vi,moduleName:Vw}),Qw={domainOverride:vw(Kw,Vw)};function Jw(e){if(Kw.cookiesAreEnabled()){var t=new Date(0).toUTCString();Kw.setCookie(e,"",t,"Lax",Qw.domainOverride())}Kw.removeDataFromLocalStorage(e)}function Yw(e,t){var n;return t.find((function(t){return t===Ki?n=Kw.getCookie(e):t===Wi&&(n=Kw.getDataFromLocalStorage(e)),!!n})),n}function Xw(e,t){var n=s(e,3),i=n[0],r=n[1];n[2]?Jw(i):r&&function(e,t,n){var i=n.enabledStorageTypes,r=n.expires;i.forEach((function(n){if(n===Ki){var i=864e5*r,o=new Date(Date.now()+i);Kw.setCookie(e,t,o.toUTCString(),"Lax",Qw.domainOverride())}else n===Wi&&Kw.setDataInLocalStorage(e,t)}))}(i,r,t)}function Zw(e,t){var n=t.enabledStorageTypes,i=t.expires;(function(e,t){var n=e.tp,i=e.fp,r=e.hem,o=t.storeFpid,s=t.storeTpid,a=t.envelopeAvailable,d=[];return o&&d.push([$w,i,!i],[Ww,r,!a]),s&&d.push([Gw,n,!n]),d})(e,qw(t,Hw)).forEach((function(e){Xw(e,{enabledStorageTypes:n,expires:i})}))}var eS={name:Vw,gvlid:58,decode:function(e){return l({},Vw,{envelope:e})},getId:function(e){var t,n=e.params,i=void 0===n?{}:n,r=e.enabledStorageTypes,o=void 0===r?[]:r,s=e.storage,a=void 0===s?{}:s,d=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).gdpr;if("string"==typeof i.pid){if(!0!==(null==d?void 0:d.gdprApplies)){var c=i.storeFpid,l=void 0===c||c,u=i.storeTpid,p=void 0===u||u,h=i.apiUrl,g=void 0===h?"https://lexicon.33across.com/v1/envelope":h,f=i.pid,m=i.hem||(null===(t=window._33across)||void 0===t||null===(t=t.hem)||void 0===t?void 0:t.sha256);return{callback:function(e){zn(1e4)(g,{success:function(t){var n={};try{n=function(e){return e.succeeded?e.data.envelope?{envelope:e.data.envelope,fp:e.data.fp,tp:e.data.tp}:(bt("".concat(Vw,": No envelope was received")),{}):("Cookied User"==e.error?bt("".concat(Vw,": Unsuccessful response").concat(" ",e.error)):wt("".concat(Vw,": Unsuccessful response").concat(" ",e.error)),{})}(JSON.parse(t))}catch(e){wt("".concat(Vw,": ID reading error:"),e)}n.envelope||["","_last","_exp","_cst"].forEach((function(e){Jw("".concat(Vw).concat(e))})),Zw({fp:n.fp,tp:n.tp,hem:m},{storeFpid:l,storeTpid:p,envelopeAvailable:!!n.envelope,enabledStorageTypes:o,expires:a.expires}),e(n.envelope)},error:function(t){wt("".concat(Vw,": ID error response"),t),e()}},function(e,t,n){var i=e.pid,r=e.pubProvidedHem,o=Lo.getConsentData(),s=zo.getCoppa(),a=Mo.getConsentData(),d={pid:i,gdpr:0,src:"pbjs",ver:"9.50.0",coppa:Number(s)};if(o&&(d.us_privacy=o),a){var c=a.gppString,l=void 0===c?"":c,u=a.applicableSections,p=void 0===u?[]:u;d.gpp=l,d.gpp_sid=encodeURIComponent(p.join(","))}null!=t&&t.consentString&&(d.gdpr_consent=t.consentString);var h=Yw($w,n);h&&(d.fp=encodeURIComponent(h));var g=Yw(Gw,n);g&&(d.tp=encodeURIComponent(g));var f=r||Yw(Ww,n);return f&&(d.sha256=encodeURIComponent(f)),d}({pid:f,pubProvidedHem:m},d,o),{method:"GET",withCredentials:!0})}}}At("".concat(Vw,": Submodule cannot be used where GDPR applies"))}else wt("".concat(Vw,": Submodule requires a partner ID to be defined"))},domainOverride:Qw.domainOverride,eids:{"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}}}};Oi("userId",eS),g("33acrossIdSystem");var tS="hadronId",nS="[".concat(tS,"System]"),iS="auHadronId",rS=Yi({moduleType:vi,moduleName:tS});var oS=Se.getConfig("debug")||!1,sS={name:tS,gvlid:561,decode:function(e){return{hadronId:Rt(e)?e:e.hasOwnProperty("id")?e.id[tS]:e[tS]}},getId:function(e){yt(nS,"getId is called",e),Dt(e.params)||(e.params={});var t="";if(Rt(t=rS.getDataFromLocalStorage(iS))&&t.length>0)return yt(nS,"".concat(iS," found in localStorage = ").concat(t)),{id:t};var n=0|e.params.partnerId;return{callback:function(i){var r,o,s,a={},d={success:function(e){if(e){try{a=JSON.parse(e)}catch(e){wt(e),i()}yt(nS,"Response from backend is ".concat(e),a),Dt(a)&&a.hasOwnProperty(tS)&&(t=a[tS]),a=t}i(a)},error:function(e){wt("".concat(tS,": ID fetch encountered an error"),e),i()}},c=function(e,t){return e+(e.indexOf("?")>-1?"&":"?")+t}((r=e.params.url,o="https://id.hadron.ad.gt/api/v1/pbhid",s=e.params.urlArg,Ct(r)?r(s):Rt(r)?r:o),"partner_id=".concat(n,"&_it=prebid&t=1&src=id&domain=").concat(document.location.hostname));oS&&(c+="&debug=1");var l=No.getConsentData();l&&(c+="".concat(l.consentString?"&gdprString="+encodeURIComponent(l.consentString):""),c+="&gdpr=".concat(!0===l.gdprApplies?1:0));var u=Lo.getConsentData();u&&(c+="&us_privacy=".concat(encodeURIComponent(u)));var p=Mo.getConsentData();p&&(c+="".concat(p.gppString?"&gpp="+encodeURIComponent(p.gppString):""),c+="".concat(p.applicableSections?"&gpp_sid="+encodeURIComponent(p.applicableSections):"")),yt(nS,"".concat(tS," not found, calling home (").concat(c,")")),Fn(c,d,void 0,{method:"GET"})}}},eids:{hadronId:{source:"audigent.com",atype:1}}};Oi("userId",sS),g("hadronIdSystem");var aS=new Map;function dS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aS,n={};function i(e){var t,i,r=JSON.stringify([null===(t=e.source)||void 0===t?void 0:t.toLowerCase()].concat(a(Object.keys(e).filter((function(e){return!["uids","source"].includes(e)})).sort().map((function(t){return e[t]})))));n.hasOwnProperty(r)?(i=n[r].uids).push.apply(i,a(e.uids)):n[r]=e}return Object.entries(e).forEach((function(e){var n=s(e,2),r=n[0],o=n[1];o=Array.isArray(o)?o:[o];var a,d=t.get(r);if("pubProvidedId"===r)a=en(o);else if("function"==typeof d)try{a=d(o),Array.isArray(a)||(a=[a]),a.forEach((function(e){return e.uids=e.uids.filter((function(e){return Rt(e.id)}))})),a=a.filter((function(e){var t=e.uids;return(null==t?void 0:t.length)>0}))}catch(e){wt('Could not generate EID for "'.concat(r,'"'),e)}else a=o.map((function(e){return function(e,t,n){if(n&&e){var i={};i.source=Ct(n.getSource)?n.getSource(e):n.source;var r=Ct(n.getValue)?n.getValue(e):e;if(Rt(r)){var o={id:r,atype:n.atype};if(Ct(n.getUidExt)){var s=n.getUidExt(e);s&&(o.ext=s)}if(i.uids=[o],n.inserter||Ct(n.getInserter)){var a=Ct(n.getInserter)?n.getInserter(e):n.inserter;null!=a&&(i.inserter=a)}if(n.matcher||Ct(n.getMatcher)){var d=Ct(n.getMatcher)?n.getMatcher(e):n.matcher;null!=d&&(i.matcher=d)}if(null!=n.mm&&(i.mm=n.mm),Ct(n.getEidExt)){var c=n.getEidExt(e);c&&(i.ext=c)}return i}}return null}(e,0,d)}));Array.isArray(a)&&a.filter((function(e){return null!=e})).forEach(i)})),Object.values(n)}function cS(e){var t=new Map,n={};return Object.entries(e).forEach((function(e){var i,r=s(e,2),o=r[0],a=(0,r[1])();if(a){var d;n[o]=a.idObj[o];var c=null===(d=a.submodule.eids)||void 0===d?void 0:d[o];"function"==typeof c&&(i=c,c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,t.concat([a.config]))}),t.set(o,c)}})),dS(n,t)}var lS=Si("sync",(function(){}));function uS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function pS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var hS,gS,fS,mS,vS,bS,yS="User ID",AS=Ki,wS=Wi,SS="_pbjs_id_optout",IS=Xi("userId"),ES={isAllowed:Vi},_S=[],xS=[],PS={},TS=[],OS=function(){return null==bS&&(bS=Fr()),bS};function CS(e){return OS().fork().renameWith((function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]}))}function RS(e,t){t=t||e.storageMgr;var n="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,i=e.config.storage.name;return function(e,r,o){t.setCookie(i+(e||""),r,o,"Lax",n)}}function US(e,t){var n=e.config.storage;try{var i=new Date(Date.now()+864e5*n.expires).toUTCString(),r=Dt(t)?JSON.stringify(t):t;e.enabledStorageTypes.forEach((function(t){switch(t){case AS:!function(e,t,n){var i=e.config.storage,r=RS(e);r(null,t,n),r("_cst",tI(),n),"number"==typeof i.refreshInSeconds&&r("_last",(new Date).toUTCString(),n)}(e,r,i);break;case wS:!function(e,t,n){var i=e.config.storage,r=e.storageMgr;r.setDataInLocalStorage("".concat(i.name,"_exp"),n),r.setDataInLocalStorage("".concat(i.name,"_cst"),tI()),r.setDataInLocalStorage(i.name,encodeURIComponent(t)),"number"==typeof i.refreshInSeconds&&r.setDataInLocalStorage("".concat(i.name,"_last"),(new Date).toUTCString())}(e,r,i)}}))}catch(e){wt(e)}}function kS(e){dI(e),e.enabledStorageTypes.forEach((function(t){switch(t){case AS:!function(e){var t=RS(e,IS),n=new Date(Date.now()-864e5).toUTCString();["","_last","_cst"].forEach((function(e){try{t(e,"",n)}catch(e){wt(e)}}))}(e);break;case wS:!function(e){["","_last","_exp","_cst"].forEach((function(t){try{IS.removeDataFromLocalStorage(e.config.storage.name+t)}catch(e){wt(e)}}))}(e)}}))}function DS(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=e.config.storage,r=n?"".concat(i.name,"_").concat(n):i.name;try{e.enabledStorageTypes.find((function(n){switch(n){case AS:t=function(e,t){return e.storageMgr.getCookie(t)}(e,r);break;case wS:t=function(e,t){var n=e.storageMgr,i=e.config.storage,r=n.getDataFromLocalStorage("".concat(i.name,"_exp"));return""===r?n.getDataFromLocalStorage(t):r&&new Date(r).getTime()-Date.now()>0?decodeURIComponent(n.getDataFromLocalStorage(t)):void 0}(e,r)}return!!t})),"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){wt(e)}return t}function BS(e,t,n){t=OS().fork().startTiming("userId.callbacks.total").stopBefore(t);var i=ln((function(){clearTimeout(undefined),t()}),e.length);e.forEach((function(e){var t=CS(e.submodule.name).startTiming("callback").stopBefore(i);try{e.callback((function(i){i?(e.config.storage&&US(e,i),e.idObj=e.submodule.decode(i,e.config),n.refresh(),iI(n)):yt("".concat(yS,": ").concat(e.submodule.name," - request id responded with an empty value")),t()}),DS.bind(null,e))}catch(n){wt("Error in userID module '".concat(e.submodule.name,"':"),n),t()}e.callback=void 0}))}function jS(e){return Object.fromEntries(Object.entries(e).map((function(e){var t,n=s(e,2),i=n[0];return[i,null===(t=(0,n[1])())||void 0===t||null===(t=t.idObj)||void 0===t?void 0:t[i]]})).filter((function(e){var t=s(e,2);t[0];return null!=t[1]})))}function NS(e,t,n){var i={};return e.forEach((function(e){var r=n(e),o=function(e){var t;if(e.primaryIds)return e.primaryIds;var n=Object.keys(null!==(t=e.eids)&&void 0!==t?t:{});if(n.length>1)throw new Error("ID submodule ".concat(e.name," can provide multiple IDs, but does not specify 'primaryIds'"));return n}(r);t(e).forEach((function(t){var n,a,d,c=i[t]=null!==(n=i[t])&&void 0!==n?n:[],l=null!==(a=null===(d=PS[t])||void 0===d?void 0:d.indexOf(r.name))&&void 0!==a?a:o.includes(t)?0:-1,u=c.findIndex((function(e){return s(e,1)[0]<l}));c.splice(-1===u?c.length:u,0,[l,e])}))})),Object.fromEntries(Object.entries(i).map((function(e){var t=s(e,2);return[t[0],t[1].map((function(e){var t=s(e,2);t[0];return t[1]}))]})))}function LS(){var e={submodules:[],global:{},bidder:{},combined:{},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=new Set(t.map((function(e){return e.submodule})));e.submodules=e.submodules.filter((function(e){return!n.has(e.submodule)})).concat(t),function(){var t=NS(e.submodules,(function(e){var t;return Object.keys(null!==(t=e.idObj)&&void 0!==t?t:{})}),(function(e){return e.submodule})),n={},i={};function r(e,t,n){return function(){var i,r=uS(n);try{for(r.s();!(i=r.n()).done;){var o,s,a=i.value,d=a.allowed,c=a.bidders,l=a.module;if(ES.isAllowed(ni,Us(vi,null==l||null===(o=l.config)||void 0===o?void 0:o.name,{init:!1})))if(null!=(null===(s=l.idObj)||void 0===s?void 0:s[e])){if(d)return l;if(t){var u=function(e){return e.map((function(e){return e.module.submodule.name})).join(", ")};return At("userID modules ".concat(u(n)," provide the same ID ('").concat(e,"'); ").concat(l.submodule.name," is the preferred source, but it's configured only for some bidders, unlike ").concat(u(n.filter((function(e){return null==e.bidders}))),'. Other bidders will not see the "').concat(e,'" ID.')),null}if(null==c)return null}}}catch(e){r.e(e)}finally{r.f()}return null}}Object.entries(t).forEach((function(e){var t=s(e,2),o=t[0],a=t[1],d=!0,c=new Set;a=a.map((function(e){var t=null;return Array.isArray(e.config.bidders)&&e.config.bidders.length>0?(t=e.config.bidders).forEach((function(e){return c.add(e)})):d=!1,{module:e,bidders:t}})),d||(n[o]=r(o,!0,a.map((function(e){var t=e.bidders;return{allowed:null==t,bidders:t,module:e.module}})))),c.forEach((function(e){var t;i[e]=null!==(t=i[e])&&void 0!==t?t:{},i[e][o]=r(o,!1,a.map((function(t){var n=t.bidders,i=t.module;return{allowed:null==n?void 0:n.includes(e),bidders:n,module:i}})))}))}));var o=Object.values(i).concat([n]).reduce((function(e,t){return Object.assign(e,t)}),{});Object.assign(e,{global:n,bidder:i,combined:o})}()}};return e}function MS(e){var t,n=e.adUnits,i=e.ortb2Fragments;if(function(e){var t,n,i=e.global,r=e.bidder,o=hS,a=o.global,d=o.bidder,c=cS(a);c.length>0&&Dn(i,"user.ext.eids",(null!==(t=null===(n=i.user)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.eids)&&void 0!==t?t:[]).concat(c)),Object.entries(d).forEach((function(e){var t,n,i=s(e,2),o=i[0],a=cS(i[1]);a.length>0&&Dn(r,"".concat(o,".user.ext.eids"),(null!==(t=null===(n=r[o])||void 0===n||null===(n=n.user)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.eids)&&void 0!==t?t:[]).concat(a))}))}(i=null!=i?i:{global:{},bidder:{}}),![n].some((function(e){return!Array.isArray(e)||!e.length}))){var r=jS(hS.global),o=(null===(t=i.global.user)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.eids)||[];n.forEach((function(e){e.bids&&Ut(e.bids)&&e.bids.forEach((function(e){var t,n,s=Object.assign({},r,jS(null!==(t=hS.bidder[e.bidder])&&void 0!==t?t:{})),a=o.concat((null===(n=i.bidder)||void 0===n||null===(n=n[e.bidder])||void 0===n||null===(n=n.user)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.eids)||[]);Object.keys(s).length>0&&(e.userId=s),a.length>0&&(e.userIdAsEids=a)}))}))}}var zS,FS={};function qS(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WS()||[],n=mS&&t.find((function(e){return e.source===mS}));if(n&&"string"==typeof(null==n||null===(e=n.uids)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.id)){var i=n.uids[0].id.replace(/[\W_]/g,"");if(i.length>=32&&i.length<=150)return i;At("User ID - Googletag Publisher Provided ID for ".concat(mS," is not between 32 and 150 characters - ").concat(i))}}var HS=Hr("userId",(function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.mkDelay,o=void 0===r?ze:r,s=i.getIds,a=void 0===s?eI:s;Me.race([a().catch((function(){return null})),o(fS)]).then((function(){MS(t),OS().join(Mr(t.metrics),{propagate:!1,includeGroups:!0}),e.call(n,t)}))})),VS=Hr("userId",(function(e,t){MS(t),e.call(this,t)}));function $S(){return!!zc.getHooks({hook:HS}).length}function GS(){return jS(hS.combined)}function WS(){return cS(hS.combined)}function KS(e){return WS().filter((function(t){return t.source===e}))[0]}function QS(e,t,n){return XS().then((function(){var i={};if(Ct(n)){yt("".concat(yS," - Getting encrypted signal from custom function : ").concat(n.name," & source : ").concat(e," "));var r=n(e);i[e]=r?JS(r):null}else{var o=KS(e);yt("".concat(yS," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),jt(o)||(i[o.source]=!0===t?JS(o):o.uids[0].id)}return yt("".concat(yS," - Fetching encrypted eids: ").concat(i[e])),i[e]}))}function JS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";if(1===t)n="object"===d(e)?window.btoa(JSON.stringify(e)):window.btoa(e);return"".concat(t,"||").concat(n)}function YS(){if(Yt()){window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];var e=Se.getConfig("userSync.encryptedSignalSources");if(e){var t=e.registerDelay||0;setTimeout((function(){e.sources&&e.sources.forEach((function(e){var t=e.source,n=e.encrypt,i=e.customFunc;t.forEach((function(e){window.googletag.secureSignalProviders.push({id:e,collectorFunction:function(){return QS(e,n,i)}})}))}))}),t)}else At("".concat(yS," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function XS(e){return zS(e).then((function(){return GS()}),(function(e){return e===FS?Promise.resolve().then(eI):(wt("Error initializing userId",e),Me.reject(e))}))}function ZS(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).submoduleNames,t=arguments.length>1?arguments[1]:void 0;return XS({refresh:!0,submoduleNames:e}).then((function(e){return t&&Ct(t)&&t(),e}))}function eI(){return XS()}function tI(){for(var e=Number(Ho.hash),t=[];e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function nI(e,t){var n=Ho.getConsentData();if(e.config.storage){var i,r=DS(e),o=!1;if("number"==typeof e.config.storage.refreshInSeconds){var s=new Date(DS(e,"last"));o=s&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds}if(!r||o||t||function(e){var t=DS(e,"cst");return!t||t!==tI()}(e)){var a=Object.assign({enabledStorageTypes:e.enabledStorageTypes},e.config);i=e.submodule.getId(a,n,r)}else"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,n,r));Dt(i)&&(i.id&&(US(e,i.id),r=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),r&&(e.idObj=e.submodule.decode(r,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var d=e.submodule.getId(e.config,n);Dt(d)&&("function"==typeof d.callback&&(e.callback=d.callback),d.id&&(e.idObj=e.submodule.decode(d.id,e.config)))}}function iI(e){var t=cS(e.combined);if(t.length&&mS){var n=qS(t);n&&(Yt()?window.googletag.pubads().setPublisherProvidedId(n):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(n)}))))}}function rI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return OS().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];if(t.forEach((function(e){return dI(e)})),t=t.filter((function(e){return(!e.config.storage||function(e){return!!e.enabledStorageTypes.length}(e))&&ES.isAllowed(ni,Us(vi,e.config.name))})),!t.length)return At("".concat(yS," - no ID module configured")),[];var i=t.reduce((function(e,t){return CS(t.submodule.name).measureTime("init",(function(){try{nI(t,n),e.push(t)}catch(e){wt("Error in userID module '".concat(t.submodule.name,"':"),e)}return e}))}),[]);return e.refresh(i),iI(e),i}))}function oI(e){var t;return(null==e||null===(t=e.storage)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.trim().split(/\s*&\s*/))||[]}function sI(e){function t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];At.apply(void 0,["Invalid userSync.userId config: ".concat(e)].concat(n))}return Array.isArray(e)?e.filter((function(e){if(null==e||!e.name)return t('must specify "name"',e);if(e.storage){if(!e.storage.name||!e.storage.type)return t('must specify "storage.name" and "storage.type"',e);if(!function(e){return oI(e).every((function(e){return aI.has(e)}))}(e))return t('invalid "storage.type"',e);["expires","refreshInSeconds"].forEach((function(n){var i=e.storage[n];null!=i&&"number"!=typeof i&&(i=Number(i),isNaN(i)?(t("storage.".concat(n," must be a number and will be ignored"),e),delete e.storage[n]):e.storage[n]=i)}))}return!0})):(null!=e&&t("must be an array",e),[])}var aI=new Set([wS,AS]);function dI(e){if(!e.enabledStorageTypes){var t=oI(e.config);e.enabledStorageTypes=t.filter((function(t){switch(t){case wS:return function(e){return!(!e.storageMgr.localStorageIsEnabled()||IS.getDataFromLocalStorage(SS)&&(yt("".concat(yS," - opt-out localStorage found, storage disabled")),1))}(e);case AS:return function(e){return!(!e.storageMgr.cookiesAreEnabled()||IS.getCookie(SS)&&(yt("".concat(yS," - opt-out cookie found, storage disabled")),1))}(e)}return!1}))}}function cI(e){aS.clear(),Object.entries(NS(e,(function(e){return Object.keys(e.eids||{})}),(function(e){return e}))).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];return aS.set(n,i[0].eids[n])}))}function lI(){cI(TS);var e=sI(xS);if(e.length){var t=TS.filter((function(e){return!(_S||[]).find((function(t){return t.name===e.name}))}));_S.splice(0,_S.length),t.map((function(t){var n=(e||[]).find((function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())}));return n&&t.name!==n.name&&(n.name=t.name),n?{submodule:t,config:n,callback:void 0,idObj:void 0,storageMgr:Yi({moduleType:vi,moduleName:n.name})}:null})).filter((function(e){return null!==e})).forEach((function(e){return _S.push(e)})),_S.length&&($S()||(zc.getHooks({hook:VS}).remove(),zc.before(HS,100),Rs.callDataDeletionRequest.before(uI),lS.after((function(e){return e(qS())}))),yt("".concat(yS," - usersync config updated for ").concat(_S.length," submodules: "),_S.map((function(e){return e.submodule.name}))))}}function uI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];yt("UserID: received data deletion request; deleting all stored IDs..."),_S.forEach((function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var t;(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(n))}catch(t){wt("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}kS(e)})),e.apply(this,n)}function pI(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function hI(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).mkDelay,n=void 0===t?ze:t;mS=void 0,_S=[],xS=[],hS=LS(),zS=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mkDelay,i=void 0===n?ze:n,r=Fe(),o=Fe(),s=!1;function a(n){return t=OS().fork(),null!=e&&e.reject(FS),e=Fe(),Me.race([n,e.promise]).finally(t.startTiming("userId.total"))}var d=hS,c=_S;function l(e){return function(){if(d===hS&&c===_S)return e.apply(void 0,arguments)}}function u(){return Ho.promise.finally(t.startTiming("userId.init.consent"))}var p=a(Me.all([Ei,r.promise]).then(u).then(l((function(){rI(d,c)}))).then((function(){return o.promise.finally(t.startTiming("userId.callbacks.pending"))})).then(l((function(){var e=d.submodules.filter((function(e){return Ct(e.callback)}));if(e.length)return new Me((function(t){return BS(e,t,d)}))}))));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,n=void 0!==t&&t,h=e.submoduleNames,g=void 0===h?null:h,f=e.ready;return void 0!==f&&f&&!s&&(s=!0,r.resolve(),fS>0?o.resolve():Er(R.AUCTION_END,(function e(){_r(R.AUCTION_END,e),i(gS).then(o.resolve)}))),n&&s&&(p=a(p.catch((function(){return null})).then(u).then(l((function(){var e=rI(d,c.filter((function(e){return null==g||g.includes(e.submodule.name)})),!0).filter((function(e){return null!=e.callback}));if(e.length)return new Me((function(t){return BS(e,t,d)}))}))))),p}}({mkDelay:n}),null!=vS&&vS(),TS=[],vS=e.getConfig("userSync",(function(e){var t=e.userSync;t&&(mS=t.ppid,t.userIds&&(xS=t.userIds,gS=kt(t.syncDelay)?t.syncDelay:Zi.syncDelay,fS=kt(t.auctionDelay)?t.auctionDelay:Zi.auctionDelay,lI(),function(e,t){if(e){var n={},i=new Map(t.map((function(e){return e.aliasName?[e.aliasName,e.name]:[]})));Object.keys(e).forEach((function(t){var r=Ut(e[t])?a(e[t]).reverse():[];n[t]=r.map((function(e){return i.has(e)?i.get(e):e}))})),PS=n}else PS={};hS.refresh(),cI(t)}(t.idPriority,TS),zS({ready:!0})))})),h().getUserIds=GS,h().getUserIdsAsEids=WS,h().getEncryptedEidsForSource=pI(QS),h().registerSignalSources=YS,h().refreshUserIds=pI(ZS),h().getUserIdsAsync=pI(eI),h().getUserIdsAsEidBySource=KS,$S()||zc.before(VS,100)}hI(Se),Ti("userId",(function(e){e.findRootDomain=ec,(TS||[]).find((function(t){return t.name===e.name}))||(TS.push(e),Fo.register(vi,e.name,e.gvlid),lI(),zS({refresh:!0,submoduleNames:[e.name]}))}),{postInstallAllowed:!0}),g("userId");var gI="pairId",fI="pairId",mI=Yi({moduleType:vi,moduleName:gI});function vI(e){return mI.localStorageIsEnabled()?mI.getDataFromLocalStorage(e):null}function bI(e){return mI.cookiesAreEnabled()?mI.getCookie(e):null}Oi("userId",{name:gI,gvlid:755,decode:function(e){return e&&Array.isArray(e)?{pairId:e}:void 0},getId:function(e){var t=vI(fI)||bI(fI),n=[];if(t&&"string"==typeof t)try{n=n.concat(JSON.parse(atob(t)))}catch(e){yt(e)}var i=e&&e.params||{};if(i&&i.liveramp){var r=i.liveramp.storageKey||"_lr_pairId",o=vI(r)||bI(r);if(o)try{var s=atob(o);if(s){var a=JSON.parse(s);a&&"object"===d(a)&&a.envelope?n=n.concat(a.envelope):yt("Pairid: Parsed object is not valid or does not contain envelope")}else yt("Pairid: Decoded value is empty")}catch(e){yt("Pairid: Error parsing JSON: ",e)}else yt("Pairid: liverampValue for pairId from storage is empty or null")}if(0!=n.length)return{id:n};yt("PairId not found.")},eids:{pairId:{source:"google.com",atype:571187}}}),g("pairIdSystem");var yI=["modelGroups"];function AI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AI(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var SI="not_found",II="random",EI="Price Floors",_I=zn(1e4),xI=Symbol(),PI=[xI,"gptSlot","adUnitCode","size","domain","mediaType"],TI=!1,OI=!1,CI={},RI=al(),UI={};var kI,DI=function(){return null==kI&&(kI=wn(go().topmostLocation,{noDecodeWholeURL:!0}).hostname),kI};function BI(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?Ia.index:n;return(null==e?void 0:e.adUnitCode)||i.getAdUnit(t).code}var jI=l(l(l(l(l(l({},xI,(function(){return"*"})),"size",(function(e,t){return function(e){if(ht(e))return ut(e)}(t.size)||"*"})),"mediaType",(function(e,t){return t.mediaType||"banner"})),"gptSlot",(function(e,t){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=(void 0===t?Ia.index:t).getAdUnit({adUnitId:e});return"gam"===x(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).adUnitId)||Ll(BI(e,t)).gptSlot})),"domain",DI),"adUnitCode",(function(e,t){return BI(e,t)}));function NI(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e,t,n){return e.length?e.reduce((function(e,i){var r=jI[i](t,n)||"*";return e.push("*"===r?["*"]:[r.toLowerCase(),"*"]),e}),[]):[]}(x(e,"schema.fields")||[],t,i);if(!r.length)return{matchingFloor:void 0};var o=r.map((function(e){return e[0]})).join("-"),s=x(e,"matchingInputs.".concat(o));if(s)return wI({},s);var a,d,c=(a=r,d=x(e,"schema.delimiter")||"|",a.reduce((function(e,t){var n=[];return e.map((function(e){t.map((function(t){n.push(e+d+t)}))})),n})).sort((function(e,t){return e.split("*").length-t.split("*").length}))),l=(c||[]).find((function(t){return e.values.hasOwnProperty(t)})),u={floorMin:e.floorMin||0,floorRuleValue:e.values[l],matchingData:c[0],matchingRule:l===(null===(n=e.meta)||void 0===n?void 0:n.defaultRule)?void 0:l},p=x(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof p&&(u.floorMin=p),u.matchingFloor=Math.max(u.floorMin,u.floorRuleValue),Dn(e,"matchingInputs.".concat(o),wI({},u)),u}function LI(e,t,n){return parseFloat(Hs(e,wI(wI({},t),{},{cpm:e}),n))}var MI={banner:function(e){return x(e,"mediaTypes.banner.sizes")||[]},video:function(e){return x(e,"mediaTypes.video.playerSize")||[]},native:function(e){return x(e,"mediaTypes.native.image.sizes")?[x(e,"mediaTypes.native.image.sizes")]:[]}};function zI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},t=this,n=UI[t.auctionId];if(!n||n.skipped)return{};e=function(e,t){var n=Object.keys(e.mediaTypes||{});return"*"===t.mediaType&&1===n.length&&(t.mediaType=n[0]),"*"===t.size&&-1!==n.indexOf(t.mediaType)&&MI[t.mediaType]&&1===MI[t.mediaType](e).length&&(t.size=MI[t.mediaType](e)[0]),t}(t,e);var i,r,o,a,d,c=NI(n.data,wI({},t),{mediaType:e.mediaType,size:e.size}),l=e.currency||n.data.currency;if(c.matchingFloor&&l!==n.data.currency)try{c.matchingFloor=h().convertCurrency(c.matchingFloor,n.data.currency,l)}catch(e){At("".concat(EI,": Unable to get currency conversion for getFloor for bidder ").concat(t.bidder,". You must have currency module enabled with defaultRates in your currency config")),l=n.data.currency}if(n.enforcement.bidAdjustment&&c.matchingFloor){var u=gi.get(t.bidder,"inverseBidAdjustment");if(u){var p=Object.fromEntries(Object.entries(e).filter((function(e){var t=s(e,2),n=t[0];return"*"!==t[1]&&["mediaType","size"].includes(n)})));c.matchingFloor=u(c.matchingFloor,t,p)}else{var g=LI(c.matchingFloor,null,t);c.matchingFloor=g?(i=c.matchingFloor,r=g,o=Math.pow(10,10),i*o/(r*o)*(i*o)/o):c.matchingFloor}}return null===c.floorRuleValue?null:c.matchingFloor?{floor:(a=c.matchingFloor,d=4,Math.ceil((parseFloat(a)*Math.pow(10,d)).toFixed(1))/Math.pow(10,d)),currency:l}:{}}function FI(e,t){var n=en(e);return n.schema.delimiter=e.schema.delimiter||"|",n.values=function(e,t){var n=e.schema.fields,i=e.schema.delimiter,r=t&&-1===n.indexOf("adUnitCode")&&n.unshift("adUnitCode");return Object.keys(e.values).reduce((function(n,o){return n[(r?"".concat(t).concat(i).concat(o):o).toLowerCase()]=e.values[o],n}),{})}(n,t),n.currency=n.currency||"USD",n}function qI(e,t){var n=en(CI);if(2===x(n,"data.floorsSchemaVersion")){var i=n.data,r=i.modelGroups,o=qw(i,yI);n.data=Object.assign(o,function(e,t){for(var n=Math.floor(Math.random()*t+1),i=0;i<e.length;i++)if((n-=e[i].modelWeight)<=0)return e[i]}(r,o.modelWeightSum))}var s=0===Object.keys(x(n,"data.values")||{}).length;if(n.data=s?function(e){var t=e.find((function(e){var t;return null!=(null===(t=e.floors)||void 0===t?void 0:t.schema)}));return e.reduce((function(e,n){var i,r;if(null!=(null===(i=n.floors)||void 0===i?void 0:i.schema)&&!In(n.floors.schema,null==t||null===(r=t.floors)||void 0===r?void 0:r.schema))return wt("".concat(EI,": adUnit '").concat(n.code,"' declares a different schema from one previously declared by adUnit '").concat(t.code,"'. Floor config for '").concat(n.code,"' will be ignored.")),e;var o=Object.assign({},null==t?void 0:t.floors,{values:void 0},n.floors);if(GI(o))if(e.values){var s=FI(o,n.code).values;Object.assign(e.values,s)}else(e=FI(o,n.code)).location="adUnit";else null!=n.floors&&At("adUnit '".concat(n.code,"' provides an invalid `floor` definition, it will be ignored for floor calculations"),n);return e}),{})}(e):FI(n.data),0===Object.keys(x(n,"data.values")||{}).length)n.skipped=!0,n.skippedReason=SI;else{var a,d=Tt("pbjs_skipRate")||(null!==(a=x(n,"data.skipRate"))&&void 0!==a?a:n.skipRate),c=100*Math.random()<parseFloat(d);n.skipped=c,c&&(n.skippedReason=II)}return n.hasOwnProperty("floorMin")&&(n.data.floorMin=n.floorMin),function(e,t,n){var i=function(e){var t,n,i=e.data,r=e.enforcement;return(null==i||null===(t=i.noFloorSignalBidders)||void 0===t?void 0:t.length)>0?i.noFloorSignalBidders:(null==r||null===(n=r.noFloorSignalBidders)||void 0===n?void 0:n.length)>0?r.noFloorSignalBidders:[]}(t);e.forEach((function(e){e.bids.forEach((function(e){var r,o=i.some((function(t){return t===e.bidder}));t.skipped||o?(o&&yt("noFloorSignal to ".concat(e.bidder)),delete e.getFloor):e.getFloor=zI,e.auctionId=n,e.floorData={noFloorSignaled:o,skipped:t.skipped,skipRate:null!==(r=x(t,"data.skipRate"))&&void 0!==r?r:t.skipRate,skippedReason:t.skippedReason,floorMin:t.floorMin,modelVersion:x(t,"data.modelVersion"),modelWeight:x(t,"data.modelWeight"),modelTimestamp:x(t,"data.modelTimestamp"),location:x(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:CI.fetchStatus}}))}))}(e,n,t),n}function HI(e){e.hasExited||(e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||at(),UI[e.reqBidsConfigObj.auctionId]=qI(e.reqBidsConfigObj.adUnits||h().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function VI(e){return e=function(e){if(kt(e.default)){var t,n,i="*",r=((null===(t=e.schema)||void 0===t?void 0:t.fields)||[]).length;r?i=Array(r).fill("*").join((null===(n=e.schema)||void 0===n?void 0:n.delimiter)||"|"):Dn(e,"schema.fields",[xI]),e.values=e.values||{},null==e.values[i]&&(e.values[i]=e.default,e.meta={defaultRule:i})}return e}(e),!!function(e){if(Array.isArray(e)&&e.length>0){if(e.every((function(e){return PI.includes(e)})))return!0;wt("".concat(EI,": Fields received do not match allowed fields"))}return!1}(x(e,"schema.fields"))&&(t=e,n=e.schema.fields.length,i=e.schema.delimiter||"|","object"===d(t.values)&&(t.values=Object.keys(t.values).reduce((function(e,r){return function(e,t,n,i){return"string"==typeof e&&e.split(i).length===n&&("number"==typeof t||null===t)}(r,t.values[r],n,i)&&(e[r]=t.values[r]),e}),{}),Object.keys(t.values).length>0));var t,n,i}var $I={1:function(e){return VI(e)},2:function(e){return!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((function(t){return!("number"!=typeof t.modelWeight||!VI(t))&&(e.modelWeightSum+=t.modelWeight,!0)})))}};function GI(e){return"object"===d(e)&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof $I[e.floorsSchemaVersion]?(wt("".concat(EI,": Unknown floorsSchemaVersion: "),e.floorsSchemaVersion),!1):$I[e.floorsSchemaVersion](e))}function WI(e,t){if(e&&"object"===d(e)&&GI(e))return yt("".concat(EI,": A ").concat(t," set the auction floor data set to "),e),wI(wI({},e),{},{location:t});wt("".concat(EI,": The floors data did not contain correct values"),e)}var KI=Hr("priceFloors",(function(e,t){var n={reqBidsConfigObj:t,context:this,nextFn:e,hasExited:!1,timer:null};CI.auctionDelay>0&&TI?RI.submit(CI.auctionDelay,(function(){return HI(n)}),(function(){At("".concat(EI,": Fetch attempt did not return in time for auction")),CI.fetchStatus="timeout",HI(n)})):HI(n)}));function QI(e){var t;TI=!1,CI.fetchStatus="success";try{t=JSON.parse(e)}catch(n){t=e}var n=WI(t,"fetch");n&&(CI.data=n,CI.skipRate=kt(n.skipRate)?n.skipRate:CI.skipRate,CI.floorProvider=n.floorProvider||CI.floorProvider),RI.resume()}function JI(e){TI=!1,CI.fetchStatus="error",wt("".concat(EI,": Fetch errored with: "),e),RI.resume()}function YI(e){var t;CI=vn(e,["floorMin","enabled",function(e){return!1!==e},"auctionDelay",function(e){return e||0},"floorProvider",function(t){return x(e,"data.floorProvider",t)},"endpoint",function(e){return e||{}},"skipRate",function(){return isNaN(x(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate},"enforcement",function(e){return vn(e||{},["enforceJS",function(e){return!1!==e},"enforcePBS",function(e){return!0===e},"floorDeals",function(e){return!0===e},"bidAdjustment",function(e){return!1!==e},"noFloorSignalBidders",function(e){return e||[]}])},"additionalSchemaFields",function(e){return"object"===d(e)&&Object.keys(e).length>0?(t=e,void Object.keys(t).forEach((function(e){-1===PI.indexOf(e)&&"function"==typeof t[e]&&(PI.push(e),jI[e]=t[e])}))):void 0;var t},"data",function(e){return e&&WI(e,"setConfig")||void 0}]),CI.enabled?((t=CI.endpoint).url&&!TI?"GET"!==(t.method||"GET")?wt("".concat(EI,": 'GET' is the only request method supported at this time!")):(_I(t.url,{success:QI,error:JI},null,{method:"GET"}),TI=!0):TI&&At("".concat(EI,": A fetch is already occurring. Skipping.")),OI||(Er(R.AUCTION_END,(function(e){setTimeout((function(){return delete UI[e.auctionId]}),3e3)})),h().requestBids.before(KI,50),_i("addBidResponse").before(XI,Et()?4:50),OI=!0)):(yt("".concat(EI,": Turning off module")),CI={},UI={},_i("addBidResponse").getHooks({hook:XI}).remove(),h().requestBids.getHooks({hook:KI}).remove(),OI=!1)}var XI=Vr("priceFloors",(function(e,t,n,i){var r=UI[n.auctionId];if(!r||!n||r.skipped)return e.call(this,t,n,i);var o,s=Ia.index.getBidRequest(n),a=NI(r.data,s,wI(wI({},n),{},{size:[n.width,n.height]}));if(!a.matchingFloor)return 0!==a.matchingFloor&&At("".concat(EI,": unable to determine a matching price floor for bidResponse"),n),e.call(this,t,n,i);var d,c=r.data.currency.toUpperCase(),l=n.currency||"USD";if(c===l.toUpperCase())o=n.cpm;else if(n.originalCurrency&&c===n.originalCurrency.toUpperCase())o=n.originalCpm;else try{o=h().convertCurrency(n.cpm,l.toUpperCase(),c)}catch(r){return wt("".concat(EI,": Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ").concat(n)),e.call(this,t,n,i)}return function(e,t,n,i){n.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:i,enforcements:wI({},e.enforcement),matchedFields:{}},e.data.schema.fields.forEach((function(i,r){var o=t.matchingData.split(e.data.schema.delimiter)[r];n.floorData.matchedFields[i]=o}))}(r,a,n,o=LI(o,n,s)),function(e,t,n){var i=!1!==x(e,"enforcement.enforceJS"),r=!0===x(e,"enforcement.floorDeals")||!n.dealId,o=n.floorData.cpmAfterAdjustments<t.matchingFloor;return i&&o&&r}(r,a,n)?(i(J),void At("".concat(EI,": ").concat(n.bidderCode,"'s Bid Response for ").concat(t," was rejected due to floor not met (adjusted cpm: ").concat(null==n||null===(d=n.floorData)||void 0===d?void 0:d.cpmAfterAdjustments,", floor: ").concat(null==a?void 0:a.matchingFloor,")"),n)):e.call(this,t,n,i)}));function ZI(e,t,n){var i=t.currency,r=void 0===i?Se.getConfig("currency.adServerCurrency")||"USD":i,o=t.mediaType,s=void 0===o?"*":o,a=t.size,d=void 0===a?"*":a;if("function"==typeof e.getFloor){var c;try{c=e.getFloor({currency:r,mediaType:s,size:d})||{}}catch(t){return void At("Cannot compute floor for bid",e)}c.floor=parseFloat(c.floor),null!=c.currency&&c.floor&&!isNaN(c.floor)&&n(c.floor,c.currency)}}Se.getConfig("floors",(function(e){return YI(e.floors)})),ol({type:Yc,name:"bidfloor",fn:function(e,t,n){ZI(t,{currency:n.currency,mediaType:n.mediaType||"*",size:"*"},(function(t,n){Object.assign(e,{bidfloor:t,bidfloorcur:n})}))}}),ol({type:Yc,name:"extBidfloor",fn:function(e,t,n){var i;function r(t,n){t===e.bidfloor&&n===e.bidfloorcur||(Dn(this,"ext.bidfloor",t),Dn(this,"ext.bidfloorcur",n))}Object.values(qs).filter((function(t){return null!=e[t]})).forEach((function(i){ZI(t,{currency:e.bidfloorcur||(null==n?void 0:n.currency),mediaType:i},r.bind(e[i]))})),((null===(i=e[zs])||void 0===i?void 0:i.format)||[]).filter((function(e){var t=e.w,n=e.h;return null!=t&&null!=n})).forEach((function(i){ZI(t,{currency:e.bidfloorcur||(null==n?void 0:n.currency),mediaType:zs,size:[i.w,i.h]},r.bind(i))}))},priority:-10}),ol({type:Yc,name:"extPrebidFloors",fn:function(e,t,n){if(null!=e.bidfloor){var i,r,o,s,a=n.reqContext.floorMin||{},d=a.floorMinCur,c=a.floorMin;null==d&&(d=e.bidfloorcur);var l=(null===(i=e.ext)||void 0===i||null===(i=i.prebid)||void 0===i||null===(i=i.floors)||void 0===i?void 0:i.floorMinCur)||(null===(r=e.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.floorMinCur)||d,u=(null===(o=e.ext)||void 0===o||null===(o=o.prebid)||void 0===o||null===(o=o.floors)||void 0===o?void 0:o.floorMin)||(null===(s=e.ext)||void 0===s||null===(s=s.prebid)||void 0===s?void 0:s.floorMin),p=Kp(e.bidfloor,e.bidfloorcur,d),h=!(!u||!l)&&Kp(u,l,d),g=h&&h<p?h:p;Dn(e,"ext.prebid.floors.floorMin",g),(null==c||c>g)&&(c=g),n.reqContext.floorMin={floorMin:c,floorMinCur:d}}},dialects:[tl],priority:-1}),ol({type:Jc,name:"extPrebidFloors",fn:function(e,t,n){var i;OI&&Dn(e,"ext.prebid.floors.enabled",(null===(i=e.ext)||void 0===i||null===(i=i.prebid)||void 0===i||null===(i=i.floors)||void 0===i?void 0:i.enabled)||!1),null!=n&&n.floorMin&&En(e,{ext:{prebid:{floors:n.floorMin}}})},dialects:[tl]}),g("priceFloors");var eE={appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},maxTimeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},maxTimeout:500},openwrap:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs",noP1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs"},maxTimeout:500}};function tE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iE(e){var t=e.global,n=e.bidder;return Object.fromEntries(Object.entries(n).map((function(e){var n=s(e,2),i=n[0],r=n[1];return[i,rE(r,En({},t,r))]})))}function rE(e,t){return Object.fromEntries(Object.entries(e).map((function(e){var n=s(e,2),i=n[0],r=n[1],o=t[i];return Array.isArray(r)?!In(r,o)&&Array.isArray(o)&&(r=o):null!=r&&"object"===d(r)&&(r=rE(r,o)),[i,r]})))}function oE(e,t){var n,i,r,o,a,d,c,l=e.global,u=e.bidder,p=(n=function(e){var t=e.global,n=e.bidder,i=[],r={},o=new Set;function a(e){var t=i.find((function(t){return In(t.eid,e)}));return null==t&&(t={eid:e,bidders:new Set},i.push(t)),null==r[e.source]?r[e.source]=t.eid:t.eid===e&&o.add(e.source),t}return Wo.forEach((function(e){(x(t,e)||[]).forEach((function(e){a(e).bidders=!1}))})),Object.entries(n).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];Wo.forEach((function(e){(x(i,e)||[]).forEach((function(e){var t=a(e);!1!==t.bidders&&t.bidders.add(n)}))}))})),{eids:i.map((function(e){var t=e.eid,n=e.bidders;return{eid:t,bidders:n&&Array.from(n)}})),conflicts:o}}({global:l,bidder:u}),i=n.eids,r=n.conflicts,o=void 0===r?new Set:r,a=[],d=[],c={},i.forEach((function(e){(!1===e.bidders?a:d).push(e)})),d.forEach((function(e){var t=e.eid,n=e.bidders;o.has(t.source)?n.forEach((function(e){(c[e]=c[e]||[]).push(t)})):a.push({eid:t,bidders:n})})),{global:a.map((function(e){return e.eid})),permissions:a.filter((function(e){return!1!==e.bidders})).map((function(e){var t=e.eid,n=e.bidders;return{source:t.source,bidders:n}})),bidder:c});function h(e){var t,n;null==e||null===(t=e.user)||void 0===t||delete t.eids,null==e||null===(n=e.user)||void 0===n||null===(n=n.ext)||void 0===n||delete n.eids}return l=en(l),u=en(u),h(l),Object.values(u).forEach(h),p.global.length&&Dn(l,"user.ext.eids",p.global),null!=t&&t.length&&p.permissions.forEach((function(e){return e.bidders=e.bidders.filter((function(e){return t.includes(e)}))})),p.permissions.length&&Dn(l,"ext.prebid.data.eidpermissions",p.permissions),Object.entries(p.bidder).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];i.length&&Dn(u[n],"user.ext.eids",i)})),{global:l,bidder:u}}function sE(e,t){return null==e||0===Object.keys(e.bidder||{}).length?e:nE(nE({},e=oE(e,t)),{},{bidder:iE(e)})}function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aE(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function lE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var uE,pE=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),hE=(uE=Ca(Qp((function(e){return[e.bidfloor,e.bidfloorcur]}))),function(e){var t,n,i=cE(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(null==(null==r?void 0:r.bidfloorcur)||null==(null==r?void 0:r.bidfloor))return null;t=null==t?r:uE(t,r)}}catch(e){i.e(e)}finally{i.f()}return t}),gE=Ip({processors:dm,context:{netRevenue:!0},imp:function(e,t,n){Object.assign(n,t.pbsData);var i,r,o=e(t,n);if((t.bids||[]).forEach((function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&Dn(o,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)})),Object.values(om).some((function(e){return o[e]})))return o.secure=null!==(i=null===(r=t.ortb2Imp)||void 0===r?void 0:r.secure)&&void 0!==i?i:1,o},request:function(e,t,n,i){if(t.length){var r,o,s=i.s2sBidRequest,a=e(t,n,i);return a.tmax=Math.floor(null!==(r=s.s2sConfig.timeout)&&void 0!==r?r:Math.min(.75*s.requestBidsTimeout,null!==(o=s.s2sConfig.maxTimeout)&&void 0!==o?o:AE.maxTimeout)),a.ext.tmaxmax=a.ext.tmaxmax||s.requestBidsTimeout,[a.app,a.dooh,a.site].forEach((function(e){var t;!e||null!==(t=e.publisher)&&void 0!==t&&t.id||Dn(e,"publisher.id",s.s2sConfig.accountId)})),i.transmitTids||Dn(a,"ext.prebid.createtids",!1),a}wt("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,n){var i,r,o=n.actualBidRequests.get(n.seatbid.seat);null==o&&(o=n.actualBidRequests.get(null)),o&&Object.assign(n,{bidRequest:o,bidderRequest:n.actualBidderRequests.find((function(e){return e.bidderCode===o.bidder}))});var s=e(t,n);return s.requestBidder=null===(i=o)||void 0===i?void 0:i.bidder,null!==(r=s.native)&&void 0!==r&&r.ortb&&(s.adm=s.native.ortb),s.requestTimestamp=n.requestTimestamp,{bid:Object.assign(li(C,{src:$,bidId:o?o.bidId||o.bid_Id:null,transactionId:n.adUnit.transactionId,adUnitId:n.adUnit.adUnitId,auctionId:n.bidderRequest.auctionId}),s,{deferRendering:!!n.adUnit.deferBilling,deferBilling:!!n.adUnit.deferBilling}),adUnit:n.adUnit.code}},overrides:l(l(l({},Yc,{id:function(e,t,n,i){t.id=i.impId},params:function(e,t,n,i){var r,o=i.s2sBidRequest.s2sConfig.adapterOptions,s=cE(i.actualBidRequests.values());try{for(s.s();!(r=s.n()).done;){var a=r.value;sm(t,a),o&&o[a.bidder]&&Object.assign(t.ext.prebid.bidder[a.bidder],o[a.bidder])}}catch(e){s.e(e)}finally{s.f()}},bidfloor:function(e,t,n,i){var r=hE(b().mark((function t(){var n,r,o,s,a;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=cE(i.actualBidRequests.values()),t.prev=1,n.s();case 2:if((r=n.n()).done){t.next=4;break}return o=r.value,e(s={},o,i),t.next=3,s;case 3:t.next=2;break;case 4:t.next=6;break;case 5:t.prev=5,a=t.catch(1),n.e(a);case 6:return t.prev=6,n.f(),t.finish(6);case 7:case"end":return t.stop()}}),t,null,[[1,5,6,7]])}))());null!=r&&Object.assign(t,r)},extBidfloor:function(e,t,n,i){var r;function o(e,t){null!=t&&(Dn(e,"ext.bidfloor",t.bidfloor),Dn(e,"ext.bidfloorcur",t.bidfloorcur))}var s=Array.from(i.actualBidRequests.values()).map((function(n){var r=en(t);return e(r,n,i),r}));Object.values(qs).forEach((function(e){o(t[e],hE(s.map((function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.ext}))))})),((null===(r=t[zs])||void 0===r?void 0:r.format)||[]).forEach((function(e,t){o(e,hE(s.map((function(e){var n;return null===(n=e[zs].format[t])||void 0===n?void 0:n.ext}))))}))}}),Jc,{fpd:function(e,t,n,i){var r,o,a;(i.transmitTids&&Dn(t,"source.tid",n.auctionId),En(t,null===(r=i.s2sBidRequest.ortb2Fragments)||void 0===r?void 0:r.global),i.s2sBidRequest.s2sConfig.extPrebid&&"object"===d(i.s2sBidRequest.s2sConfig.extPrebid))&&Dn(t,"ext.prebid",En((null===(a=t.ext)||void 0===a?void 0:a.prebid)||{},i.s2sBidRequest.s2sConfig.extPrebid));i.getRedactor().ortb2(t);var c=Object.entries((null===(o=i.s2sBidRequest.ortb2Fragments)||void 0===o?void 0:o.bidder)||{}).filter((function(e){var t=s(e,1)[0],n=i.s2sBidRequest.s2sConfig.bidders;return i.s2sBidRequest.s2sConfig.allowUnknownBidderCodes||n&&n.includes(t)})).map((function(e){var t=s(e,2),n=t[0],r=t[1];return{bidders:[n],config:{ortb2:i.getRedactor(n).ortb2(r)}}}));c.length&&Dn(t,"ext.prebid.bidderconfig",c)},extPrebidAliases:function(e,t,n,i){i.actualBidderRequests.forEach((function(n){return e(t,n,i)}))},sourceExtSchain:function(e,t,n,i){var r,o=(null==t||null===(r=t.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.schains)||[],s=new Set(o.flatMap((function(e){return e.bidders})));(o=Object.values(o.concat(i.actualBidderRequests.filter((function(e){return!s.has(e.bidderCode)})).map((function(e){var t;return{bidders:[e.bidderCode],schain:null==e||null===(t=e.bids)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.schain}}))).filter((function(e){var t=e.bidders,n=e.schain;return(null==t?void 0:t.length)>0&&n})).reduce((function(e,t){var n=t.bidders,i=t.schain,r=JSON.stringify(i);return e.hasOwnProperty(r)||(e[r]={bidders:new Set,schain:i}),n.forEach((function(t){return e[r].bidders.add(t)})),e}),{})).map((function(e){var t=e.bidders,n=e.schain;return{bidders:Array.from(t),schain:n}}))).length&&Dn(t,"ext.prebid.schains",o)}}),Zc,{serverSideStats:function(e,t,n,i){i.actualBidderRequests.forEach((function(r){return e(t,n,dE(dE({},i),{},{bidderRequest:r,bidRequests:r.bids}))}))},paapiConfigs:function(e,t,n,i){var r=Object.values(i.impContext).flatMap((function(e){return(e.paapiConfigs||[]).map((function(t){var n=e.actualBidderRequests.find((function(e){return e.bidderCode===t.bidder})),i=e.actualBidRequests.get(t.bidder);return{adUnitCode:e.adUnit.code,ortb2:null==n?void 0:n.ortb2,ortb2Imp:null==i?void 0:i.ortb2Imp,bidder:t.bidder,config:t.config}}))}));r.length>0&&(t.paapi=r)}})});function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var mE,vE=Se.getConfig,bE=$,yE=0,AE={bidders:Object.freeze([]),syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]},maxTimeout:1500};function wE(e){if(e){e=Array.isArray(e)?e:[e];var t=new Set;return e.filter((function(e){var n;if(n=e,["endpoint","syncEndpoint"].forEach((function(e){if(Rt(n[e])){var t=n[e];n[e]={p1Consent:t,noP1Consent:t}}!Dt(n[e])||n[e].p1Consent&&n[e].noP1Consent||["p1Consent","noP1Consent"].forEach((function(t){n[e][t]||At("s2sConfig.".concat(e,".").concat(t," not defined.  PBS request will be skipped in some P1 scenarios."))}))})),function(e){if(e.defaultVendor){var t=e.defaultVendor,n=Object.keys(e);if(!eE[t])return wt("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(eE[t]).forEach((function(i){AE[i]!==e[i]&&n.includes(i)||(e[i]=eE[t][i])}))}else null==e.adapter&&(e.adapter="prebidServer");return!0}(e)&&function(e){for(var t=0,n=["accountId","endpoint"];t<n.length;t++){var i=n[t];if(null==e[i])return wt(i+" missing in server to server config"),!1}return!0}(e)&&e.enabled)return Array.isArray(e.bidders)&&(e.bidders=e.bidders.filter((function(e){return!t.has(e)&&(t.add(e),!0)}))),!0;At("prebidServer: s2s config is disabled",e)}))}}function SE(e,t,n,i,r){if(mE.length!==yE){yE++;var o={},s=vE("userSync.filterSettings");if(s){var a=s.all,d=s.iframe||a,c=s.image||a;d&&(o=Object.assign({iframe:d},o)),c&&(o=Object.assign({image:c},o))}var l={uuid:at(),bidders:e,account:r.accountId,filterSettings:o},u=r.userSyncLimit;kt(u)&&u>0&&(l.limit=u),t&&(l.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(l.gdpr_consent=t.consentString)),n&&(l.us_privacy=n),i&&(l.gpp_sid=i.applicableSections.join(),l.gpp=i.gppString),"boolean"==typeof r.coopSync&&(l.coopSync=r.coopSync);var p=JSON.stringify(l);Fn(EE(r.syncEndpoint,t),(function(e){try{IE((e=JSON.parse(e)).bidder_status,r)}catch(e){wt(e)}}),p,{contentType:"text/plain",withCredentials:!0})}}function IE(e,t){if(0!==e.length){var n=e.shift();n.no_cookie?function(e,t,n,i,r){r.syncUrlModifier&&"function"==typeof r.syncUrlModifier[n]&&(t=r.syncUrlModifier[n](e,t,n));!function(e,t,n,i,r){t?"image"===e||"redirect"===e?(bt('Invoking image pixel user sync for bidder: "'.concat(n,'"')),Ht(t,i,r)):"iframe"===e?(bt('Invoking iframe user sync for bidder: "'.concat(n,'"')),Vt(t,i,r)):(wt('User sync type "'.concat(e,'" not supported for bidder: "').concat(n,'"')),i()):(wt('No sync url for bidder "'.concat(n,'": ').concat(t)),i())}(e,t,n,i,r.syncTimeout)}(n.usersync.type,n.usersync.url,n.bidder,IE.bind(null,e,t),t):IE(e,t)}}function EE(e,t){var n=Tu(t),i=n?e.p1Consent:e.noP1Consent;return i||At("Missing matching consent URL when gdpr="+n),i}function _E(e){var t,n,i;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,n=e[0].uspConsent,i=e[0].gppConsent),{gdprConsent:t,uspConsent:n,gppConsent:i}}Se.setDefaults({s2sConfig:AE}),vE("s2sConfig",(function(e){var t,n=e.s2sConfig;(t=wE(t=n)).length&&(mE=t)}));var xE=Si("async",(function(e,t,n,i){var r,o,a=i.onResponse,d=i.onError,c=i.onBid,l=i.onFledge,u=_E(t).gdprConsent,p=en(e.ad_units),h=p.map((function(e){return e.bids.map((function(e){return e.bidder})).filter(Wt)})).reduce(Kt,[]).filter(Wt),g=e.metrics.measureTime("buildRequests",(function(){return function(e,t,n,i){var r=sn(),o=new Set,a=[],d=ws(e.s2sConfig),c=function(){var e=is(d),t={};return function(n){return null==n?e:(t.hasOwnProperty(n)||(t[n]=is(Us(mi,n))),t[n])}}();(n=n.map((function(e){return c().bidRequest(e)}))).forEach((function(e){var i=new Map;n.bids=e.bids.map((function(e){return c(e.bidder).bidRequest(e)})),e.bids.forEach((function(n){null!=n.mediaTypes&&At("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(e.code,", bidder: ").concat(n.bidder)),i.set(n.bidder,Qt(n.bid_id,t))}));for(var r=e.code,s=1;o.has(r);)s++,r="".concat(e.code,"-").concat(s);o.add(r),a.push(dE(dE({},e),{},{adUnitCode:e.code,pbsData:{impId:r,actualBidRequests:i,adUnit:e}}))}));var l=dE(dE({},Object.fromEntries(Object.entries(t[0]).filter((function(e){var t=s(e,1)[0];return!pE.has(t)})))),{},{paapi:{enabled:t.some((function(e){var t;return null===(t=e.paapi)||void 0===t?void 0:t.enabled}))}});return gE.toORTB({bidderRequest:l,bidRequests:a,context:{currency:Se.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:r,s2sBidRequest:dE(dE({},e),{},{ortb2Fragments:sE(e.ortb2Fragments,i)}),requestedBidders:i,actualBidderRequests:t,nativeRequest:e.s2sConfig.ortbNative,getRedactor:c,transmitTids:Vi(ai,d)}})}(e,t,p,h)})),f={endpointUrl:EE(e.s2sConfig.endpoint,u),requestJson:g&&JSON.stringify(g),customHeaders:null!==(r=null==e||null===(o=e.s2sConfig)||void 0===o?void 0:o.customHeaders)&&void 0!==r?r:{}};if(Pr(R.BEFORE_PBS_HTTP,f),yt("BidRequest: "+f),g&&f.requestJson&&f.endpointUrl){var m=e.metrics.startTiming("net");n(f.endpointUrl,{success:function(t){var n;m();try{n=JSON.parse(t);var i=e.metrics.measureTime("interpretResponse",(function(){return function(e,t){return gE.fromORTB({response:e,request:t})}(n,g)})),r=i.bids,o=i.paapi;r.forEach(c),o&&o.forEach(l)}catch(e){wt(e)}!n||n.status&&n.status.includes("Error")?(wt("error parsing response: ",n?n.status:"not valid JSON"),a(!1,h)):a(!0,h,n)},error:function(){m(),d.apply(this,arguments)}},f.requestJson,{contentType:"text/plain",withCredentials:!0,browsingTopics:Vi(oi,ws(e.s2sConfig)),customHeaders:f.customHeaders})}else wt("PBS request not made.  Check endpoints.")}),"processPBSRequest");function PE(e,t){var n,i;return null!=e&&null!==(n=e.extPrebid)&&void 0!==n&&n.returnallbidstatus?null==t||null===(i=t.ext)||void 0===i?void 0:i.seatnonbid:void 0}function TE(e){var t;return null==e||null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.analytics)||void 0===t?void 0:t.tags}function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function CE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OE(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rs.registerBidAdapter(new function(){var e=new di("prebidServer");return e.callBids=function(e,t,n,i,r){var o,s=e.metrics=Mr(null==t||null===(o=t[0])||void 0===o?void 0:o.metrics).newMetrics().renameWith((function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]}));i=s.startTiming("total").stopBefore(i),t.forEach((function(e){return Mr(e.metrics).join(s,{continuePropagation:!1})}));var a=_E(t),d=a.gdprConsent,c=a.uspConsent,u=a.gppConsent;if(Array.isArray(mE)){if(e.s2sConfig&&e.s2sConfig.syncEndpoint&&EE(e.s2sConfig.syncEndpoint,d)){var p,h=null!==(p=e.s2sConfig.extPrebid&&e.s2sConfig.extPrebid.aliases)&&void 0!==p?p:{};SE(e.s2sConfig.bidders.map((function(e){return Rs.aliasRegistry[e]||h[e]||e})).filter((function(e,t,n){return n.indexOf(e)===t})),d,c,u,e.s2sConfig)}xE(e,t,r,{onResponse:function(n,r,o){n&&t.forEach((function(e){return Pr(R.BIDDER_DONE,e)}));var a=function(e,t){return{atagData:TE(t),seatNonBidData:PE(e,t)}}(e.s2sConfig,o),l=a.seatNonBidData,p=a.atagData;if(l&&Pr(R.SEAT_NON_BID,{seatnonbid:o.ext.seatnonbid,auctionId:t[0].auctionId,requestedBidders:r,response:o,adapterMetrics:s}),l||p){var h={seatnonbid:l,atag:p,auctionId:t[0].auctionId,requestedBidders:r,response:o,adapterMetrics:s};Pr(R.PBS_ANALYTICS,h)}i(!1),function(e,t,n,i){e.forEach((function(e){var r=Rs.getBidAdapter(e);r&&r.registerSyncs&&Se.runWithBidder(e,r.registerSyncs.bind(r,[],t,n,i))}))}(r,d,c,u)},onError:function(n,r){var o,s=(null==e||null===(o=e.s2sConfig)||void 0===o?void 0:o.endpoint)||{},a=s.p1Consent,d=void 0===a?"":a,c=s.noP1Consent,l=void 0===c?"":c;wt(d===l?"Prebid server call failed: '".concat(n,"'. Endpoint: \"").concat(d,'"}'):"Prebid server call failed: '".concat(n,"'. Endpoints: p1Consent \"").concat(d,'", noP1Consent "').concat(l,'"}'),r),t.forEach((function(e){return Pr(R.BIDDER_ERROR,{error:r,bidderRequest:e})})),i(r.timedOut)},onBid:function(t){var i=t.adUnit,r=t.bid,o=r.metrics=e.metrics.fork().renameWith();o.checkpoint("addBidResponse"),null!=r.requestId&&null!=r.requestBidder||e.s2sConfig.allowUnknownBidderCodes?o.measureTime("addBidResponse.validate",(function(){return eo(i,r)}))?n(i,r):n.reject(i,r,W):(At("PBS adapter received bid from unknown bidder (".concat(r.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),n.reject(i,r,Q))},onFledge:function(e){Se.runWithBidder(e.bidder,(function(){Zr(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fE(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({auctionId:t[0].auctionId},e),{config:e.config})}))}})}},Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:bE})},"prebidServer"),g("prebidServerBidAdapter");var RE={ajax:Fn},UE="analyticsLabels",kE={internal:{},publisher:{}},DE={};Se.getConfig(UE,(function(e){kE.publisher=e[UE],DE=BE()}));var BE=function(){return Object.values(kE).reduce((function(e,t){return CE(CE({},e),t)}),{})},jE=Object.values(R).filter((function(e){return e!==R.AUCTION_DEBUG})),NE=100;var LE,ME=Object.freeze({DESKTOP:0,MOBILE:1,TABLET:2}),zE=Object.freeze({CHROME:0,FIREFOX:1,SAFARI:2,EDGE:3,INTERNET_EXPLORER:4,OTHER:5}),FE=Object.freeze({WINDOWS:0,MAC:1,LINUX:2,UNIX:3,IOS:4,ANDROID:5,OTHER:6});function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qE(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var VE="pubxai",$E="/analytics/auction",GE="/analytics/bidwon",WE=Yi({moduleType:yi,moduleName:VE}),KE=new Proxy({},{get:function(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}}),QE=new Proxy({},{get:function(e,t){var n,i,r,o;e.hasOwnProperty(t)||(e[t]={bids:[],auctionDetail:{refreshRank:Object.keys(e).length,auctionId:t},floorDetail:{},pageDetail:{host:mt().host,path:mt().pathname,search:mt().search},deviceDetail:{platform:navigator.platform,deviceType:/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())?ME.TABLET:/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())?ME.MOBILE:ME.DESKTOP,deviceOS:-1!=navigator.userAgent.indexOf("Android")?FE.ANDROID:-1!=navigator.userAgent.indexOf("like Mac")?FE.IOS:-1!=navigator.userAgent.indexOf("Win")?FE.WINDOWS:-1!=navigator.userAgent.indexOf("Mac")?FE.MAC:-1!=navigator.userAgent.indexOf("Linux")?FE.LINUX:-1!=navigator.appVersion.indexOf("X11")?FE.UNIX:FE.OTHER,browser:/Edg/.test(navigator.userAgent)?zE.EDGE:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)||navigator.userAgent.match("CriOS")?zE.CHROME:/Firefox/.test(navigator.userAgent)?zE.FIREFOX:/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?zE.SAFARI:/Trident/.test(navigator.userAgent)||/MSIE/.test(navigator.userAgent)?zE.INTERNET_EXPLORER:zE.OTHER},userDetail:{userIdTypes:Object.keys((null===(n=(i=h()).getUserIds)||void 0===n?void 0:n.call(i))||{})},consentDetail:{consentTypes:Object.keys((null===(r=(o=h()).getConsentMetadata)||void 0===r?void 0:r.call(o))||{})},pmacDetail:JSON.parse(WE.getDataFromLocalStorage("pubx:pmac"))||{},extraData:JSON.parse(WE.getDataFromLocalStorage("pubx:extraData"))||{},initOptions:HE(HE({},LE),{},{auctionId:t}),sendAs:[]});return e[t]}}),JE=function(e){return{adUnitCode:e.adUnitCode,gptSlotCode:Ll(e.adUnitCode).gptSlot||null,auctionId:e.auctionId,bidderCode:e.bidder,cpm:e.cpm,creativeId:e.creativeId,dealId:e.dealId,currency:e.currency,floorData:e.floorData,mediaType:e.mediaType,netRevenue:e.netRevenue,requestTimestamp:e.requestTimestamp,responseTimestamp:e.responseTimestamp,status:e.status,sizes:lt(e.size).toString(),statusMessage:e.statusMessage,timeToRespond:e.timeToRespond,transactionId:e.transactionId,bidId:e.bidId||e.requestId,placementId:e.params?x(e,"params.0.placementId"):null,source:e.source||"null"}},YE=function(e){var t=Object.assign({},QE[e]);(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseInt(xn(e))%t==0})(e,LE.samplingRate)&&[{path:GE,requiredKeys:["winningBid","pageDetail","deviceDetail","floorDetail","auctionDetail","userDetail","consentDetail","pmacDetail","extraData","initOptions"],eventType:"win"},{path:$E,requiredKeys:["bids","pageDetail","deviceDetail","floorDetail","auctionDetail","userDetail","consentDetail","pmacDetail","extraData","initOptions"],eventType:"auction"}].forEach((function(n){var i=n.path,r=n.requiredKeys,o=n.eventType,s=Object.fromEntries(r.map((function(e){return[e,t[e]]})));if(!QE[e].sendAs.includes(o)&&r.every((function(e){return!!t[e]}))){var a=Sn({protocol:"https",hostname:t.initOptions&&t.initOptions.hostName||"api.pbxai.com",pathname:i,search:{auctionTimestamp:t.auctionDetail.timestamp,pubxaiAnalyticsVersion:"v2.1.0",prebidVersion:"9.50.0",pubxId:LE.pubxId}});KE[a].push(s),QE[e].sendAs.push(o)}}))},XE=function(){var e=function(e){return new Blob([JSON.stringify(e)],{type:"text/json"})};Object.entries(KE).forEach((function(t){var n=s(t,2),i=n[0],r=n[1],o=0;r.forEach((function(t,n,r){var s=r.slice(o,n+2),a=e(s).size>65536;(a||n+1===r.length)&&(!function(e,t){!(!window.navigator||!window.navigator.sendBeacon)&&window.navigator.sendBeacon(e,t)}(i,e(a?s.slice(0,-1):s)),o=n)})),r.splice(0)}))};document.visibilityState&&document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&XE()}));var ZE=Object.assign(function(e){var t,n,i,r,o,a=e.url,c=e.analyticsType,u=e.global,p=e.handler,h=[],g=!1,f=(r=!1,o=function(){if(!r){r=!0;try{for(var e=0,t=0;h.length>0;){e++;var i=h.length;if(h.shift()(),h.length>=i?t++:t=0,t>=10)return wt("Detected probable infinite loop, discarding events",h),void(h.length=0)}bt("".concat(n," analytics: processed ").concat(e," events"))}finally{r=!1}}},function(){null!=i&&(clearTimeout(i),i=null),0===NE?o():i=setTimeout(o,NE)});return Object.defineProperties({track:function(e){var t=e.eventType,n=e.args;"bundle"===this.getAdapterType()&&window[u](p,t,n);"endpoint"===this.getAdapterType()&&m.apply(void 0,arguments)},enqueue:v,enableAnalytics:b,disableAnalytics:function(){Object.entries(t||{}).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];_r(n,i)})),this.enableAnalytics=this._oldEnable?this._oldEnable:b,g=!1},getAdapterType:function(){return c},getGlobal:function(){return u},getHandler:function(){return p},getUrl:function(){return a}},{enabled:{get:function(){return g}}});function m(e){var t=e.eventType,n=e.args,i=e.callback;RE.ajax(a,i,JSON.stringify({eventType:t,args:n,labels:DE}))}function v(e){var t=this,n=e.eventType,i=e.args;h.push((function(){Object.keys(DE||[]).length>0&&(i=CE(l({},UE,DE),i)),t.track({eventType:n,labels:DE,args:i})})),f()}function b(e){var i=this;n=null==e?void 0:e.provider;var r,o,s,a,c,l=this;if("object"!==d(e)||"object"!==d(e.options)||(void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling))){var p=(o=(r=e||{}).includeEvents,s=void 0===o?jE:o,a=r.excludeEvents,c=void 0===a?[]:a,new Set(Object.values(R).filter((function(e){return s.includes(e)})).filter((function(e){return!c.includes(e)}))));xr().forEach((function(e){if(e&&p.has(e.eventType)){var t=e.eventType,n=e.args;v.call(l,{eventType:t,args:n})}})),t=Object.fromEntries(Array.from(p).map((function(e){var t=function(t){return i.enqueue({eventType:e,args:t})};return Er(e,t),[e,t]})))}else bt('Analytics adapter for "'.concat(u,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return bt('Analytics adapter for "'.concat(u,'" already enabled, unnecessary call to `enableAnalytics`.'))},g=!0}}({emptyUrl:"",analyticsType:"endpoint"}),{track:function(e){var t=e.eventType,n=e.args;switch(t){case R.BID_TIMEOUT:n.map(JE).forEach((function(e){e.bidType=3,QE[e.auctionId].bids.push(e)}));break;case R.BID_RESPONSE:var i=Object.assign(JE(n),{bidType:2});QE[i.auctionId].bids.push(i);break;case R.BID_REJECTED:var r=Object.assign(JE(n),{bidType:1});QE[r.auctionId].bids.push(r);break;case R.AUCTION_END:Object.assign(QE[n.auctionId].floorDetail,n.adUnits.map((function(e){var t;return(null==e?void 0:e.bids.length)&&(null===(t=e.bids[0])||void 0===t?void 0:t.floorData)})).find((function(e){return e}))||{}),QE[n.auctionId].deviceDetail.cdep=n.bidderRequests.map((function(e){var t;return null===(t=e.ortb2)||void 0===t||null===(t=t.device)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.cdep})).find((function(e){return e})),Object.assign(QE[n.auctionId].auctionDetail,{adUnitCodes:n.adUnits.map((function(e){return e.code})),timestamp:n.timestamp}),QE[n.auctionId].bids.every((function(e){return[1,3].includes(e.bidType)}))&&YE(n.auctionId);break;case R.BID_WON:var o=JE(n),s=QE[o.auctionId].floorDetail;Object.assign(o,{floorProvider:(null==s?void 0:s.floorProvider)||null,floorFetchStatus:(null==s?void 0:s.fetchStatus)||null,floorLocation:(null==s?void 0:s.location)||null,floorModelVersion:(null==s?void 0:s.modelVersion)||null,floorSkipRate:(null==s?void 0:s.skipRate)||0,isFloorSkipped:(null==s?void 0:s.skipped)||!1,isWinningBid:!0,renderedSize:n.size,bidType:4}),o.adServerData=function(e){var t=Nl(e);return t?Object.fromEntries(t.getTargetingKeys().filter((function(e){return e.startsWith("pubx-")||e.startsWith("hb_")&&1===(e.match(/_/g)||[]).length})).map((function(e){return[e,t.getTargeting(e)]}))):{}}(o),QE[o.auctionId].winningBid=o,YE(o.auctionId)}}});ZE.originEnableAnalytics=ZE.enableAnalytics,ZE.enableAnalytics=function(e){LE=e.options,ZE.originEnableAnalytics(e)},Rs.registerAnalyticsAdapter({adapter:ZE,code:VE});g("pubxaiAnalyticsAdapter"),$c.registerPgAliases=()=>{$c.aliasBidder("triplelift","tripleliftS2S",{gvlid:28}),$c.aliasBidder("unruly","unrulyS2S",{gvlid:36}),$c.aliasBidder("nextMillennium","nextmS2S",{gvlid:1060}),$c.aliasBidder("appnexus","appnexus_nrd",{gvlid:32}),$c.aliasBidder("pubmatic","pubmatic_nrd",{gvlid:76}),$c.aliasBidder("rubicon","rubicon_nrd",{gvlid:52}),$c.aliasBidder("improvedigital","improvedigital_nrd",{gvlid:253}),$c.aliasBidder("adf","adf_nrd",{gvlid:50}),$c.aliasBidder("rubicon","rubicon_dch",{gvlid:52}),$c.aliasBidder("improvedigital","improvedigital_dch",{gvlid:253}),$c.aliasBidder("smartadserver","smartadserver_dch",{gvlid:45}),$c.aliasBidder("seedtag","seedtag_dch",{gvlid:157}),$c.aliasBidder("smaato","smaatoS2S",{gvlid:82}),$c.aliasBidder("kueezrtb","kueezrtbS2S",{gvlid:1165}),$c.aliasBidder("adf","adfS2S",{gvlid:50}),$c.aliasBidder("sharethrough","sharethroughS2S",{gvlid:80}),$c.aliasBidder("adf","adfKey",{gvlid:50}),$c.aliasBidder("eplanning","eplanningS2S",{gvlid:90}),$c.aliasBidder("improvedigital","improvedigitalKey",{gvlid:253}),$c.aliasBidder("pubmatic","pubmaticKey",{gvlid:76}),$c.aliasBidder("rubicon","rubiconKey",{gvlid:52}),$c.aliasBidder("pubmatic","pubmaticS2S",{gvlid:76}),$c.aliasBidder("ix","ixS2S",{gvlid:10}),$c.aliasBidder("conversant","conversantS2S",{gvlid:24}),$c.aliasBidder("between","betweenS2S",{gvlid:724}),$c.aliasBidder("openx","openxS2S",{gvlid:69}),$c.aliasBidder("sonobi","sonobiS2S",{gvlid:104}),$c.aliasBidder("sovrn","sovrnS2S",{gvlid:13}),$c.aliasBidder("appnexus","appnexusS2S",{gvlid:32}),$c.aliasBidder("onetag","onetagS2S",{gvlid:241}),$c.aliasBidder("smartadserver","smartadserverS2S",{gvlid:45}),$c.aliasBidder("rubicon","rubiconS2S",{gvlid:52}),$c.aliasBidder("gumgum","gumgumS2S",{gvlid:61}),$c.aliasBidder("criteo","criteoS2S",{gvlid:91}),$c.aliasBidder("improvedigital","improvedigitS2S",{gvlid:253}),$c.aliasBidder("rise","riseS2S",{gvlid:1043}),$c.aliasBidder("medianet","medianetS2S",{gvlid:142}),$c.aliasBidder("thirtythreeacross","33acrossS2S",{gvlid:58})},$c.getHook=_i,$c.getHighestCpmBidsFromBidPool=Va,$c.processQueue(),$c.setConfig({floors:{data:{currency:"USD",skipRate:5,schema:{fields:["adUnitCode"]},values:{"*":0}}}});["https://ssc.33across.com","https://mp.4dex.io/prebid","https://ib.adnxs.com","https://bidder.criteo.com/cdb","https://ice.360yield.com","https://htlb.casalemedia.com/cygnus","https://onetag-sys.com/prebid-request","https://u.openx.net","https://hbopenbid.pubmatic.com/translator?source=prebid-client","https://fastlane.rubiconproject.com","https://btlr.sharethrough.com/WYu2BXv1/v1","https://pbs.360yield.com","https://prebid.adnxs.com","https://prebid-server.rubiconproject.com","https://prebid.openx.net"].forEach((e=>(0,i.K0)(e)));const e_=$c},8841:(e,t,n)=>{"use strict";var i=n(3821),r=n(5675),o=n(8789),s=n(6360),a=n(2101),d=n(2703),c=n(7165),l=n(6811),u=n(2541);let p=function(e){return e.Horizontal="horizontal",e.Vertical="vertical",e}({});var h,g,f=n(329);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let y=(0,i.Q)()((g=class e extends s.Q{constructor(t){super(t),this.allSmartSlotsIDs=new Set,this.onceRefreshedAdSlots=new Set,this.adUnitsToRefresh=new Set,this.adUnitsToDestroy=new Set,this.refreshBlockingAdSlots=new Set,this.smartSlotsLoaded=new Map,this.smartSlotsEventsReceived=new Map,this.smartSlotsHeightsReceived=new Map,this.smartSlotsWidthsReceived=new Map,this.smartSlotChildrenParentMap=new Map,this.smartSlotParentChildrenCount=new Map,this.blockedUnits=new Map,this.refreshCountKeyValueKey="pgr",this.allSmartSlotElementIds=[],this.displayedParentSlotIds=new Set,this.pendingSlots=new Map,this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,verboseLevel:3,payload:t}),this.handleAdUnitLoadedMediator=this.handleAdUnitLoadedMediator.bind(this),this.handleAuctionRequestedFilteredMediator=this.handleAuctionRequestedFilteredMediator.bind(this),this.handleAdUnitDestroyedMediator=this.handleAdUnitDestroyedMediator.bind(this),this.handleAuctionSyncFinished=this.handleAuctionSyncFinished.bind(this),this.calculateSmartSlotCPMs=this.calculateSmartSlotCPMs.bind(this),this.updateOnceRefreshedAdSlots=this.updateOnceRefreshedAdSlots.bind(this),this.recreateAdUnits=this.recreateAdUnits.bind(this),this.initializeSmartSlots=this.initializeSmartSlots.bind(this),this.initializeChildAdSlotsInDOM=this.initializeChildAdSlotsInDOM.bind(this),this.requestDisplayAdSlot=this.requestDisplayAdSlot.bind(this),this.handleAdUnitRenderedBidderMediator=this.handleAdUnitRenderedBidderMediator.bind(this),this.removeAdUnits=this.removeAdUnits.bind(this),this.applyParentSlotContainerSizes=this.applyParentSlotContainerSizes.bind(this),this.readdAdUnits=this.readdAdUnits.bind(this),this.handleAttachKeyValueRequested=this.handleAttachKeyValueRequested.bind(this),this.handleClearOldKeyValuesAndAttachNewPairsRequested=this.handleClearOldKeyValuesAndAttachNewPairsRequested.bind(this),this.emitAttachKeyValueRequested=this.emitAttachKeyValueRequested.bind(this),this.initializeAutoSlots=this.initializeAutoSlots.bind(this),this.initializeAutoSlot=this.initializeAutoSlot.bind(this),this.emitAdUnitDefineSlotRequested=this.emitAdUnitDefineSlotRequested.bind(this),this.emitAddSmartSlotChildren=this.emitAddSmartSlotChildren.bind(this),this.emitInitialHeaderBiddingAuctionRequested=this.emitInitialHeaderBiddingAuctionRequested.bind(this),this.handleCloneAdUnitsRequested=this.handleCloneAdUnitsRequested.bind(this),this.handleAdUnitAdditionalSlotCreated=this.handleAdUnitAdditionalSlotCreated.bind(this),this.emitCloneAdUnitsRequested=this.emitCloneAdUnitsRequested.bind(this),this.handleAdUnitDisplayed=this.handleAdUnitDisplayed.bind(this)}registerMiddlewaresHook(){this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotAdUnitLoadedMiddleware,r.w.adUnitLoaded,this.handleAdUnitLoadedMediator),this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotAuctionRequestedMiddleware,r.w.auctionRequested,this.handleAuctionRequestedFilteredMediator),this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotAdUnitDestroyedMiddleware,r.w.adUnitDestroyed,this.handleAdUnitDestroyedMediator),this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotAdUnitRenderedBidderMiddleware,r.w.adUnitRenderedBidder,this.handleAdUnitRenderedBidderMediator),this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotAuctionSyncFinishedMiddleware,r.w.auctionSyncFinished,this.handleAuctionSyncFinished),this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotAttachKeyValueRequestedMiddleware,r.w.attachKeyValueRequested,this.handleAttachKeyValueRequested),this.eventBus.addMiddleware(e.PluginName,a.h.SmartSlotClearOldKeyValuesAndAttachNewPairsRequestedMiddleware,r.w.clearOldKeyValuesAndAttachNewPairsRequested,this.handleClearOldKeyValuesAndAttachNewPairsRequested)}registerEventListenersHook(){this.eventBus.on(r.w.adUnitsBlockedFromUsage,this.removeAdUnits,!1,e.PluginName),this.eventBus.on(r.w.adUnitsUnblockedFromUsage,this.readdAdUnits,!1,e.PluginName),this.eventBus.on(r.w.cloneAdUnitsRequested,this.handleCloneAdUnitsRequested,!1,e.PluginName),this.eventBus.on(r.w.adUnitAdditionalSlotCreated,this.handleAdUnitAdditionalSlotCreated,!1,e.PluginName),this.eventBus.on(r.w.adUnitDisplayed,this.handleAdUnitDisplayed,!0,e.PluginName)}beforeActivate(){return this.logger.log({message:"Before activate plugin.",namespace:e.PluginName,verboseLevel:3}),super.beforeActivate()}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.registerAllSmartSlotElementIds(),"complete"===document.readyState||"interactive"===document.readyState?this.initializeSmartSlots():document.addEventListener("DOMContentLoaded",(e=>this.initializeSmartSlots())),await super.activate()}async deactivate(){return this.logger.log({message:"Deactivate plugin.",namespace:e.PluginName,verboseLevel:3}),this.eventBus.removeAllMiddlewareForPlugin(e.PluginName),this.eventBus.detachAllForNamespace(e.PluginName),this.config.smartSlots.map((e=>e.adUnitElementId)).forEach((e=>{const t=document.getElementById(e);t&&(t.innerHTML="")})),await super.deactivate()}initializeSmartSlots(){this.setProductInfo(this.config.smartSlots),this.initializeAutoSlots(),this.emitInitialHeaderBiddingAuctionRequested(),this.config.smartSlots.forEach((e=>{this.initializeChildAdSlotsInDOM(e),this.applyParentSlotContainerSizes(e)}))}initializeChildAdSlotsInDOM(t){const n=t.adUnitElementId;this.allSmartSlotsIDs.add(n);const i=document.getElementById(n);if(i){this.smartSlotParentChildrenCount.set(n,t.childAdUnits.length),this.smartSlotsEventsReceived.set(n,[]),this.smartSlotsHeightsReceived.set(n,[]),this.smartSlotsWidthsReceived.set(n,[]),i.style.display="flex",i.style.justifyContent="space-evenly",i.style.alignContent="space-evenly",t.orientation!==p.Horizontal&&(i.style.flexDirection="column");for(const e of t.childAdUnits)this.injectChildSlotDiv(t,e)&&(this.requestDisplayAdSlot(e.adUnitElementId),this.eventBus.emit(r.w.cloneProductDataRequested,{from:t.adUnitElementId,to:e.adUnitElementId}))}else this.logger.warn({namespace:e.PluginName,message:"Couldn't find container: ".concat(n,"."),type:o.f.SmartSlotCantFindContainerError,verboseLevel:1})}injectChildSlotDiv(t,n){const i=n.adUnitElementId,r=t.adUnitElementId;if(this.smartSlotChildrenParentMap.set(i,r),this.allSmartSlotsIDs.add(i),document.getElementById(i))return!0;const s=document.getElementById(r);if(!s)return this.logger.error({namespace:e.PluginName,message:"Couldn't find container: ".concat(r,"."),type:o.f.SmartSlotCantFindContainerError,verboseLevel:1}),!1;const a=document.createElement("div");return a.id=i,s.appendChild(a),!0}applyParentSlotContainerSizes(e){const t=document.getElementById(e.adUnitElementId);if(!t||"true"===t.getAttribute("data-scaled"))return;const n=Math.max((0,f.gP)(e.sizes,"width"),...e.childAdUnits.map((e=>(0,f.gP)(e.sizes,"width")))),i=Math.max((0,f.gP)(e.sizes,"height"),...e.childAdUnits.map((e=>(0,f.gP)(e.sizes,"height"))));t.style.width="".concat(n,"px"),e.preventHeightModification||(t.style.height="".concat(i,"px"))}initializeAutoSlots(){this.config.smartSlots.forEach(this.initializeAutoSlot)}initializeAutoSlot(e){e.isAutoSlot&&this.emitAddSmartSlotChildren(e)}emitAddSmartSlotChildren(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i={cloneFromAdUnitElementId:e.adUnitElementId,newAdUnitsElementIds:e.childAdUnits.map((e=>e.adUnitElementId)),overrides:{sizes:e.childAdUnits[0].sizes,isChild:!!this.config.autoSlots.find((t=>t.adUnitElementId===e.adUnitElementId))||n},ext:{includeInInitialAuction:t,handleAdSlotsExternally:!0,isSmartSlotChild:!0}};this.emitCloneAdUnitsRequested(i)}emitCloneAdUnitsRequested(t){this.logger.log({payload:t,namespace:e.PluginName,message:"Event: ".concat(r.w.cloneAdUnitsRequested,"."),verboseLevel:1}),this.eventBus.emit(r.w.cloneAdUnitsRequested,t)}emitInitialHeaderBiddingAuctionRequested(){this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.initialHeaderBiddingAuctionRequested,"."),verboseLevel:1}),this.eventBus.emit(r.w.initialHeaderBiddingAuctionRequested)}handleAdUnitLoadedMediator(t){let n="";for(const[e,i]of this.smartSlotsLoaded.entries()){if(t===e){n=e;break}i.hasOwnProperty(t)&&(i[t]=!0);const r=Object.values(i);r.filter((e=>e)).length===r.length&&(n=e)}if(n.length){if(n!==t){const t=JSON.stringify(this.smartSlotsLoaded.get(n));return this.logger.log({namespace:e.PluginName,message:"Ad Unit Load Mediator: added parent ID:".concat(n," to load for children IDs:").concat(t,".")}),n}this.smartSlotsLoaded.delete(n)}return t}handleAdUnitRenderedBidderMediator(t){if(!this.allSmartSlotsIDs.has(t.slotID))return this.logger.log({namespace:e.PluginName,message:"Smart slot intercepted a non smart slot render event. Forwarding.",payload:{data:t}}),t;if(this.smartSlotParentChildrenCount.get(t.slotID))return this.smartSlotsEventsReceived.set(t.slotID,[]),this.smartSlotsHeightsReceived.set(t.slotID,[]),this.smartSlotsWidthsReceived.set(t.slotID,[]),this.logger.log({namespace:e.PluginName,message:"Smart slot intercepted a parent render event. Forwarding.",payload:{data:t}}),t;const n=this.smartSlotChildrenParentMap.get(t.slotID),i=this.config.smartSlots.find((e=>e.adUnitElementId===t.slotID||e.childAdUnits.find((e=>e.adUnitElementId===t.slotID))));if(!n)return this.logger.error({namespace:e.PluginName,message:"Couldn't find child parent map for child: ".concat(t.slotID,"."),type:o.f.SmartSlotParentNotFoundError,verboseLevel:1}),{bidders:[],slotID:"",creativeWidth:0,creativeHeight:0};const r=this.smartSlotsEventsReceived.get(n)||[],s=this.smartSlotsHeightsReceived.get(n)||[],a=this.smartSlotsWidthsReceived.get(n)||[];r.push(t.bidders[0]||"google"),s.push(t.creativeHeight),a.push(t.creativeWidth);const d=this.smartSlotParentChildrenCount.get(n)||0;if(this.logger.log({namespace:e.PluginName,message:"Smart slot intercepted a child render event.",payload:{data:t}}),r.length>=d){let t=0,o=0;s.length&&(t=(null==i?void 0:i.orientation)===p.Horizontal?Math.max(...s):s.reduce(((e,t)=>e+t),0)),a.length&&(o=(null==i?void 0:i.orientation)===p.Horizontal?a.reduce(((e,t)=>e+t),0):Math.max(...a));const d={bidders:r,slotID:n,creativeWidth:o,creativeHeight:t};return this.smartSlotsEventsReceived.set(n,[]),this.smartSlotsHeightsReceived.set(n,[]),this.logger.log({namespace:e.PluginName,message:"All children fired their render events. Forwarding modified render event.",payload:{modifiedData:d}}),d}return this.logger.log({namespace:e.PluginName,message:"Not all children fired their render events, adding to que.",payload:{data:t}}),this.smartSlotsEventsReceived.set(n,r),this.smartSlotsHeightsReceived.set(n,s),this.smartSlotsWidthsReceived.set(n,a),{bidders:[],slotID:"",creativeWidth:0,creativeHeight:0}}handleAuctionRequestedFilteredMediator(e){const t=(0,c.A4)(e),n=this.config.smartSlots.filter((e=>t.adUnitsElementIDs.includes(e.adUnitElementId)));if(n.length){const e=n.map((e=>e.childAdUnits)).reduce(((e,t)=>[...e,...t]),[]).map((e=>e.adUnitElementId)).filter((e=>!t.adUnitsElementIDs.includes(e)&&!this.onceRefreshedAdSlots.has(e)));t.adUnitsElementIDs.push(...e);for(const e of n)e.childAdUnits.some((e=>!this.allSmartSlotsIDs.has(e.adUnitElementId)))&&this.initializeChildAdSlotsInDOM(e)}return t.adUnitsElementIDs=t.adUnitsElementIDs.filter((e=>!(this.isChildAdUnit(e)&&this.smartSlotChildrenParentMap.has(e)&&!t.adUnitsElementIDs.includes(this.smartSlotChildrenParentMap.get(e))))),t.adUnitsElementIDs.length?t:null}handleAdUnitDestroyedMediator(t){const n=(0,c.A4)(t),i=this.config.smartSlots.find((e=>n.elementsIDs.includes(e.adUnitElementId)));if(i){const t=n.elementsIDs.findIndex((e=>e===i.adUnitElementId));n.elementsIDs.splice(t),this.logger.log({namespace:e.PluginName,message:"Destroy Mediator: Removed Ad Unit from destroying.",payload:{adUnitID:i.adUnitElementId}})}return this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.adUnitDestroyed,"."),payload:n}),n}handleAuctionSyncFinished(t){this.logger.log({namespace:e.PluginName,message:"Apply slot comparison for event.",payload:t});let n=!1;const i=[];this.config.smartSlots.forEach((e=>{t.elementsIDs.includes(e.adUnitElementId)&&(this.calculateSmartSlotCPMs(e,t),this.updateLoadedSmartSlots(e),n=!0,i.push(e.adUnitElementId))})),n||t.elementsIDs.forEach((n=>{this.onceRefreshedAdSlots.has(n)?this.logger.log({namespace:e.PluginName,message:"SmartSlot - child ID:".concat(n," can be refreshed only once."),payload:t}):this.adUnitsToRefresh.add(n)}));const o={refreshBlockingAdSlots:Array.from(this.refreshBlockingAdSlots),auctionID:t.auctionID,elementsIDs:[...new Set([...Array.from(this.adUnitsToRefresh).filter((e=>!this.adUnitsToDestroy.has(e))),...t.elementsIDs.filter((e=>!this.allSmartSlotElementIds.includes(e)))])],callback:t.callback,winningBids:t.winningBids,isTimeout:!1,finishedHeaderBidders:[]},s=Array.from(this.adUnitsToDestroy);return s.length&&(this.recreateAdUnits(s),i.forEach((e=>{this.eventBus.emit(r.w.cloneProductDataRequested,{from:e,to:e})}))),this.updateOnceRefreshedAdSlots(),this.resetState(),this.logger.log({namespace:e.PluginName,message:"Event ".concat(r.w.auctionSyncFinished," forwarded."),verboseLevel:1,payload:o}),o}calculateSmartSlotCPMs(t,n){var i,r;const o=this.config.smartSlots.find((e=>e.adUnitElementId===t.adUnitElementId)),s=null!==(i=null==o?void 0:o.parentCpmMultiplier)&&void 0!==i?i:1,a=n.winningBids.get(t.adUnitElementId)||0,d=a*(null!==(r=null==o?void 0:o.parentCpmMultiplier)&&void 0!==r?r:1),c=t.childAdUnits.map((e=>this.getChildSlotCPM(e,n.winningBids))).reduce(((e,t)=>e+t));this.logger.log({namespace:e.PluginName,message:"CPM for container, children, container multiplier used and container resultant CPM.",payload:{containerBid:a,childrenCPM:c,smartSlotMultiplier:s,containerCPM:d}}),c>d?this.handleChildrenWin(t):this.handleParentWin(t)}handleChildrenWin(t){this.adUnitsToDestroy.add(t.adUnitElementId),t.childAdUnits.forEach((t=>{const n=t.adUnitElementId;this.onceRefreshedAdSlots.has(n)?this.logger.log({namespace:e.PluginName,message:"Child ID:".concat(n," can be refreshed only once.")}):(this.adUnitsToRefresh.add(n),this.refreshBlockingAdSlots.add(n))})),this.displayedParentSlotIds.has(t.adUnitElementId)?(this.initializeChildAdSlotsInDOM(t),this.applyParentSlotContainerSizes(t)):this.pendingSlots.set(t.adUnitElementId,v({parentWon:!1},t))}handleParentWin(e){if(this.adUnitsToRefresh.add(e.adUnitElementId),e.childAdUnits.forEach((e=>{const t=e.adUnitElementId;this.adUnitsToDestroy.add(t),this.onceRefreshedAdSlots.has(t)&&this.onceRefreshedAdSlots.delete(t)})),!this.displayedParentSlotIds.has(e.adUnitElementId))return void this.pendingSlots.set(e.adUnitElementId,v({parentWon:!0},e));this.requestDisplayAdSlot(e.adUnitElementId);const t=document.getElementById(e.adUnitElementId);t&&(t.style.width="",t.style.height="")}updateLoadedSmartSlots(e){const t=e.childAdUnits.reduce(((e,t)=>(e[t.adUnitElementId]=this.onceRefreshedAdSlots.has(t.adUnitElementId),e)),{});this.smartSlotsLoaded.set(e.adUnitElementId,t)}updateOnceRefreshedAdSlots(){this.config.smartSlots.forEach((e=>{e.childAdUnits.forEach((e=>{this.adUnitsToRefresh.has(e.adUnitElementId)&&e.refreshOnceAfterDefine&&this.onceRefreshedAdSlots.add(e.adUnitElementId)}))}))}resetState(){this.adUnitsToRefresh=new Set,this.adUnitsToDestroy=new Set,this.refreshBlockingAdSlots=new Set}getChildSlotCPM(e,t){return 0<e.staticCpm?e.staticCpm:t.get(e.adUnitElementId)||0}recreateAdUnits(t){const n={elementsIDs:t};this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.adUnitDestroyRequested,"."),payload:n}),this.eventBus.emit(r.w.adUnitDestroyRequested,n);for(const e of t){const t=this.smartSlotChildrenParentMap.get(e);if(!t)continue;const n=this.config.smartSlots.find((e=>e.adUnitElementId===t)),i=null==n?void 0:n.childAdUnits.find((t=>t.adUnitElementId===e));n&&i&&this.injectChildSlotDiv(n,i)&&this.requestDisplayAdSlot(e)}}requestDisplayAdSlot(e){this.emitAdUnitDefineSlotRequested(e),this.setReportingKeyValues(e),this.emitAdUnitDisplayRequested(e)}setReportingKeyValues(e){const t=this.isChildAdUnit(e);this.emitLogAnalyticsDataRequested(e,t?"c":"p")}emitAdUnitDefineSlotRequested(t){this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.adUnitDefineSlotRequested,"."),payload:t}),this.eventBus.emit(r.w.adUnitDefineSlotRequested,t)}emitAdUnitDisplayRequested(t){const n={elementID:t,forceDisplay:!0};this.logger.log({namespace:e.PluginName,message:"Event: ".concat(r.w.adUnitDisplayRequested,"."),payload:n}),this.eventBus.emit(r.w.adUnitDisplayRequested,n)}removeAdUnits(t){const n={elementsIDs:[]};for(const i of t.elementsIDs){if(!this.smartSlotParentChildrenCount.has(i))continue;const o=this.config.smartSlots.find((e=>e.adUnitElementId===i));o&&this.blockedUnits.set(o.adUnitElementId,o),this.config.smartSlots=this.config.smartSlots.filter((e=>e.adUnitElementId!==i)),this.logger.log({namespace:e.PluginName,message:"Filtered smart slot parent from config triggered by ".concat(r.w.adUnitsBlockedFromUsage," event."),verboseLevel:1,payload:t});for(const e of(null==o?void 0:o.childAdUnits)||[])n.elementsIDs.push(e.adUnitElementId)}n.elementsIDs.length>0&&(this.eventBus.emit(r.w.adUnitsBlockedFromUsage,n),this.logger.log({namespace:e.PluginName,message:"Dispatched ".concat(r.w.adUnitsBlockedFromUsage," for children."),verboseLevel:1,payload:n}))}readdAdUnits(e){const t=[];for(const n of e.elementsIDs){if(!this.blockedUnits.has(n))continue;const e=this.blockedUnits.get(n);this.config.smartSlots.push(e),this.blockedUnits.delete(n);for(const n of e.childAdUnits||[])t.push(n.adUnitElementId)}t.length>0&&this.eventBus.emit(r.w.nonHptoAdUnitsUnblockedFromUsage,{elementsIDs:t})}handleAttachKeyValueRequested(e){if(e.key!==this.refreshCountKeyValueKey)return e;const t=this.config.smartSlots.find((t=>t.adUnitElementId===e.adUnitElementId));return t?(t.childAdUnits.forEach((t=>{this.emitAttachKeyValueRequested(t.adUnitElementId,this.refreshCountKeyValueKey,e.value)})),e):e}handleClearOldKeyValuesAndAttachNewPairsRequested(e){const t=e.keyValues.find((e=>e.key===this.refreshCountKeyValueKey));if(!t)return e;const n=this.config.smartSlots.find((t=>t.adUnitElementId===e.adUnitElementId));return n?(n.childAdUnits.forEach((e=>{this.emitAttachKeyValueRequested(e.adUnitElementId,this.refreshCountKeyValueKey,t.value)})),e):e}emitLogAnalyticsDataRequested(t,n){const i={value:n,key:l.p.SmartSlotParentOrChild,isPageLevel:!1,adUnitElementIds:[t]};this.logger.log({payload:i,message:"Event: ".concat(r.w.logAnalyticsDataRequested,"."),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(r.w.logAnalyticsDataRequested,i)}emitAttachKeyValueRequested(t,n,i){const o={adUnitElementId:t,key:n,value:i};this.logger.log({payload:o,message:"Event: ".concat(r.w.attachKeyValueRequested,"."),namespace:e.PluginName,verboseLevel:1}),this.eventBus.emit(r.w.attachKeyValueRequested,o)}cloneSmartSlot(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.config.smartSlots.find((t=>t.adUnitElementId===e));if(!i)return;const r=t.filter((e=>!this.config.smartSlots.find((t=>t.adUnitElementId===e))));if(0===r.length)return;const o=r.map((e=>v(v({},i),{},{adUnitElementId:e,childAdUnits:i.childAdUnits.map(((t,n)=>v(v({},t),{},{adUnitElementId:"".concat(e,"-aschild-").concat(n+1)})))})));this.config.smartSlots=[...this.config.smartSlots,...o],this.setProductInfo(o),this.registerAllSmartSlotElementIds(),o.forEach((e=>{e.isAutoSlot?window.setTimeout((()=>{this.emitAddSmartSlotChildren(e,n,!0)}),0):e.childAdUnits.forEach(((e,t)=>{this.emitCloneAdUnitsRequested({cloneFromAdUnitElementId:i.childAdUnits[t].adUnitElementId,newAdUnitsElementIds:[e.adUnitElementId],ext:{isSmartSlotChild:!0}})})),this.initializeChildAdSlotsInDOM(e),this.applyParentSlotContainerSizes(e)}))}handleCloneAdUnitsRequested(e){var t;e.ext&&!0===e.ext.isSmartSlotChild||this.cloneSmartSlot(e.cloneFromAdUnitElementId,e.newAdUnitsElementIds,null==e||null===(t=e.ext)||void 0===t?void 0:t.includeInInitialAuction)}handleAdUnitAdditionalSlotCreated(e){if(e.adUnitElementId===e.newAdunitElementId&&this.allSmartSlotsIDs.has(e.adUnitElementId)&&!this.smartSlotChildrenParentMap.has(e.adUnitElementId)){const t=this.config.smartSlots.find((t=>t.adUnitElementId===e.adUnitElementId));t&&(this.initializeChildAdSlotsInDOM(t),this.applyParentSlotContainerSizes(t))}this.cloneSmartSlot(e.adUnitElementId,[e.newAdunitElementId])}registerAllSmartSlotElementIds(){this.allSmartSlotElementIds=this.config.smartSlots.map((e=>[e.adUnitElementId,...e.childAdUnits.map((e=>e.adUnitElementId))])).reduce(((e,t)=>[...e,...t]),[])}isChildAdUnit(e){for(const t of this.config.smartSlots)for(const n of t.childAdUnits)if(n.adUnitElementId===e)return!0;return!1}setProductInfo(e){for(const t of e)this.eventBus.emit(r.w.logProductDataRequested,{key:l.p.ProductFeature,value:t.isAutoSlot?u.x.AutoSlot:u.x.SmartSlot,adUnitElementId:t.adUnitElementId})}handleAdUnitDisplayed(e){if(!this.displayedParentSlotIds.has(e)&&(this.displayedParentSlotIds.add(e),this.pendingSlots.has(e))){const t=this.pendingSlots.get(e);t.parentWon?this.handleParentWin(t):this.handleChildrenWin(t),this.pendingSlots.delete(e),this.resetState()}}},g.PluginName=d.f.SmartSlotPlugin,h=g))||h;var A=n(9754),w=n(8314),S=n(3081);class I{execute(e,t){return t.applyTargeting(e).reduce(((e,t)=>(e.find((e=>e.adUnitElementId===t.adUnitElementId))||e.push(t),e)),[])}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P{execute(e,t){return e.map((e=>_(_({},e),{},{specifications:this.selectSpecification(e.sizeMapping&&e.sizeMapping.length?(0,f.hQ)(t.getSizesForCurrentViewport(e.sizeMapping)):e.sizes,e.specifications,!0)}))).filter((e=>e.specifications.length))}selectSpecification(e,t,n){const i=t.filter((t=>e.some((e=>e[0]===t.parentSize[0]&&e[1]===t.parentSize[1]))));return i.length?n?[i.reduce(((e,t)=>{const n=e=>e[0]*e[1];return n(t.parentSize)>n(e.parentSize)?t:e}))]:[i.reduce(((e,t)=>t.childrenCount>e.childrenCount?t:e))]:[]}}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C{constructor(){this.mapToChildAdUnits=this.mapToChildAdUnits.bind(this)}execute(e){return e.filter((e=>e.specifications.length)).map((e=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isAutoSlot:!0,adUnitElementId:e.adUnitElementId,orientation:e.specifications[0].orientation,parentCpmMultiplier:e.parentCpmMultiplier,preventHeightModification:e.preventHeightModification,sizes:e.sizes,childAdUnits:this.mapToChildAdUnits(e)},e.targeting?{targeting:e.targeting}:null)))}mapToChildAdUnits(e){const t=[];for(let n=0;n<e.specifications[0].childrenCount;n++)t.push({adUnitElementId:"".concat(e.adUnitElementId,"-aschild-").concat(n+1),refreshOnceAfterDefine:!1,sizes:e.specifications[0].childrenSizes,staticCpm:-1});return t}}class R{constructor(e,t){this.settingsTargetingServiceOnAdUnit=e,this.sizeMappingService=t}executeBusinessLogicForAdUnitsFiltered(e){const t=new w.I(new I),n={smartSlots:e.smartSlots,autoSlots:e.autoSlots};e.smartSlots=t.executeTaskStrategy(e.smartSlots,this.settingsTargetingServiceOnAdUnit),e.autoSlots=t.executeTaskStrategy(e.autoSlots,this.settingsTargetingServiceOnAdUnit),e.logger.log({namespace:y.PluginName,message:"Before activate task: ".concat(S.w.AD_UNITS_FILTERED_BASED_ON_TARGETING,"."),verboseLevel:3,payload:{adUnitsBefore:n,adUnitsAfter:{smartSlots:e.smartSlots,autoSlots:e.autoSlots}}})}executeBusinessLogicForSelectingAutoSlotSpecification(e){const t=new w.I(new P),n={autoSlots:e.autoSlots};e.autoSlots=t.executeTaskStrategy(e.autoSlots,this.sizeMappingService),e.logger.log({namespace:y.PluginName,message:"Before activate task: ".concat(S.w.AUTO_SLOT_SPECIFICATION_SELECTED,"."),verboseLevel:3,payload:{autoSlotsBefore:n,autoSlotsAfter:{autoSlots:e.autoSlots}}})}executeBusinessLogicForConvertingAutoSlotsIntoSmartSlots(e){const t=new w.I(new C).executeTaskStrategy(e.autoSlots);e.smartSlots=[...e.smartSlots,...t],e.logger.log({namespace:y.PluginName,message:"Before activate task: ".concat(S.w.AUTO_SLOTS_CONVERTED_TO_SMART_SLOTS,"."),verboseLevel:3,payload:{autoSlots:e.autoSlots,convertedAutoSlots:t}})}}var U=n(4028),k=n(4894);const D=y.PluginName;window.pgPluginManager.registerPlugin(D,y,(function(){const e=window.pgPluginManager.getConfig([{viewConfigurationID:1135,smartSlots:[],autoSlots:[{sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],[null],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],specifications:[{parentSize:[970,250],childrenSizes:[[300,250]],childrenCount:3,orientation:"horizontal"},{parentSize:[300,250],childrenSizes:[[300,100],[300,50],[320,100],[320,50]],childrenCount:2,orientation:"vertical"}],adUnitElementId:"tooplatecom47398",parentCpmMultiplier:1,preventHeightModification:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}]},{sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],[null],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],specifications:[{parentSize:[970,250],childrenSizes:[[300,250]],childrenCount:3,orientation:"horizontal"},{parentSize:[300,250],childrenSizes:[[300,100],[300,50],[320,100],[320,50]],childrenCount:2,orientation:"vertical"}],adUnitElementId:"tooplatecom47399",parentCpmMultiplier:1,preventHeightModification:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}]},{sizes:[[468,60],[728,90],[750,200],[930,180],[970,250],[970,90],[980,190],[980,300],[null],[200,200],[250,250],[300,250],[750,100],[750,300],[970,120],[980,120],[980,250],[980,90]],specifications:[{parentSize:[970,250],childrenSizes:[[300,250]],childrenCount:3,orientation:"horizontal"},{parentSize:[300,250],childrenSizes:[[300,100],[300,50],[320,100],[320,50]],childrenCount:2,orientation:"vertical"}],adUnitElementId:"tooplatecom47400",parentCpmMultiplier:1,preventHeightModification:!1,targeting:{deviceTypes:{deviceTypes:["tablet","desktop","smarttv"],state:"includes"}},sizeMapping:[{viewportSize:[468,0],sizes:[[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[730,0],sizes:[[728,90],[300,250],[250,250],[468,60],[200,200],["fluid"]]},{viewportSize:[750,0],sizes:[[728,90],[300,250],[250,250],[468,60],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[930,0],sizes:[[728,90],[300,250],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"]]},{viewportSize:[970,0],sizes:[[728,90],[300,250],[970,250],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[970,120]]},{viewportSize:[980,0],sizes:[[728,90],[300,250],[980,90],[970,250],[980,120],[970,90],[250,250],[468,60],[930,180],[750,300],[750,200],[750,100],[200,200],["fluid"],[980,250],[970,120],[980,300],[980,190]]},{viewportSize:[0,0],sizes:[]}]},{sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],[null]],specifications:[{parentSize:[300,250],childrenSizes:[[300,100],[300,50],[320,100],[320,50]],childrenCount:2,orientation:"vertical"}],adUnitElementId:"tooplatecom47401",parentCpmMultiplier:1,preventHeightModification:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}},{sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],[null]],specifications:[{parentSize:[300,250],childrenSizes:[[300,100],[300,50],[320,100],[320,50]],childrenCount:2,orientation:"vertical"}],adUnitElementId:"tooplatecom47402",parentCpmMultiplier:1,preventHeightModification:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}},{sizes:[[200,200],[250,250],[300,100],[300,250],[320,100],[320,320],[320,50],[336,280],[375,100],[375,50],[null]],specifications:[{parentSize:[300,250],childrenSizes:[[300,100],[300,50],[320,100],[320,50]],childrenCount:2,orientation:"vertical"}],adUnitElementId:"tooplatecom47403",parentCpmMultiplier:1,preventHeightModification:!1,targeting:{deviceTypes:{deviceTypes:["mobile"],state:"includes"}}}]}]);if(!e)return;const t=new U.G(A.Q);return e.taskHandler=new R(t,new k.A),e}))},7954:(e,t,n)=>{"use strict";var i,r,o=n(5412),s=n(3821),a=n(5675),d=n(2703),c=n(8752);let l=(0,s.Q)()((r=class e extends c._{constructor(t){super(t),this.runAuction=t=>{const n={auctionID:t.auctionID,headerBidder:o.q.SpecialCase,elementsIDs:t.adUnitsElementIDs,callback:()=>{},winningBids:new Map,targeting:new Map};this.logger.log({namespace:e.PluginName,message:"Forwarding without running auction. Event: ".concat(a.w.auctionFinished,"."),verboseLevel:1,payload:n}),t.isInstream?this.eventBus.emit(a.w.auctionInstreamFinished,n):this.eventBus.emit(a.w.auctionFinished,n)},this.handleAdRequested=this.handleAdRequested.bind(this),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){}tryAddAdUnit(){return!0}afterActivate(){return this.eventBus.emit(a.w.headerBidderActivated,{headerBidder:o.q.SpecialCase}),super.afterActivate()}async deactivate(){return this.eventBus.emit(a.w.headerBidderDeactivated,{headerBidder:o.q.SpecialCase}),super.deactivate()}handleCloneAdUnitsRequested(t){t.ext&&t.ext.includeInInitialAuction&&(t.newAdUnitsElementIds.filter((e=>!this.config.adUnitsInitialLoadElementIDs.includes(e))).forEach((e=>this.config.adUnitsInitialLoadElementIDs.push(e))),this.logger.log({namespace:e.PluginName,message:"Cloned ad units added to config.",verboseLevel:1,payload:{adUnits:this.config.adUnitsInitialLoadElementIDs}}))}handleAdRequested(e){this.eventBus.emit(a.w.bidsReceived,{bidder:o.q.SpecialCase,adRequestId:e.adRequestId,noBid:!0,slotId:e.slotId,format:"banner",size:[0,0]})}},r.PluginName=d.f.SpecialCaseHeaderBidderPlugin,i=r))||i;const u=l.PluginName;window.pgPluginManager.registerPlugin(u,l,(function(){return window.pgPluginManager.getConfig([{adUnitsInitialLoadElementIDs:["/8095840,22381294811/.2_A.47405.48_tooplate.com_tier1"],adUnitsDynamicallyInsertedElementIDs:[],viewConfigurationID:1135}])}))},7165:(e,t,n)=>{"use strict";n.d(t,{A4:()=>y,aX:()=>S,SN:()=>P,oS:()=>b,yf:()=>x,Ly:()=>I,G4:()=>E,Js:()=>_,N1:()=>C,wh:()=>O});Error;Error;class i extends Error{constructor(e){super(e),this.name="GVLError"}}Error;new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);class r{static langSet=new Set(["AR","BG","BS","CA","CS","CY","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HE","HR","HU","ID","IT","JA","KA","KO","LT","LV","MK","MS","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SQ","SR-LATN","SR-CYRL","SV","SW","TH","TL","TR","UK","VI","ZH"]);has(e){return r.langSet.has(e)}parseLanguage(e){const t=(e=e.toUpperCase()).split("-")[0];if(e.length>=2&&2==t.length){if(r.langSet.has(e))return e;if(r.langSet.has(t))return t;const n=t+"-"+t;if(r.langSet.has(n))return n;for(const n of r.langSet)if(-1!==n.indexOf(e)||-1!==n.indexOf(t))return n}throw new Error(`unsupported language ${e}`)}forEach(e){r.langSet.forEach(e)}get size(){return r.langSet.size}}class o{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardTexts="useNonStandardTexts";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class s{clone(){const e=new this.constructor;return Object.keys(this).forEach((t=>{const n=this.deepClone(this[t]);void 0!==n&&(e[t]=n)})),e}deepClone(e){const t=typeof e;if("number"===t||"string"===t||"boolean"===t)return e;if(null!==e&&"object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){const t=[];for(const n of e)t.push(this.deepClone(n));return e instanceof Array?t:new e.constructor(t)}{const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=this.deepClone(e[n]));return t}}}}var a,d,c,l;!function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(a||(a={}));!function(e){e.COOKIE="cookie",e.WEB="web",e.APP="app"}(d||(d={})),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(c||(c={}));c.CORE,c.VENDORS_DISCLOSED,c.VENDORS_ALLOWED,c.PUBLISHER_TC,c.CORE,c.VENDORS_DISCLOSED,c.VENDORS_ALLOWED,c.PUBLISHER_TC;Symbol.iterator;!function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(l||(l={}));class u{1={[c.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.purposeConsents,o.vendorConsents]};2={[c.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.policyVersion,o.isServiceSpecific,o.useNonStandardTexts,o.specialFeatureOptins,o.purposeConsents,o.purposeLegitimateInterests,o.purposeOneTreatment,o.publisherCountryCode,o.vendorConsents,o.vendorLegitimateInterests,o.publisherRestrictions],[c.PUBLISHER_TC]:[o.publisherConsents,o.publisherLegitimateInterests,o.numCustomPurposes,o.publisherCustomConsents,o.publisherCustomLegitimateInterests],[c.VENDORS_ALLOWED]:[o.vendorsAllowed],[c.VENDORS_DISCLOSED]:[o.vendorsDisclosed]}}new u;class p{static absCall(e,t,n,i){return new Promise(((r,o)=>{const s=new XMLHttpRequest;s.withCredentials=n,s.addEventListener("load",(()=>{if(s.readyState==XMLHttpRequest.DONE)if(s.status>=200&&s.status<300){let e=s.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}r(e)}else o(new Error(`HTTP Status: ${s.status} response type: ${s.responseType}`))})),s.addEventListener("error",(()=>{o(new Error("error"))})),s.addEventListener("abort",(()=>{o(new Error("aborted"))})),null===t?s.open("GET",e,!0):s.open("POST",e,!0),s.responseType="json",s.timeout=i,s.ontimeout=()=>{o(new Error("Timeout "+i+"ms "+e))},s.send(t)}))}static post(e,t,n=!1,i=0){return this.absCall(e,JSON.stringify(t),n,i)}static fetch(e,t=!1,n=0){return this.absCall(e,null,t,n)}}class h extends s{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new r;static baseUrl_;static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new i("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;dataCategories;lang_;cacheLang_;isLatest=!1;constructor(e,t){super();let n=h.baseUrl,r=t?.language;if(r)try{r=h.consentLanguages.parseLanguage(r)}catch(e){throw new i("Error during parsing the language: "+e.message)}if(this.lang_=r||h.DEFAULT_LANGUAGE,this.cacheLang_=r||h.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!n)throw new i("must specify GVL.baseUrl before loading GVL json");if(e>0){const t=e;h.CACHE.has(t)?(this.populate(h.CACHE.get(t)),this.readyPromise=Promise.resolve()):(n+=h.versionedFilename.replace("[VERSION]",String(t)),this.readyPromise=this.fetchJson(n))}else h.CACHE.has(h.LATEST_CACHE_KEY)?(this.populate(h.CACHE.get(h.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(n+h.latestFilename))}}static emptyLanguageCache(e){let t=!1;return null==e&&h.LANGUAGE_CACHE.size>0?(h.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(h.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(h.CACHE.delete(e),t=!0):void 0===e&&(h.CACHE=new Map,t=!0),t}cacheLanguage(){h.LANGUAGE_CACHE.has(this.cacheLang_)||h.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}async fetchJson(e){try{this.populate(await p.fetch(e))}catch(e){throw new i(e.message)}}getJson(){return{gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.clonePurposes(),specialPurposes:this.cloneSpecialPurposes(),features:this.cloneFeatures(),specialFeatures:this.cloneSpecialFeatures(),stacks:this.cloneStacks(),...this.dataCategories?{dataCategories:this.cloneDataCategories()}:{},vendors:this.cloneVendors()}}cloneSpecialFeatures(){const e={};for(const t of Object.keys(this.specialFeatures))e[t]=h.cloneFeature(this.specialFeatures[t]);return e}cloneFeatures(){const e={};for(const t of Object.keys(this.features))e[t]=h.cloneFeature(this.features[t]);return e}cloneStacks(){const e={};for(const t of Object.keys(this.stacks))e[t]=h.cloneStack(this.stacks[t]);return e}cloneDataCategories(){const e={};for(const t of Object.keys(this.dataCategories))e[t]=h.cloneDataCategory(this.dataCategories[t]);return e}cloneSpecialPurposes(){const e={};for(const t of Object.keys(this.specialPurposes))e[t]=h.clonePurpose(this.specialPurposes[t]);return e}clonePurposes(){const e={};for(const t of Object.keys(this.purposes))e[t]=h.clonePurpose(this.purposes[t]);return e}static clonePurpose(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneFeature(e){return{id:e.id,name:e.name,description:e.description,...e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{},...e.illustrations?{illustrations:Array.from(e.illustrations)}:{}}}static cloneDataCategory(e){return{id:e.id,name:e.name,description:e.description}}static cloneStack(e){return{id:e.id,name:e.name,description:e.description,purposes:Array.from(e.purposes),specialFeatures:Array.from(e.specialFeatures)}}static cloneDataRetention(e){return{..."number"==typeof e.stdRetention?{stdRetention:e.stdRetention}:{},purposes:{...e.purposes},specialPurposes:{...e.specialPurposes}}}static cloneVendorUrls(e){return e.map((e=>({langId:e.langId,privacy:e.privacy,...e.legIntClaim?{legIntClaim:e.legIntClaim}:{}})))}static cloneVendor(e){return{id:e.id,name:e.name,purposes:Array.from(e.purposes),legIntPurposes:Array.from(e.legIntPurposes),flexiblePurposes:Array.from(e.flexiblePurposes),specialPurposes:Array.from(e.specialPurposes),features:Array.from(e.features),specialFeatures:Array.from(e.specialFeatures),...e.overflow?{overflow:{httpGetLimit:e.overflow.httpGetLimit}}:{},..."number"==typeof e.cookieMaxAgeSeconds||null===e.cookieMaxAgeSeconds?{cookieMaxAgeSeconds:e.cookieMaxAgeSeconds}:{},...void 0!==e.usesCookies?{usesCookies:e.usesCookies}:{},...e.policyUrl?{policyUrl:e.policyUrl}:{},...void 0!==e.cookieRefresh?{cookieRefresh:e.cookieRefresh}:{},...void 0!==e.usesNonCookieAccess?{usesNonCookieAccess:e.usesNonCookieAccess}:{},...e.dataRetention?{dataRetention:this.cloneDataRetention(e.dataRetention)}:{},...e.urls?{urls:this.cloneVendorUrls(e.urls)}:{},...e.dataDeclaration?{dataDeclaration:Array.from(e.dataDeclaration)}:{},...e.deviceStorageDisclosureUrl?{deviceStorageDisclosureUrl:e.deviceStorageDisclosureUrl}:{},...e.deletedDate?{deletedDate:e.deletedDate}:{}}}cloneVendors(){const e={};for(const t of Object.keys(this.fullVendorList))e[t]=h.cloneVendor(this.fullVendorList[t]);return e}async changeLanguage(e){let t=e;try{t=h.consentLanguages.parseLanguage(e)}catch(e){throw new i("Error during parsing the language: "+e.message)}const n=e.toUpperCase();if((t.toLowerCase()!==h.DEFAULT_LANGUAGE.toLowerCase()||h.LANGUAGE_CACHE.has(n))&&t!==this.lang_)if(this.lang_=t,h.LANGUAGE_CACHE.has(n)){const e=h.LANGUAGE_CACHE.get(n);for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}else{const e=h.baseUrl+h.languageFilename.replace("[LANG]",this.lang_.toLowerCase());try{await this.fetchJson(e),this.cacheLang_=n,this.cacheLanguage()}catch(e){throw new i("unable to load language: "+e.message)}}}get language(){return this.lang_}isVendorList(e){return void 0!==e&&void 0!==e.vendors}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&h.CACHE.set(h.LATEST_CACHE_KEY,this.getJson()),h.CACHE.has(this.vendorListVersion)||h.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((e=>{this.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((e=>{this.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((e=>{this.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((e=>{this.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((e=>+e))),this.vendorIds=new Set(e),this.vendors_=e.reduce(((e,t)=>{const n=this.vendors_[String(t)];return n&&void 0===n.deletedDate&&(n.purposes.forEach((e=>{this.byPurposeVendorMap[String(e)].consent.add(t)})),n.specialPurposes.forEach((e=>{this.bySpecialPurposeVendorMap[String(e)].add(t)})),n.legIntPurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].legInt.add(t)})),n.flexiblePurposes&&n.flexiblePurposes.forEach((e=>{this.byPurposeVendorMap[String(e)].flexible.add(t)})),n.features.forEach((e=>{this.byFeatureVendorMap[String(e)].add(t)})),n.specialFeatures.forEach((e=>{this.bySpecialFeatureVendorMap[String(e)].add(t)})),e[t]=n),e}),{})}getFilteredVendors(e,t,n,i){const r=e.charAt(0).toUpperCase()+e.slice(1);let o;const s={};return o="purpose"===e&&n?this["by"+r+"VendorMap"][String(t)][n]:this["by"+(i?"Special":"")+r+"VendorMap"][String(t)],o.forEach((e=>{s[String(e)]=this.vendors[String(e)]})),s}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new h(this.getJson());return this.lang_!==h.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo}}h.consentLanguages;n(5561),n(9589);const g=["google.com","bing.com","duckduckgo.com","yandex.ru"],f=["facebook.com","x.com","linkedin.com","instagram.com","twitter.com"],m=["facebook","x","linkedin","instagram","twitter"],v=new RegExp(".*chatgpt.*|.*openai.*|.*writesonic.*|.*perplexity.*|.*bard.*google.*|.*gemini.*google.*|.*edgeservices.*|.*heygpt.*|.*claude.ai.*|.*komo.ai.*|.*copy.ai.*|.*iask.ai.*|.*copilot.microsoft.*|.*jasper.ai.*|.*chat-gpt.*|.*gemini.google.com.*|.*talk.ezchatai.*","i");function b(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":";const n=new Date,i="00".concat(n.getUTCHours()).match(/\d{2}$/),r="00".concat(n.getUTCMinutes()).match(/\d{2}$/),o="00".concat(n.getUTCSeconds()).match(/\d{2}$/),s="000".concat(n.getUTCMilliseconds()).match(/\d{3}$/);return String("".concat(i,"h").concat(t).concat(r,"m").concat(t).concat(o,"s").concat(t).concat(e?"".concat(s,"ms"):""))}function y(e){return JSON.parse(JSON.stringify(e))}function A(e,t,n,i,r){const o=r&&""!==r?" ;domain=".concat(encodeURIComponent(r)):"",s=n&&""!==n?" ;expires=".concat(n):"",a=null!=i&&"none"==i.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(o).concat(i?"; SameSite=".concat(i):"").concat(a)}function w(e){let t=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null}function S(e){try{return new URL(e).hostname.toLowerCase()}catch(e){return""}}function I(e){return g.some((t=>e.toLowerCase().includes(t)))}function E(e){return f.some((t=>e.toLowerCase().includes(t)))}function _(e){return m.some((t=>e.toLowerCase()===t||f.some((t=>e.toLowerCase().includes(t)))))}function x(e){return v.test(e.toLowerCase())}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!window.navigator.cookieEnabled&&!document.cookie.length)return e;const t=e.split(".");if(2===t.length)return e;let n,i,r=-2;const o="_rdc".concat(Date.now()),s="writeable";do{n=t.slice(r).join("."),A(o,s,new Date((new Date).getTime()+1e4).toUTCString(),"Lax",n);w(o)===s?(i=!1,A(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,n)):(r+=-1,i=Math.abs(r)<=t.length)}while(i);return n}function T(e){return String.fromCodePoint(parseInt(e,16))}function O(e){const t={0:"\0",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v","'":"'",'"':'"',"\\":"\\"};return e.replace(/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,((e,n,i,r,o,s,a,d)=>{return void 0!==i?T(i):void 0!==r?T(r):void 0!==o?T(o):void 0!==s?(c=s,String.fromCodePoint(parseInt(c,8))):void 0!==d?T(d):t[a];var c}))}function C(e){try{if(e&&"object"==typeof e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];"function"==typeof i?t[n]="[Function]":i&&"object"==typeof i?Array.isArray(i)?t[n]="[Array(".concat(i.length,")]"):i.constructor===Object?t[n]=Object.keys(i).reduce(((e,t)=>("function"!=typeof i[t]&&"object"!=typeof i[t]&&(e[t]=i[t]),e)),{}):t[n]="[".concat(i.constructor.name,"]"):t[n]=i})),t}return e}catch(e){return"[Unable to sanitize event args]"}}},282:(e,t,n)=>{"use strict";async function i(e){var t,n;const i=e=>{let t="";return"x86"==e.architecture&&"64"==e.bitness?t="; Win64; x64":"arm"==e.architecture?t="; ARM":!0===e.wow64&&(t="; WOW64"),"Windows NT ".concat(function(e){const t=new Map([["0.3.0","6.3"],["0.2.0","6.2"],["0.1.0","6.1"]]);if(e&&t.has(e))return t.get(e);return"10.0"}(e.platformVersion)).concat(t)};if(null===(t=window)||void 0===t||null===(n=t.navigator)||void 0===n||!n.userAgentData)return Promise.resolve();let r="0";return window.navigator.userAgentData.brands.forEach((e=>{"Chromium"==e.brand&&(r=e.version)})),parseInt(r)<100?Promise.resolve():new Promise((t=>{window.navigator.userAgentData.getHighEntropyValues(e).then((e=>{var n,o,s;let a={platform:null===(n=window.navigator.userAgentData)||void 0===n?void 0:n.platform,version:r};e=(e=>(e.architecture||(e.architecture="x86"),e.bitness||(e.bitness="64"),e.model||(e.model=""),e.platform||(e.platform="Windows"),e.platformVersion||(e.platformVersion="10.0"),e.wow64||(e.wow64=!1),e))(e=Object.assign(a,e));let d="Mozilla/5.0 (";var c,l,u;["Chrome OS","Chromium OS"].includes(e.platform||"")?d+=(e=>{let t="";return"64"==e.bitness?"x86"==e.architecture?t="x86_64":"arm"==e.architecture&&(t="aarch64"):"arm"==e.architecture&&"32"==e.bitness&&(t="armv7l"),""==t?"X11; CrOS ".concat(e.platformVersion):"X11; CrOS ".concat(t," ").concat(e.platformVersion)})(e):"Windows"==e.platform?d+=i(e):"macOS"==e.platform?d+=(e=>{let t="Macintosh; Intel Mac OS X ",n=e.platformVersion||"";return n.indexOf(".")>-1&&(n=n.split(".").join("_")),t+=n,t})(e):"Android"==e.platform?d+=(e=>{let t="Linux; Android ";return t+=e.platformVersion||"",e.model&&(t+="; ",t+=e.model),t})(e):d+="X11; Linux x86_64",d+=") AppleWebKit/537.36 (KHTML, like Gecko) Chrome/",d+=(c=null===(o=e)||void 0===o?void 0:o.fullVersionList,l=a.version,c?null===(u=c.find((e=>"Google Chrome"==e.brand)))||void 0===u?void 0:u.version:"".concat(l,".0.0.0")),null!==(s=window.navigator.userAgentData)&&void 0!==s&&s.mobile&&(d+=" Mobile"),d+=" Safari/537.36",t(d)}))}))}async function r(e){return new Promise((t=>{i(e).then((e=>{e&&Object.defineProperty(navigator,"userAgent",{value:e,writable:!1,configurable:!0}),t()})).catch((()=>{t()}))}))}n.d(t,{g:()=>r})},7267:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var i=n(329);class r{static regenerateInitialAuctionId(){r.INITIAL_AUCTION_ID=(0,i.$C)()}static regenerateInitialPadoAuctionId(){r.INITIAL_PADO_AUCTION_ID=(0,i.$C)()}static regenerateInitialSiderailAuctionId(){r.INITIAL_SIDERAIL_AUCTION_ID=(0,i.$C)()}}r.AD_WRAPPER_CLASS="pgAdWrapper",r.WRAPPER_ACTIVE_GLOBAL_VARIABLE_NAME="wrapperActive",r.WRAPPER_ACTIVE_TARGETING_KEY_NAME="wrapper_active",r.EXTERNAL_WRAPPER_SETTINGS_ACCESSOR="pgGlobalSettings",r.SMART_VIEW_AD_SLOT_ID="pgs-slot-id",r.AMAZON_BIDDER="amazon",r.GOOGLE_BIDDER="google",r.NO_BIDDER="no-bid",r.WRAPPER_BASE_NAME="pgHB",r.INITIAL_AUCTION_ID=void 0,r.INITIAL_PADO_AUCTION_ID=void 0,r.INITIAL_SIDERAIL_AUCTION_ID=void 0,r.NO_AUCTION_ATTRIBUTE="data-pg-no-auction",r.AD_INSTANCE_TYPE_ATTRIBUTE="data-pg-ad-instance-type",r.DAI_INSTANCE="dai-instance",r.LARGE_AD_AREA_THRESHOLD=242e3,r.CLONED_AUCTIONS_TTL=3e5,r.regenerateInitialAuctionId(),r.regenerateInitialPadoAuctionId(),r.regenerateInitialSiderailAuctionId()},6811:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});let i=function(e){return e.RefreshCount="pgr",e.ViewportSize="imvs",e.AuthenticatedTraffic="owat",e.PageviewId="pageview_id",e.viewConfigurationId="view_conf_id",e.BundleId="bundle_id",e.SetupConfigurationId="setup_conf_id",e.StateKey="state_key",e.ChromeThirdsPartyDeprecation="3pc",e.SmartSlotParentOrChild="imss",e.PrebidRealBid="pg_rb",e.ProductFormat="ow_format",e.ProductFeature="ow_ftr",e.PageUrl="page_url",e.SiteSlug="site_slug",e.NavigationStart="navigation_start",e.DeviceType="device_type",e.Geo="geo",e.PageType="page_type",e.PageId="page_id",e.Uid="uid",e.WrapperActiveId="wrapper_active_id",e.WebViewName="webview_name",e.UserAgent="user_agent",e.PingPollingInterval="ping_polling_interval",e.SessionId="session_id",e.CmpError="cmp_error",e.ConsentStatus="consent_status",e.ConsentString="consent_string",e.ConsentVersion="consent_version",e.PrebidAliases="prebid_aliases",e.UserIdSet="user_id_set",e.TrafficSource="traffic_source",e}({})},5412:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});let i=function(e){return e.Prebid="prebid",e.Amazon="amazon",e.SpecialCase="specialCase",e}({})},4047:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});let i=function(e){return e[e.NotStarted=0]="NotStarted",e[e.Started=1]="Started",e[e.Paused=2]="Paused",e[e.Triggered=3]="Triggered",e}({})},2541:(e,t,n)=>{"use strict";n.d(t,{_:()=>i,x:()=>r});let i=function(e){return e.Banner="ban",e.SideRail="srail",e.Adhesive="adh",e.Skin="skin",e.MobileSkin="adh_sk",e.Interstitial="instl",e.IntroPage="instl_ip",e.Rewarded="rwdd",e.Instream="instream",e.InImage="ini",e}({}),r=function(e){return e.HeaderScroll="hs",e.DynamicAdInjection="dai",e.LazyLoad="lazy",e.Sticky="sticky",e.SmartSlot="sslot",e.AutoSlot="aslot",e.HPTO="hpto",e.Parallax="parallax",e.SmartReactRefresh="sr_%",e.TimeBasedRefresh="tb_%",e.EventBasedRefresh="eb",e.CloseButtonOn="cb_1",e.CloseButtonOff="cb_0",e.Pado="pado",e.Carousel="crsl",e.MultiFormat="mf_1",e.SingleFormat="mf_0",e.CompanionAds="ca_1",e.NoCompanionAds="ca_0",e}({})},1343:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});let i=function(e){return e[e.preroll=1]="preroll",e[e.midroll=2]="midroll",e[e.postroll=3]="postroll",e[e.rewarded=4]="rewarded",e}({})},2703:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});let i=function(e){return e.BasePlugin="BasePlugin",e.BaseHeaderBidderPlugin="BaseHeaderBidderPlugin",e.BaseParallaxPlugin="BaseParallaxPlugin",e.LazyLoadingManagerPlugin="LazyLoadingManagerPlugin",e.LazyLoadingPlugin="LazyLoadingPlugin",e.LoadPlugin="LoadPlugin",e.AdRefreshManagerPlugin="AdRefreshManagerPlugin",e.EventBasedRefreshPlugin="EventBasedRefreshPlugin",e.SmartReactPlugin="SmartReactPlugin",e.SmartReactLoggingPlugin="SmartReactLoggingPlugin",e.AdServerPlugin="AdServerPlugin",e.StickyPlugin="StickyPlugin",e.AdhesivePlugin="AdhesivePlugin",e.CustomScriptPlugin="CustomScriptPlugin",e.AmazonPlugin="AmazonPlugin",e.AmazonSandboxPlugin="AmazonSandboxPlugin",e.RealTimeDataPlugin="RealTimeDataPlugin",e.PrebidAnalyticsPlugin="PrebidAnalyticsPlugin",e.AnalyticsPlugin="AnalyticsPlugin",e.LogImpressionPlugin="LogImpressionPlugin",e.PrebidPlugin="PrebidPlugin",e.SpecialCaseHeaderBidderPlugin="SpecialCaseHeaderBidderPlugin",e.HeaderBiddingManagerPlugin="HeaderBiddingManagerPlugin",e.SmartSlotPlugin="SmartSlotPlugin",e.SmartSlotPluginNullObject="SmartSlotPluginNullObject",e.JobScheduler="JobScheduler",e.PadoPlugin="PadoPlugin",e.PadoPluginNullObject="PadoPluginNullObject",e.HighImpactManagerPlugin="HighImpactManagerPlugin",e.FixedParallaxPlugin="FixedParallaxPlugin",e.StickyParallaxPlugin="StickyParallaxPlugin",e.MultiFormatRewardedAdPlugin="MultiFormatRewardedAdPlugin",e.InStreamRewardedAdPlugin="InStreamRewardedAdPlugin",e.AdComparisonPlugin="AdComparisonPlugin",e.AdQualityPlugin="AdQualityPlugin",e.GeoEdgePlugin="GeoEdgePlugin",e.ConfiantPlugin="ConfiantPlugin",e.GeoEdgePluginNullObject="GeoEdgePluginNullObject",e.AudienceDataPlugin="AudienceDataPlugin",e.PrivacyCompliancePlugin="PrivacyCompliancePlugin",e.SideRailPlugin="SideRailPlugin",e.FirstPartyDataPlugin="FirstPartyDataPlugin",e.HybridTheoryPlugin="HybridTheoryPlugin",e.DynamicInsertionPlugin="DynamicInsertionPlugin",e.ConsentManagementPlugin="ConsentManagementPlugin",e.InvalidTrafficPlugin="InvalidTrafficPlugin",e.IntroPagePlugin="IntroPagePlugin",e.AdServingPlugin="AdServingPlugin",e.GoogleRewardedAdPlugin="GoogleRewardedAdPlugin",e.TagManagerPlugin="TagManagerPlugin",e.InterstitialPlugin="InterstitialPlugin",e.SentryPlugin="SentryPlugin",e.InImagePlugin="InImagePlugin",e}({})},3815:(e,t,n)=>{"use strict";async function i(e){function t(e){return new Promise((function(t,n){if(i.loaded.has(e))t();else{var r=document.createElement("script");r.onload=t,r.src=e,document.head.appendChild(r)}}))}var n=[];for(const i of e)n.push(t(i));await Promise.all(n);for(const t of e)i.loaded.add(t)}function r(e){const t=document.createElement("link");t.rel="preload",t.as="script",t.href=e,document.head.appendChild(t)}function o(e){const t=document.createElement("link");t.rel="preconnect dns-prefetch",t.href=e,document.head.appendChild(t)}n.d(t,{Ay:()=>i,K0:()=>o,R2:()=>r}),i.loaded=new Set,i.forLoading=new Set},4028:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var i=n(3916);class r extends i.A{constructor(e){super(e)}applyTargeting(e){return this.filterByTargeting(e)}}},4894:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(329);class r{getSizesForCurrentViewport(e){const{innerWidth:t,innerHeight:n}=window,i=e.filter((e=>{const[i,r]=e.viewportSize;return t>=i&&n>=r}));return 0===i.length?[]:(i.sort(((e,t)=>{let[n,i]=e.viewportSize,[r,o]=t.viewportSize;return 0===i&&0===o?r-n:0===n&&0===r?o-i:([n,i,r,o].forEach((e=>{0===e&&(e=1)})),r*o-n*i)})),i[0].sizes)}getHeaderBiddingSizesForCurrentViewport(e){return(0,i.hQ)(this.getSizesForCurrentViewport(e))}}},9527:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});let i=function(e){return e.INCLUDE="include",e.EXCLUDE="exclude",e}({})},3481:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});let i=function(e){return e.GOOGLETAG="googletag",e.NO_AD_SERVER="noAdServer",e}({})},6305:(e,t,n)=>{"use strict";n.r(t);const i="https://securepubads.g.doubleclick.net/tag/js/gpt.js";if((0,n(3815).R2)(i),!document.querySelector('script[src^="'.concat(i,'"]'))){var r=document.createElement("script");r.src=i,r.async=!0,document.head&&document.head.appendChild(r)}window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[]},8703:(e,t,n)=>{"use strict";n.d(t,{Uh:()=>o,kE:()=>i,kL:()=>r});let i=function(e){return e.Control="0",e.Treatment1_1="t11",e.Treatment1_2="t12",e.Treatment1_3="t13",e.Enabled="1",e}({}),r=function(e){return e.Server="server",e.Client="client",e}({}),o=function(e){return e.tcf2_2="tcf2.2",e.tcf2_1="tcf2.1",e.tcf2="tcf2",e.tcf1="tcf1",e.usp1="usp1",e}({})},8716:()=>{const e=()=>{let e,t=window;const n=new Map,i=new Map,r=new Map;for(;t;){try{if(t.frames.__tcfapiLocator||t.frames.__uspapiLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}window.__tcfapi=(t,r,o,s)=>{if(e){if("function"!=typeof o)return;const a=Math.random()+"",d={__tcfapiCall:{command:t,parameter:s,version:r,callId:a}};"addEventListener"===t?i.set(a,o):n.set(a,o),e.postMessage(d,"*")}else o({msg:"CMP not found"},!1)},window.__uspapi=(t,n,i,o)=>{if(e){const s=Math.random()+"",a={__uspapiCall:{command:t,parameter:o,version:n,callId:s}};r.set(s,i),e.postMessage(a,"*")}else i({msg:"USP API not found"},!1)};window.addEventListener("message",(e=>(e=>{let t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}const o=t.__tcfapiReturn;o&&(i.has(o.callId)&&(i.get(o.callId)(o.returnValue,o.success),i.delete(o.callId)),n.has(o.callId)&&(n.get(o.callId)(o.returnValue,o.success),n.delete(o.callId)));const s=t.__uspapiReturn;s&&r.has(s.callId)&&r.keys().forEach((e=>{r.get(e)(s.returnValue,s.success),r.delete(e)}))})(e)),!1)};window.self!==window.top&&e()},5444:(e,t,n)=>{"use strict";n.r(t);const i="https://c.amazon-adsystem.com/aax2/apstag.js";(0,n(3815).R2)(i),function(e,t,n,i,r,o,s){function a(n,i){t[e]._Q.push([n,i])}t[e]||(t[e]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){a("di",arguments)},rpa:function(){a("ri",arguments)},upa:function(){a("ui",arguments)},_Q:[]},(o=n.createElement(i)).async=!0,o.src=r,(s=n.getElementsByTagName(i)[0]).parentNode.insertBefore(o,s))}("apstag",window,document,"script",i)},8752:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var i,r,o=n(6360),s=n(5675),a=n(3821),d=n(2703),c=n(7267),l=n(2101);let u=(0,a.Q)()((r=class e extends o.Q{constructor(t){super(t),this.initialAuctionBidsValidity=12e4,this.auctionRerunCounts=new Map,this.notRefreshRequestedForInitialAuctionUnits=new Set,this.adUnitsWithRefreshRequested=new Set,this.onAuctionRunMiddleware=e=>[c.W.INITIAL_AUCTION_ID,c.W.INITIAL_PADO_AUCTION_ID].includes(e.auctionID)?(e.adUnitsElementIDs.forEach((e=>{!this.adUnitsWithRefreshRequested.has(e)&&this.notRefreshRequestedForInitialAuctionUnits.add(e)})),window.setTimeout((()=>{this.eventBus.emit(s.w.refreshEntriesForAuctionExpired,e.auctionID),this.notRefreshRequestedForInitialAuctionUnits=new Set}),this.initialAuctionBidsValidity),e.adUnitsElementIDs.length?e:null):(e.adUnitsElementIDs=e.adUnitsElementIDs.filter((e=>!this.notRefreshRequestedForInitialAuctionUnits.has(e))),e.adUnitsElementIDs.length?e:null),this.onAuctionRun=e=>{this.runAuction(e)},this.handleAdUnitsRemovedFromUsage=e=>{for(const t of e)this.notRefreshRequestedForInitialAuctionUnits.delete(t)},this.handleAdUnitsBlockedFromUsage=e=>{for(const t of e.elementsIDs)this.notRefreshRequestedForInitialAuctionUnits.delete(t)},this.handleAdUnitsDestroyRequested=e=>{for(const t of e.elementsIDs)this.notRefreshRequestedForInitialAuctionUnits.delete(t)},this.handleAdUnitsBeforeApplyingRefresh=e=>{for(const t of e.elementsIDs)this.adUnitsWithRefreshRequested.add(t),this.notRefreshRequestedForInitialAuctionUnits.delete(t)},this.handleOnAdditionalAdSlotCreated=e=>(e.newAdunitElementId===e.adUnitElementId||this.tryAddAdUnit(e),e),this.runAuctionVideo=t=>{const n={adUnitsElementIDs:t.slotIds,auctionID:t.auctionId,isInstream:!0,callbackVastURL:t.callback};this.logger.log({namespace:e.PluginName,message:"Starting instream auction.",verboseLevel:1,payload:n}),this.runAuction(n)},this.rerunAuction=e=>{this.auctionRerunCounts.has(e.originalAuctionID)||this.auctionRerunCounts.set(e.originalAuctionID,1);const t=this.auctionRerunCounts.get(e.originalAuctionID);t<=2&&(this.auctionRerunCounts.set(e.originalAuctionID,t+1),this.eventBus.emit(s.w.rerunAuctionInitiated,e),this.runAuction(e))},this.onCloneAdUnitsRequested=e=>{this.handleCloneAdUnitsRequested(e)},this.handleOnAdditionalAdSlotCreated=this.handleOnAdditionalAdSlotCreated.bind(this)}async activate(){return this.eventBus.on(s.w.auctionRequested,this.onAuctionRun,!1,e.PluginName),this.eventBus.on(s.w.cloneAdUnitsRequested,this.onCloneAdUnitsRequested,!0,e.PluginName),this.eventBus.on(s.w.auctionRequestedInstream,this.runAuctionVideo,!1,e.PluginName),this.eventBus.on(s.w.rerunAuctionRequested,this.rerunAuction,!1,e.PluginName),this.eventBus.on(s.w.adRequested,this.handleAdRequested,!1,e.PluginName),this.eventBus.on(s.w.adUnitsBeforeApplyingAdServerRefresh,this.handleAdUnitsBeforeApplyingRefresh.bind(this),!0,e.PluginName),this.eventBus.on(s.w.adUnitsRemovedFromUsage,this.handleAdUnitsRemovedFromUsage.bind(this),!0,e.PluginName),this.eventBus.on(s.w.adUnitsBlockedFromUsage,this.handleAdUnitsBlockedFromUsage.bind(this),!0,e.PluginName),this.eventBus.on(s.w.adUnitDestroyRequested,this.handleAdUnitsDestroyRequested.bind(this),!0,e.PluginName),this.eventBus.addMiddleware(e.PluginName,l.h.BaseHeaderBidderPluginAdUnitAdditionalSlotCreatedMiddleware,s.w.adUnitAdditionalSlotCreated,this.handleOnAdditionalAdSlotCreated),this.eventBus.addMiddleware(e.PluginName,l.h.BaseHeaderBidderPluginAuctionRequestedMiddleware,s.w.auctionRequested,this.onAuctionRunMiddleware),await super.activate()}async deactivate(){return this.eventBus.detachAllForNamespace(e.PluginName),this.eventBus.removeMiddleware(e.PluginName,s.w.adUnitAdditionalSlotCreated,this.handleOnAdditionalAdSlotCreated),this.eventBus.removeMiddleware(e.PluginName,s.w.auctionRequested,this.onAuctionRunMiddleware),await super.deactivate()}},r.PluginName=d.f.BaseHeaderBidderPlugin,i=r))||i},5240:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i,r,o=n(3821),s=n(6360),a=n(2703);let d=(0,o.Q)()((r=class e extends s.Q{constructor(t){super(t),this.logger.log({message:"Initialize plugin.",namespace:e.PluginName,payload:t})}registerMiddlewaresHook(){}registerEventListenersHook(){}async activate(){return this.logger.log({message:"Activate plugin.",namespace:e.PluginName,verboseLevel:3}),this.config.context.que.push((()=>{for(const e of this.config.config)this.config.context.enableAnalytics(e)})),await super.activate()}},r.PluginName=a.f.PrebidAnalyticsPlugin,i=r))||i},3870:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});let i=function(e){return e.Is="is",e.IsNot="isNot",e.StartsWith="startsWith",e.NotStartsWith="notStartsWith",e.EndsWith="endsWith",e.NotEndsWith="notEndsWith",e.Contains="contains",e.NotContains="notContains",e.CustomVariable="customVariable",e.RegularExpression="regex",e.CustomFunction="customFunction",e}({})},8064:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});let i=function(e){return e.Instream="instream",e.Outstream="outstream",e}({})},5450:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});let i=function(e){return e.SmartTV="smarttv",e.Desktop="desktop",e.Tablet="tablet",e.Mobile="mobile",e}({})},7018:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});let i=function(e){return e.Excludes="excludes",e.Includes="includes",e}({})},3916:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(e){this.targetingService=e}filterByTargeting(e){return e.filter((e=>{var t;return null===(t=e.targeting)||void 0===t||!t.geoLocation||this.targetingService.meetsGeoTargetingRequirements(e.targeting.geoLocation)})).filter((e=>{var t;return null===(t=e.targeting)||void 0===t||!t.deviceTypes||this.targetingService.meetsDeviceTargetingRequirements(e.targeting.deviceTypes)})).filter((e=>{var t;return null===(t=e.targeting)||void 0===t||!t.windowWidth||this.targetingService.meetsWidthTargetingRequirements(e.targeting.windowWidth)})).filter((e=>{var t;return null===(t=e.targeting)||void 0===t||!t.customFunction||this.targetingService.meetsCustomFunctionTargetingRequirements(e.targeting.customFunction)}))}isApplicable(e){return!(null!=e&&e.geoLocation&&!this.targetingService.meetsGeoTargetingRequirements(e.geoLocation)||null!=e&&e.deviceTypes&&!this.targetingService.meetsDeviceTargetingRequirements(e.deviceTypes)||null!=e&&e.windowWidth&&!this.targetingService.meetsWidthTargetingRequirements(e.windowWidth)||null!=e&&e.customFunction&&!this.targetingService.meetsCustomFunctionTargetingRequirements(e.customFunction))}}},9754:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var i=n(5450),r=n(7018);const o={meetsGeoTargetingRequirements(e){const t=window.pgGeo;if(void 0===t)return!0;const n=!!e.countryCodes.find((e=>e===t));return e.state===r.b.Includes?n:!n},meetsDeviceTargetingRequirements(e){const t=function(){const e=(window.pgDevice||"").toLowerCase();return Object.values(i.b).includes(e)?e:void 0}();if(void 0===t)return!0;const n=!!e.deviceTypes.find((e=>e===t));return e.state===r.b.Includes?n:!n},meetsWidthTargetingRequirements(e){const t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return!(e.from&&e.from>t)&&!(e.to&&e.to<t)},meetsPercentOfTrafficRequirement:e=>e>=Math.floor(100*Math.random()+1),meetsCustomFunctionTargetingRequirements(e){const t=window.pgPluginManager.getCustomTargetingFunctionResult(e.functionName);return e.shouldNegate?!t:t}}},8314:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});class i{constructor(e){this.strategy=void 0,this.strategy=e}setTaskStrategy(e){return this.strategy=e}executeTaskStrategy(e,t,n,i,r){return this.strategy.execute(e,t,n,i,r)}}},2166:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var i=n(8314);class r{getContext(e){return new i.I(e)}}},5319:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});let i=function(e){return e.BEFORE_ACTIVATE="beforeActivate",e.ACTIVATE="activate",e.AFTER_ACTIVATE="afterActivate",e.DEACTIVATE="deactivate",e}({})},329:(e,t,n)=>{"use strict";n.d(t,{mj:()=>C,LV:()=>H,O7:()=>N,SL:()=>L,c$:()=>$,sg:()=>k,GR:()=>D,sH:()=>q,hQ:()=>U,$C:()=>T,Qp:()=>R,Ge:()=>y,em:()=>O,gP:()=>W,OR:()=>M,w3:()=>V,lI:()=>P,MR:()=>w,vs:()=>G,pc:()=>A,FD:()=>B,JZ:()=>F,BC:()=>I,Bz:()=>E,i0:()=>j,DI:()=>z});var i,r=n(328),o=n.n(r),s=n(8595),a=new Uint8Array(16);function d(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(a)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const l=function(e){return"string"==typeof e&&c.test(e)};for(var u=[],p=0;p<256;++p)u.push((p+256).toString(16).substr(1));const h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n};const g=function(e,t,n){var i=(e=e||{}).random||(e.rng||d)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return h(i)};var f=n(8789);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=()=>"".concat(document.URL,"?").split("?")[1].split("&").reduce(((e,t)=>{const n="".concat(t,"=").split("=").map(decodeURIComponent);return n[0].length&&(e[n[0]]=n[1]),e}),{}),A=e=>{const t=y()[e]||localStorage.getItem(e);return"1"===t||"true"===t},w=e=>{const t=y()[e]||localStorage.getItem(e);return t&&!isNaN(Number(t))?Number(t):2},S=e=>{const t=e.map((e=>Object.entries(e.data))).reduce(((e,t)=>[...e,...t]),[]);return new URLSearchParams(t).toString()},I=e=>{if(null==e||!e.endPoint)return Promise.reject("Url is missing in channel settings ".concat(JSON.stringify(e)));if(e.requestFormatType===s.aJ.URI){const t=new URL(e.endPoint);return t.search=S(e.data||[]),_(t.toString())}const t=e.data?e.data.map((e=>e.data)).reduce(((e,t)=>v(v({},e),t)),{}):{};return x(e.endPoint,t)},E=e=>{if(null==e||!e.endPoint)return"Url is missing in channel settings ".concat(JSON.stringify(e));const t=S(e.data||[]);return navigator.sendBeacon(e.endPoint,t)?"successful":"unsuccessful"},_=e=>o()(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}}),x=(e,t)=>o()(e,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v({},t))}),P=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";return t.split(n).reduce(((e,t)=>e?e[t]:null),e)};function T(){return g()}const O=(e,t)=>{if(!(e instanceof HTMLElement))return 1;switch(t){case"width":return e.offsetWidth;case"height":return e.offsetHeight;default:return 1}},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign?Object.assign(e,t):Object.keys(t).forEach((n=>e[n]=t[n]))},R=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,U=e=>e.filter((e=>Array.isArray(e)&&e.every((e=>"number"==typeof e)))),k=(e,t)=>{let n=0;return()=>{window.clearTimeout(n),n=window.setTimeout((()=>{e()}),t)}},D=(e,t)=>{let n=0,i=0;return()=>{const r=Date.now(),o=()=>{n=r,e(),clearTimeout(i),i=0};n?i||(i=window.setTimeout(o,t-(r-n))):o()}},B=e=>{if(!/^\/(\d+|(\d+,\d+))\/[^\/\s]+$/g.test(e))return e;const t=e.split("/"),n=t[2],i=t[1].split(",")[0];return"/".concat(i,"/").concat(n)};function j(e,t){return null!=e&&e.length&&null!=t&&t.length?e.filter((e=>t.some((t=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0})))):[]}function N(e){const t=document.createDocumentFragment(),{text:n,fontSize:i,verticalPadding:r,fontFamily:o,fontWeight:s,textColor:a,backgroundColor:d,addBackgroundToWrapperDiv:c}=e;if(!(n&&i&&r&&o&&s&&a&&d))return t;const l="".concat(i+r,"px"),u=document.createElement("span");return u.innerText=n,u.style.height=l,u.style.width="100%",u.style.lineHeight="".concat(i,"px"),u.style.fontSize="".concat(i,"px"),u.style.fontFamily=o,u.style.fontWeight="".concat(s),u.style.color=a,c||(u.style.backgroundColor=d),u.style.display="inline-flex",u.style.alignItems="center",u.style.justifyContent="center",u.style.position="absolute",u.style.top="0",u.style.left="0",t.appendChild(u),t}const L=e=>{const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild instanceof Element?t.content.firstChild:null},M=(e,t)=>t.reduce(((e,t)=>e&&"undefined"!==e[t]?e[t]:void 0),e);function z(e){var t;if("function"==typeof(null===(t=window.azerionEdge)||void 0===t?void 0:t.getUserAudiences))return window.azerionEdge.getUserAudiences();if(!window.localStorage||!window.localStorage.getItem("ht-pa-v1-a"))return[];try{return(JSON.parse(window.localStorage.getItem("ht-pa-v1-a"))||[]).map((e=>e.id)).filter(Boolean)}catch(t){return e.warn({namespace:"Helpers",message:"Unknown error: Could not obtain audience taxonomies.",verboseLevel:1,type:f.f.TaxonomyCouldNotBeDecoded}),[]}}function F(e,t,n){n<1&&(e.style.transformOrigin="top left",e.style.transform="scale(".concat(n,")"),t.style.width=n*(parseInt(e.width)||e.clientWidth)+"px",t.style.height=n*(parseInt(e.height)||e.clientHeight)+"px",e.style.width=e.width+"px",e.style.height=e.height+"px",e.style.maxWidth="none",t.style.overflow="hidden")}function q(e){return decodeURI(decodeURIComponent(e))}function H(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=window.document.querySelector("html"),n=-1!=navigator.userAgent.indexOf("Chrome");window.sublime&&"function"==typeof window.sublime.cleanUp?window.sublime.cleanUp():e&&(()=>{const e=window.top;if(!e)return;const i=e.document.querySelectorAll('[id^="ayads-"]'),r=e.document.querySelectorAll('[id^="sublime-"]'),o=e.document.querySelectorAll('script[src*="//sac.ayads.co/sublime/"]');e.document.body.classList.remove("sublime-cls");for(let e=0;e<i.length;e++)i[e].remove();for(let e=0;e<r.length;e++)r[e].remove();for(let e=0;e<o.length;e++)o[e].remove();t&&(n?t.style.paddingTop="":t.style.marginTop=""),e.document.body.style.cssText=""})()}function V(e){return e.filter((e=>"number"==typeof e[0]&&"number"==typeof e[1]))||[]}function $(e){if(!e.parentNode)return null;const t=document.createElement("div");return e.parentNode.insertBefore(t,e),t.appendChild(e),t}function G(e,t){return!(!e||!t)&&e.some((e=>t.some((t=>e[0]===t[0]&&e[1]===t[1]))))}const W=(e,t)=>{const n="width"===t?0:1;return e.reduce(((e,t)=>t[n]>e?t[n]:e),0)}},8902:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>getDivLogger,w:()=>isDivLoggingEnabled});var _helpers_Helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(329);const enableDivLoggingUriParamName="enableDivLogging",maxPayloadLength=500,maxPayloadLines=10;let originalConsole=null,morseState={taps:[],lastTap:0,isListening:!1};class DivLoggerImpl{constructor(){this.maxLogEntries=1e3,this.cssPrefix="div-logger-".concat(Math.random().toString(36).substr(2,9)),this.container=null,this.logContent=null,this.header=null,this.isDragging=!1,this.dragOffset={x:0,y:0},this.shouldAutoScroll=!0,this.scrollIndicator=null,this.isMinimized=!0,this.consoleIntercepted=!1,this.originalOnError=null,this.originalOnUnhandledRejection=null,this.jsPrompt=null,this.jsTextarea=null,this.commandHistory=[],this.historyIndex=-1,this.historyUpBtn=null,this.historyDownBtn=null,this.filterText="",this.filterInput=null,this.handleMouseMove=e=>{if(!this.isDragging||!this.container)return;const t=DivLoggerImpl.calculateBoundedPosition(e.clientX,e.clientY,this.dragOffset,this.container);this.container.style.left="".concat(t.x,"px"),this.container.style.top="".concat(t.y,"px"),this.container.classList.add("".concat(this.cssPrefix,"-container-positioned"))},this.handleMouseUp=()=>{this.isDragging=!1,document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleTouchMove=e=>{if(!this.isDragging||!this.container)return;const t=e.touches[0],n=DivLoggerImpl.calculateBoundedPosition(t.clientX,t.clientY,this.dragOffset,this.container);this.container.style.left="".concat(n.x,"px"),this.container.style.top="".concat(n.y,"px"),this.container.classList.add("".concat(this.cssPrefix,"-container-positioned")),e.preventDefault()},this.handleTouchEnd=()=>{this.isDragging=!1,document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd)}}static getInstance(){return DivLoggerImpl.instance||(DivLoggerImpl.instance=new DivLoggerImpl),DivLoggerImpl.instance}createStyles(){const e="".concat(this.cssPrefix,"-styles");if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent="\n      .".concat(this.cssPrefix,'-container {\n        position: fixed;\n        top: 50%;\n        left: 20px;\n        transform: translateY(-50%);\n        width: 600px;\n        height: 400px;\n        background: rgba(15, 17, 48, 0.95);\n        border: 1px solid #333;\n        border-radius: 8px;\n        font-family: "Consolas", "Monaco", "Courier New", monospace;\n        font-size: 12px;\n        color: #fff;\n        z-index: 999999;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n        backdrop-filter: blur(10px);\n        display: flex;\n        flex-direction: column;\n        resize: both;\n        overflow: hidden;\n        min-width: 300px;\n        min-height: 200px;\n      }\n\n      .').concat(this.cssPrefix,"-container.").concat(this.cssPrefix,"-hidden {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-header {\n        background: #ff5000;\n        color: white;\n        padding: 8px 12px;\n        cursor: move;\n        user-select: none;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        border-radius: 7px 7px 0 0;\n        font-weight: bold;\n        touch-action: none;\n      }\n\n      .").concat(this.cssPrefix,"-filter-container {\n        flex: 1;\n        position: relative;\n        margin-left: 10px;\n        margin-right: 10px;\n        display: flex;\n        align-items: center;\n      }\n\n      .").concat(this.cssPrefix,"-filter {\n        flex: 1;\n        padding: 4px 8px;\n        padding-right: 24px;\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        border-radius: 4px;\n        background: rgba(255, 255, 255, 0.1);\n        color: white;\n        font-size: 12px;\n        outline: none;\n      }\n\n      .").concat(this.cssPrefix,"-filter::placeholder {\n        color: rgba(255, 255, 255, 0.6);\n      }\n\n      .").concat(this.cssPrefix,"-filter:focus {\n        border-color: rgba(255, 255, 255, 0.6);\n        background: rgba(255, 255, 255, 0.15);\n      }\n\n      .").concat(this.cssPrefix,"-filter-clear {\n        position: absolute;\n        right: 4px;\n        top: 50%;\n        transform: translateY(-50%);\n        background: none;\n        border: none;\n        color: rgba(255, 255, 255, 0.6);\n        cursor: pointer;\n        font-size: 16px;\n        width: 20px;\n        height: 20px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 3px;\n      }\n\n      .").concat(this.cssPrefix,"-filter-clear:hover {\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n      }\n\n      .").concat(this.cssPrefix,"-controls {\n        display: flex;\n        gap: 8px;\n      }\n\n      .").concat(this.cssPrefix,"-button {\n        background: rgba(255, 255, 255, 0.2);\n        border: none;\n        color: white;\n        padding: 4px 8px;\n        border-radius: 3px;\n        cursor: pointer;\n        font-size: 11px;\n      }\n\n      .").concat(this.cssPrefix,"-button:hover {\n        background: rgba(255, 255, 255, 0.3);\n      }\n\n      .").concat(this.cssPrefix,"-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 8px;\n        background: rgba(15, 17, 48, 0.98);\n        position: relative;\n      }\n\n      .").concat(this.cssPrefix,"-entry {\n        margin-bottom: 4px;\n        padding: 4px 8px;\n        border-radius: 3px;\n        border-left: 3px solid;\n        line-height: 1.4;\n      }\n\n      .").concat(this.cssPrefix,"-entry.filtered-out {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-entry.info {\n        border-left-color: #4a90e2;\n        background: rgba(74, 144, 226, 0.1);\n      }\n\n      .").concat(this.cssPrefix,"-entry.warn {\n        border-left-color: #f5a623;\n        background: rgba(245, 166, 35, 0.1);\n      }\n\n      .").concat(this.cssPrefix,"-entry.error {\n        border-left-color: #d0021b;\n        background: rgba(208, 2, 27, 0.1);\n      }\n\n      .").concat(this.cssPrefix,"-entry.debug {\n        border-left-color: #9013fe;\n        background: rgba(144, 19, 254, 0.1);\n      }\n\n      .").concat(this.cssPrefix,"-entry.console {\n        opacity: 0.8;\n      }\n\n      .").concat(this.cssPrefix,"-entry.console .").concat(this.cssPrefix,'-namespace:before {\n        content: " ";\n      }\n\n      .').concat(this.cssPrefix,"-entry.error-source .").concat(this.cssPrefix,'-namespace:before {\n        content: " ";\n      }\n\n      .').concat(this.cssPrefix,"-timestamp {\n        color: #888;\n        font-size: 10px;\n      }\n\n      .").concat(this.cssPrefix,"-namespace {\n        color: #ff5000;\n        font-weight: bold;\n      }\n\n      .").concat(this.cssPrefix,"-message {\n        color: #fff;\n        margin: 2px 0;\n      }\n\n      .").concat(this.cssPrefix,"-payload-container {\n        position: relative;\n        margin-top: 4px;\n      }\n\n      .").concat(this.cssPrefix,"-payload {\n        color: #90ee90;\n        font-size: 11px;\n        white-space: pre-wrap;\n        word-break: break-all;\n      }\n\n      .").concat(this.cssPrefix,"-payload-truncated {\n        max-height: none;\n        overflow: hidden;\n      }\n\n      .").concat(this.cssPrefix,"-payload-expand-btn {\n        float: right;\n        background: rgba(255, 80, 0, 0.9);\n        border: none;\n        color: white;\n        padding: 4px 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 10px;\n        font-weight: bold;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n        margin-left: 4px;\n      }\n\n      .").concat(this.cssPrefix,"-payload-expand-btn:hover {\n        background: rgba(255, 80, 0, 1);\n      }\n\n      .").concat(this.cssPrefix,"-payload-copy-btn {\n        float: right;\n        background: rgba(74, 144, 226, 0.9);\n        border: none;\n        color: white;\n        padding: 4px 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 10px;\n        font-weight: bold;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n        margin-left: 4px;\n      }\n\n      .").concat(this.cssPrefix,"-payload-copy-btn:hover {\n        background: rgba(74, 144, 226, 1);\n      }\n\n      .").concat(this.cssPrefix,"-minimized {\n        height: 40px !important;\n        min-height: 40px !important;\n        max-height: 40px !important;\n        width: auto !important;\n        min-width: auto !important;\n        overflow: hidden !important;\n      }\n\n      .").concat(this.cssPrefix,"-minimized .").concat(this.cssPrefix,"-content {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-minimized .").concat(this.cssPrefix,"-js-prompt {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-minimized .").concat(this.cssPrefix,"-filter-container {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-minimized .").concat(this.cssPrefix,"-btn-resume {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-minimized .").concat(this.cssPrefix,"-btn-clear {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-minimized .").concat(this.cssPrefix,"-header span {\n        margin-right: 10px;\n      }\n\n      .").concat(this.cssPrefix,"-js-prompt {\n        border-top: 1px solid #333;\n        padding: 8px;\n        background: rgba(15, 17, 48, 0.98);\n        display: flex;\n        flex-direction: column;\n        gap: 6px;\n      }\n\n      .").concat(this.cssPrefix,"-js-textarea-container {\n        position: relative;\n      }\n\n      .").concat(this.cssPrefix,'-js-textarea {\n        width: 100%;\n        background: rgba(0, 0, 0, 0.4);\n        border: 1px solid #555;\n        border-radius: 4px;\n        color: #fff;\n        font-family: "Consolas", "Monaco", "Courier New", monospace;\n        font-size: 12px;\n        padding: 8px;\n        padding-right: 30px;\n        resize: vertical;\n        min-height: 60px;\n        max-height: 200px;\n        outline: none;\n        box-sizing: border-box;\n      }\n\n      .').concat(this.cssPrefix,"-js-textarea:focus {\n        border-color: #ff5000;\n        box-shadow: 0 0 0 2px rgba(255, 80, 0, 0.3);\n      }\n\n      .").concat(this.cssPrefix,"-js-textarea-clear {\n        position: absolute;\n        top: 8px;\n        right: 8px;\n        background: none;\n        border: none;\n        color: rgba(255, 255, 255, 0.6);\n        cursor: pointer;\n        font-size: 16px;\n        width: 20px;\n        height: 20px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 3px;\n      }\n\n      .").concat(this.cssPrefix,"-js-textarea-clear:hover {\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n      }\n\n      .").concat(this.cssPrefix,"-sticky-header {\n        position: sticky;\n        top: 0;\n        z-index: 15;\n        background: rgba(15, 17, 48, 0.95);\n        padding: 2px 0;\n        margin-bottom: 4px;\n      }\n\n      .").concat(this.cssPrefix,"-hidden {\n        display: none !important;\n      }\n\n      .").concat(this.cssPrefix,"-visible {\n        display: inline-block !important;\n      }\n\n      .").concat(this.cssPrefix,"-container-positioned {\n        position: fixed !important;\n        transform: none !important;\n        right: unset !important;\n        bottom: unset !important;\n      }\n\n      .").concat(this.cssPrefix,"-js-controls {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n        flex-wrap: wrap;\n      }\n\n      .").concat(this.cssPrefix,"-js-execute-btn {\n        background: #ff5000;\n        border: none;\n        color: white;\n        padding: 6px 12px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 11px;\n        font-weight: bold;\n      }\n\n      .").concat(this.cssPrefix,"-js-execute-btn:hover {\n        background: #ff6a00;\n      }\n\n      .").concat(this.cssPrefix,"-js-execute-btn:active {\n        background: #cc4000;\n      }\n\n      .").concat(this.cssPrefix,"-js-clear-btn {\n        background: #666;\n        border: none;\n        color: white;\n        padding: 6px 12px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 11px;\n      }\n\n      .").concat(this.cssPrefix,"-js-clear-btn:hover {\n        background: #777;\n      }\n\n      .").concat(this.cssPrefix,"-js-info {\n        color: #888;\n        font-size: 10px;\n        flex: 1;\n      }\n\n      .").concat(this.cssPrefix,"-js-history-btn {\n        background: #444;\n        border: none;\n        color: white;\n        padding: 6px 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 11px;\n        min-width: 30px;\n      }\n\n      .").concat(this.cssPrefix,"-js-history-btn:hover {\n        background: #555;\n      }\n\n      .").concat(this.cssPrefix,"-js-history-btn:disabled {\n        background: #333;\n        color: #666;\n        cursor: not-allowed;\n      }\n\n      @media (max-width: 768px) {\n        .").concat(this.cssPrefix,"-container {\n          width: 95vw !important;\n          height: 70vh !important;\n          top: 15vh !important;\n          left: 2.5vw !important;\n          transform: none !important;\n        }\n\n        .").concat(this.cssPrefix,"-header {\n          padding: 6px 8px;\n          font-size: 12px;\n        }\n\n        .").concat(this.cssPrefix,"-button {\n          padding: 4px 6px;\n          font-size: 10px;\n        }\n\n        .").concat(this.cssPrefix,"-js-controls {\n          flex-direction: column;\n          align-items: stretch;\n        }\n\n        .").concat(this.cssPrefix,"-js-info {\n          order: -1;\n          text-align: center;\n        }\n      }\n\n      .").concat(this.cssPrefix,"-scroll-indicator {\n        background: rgba(255, 80, 0, 0.9);\n        border: none;\n        color: white;\n        padding: 4px 8px;\n        border-radius: 3px;\n        cursor: pointer;\n        font-size: 11px;\n        display: none;\n        font-weight: bold;\n        margin-left: 8px;\n      }\n\n      .").concat(this.cssPrefix,"-scroll-indicator:hover {\n        background: rgba(255, 80, 0, 1);\n      }\n\n      .").concat(this.cssPrefix,"-scroll-indicator:hover {\n        background: rgba(255, 80, 0, 1);\n      }\n\n      .").concat(this.cssPrefix,"-content::-webkit-scrollbar {\n        width: 8px;\n      }\n\n      .").concat(this.cssPrefix,"-content::-webkit-scrollbar-track {\n        background: rgba(255, 255, 255, 0.1);\n        border-radius: 4px;\n      }\n\n      .").concat(this.cssPrefix,"-content::-webkit-scrollbar-thumb {\n        background: rgba(255, 80, 0, 0.6);\n        border-radius: 4px;\n      }\n\n      .").concat(this.cssPrefix,"-content::-webkit-scrollbar-thumb:hover {\n        background: rgba(255, 80, 0, 0.8);\n      }\n    "),document.head.appendChild(t)}createJsPrompt(){this.jsPrompt=document.createElement("div"),this.jsPrompt.className="".concat(this.cssPrefix,"-js-prompt");const e=document.createElement("div");e.className="".concat(this.cssPrefix,"-js-textarea-container"),this.jsTextarea=document.createElement("textarea"),this.jsTextarea.className="".concat(this.cssPrefix,"-js-textarea"),this.jsTextarea.placeholder="Enter JavaScript code... (Ctrl+Enter or Cmd+Enter to execute)",this.jsTextarea.spellcheck=!1;const t=document.createElement("button");t.className="".concat(this.cssPrefix,"-js-textarea-clear"),t.textContent="",t.title="Clear code",e.appendChild(this.jsTextarea),e.appendChild(t);const n=document.createElement("div");n.className="".concat(this.cssPrefix,"-js-controls");const i=document.createElement("button");i.className="".concat(this.cssPrefix,"-js-execute-btn"),i.textContent="Execute";const r=document.createElement("button");r.className="".concat(this.cssPrefix,"-js-clear-btn"),r.textContent="Clear",this.historyUpBtn=document.createElement("button"),this.historyUpBtn.className="".concat(this.cssPrefix,"-js-history-btn"),this.historyUpBtn.textContent="",this.historyUpBtn.title="Previous command",this.historyDownBtn=document.createElement("button"),this.historyDownBtn.className="".concat(this.cssPrefix,"-js-history-btn"),this.historyDownBtn.textContent="",this.historyDownBtn.title="Next command";const o=document.createElement("span");o.className="".concat(this.cssPrefix,"-js-info"),o.textContent="Ctrl+Enter to execute",n.appendChild(i),n.appendChild(r),n.appendChild(this.historyUpBtn),n.appendChild(this.historyDownBtn),n.appendChild(o),this.jsPrompt.appendChild(e),this.jsPrompt.appendChild(n),i.addEventListener("click",(()=>this.executeJavaScript())),r.addEventListener("click",(()=>this.clearJsPrompt())),this.historyUpBtn.addEventListener("click",(()=>this.navigateHistory(-1))),this.historyDownBtn.addEventListener("click",(()=>this.navigateHistory(1))),t.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.jsTextarea&&(this.jsTextarea.value="",this.jsTextarea.focus())})),this.jsTextarea.addEventListener("keydown",(e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),this.executeJavaScript()),"ArrowUp"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.navigateHistory(-1)),"ArrowDown"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.navigateHistory(1))})),this.updateHistoryButtons(this.historyUpBtn,this.historyDownBtn)}executeJavaScript(){if(!this.jsTextarea)return;const code=this.jsTextarea.value.trim();if(code){0!==this.commandHistory.length&&this.commandHistory[this.commandHistory.length-1]===code||(this.commandHistory.push(code),this.commandHistory.length>50&&this.commandHistory.shift()),this.historyIndex=-1,this.log({message:code,severity:"info",namespace:"JS Execute",timestamp:new Date,source:"console"});try{const result=function(){return eval(code)}();void 0!==result&&this.log({message:"Result",severity:"info",namespace:"JS Result",payload:result,timestamp:new Date,source:"console"})}catch(e){this.log({message:e instanceof Error?e.message:"Execution error",severity:"error",namespace:"JS Error",payload:e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:e,timestamp:new Date,source:"error"})}this.jsTextarea.value="",this.historyUpBtn&&this.historyDownBtn&&this.updateHistoryButtons(this.historyUpBtn,this.historyDownBtn)}}clearJsPrompt(){this.jsTextarea&&(this.jsTextarea.value="")}navigateHistory(e){if(this.jsTextarea&&0!==this.commandHistory.length){if(-1===e&&(-1===this.historyIndex&&(this.historyIndex=this.commandHistory.length-1),this.historyIndex>0&&this.historyIndex--),1===e){if(-1===this.historyIndex)return;if(!(this.historyIndex<this.commandHistory.length-1))return this.historyIndex=-1,void(this.jsTextarea.value="");this.historyIndex++}this.historyIndex>=0&&this.historyIndex<this.commandHistory.length&&(this.jsTextarea.value=this.commandHistory[this.historyIndex]),this.historyUpBtn&&this.historyDownBtn&&this.updateHistoryButtons(this.historyUpBtn,this.historyDownBtn)}}updateHistoryButtons(e,t){const n=this.commandHistory.length>0;e.disabled=!n,t.disabled=!n||-1===this.historyIndex}resumeAutoScroll(){this.shouldAutoScroll=!0,this.scrollIndicator&&(this.scrollIndicator.style.display="none"),this.logContent&&(this.logContent.scrollTop=this.logContent.scrollHeight)}createContainer(){this.container||(this.createStyles(),this.container=document.createElement("div"),this.container.className="".concat(this.cssPrefix,"-container ").concat(this.cssPrefix,"-minimized"),this.header=document.createElement("div"),this.header.className="".concat(this.cssPrefix,"-header"),this.header.innerHTML='\n      <span>Azerion Logger</span>\n      <div class="'.concat(this.cssPrefix,'-filter-container">\n        <input type="text" class="').concat(this.cssPrefix,'-filter" placeholder="Filter logs..." />\n        <button class="').concat(this.cssPrefix,'-filter-clear" title="Clear filter"></button>\n      </div>\n      <div class="').concat(this.cssPrefix,'-controls">\n        <button class="').concat(this.cssPrefix,"-scroll-indicator ").concat(this.cssPrefix,'-btn-resume"> Resume</button>\n        <button class="').concat(this.cssPrefix,"-button ").concat(this.cssPrefix,'-btn-clear">Clear</button>\n        <button class="').concat(this.cssPrefix,"-button ").concat(this.cssPrefix,'-btn-minimize">Restore</button>\n        <button class="').concat(this.cssPrefix,"-button ").concat(this.cssPrefix,'-btn-close">Close</button>\n      </div>\n    '),this.logContent=document.createElement("div"),this.logContent.className="".concat(this.cssPrefix,"-content"),this.createJsPrompt(),this.container.appendChild(this.header),this.container.appendChild(this.logContent),this.container.appendChild(this.jsPrompt),this.scrollIndicator=this.header.querySelector(".".concat(this.cssPrefix,"-scroll-indicator")),this.filterInput=this.header.querySelector(".".concat(this.cssPrefix,"-filter")),this.setupHeaderButtons(),this.setupFilterInput(),this.setupDragAndDrop(),this.setupScrollDetection(),this.setupWindowResize(),this.interceptConsole(),document.body.appendChild(this.container),window.divLogger=this)}setupDragAndDrop(){this.header&&this.container&&(this.header.addEventListener("mousedown",(e=>{const t=e.target;if("BUTTON"===t.tagName||t.closest("button"))return;this.isDragging=!0;const n=this.container.getBoundingClientRect();this.dragOffset.x=e.clientX-n.left,this.dragOffset.y=e.clientY-n.top,document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),e.preventDefault()})),this.header.addEventListener("touchstart",(e=>{const t=e.target;if("BUTTON"===t.tagName||t.closest("button"))return;this.isDragging=!0;const n=e.touches[0],i=this.container.getBoundingClientRect();this.dragOffset.x=n.clientX-i.left,this.dragOffset.y=n.clientY-i.top,document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchend",this.handleTouchEnd),e.preventDefault()}),{passive:!1}))}static calculateBoundedPosition(e,t,n,i){const r=e-n.x,o=t-n.y,s=window.innerWidth-i.offsetWidth,a=window.innerHeight-i.offsetHeight;return{x:Math.max(0,Math.min(r,s)),y:Math.max(0,Math.min(o,a))}}setupScrollDetection(){if(!this.logContent||!this.scrollIndicator)return;let e;this.logContent.addEventListener("scroll",(()=>{const{scrollTop:t,scrollHeight:n,clientHeight:i}=this.logContent,r=Math.abs(n-i-t)<5;this.shouldAutoScroll=r,this.shouldAutoScroll?(this.scrollIndicator.classList.add("".concat(this.cssPrefix,"-hidden")),this.scrollIndicator.classList.remove("".concat(this.cssPrefix,"-visible"))):(this.scrollIndicator.classList.add("".concat(this.cssPrefix,"-visible")),this.scrollIndicator.classList.remove("".concat(this.cssPrefix,"-hidden"))),e&&clearTimeout(e),r&&(e=window.setTimeout((()=>{this.shouldAutoScroll=!0,this.scrollIndicator&&(this.scrollIndicator.classList.add("".concat(this.cssPrefix,"-hidden")),this.scrollIndicator.classList.remove("".concat(this.cssPrefix,"-visible")))}),3e3))}))}formatTimestamp(e){return e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+e.getMilliseconds().toString().padStart(3,"0")}formatPayload(e){if(!e)return{content:"",isTruncated:!1};let t;try{t="string"==typeof e?e:JSON.stringify(e,null,2)}catch(n){t=String(e)}const n=t.split("\n"),i=t.length>maxPayloadLength,r=n.length>maxPayloadLines;if(i||r){let e;return e=r?n.slice(0,maxPayloadLines).join("\n")+"\n...":t.substring(0,maxPayloadLength)+"...",{content:e,isTruncated:!0}}return{content:t,isTruncated:!1}}interceptConsole(){if(this.consoleIntercepted||!originalConsole)return;const e=this;originalConsole.log("DivLogger: Starting console interception"),console.log=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];originalConsole.log.apply(console,n),e.logConsoleMessage("info","Console",n)},console.warn=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];originalConsole.warn.apply(console,n),e.logConsoleMessage("warn","Console",n)},console.error=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];originalConsole.error.apply(console,n),e.logConsoleMessage("error","Console",n)},console.info=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];originalConsole.info.apply(console,n),e.logConsoleMessage("info","Console",n)},console.debug=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];originalConsole.debug.apply(console,n),e.logConsoleMessage("debug","Console",n)},window.addEventListener("error",(t=>{var n;null===(n=originalConsole)||void 0===n||n.error("DivLogger captured error:",t);const i="".concat(t.message).concat(t.filename?" at ".concat(t.filename,":").concat(t.lineno,":").concat(t.colno):"");e.logConsoleMessage("error","JavaScript Error",[i,t.error])}),!0),window.addEventListener("unhandledrejection",(t=>{var n;null===(n=originalConsole)||void 0===n||n.error("DivLogger captured promise rejection:",t),e.logConsoleMessage("error","Unhandled Promise",["Unhandled promise rejection",t.reason])}),!0),this.originalOnError=window.onerror,window.onerror=function(t,n,i,r,o){var s;return null===(s=originalConsole)||void 0===s||s.error("DivLogger captured via onerror:",{message:t,source:n,lineno:i,colno:r,error:o}),e.logConsoleMessage("error","Global Error",["string"==typeof t?t:"Unknown error",o]),!!e.originalOnError&&e.originalOnError.call(window,t,n,i,r,o)},this.originalOnUnhandledRejection=window.onunhandledrejection,window.onunhandledrejection=function(t){var n;if(null===(n=originalConsole)||void 0===n||n.error("DivLogger captured via onunhandledrejection:",t),e.logConsoleMessage("error","Promise Rejection",["Unhandled promise rejection",t.reason]),e.originalOnUnhandledRejection)return e.originalOnUnhandledRejection.call(window,t)},this.consoleIntercepted=!0}static ensureElementInViewport(e){const t=e.getBoundingClientRect(),n=window.innerWidth-t.width,i=window.innerHeight-t.height;let r=!1,o=t.left,s=t.top;t.left<0?(o=0,r=!0):t.left>n&&(o=n,r=!0),t.top<0?(s=0,r=!0):t.top>i&&(s=i,r=!0),r&&(e.style.left="".concat(o,"px"),e.style.top="".concat(s,"px"),e.style.transform="none")}ensureInViewport(){this.container&&DivLoggerImpl.ensureElementInViewport(this.container)}setupWindowResize(){this.container&&window.addEventListener("resize",(()=>{this.ensureInViewport()}))}setupHeaderButtons(){if(!this.header)return;this.header.querySelectorAll("button").forEach((e=>{e.addEventListener("mousedown",(e=>{e.stopPropagation()})),e.addEventListener("touchstart",(e=>{e.stopPropagation()}))}));const e=this.header.querySelector(".".concat(this.cssPrefix,"-btn-resume"));e&&e.addEventListener("click",(e=>{e.stopPropagation(),this.resumeAutoScroll()}));const t=this.header.querySelector(".".concat(this.cssPrefix,"-btn-clear"));t&&t.addEventListener("click",(e=>{e.stopPropagation(),this.clear()}));const n=this.header.querySelector(".".concat(this.cssPrefix,"-btn-minimize"));n&&n.addEventListener("click",(e=>{e.stopPropagation(),this.toggleMinimize()}));const i=this.header.querySelector(".".concat(this.cssPrefix,"-btn-close"));i&&i.addEventListener("click",(e=>{e.stopPropagation(),this.hide()}))}setupFilterInput(){var e;if(!this.filterInput)return;this.filterInput.addEventListener("mousedown",(e=>{e.stopPropagation()})),this.filterInput.addEventListener("touchstart",(e=>{e.stopPropagation()})),this.filterInput.addEventListener("input",(e=>{const t=e.target;this.filterText=t.value.toLowerCase().trim(),this.applyFilter()})),this.filterInput.addEventListener("keydown",(e=>{var t;"Enter"===e.key&&(null===(t=this.filterInput)||void 0===t||t.blur())}));const t=null===(e=this.header)||void 0===e?void 0:e.querySelector(".".concat(this.cssPrefix,"-filter-clear"));t&&(t.addEventListener("mousedown",(e=>{e.stopPropagation()})),t.addEventListener("touchstart",(e=>{e.stopPropagation()})),t.addEventListener("click",(e=>{e.stopPropagation(),this.filterInput&&(this.filterInput.value="",this.filterText="",this.applyFilter(),this.filterInput.focus())})))}applyFilter(){if(!this.logContent)return;const e=this.logContent.querySelectorAll(".".concat(this.cssPrefix,"-entry")),t=this.filterText.split(/\s+/).filter((e=>e.length>0));e.forEach((e=>{const n=e;if(0===t.length)return void n.classList.remove("filtered-out");const i=this.getEntrySearchText(n).toLowerCase();t.every((e=>i.includes(e)))?n.classList.remove("filtered-out"):n.classList.add("filtered-out")}))}getEntrySearchText(e){const t=e.querySelector(".".concat(this.cssPrefix,"-namespace")),n=e.querySelector(".".concat(this.cssPrefix,"-message")),i=e.querySelector(".".concat(this.cssPrefix,"-payload")),r=[];return t&&r.push(t.textContent||""),n&&r.push(n.textContent||""),i&&r.push(i.textContent||""),r.join(" ")}restoreConsole(){this.consoleIntercepted&&originalConsole&&(console.log=originalConsole.log,console.warn=originalConsole.warn,console.error=originalConsole.error,console.info=originalConsole.info,console.debug=originalConsole.debug,window.onerror=this.originalOnError,window.onunhandledrejection=this.originalOnUnhandledRejection,this.consoleIntercepted=!1)}logConsoleMessage(e,t,n){let i,r;if(0===n.length)i="Console message";else if(1===n.length){const e=n[0];"string"==typeof e?i=e:e instanceof Error?(i=e.message,r={name:e.name,message:e.message,stack:e.stack}):(i="Object logged to console",r=e)}else{const e=n.filter((e=>"string"==typeof e));i=e.length>0?e.join(" "):"Multiple console arguments",r=n}this.log({message:i,severity:e,namespace:t,payload:r,timestamp:new Date,source:t.includes("Error")||t.includes("Promise")?"error":"console"})}static async copyTextToClipboard(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0}catch(e){}try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}catch(e){return console.error("Failed to copy text: ",e),!1}}static showCopyFeedback(e){const t=e.textContent;e.textContent="Copied!",e.style.background="rgba(46, 160, 67, 0.9)",setTimeout((()=>{e.textContent=t,e.style.background=""}),1500)}async copyToClipboard(e,t){await DivLoggerImpl.copyTextToClipboard(e)&&DivLoggerImpl.showCopyFeedback(t)}log(e){if(this.container||this.createContainer(),!this.logContent)return;const t=document.createElement("div"),n=e.source?e.source:"";t.className="".concat(this.cssPrefix,"-entry ").concat(e.severity," ").concat(n);const i=this.formatTimestamp(e.timestamp),r=e.namespace?'<span class="'.concat(this.cssPrefix,'-namespace">[').concat(e.namespace,"]</span> "):"",{content:o,isTruncated:s}=this.formatPayload(e.payload);let a="";if(o)if(s){const t="payload-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,5)),n="btn-".concat(t),i="container-".concat(t);a='\n          <div class="'.concat(this.cssPrefix,'-payload-container" id="').concat(i,'">\n            <div class="').concat(this.cssPrefix,'-sticky-header">\n              <button class="').concat(this.cssPrefix,'-payload-copy-btn" id="copy-').concat(t,'">Copy</button>\n              <button class="').concat(this.cssPrefix,'-payload-expand-btn" id="').concat(n,'">Expand</button>\n            </div>\n            <div class="').concat(this.cssPrefix,'-payload" id="').concat(t,'">').concat(o,"</div>\n          </div>\n        "),setTimeout((()=>{const r=document.getElementById(t),s=document.getElementById(n),a=document.getElementById("copy-".concat(t)),d=document.getElementById(i);if(r&&s&&a&&d){const t="string"==typeof e.payload?e.payload:JSON.stringify(e.payload,null,2);let n=!1;s.addEventListener("click",(()=>{n?(r.textContent=o,s.textContent="Expand",n=!1,d.scrollIntoView({behavior:"smooth",block:"start"})):(r.textContent=t,s.textContent="Collapse",n=!0)})),a.addEventListener("click",(()=>{this.copyToClipboard(t,a).then((()=>{}))}))}}),0)}else{const t="payload-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,5));a='\n          <div class="'.concat(this.cssPrefix,'-payload-container">\n            <div class="').concat(this.cssPrefix,'-sticky-header">\n              <button class="').concat(this.cssPrefix,'-payload-copy-btn" id="copy-').concat(t,'">Copy</button>\n            </div>\n            <div class="').concat(this.cssPrefix,'-payload" id="').concat(t,'">').concat(o,"</div>\n          </div>\n        "),setTimeout((()=>{const n=document.getElementById("copy-".concat(t));n&&n.addEventListener("click",(()=>{const t="string"==typeof e.payload?e.payload:JSON.stringify(e.payload,null,2);this.copyToClipboard(t,n).then((()=>{}))}))}),0)}for(t.innerHTML='\n      <div class="'.concat(this.cssPrefix,'-timestamp">').concat(i,'</div>\n      <div class="').concat(this.cssPrefix,'-message">').concat(r).concat(e.message,"</div>\n      ").concat(a,"\n    "),this.logContent.appendChild(t),this.filterText&&this.applyFilter(),this.shouldAutoScroll&&(this.logContent.scrollTop=this.logContent.scrollHeight);this.logContent.children.length>this.maxLogEntries+1;)for(let e=0;e<this.logContent.children.length;e++){const t=this.logContent.children[e];if(t!==this.scrollIndicator){this.logContent.removeChild(t);break}}}clear(){this.logContent&&(this.logContent.innerHTML=""),this.filterInput&&(this.filterInput.value="",this.filterText="")}show(){this.container||this.createContainer(),this.container.classList.remove("".concat(this.cssPrefix,"-hidden")),this.consoleIntercepted||this.interceptConsole(),this.scrollIndicator&&!this.shouldAutoScroll&&(this.scrollIndicator.classList.add("".concat(this.cssPrefix,"-visible")),this.scrollIndicator.classList.remove("".concat(this.cssPrefix,"-hidden")))}hide(){this.container&&(this.container.classList.add("".concat(this.cssPrefix,"-hidden")),this.restoreConsole()),this.scrollIndicator&&(this.scrollIndicator.classList.add("".concat(this.cssPrefix,"-hidden")),this.scrollIndicator.classList.remove("".concat(this.cssPrefix,"-visible"))),localStorage.setItem("enableDivLogging","false")}isVisible(){return!!this.container&&!this.container.classList.contains("".concat(this.cssPrefix,"-hidden"))}toggleMinimize(){if(!this.container)return;const e=this.container.getBoundingClientRect(),t=e.left,n=e.top;if(this.isMinimized=!this.isMinimized,this.isMinimized){this.container.classList.add("".concat(this.cssPrefix,"-minimized"));const e=this.container.querySelector(".".concat(this.cssPrefix,"-btn-minimize"));e&&(e.textContent="Restore")}else{this.container.classList.remove("".concat(this.cssPrefix,"-minimized"));const e=this.container.querySelector(".".concat(this.cssPrefix,"-btn-minimize"));e&&(e.textContent="Minimize")}requestAnimationFrame((()=>{this.container&&(this.container.style.left="".concat(t,"px"),this.container.style.top="".concat(n,"px"),this.container.classList.add("".concat(this.cssPrefix,"-container-positioned")),this.ensureInViewport())}))}}DivLoggerImpl.instance=null;const getDivLogger=()=>(originalConsole||(originalConsole={log:console.log.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),info:console.info.bind(console),debug:console.debug.bind(console)}),DivLoggerImpl.getInstance()),isDivLoggingEnabled=()=>(0,_helpers_Helpers__WEBPACK_IMPORTED_MODULE_0__.pc)(enableDivLoggingUriParamName),MORSE_AZD=[[200,400],[400,400,200,200],[400,200,200]];let tapSequence=[],lastTapTime=0,resetTimeout=null;const resetSequence=()=>{tapSequence=[],lastTapTime=0,resetTimeout&&(clearTimeout(resetTimeout),resetTimeout=null)},processTap=()=>{const e=Date.now(),t=e-lastTapTime;if(!(t<100)){if(resetTimeout&&clearTimeout(resetTimeout),0===lastTapTime)return lastTapTime=e,void(resetTimeout=window.setTimeout((()=>{resetSequence()}),5e3));tapSequence.push(t>700?400:200),lastTapTime=e,tapSequence.length>20&&(tapSequence=tapSequence.slice(-10)),checkMorsePattern(tapSequence)?resetSequence():resetTimeout=window.setTimeout((()=>{resetSequence()}),5e3)}},checkMorsePattern=e=>{const t=MORSE_AZD.flat();if(e.length<t.length)return!1;const n=e.slice(-t.length);for(let e=0;e<t.length;e++){const i=t[e],r=n[e];if(Math.abs(r-i)>.5*i)return!1}return!0},isInTriggerZone=(e,t)=>{const n=.2*window.innerWidth,i=.2*window.innerHeight,r=window.innerHeight-i;return e>=0&&e<=0+n&&t>=r&&t<=r+i},handleGlobalClick=e=>{isInTriggerZone(e.clientX,e.clientY)&&processTap()},handleGlobalTouch=e=>{if(e.touches.length>0){const t=e.touches[0];isInTriggerZone(t.clientX,t.clientY)&&processTap()}},createMorseTrigger=()=>{morseState.isListening||(morseState.isListening=!0,document.addEventListener("click",handleGlobalClick,!0),document.addEventListener("touchstart",handleGlobalTouch,!0))};"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",createMorseTrigger):createMorseTrigger())},8595:(e,t,n)=>{"use strict";n.d(t,{Cj:()=>i,LF:()=>s,aJ:()=>o,qQ:()=>r});let i=function(e){return e.Instant="instant",e.InBatches="inBatches",e}({}),r=function(e){return e.Http="http",e.Socket="socket",e}({}),o=function(e){return e.URI="uri",e.Body="body",e}({}),s=function(e){return e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e}({})},3081:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});let i=function(e){return e.REMOVE_AD_UNITS="removeAdUnits",e.DISABLE_AD_UNIT_HEADER_BIDDING="disableAdUnitHeaderBidding",e.DISABLE_AD_UNIT_CLIENT_SIDE_HEADER_BIDDING="disableAdUnitClientSideHeaderBidding",e.DISABLE_AD_UNIT_SERVER_SIDE_HEADER_BIDDING="disableAdUnitServerSideHeaderBidding",e.GLOBAL_GOOGLETAG_TARGETING="globalGoogletagTargeting",e.AD_UNITS_GOOGLETAG_TARGETING="adUnitsGoogletagTargeting",e.AD_UNIT_SIZE_MAPPING="adUnitSizeMapping",e.AD_UNITS_FILTERED_BASED_ON_TARGETING="adUnitsFilteredBasedOnTargeting",e.AD_UNITS_USING_AMAZON_MULTI_FORMAT="adUnitsUsingAmazonMultiFormat",e.AUTO_SLOT_SPECIFICATION_SELECTED="smartSlotSizeMappingApplied",e.AUTO_SLOTS_CONVERTED_TO_SMART_SLOTS="autoSlotsConvertedToSmartSlots",e.USER_SYNC_GEO_TARGETING="userSyncGeoTargeting",e.NEW_ADHESIVE_SELECT_PER_VIEWPORT_SETTINGS="newAdhesiveSelectPerViewportSettings",e.TAGS_FILTERED_BASED_ON_TARGETING="tagsFilteredBasedOnTargeting",e}({})},6360:(e,t,n)=>{"use strict";n.d(t,{Q:()=>_});var i=n(3081);class r{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForAdUnitsFiltered&&this.config.taskHandler.executeBusinessLogicForAdUnitsFiltered(this.config)}}class o{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForAdUnitsGoogletagTargeting&&this.config.taskHandler.executeBusinessLogicForAdUnitsGoogletagTargeting(this.config)}}class s{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForAdUnitMapping&&this.config.taskHandler.executeBusinessLogicForAdUnitMapping(this.config)}}class a{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForAdUnitsAmazonMultiFormat&&this.config.taskHandler.executeBusinessLogicForAdUnitsAmazonMultiFormat(this.config)}}class d{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForConvertingAutoSlotsIntoSmartSlots&&this.config.taskHandler.executeBusinessLogicForConvertingAutoSlotsIntoSmartSlots(this.config)}}class c{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForSelectingAutoSlotSpecification&&this.config.taskHandler.executeBusinessLogicForSelectingAutoSlotSpecification(this.config)}}class l{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForDisableAdUnitClient&&this.config.taskHandler.executeBusinessLogicForDisableAdUnitClient(this.config)}}class u{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForDisableAdUnitHB&&this.config.taskHandler.executeBusinessLogicForDisableAdUnitHB(this.config)}}class p{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForDisableAdUnitServer&&this.config.taskHandler.executeBusinessLogicForDisableAdUnitServer(this.config)}}class h{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForGlobalGoogletagTargeting&&this.config.taskHandler.executeBusinessLogicForGlobalGoogletagTargeting(this.config)}}class g{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForSelectNewAdhesivePerViewportSettingsCommand&&this.config.taskHandler.executeBusinessLogicForSelectNewAdhesivePerViewportSettingsCommand(this.config)}}class f{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForRemoveAdUnits&&this.config.taskHandler.executeBusinessLogicForRemoveAdUnits(this.config)}}class m{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForUserSyncFilter&&this.config.taskHandler.executeBusinessLogicForUserSyncFilter(this.config)}}class v{constructor(e){this.config=void 0,this.config=e}executeTaskCommand(){this.config.taskHandler&&this.config.taskHandler.executeBusinessLogicForTagsFiltered&&this.config.taskHandler.executeBusinessLogicForTagsFiltered(this.config)}}class b{constructor(e){this.config=void 0,this.config=e}createCommand(e){switch(e.type){case i.w.AD_UNIT_SIZE_MAPPING:return new s(this.config);case i.w.AD_UNITS_FILTERED_BASED_ON_TARGETING:return new r(this.config);case i.w.AD_UNITS_GOOGLETAG_TARGETING:return new o(this.config);case i.w.AD_UNITS_USING_AMAZON_MULTI_FORMAT:return new a(this.config);case i.w.DISABLE_AD_UNIT_CLIENT_SIDE_HEADER_BIDDING:return new l(this.config);case i.w.DISABLE_AD_UNIT_HEADER_BIDDING:return new u(this.config);case i.w.DISABLE_AD_UNIT_SERVER_SIDE_HEADER_BIDDING:return new p(this.config);case i.w.GLOBAL_GOOGLETAG_TARGETING:return new h(this.config);case i.w.REMOVE_AD_UNITS:return new f(this.config);case i.w.AUTO_SLOT_SPECIFICATION_SELECTED:return new c(this.config);case i.w.AUTO_SLOTS_CONVERTED_TO_SMART_SLOTS:return new d(this.config);case i.w.USER_SYNC_GEO_TARGETING:return new m(this.config);case i.w.NEW_ADHESIVE_SELECT_PER_VIEWPORT_SETTINGS:return new g(this.config);case i.w.TAGS_FILTERED_BASED_ON_TARGETING:return new v(this.config);default:return null}}}class y{constructor(e){this.commandFactory=void 0,this.commandFactory=e}execute(e){const t=this.commandFactory.createCommand(e);t&&t.executeTaskCommand()}}var A=n(5319);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E{constructor(e){this.config=e,this.isActivated=!1,this.commandHandler=new y(new b(this.config)),this.logger=void 0,this.eventBus=void 0,this.taskQueue=void 0,this.middlewaresRegistered=!1,this.eventListenersRegistered=!1,this.setConfig(e)}registerMiddlewares(){this.middlewaresRegistered||(this.registerMiddlewaresHook(),this.middlewaresRegistered=!0)}registerEventListeners(){this.eventListenersRegistered||(this.registerEventListenersHook(),this.eventListenersRegistered=!0)}beforeActivate(){return this.commandHandler=new y(new b(this.config)),this.taskQueue.getTasksByRunTime(A.s.BEFORE_ACTIVATE).forEach((e=>{this.commandHandler.execute(e)})),!0}async activate(){return this.isActivated=!0,await Promise.resolve(!0)}afterActivate(){return!0}async deactivate(){return this.isActivated=!1,this.middlewaresRegistered=!1,this.eventListenersRegistered=!1,await Promise.resolve(!0)}isActive(){return this.isActivated}setConfig(e){return this.config=e,this.logger=e.logger,this.eventBus=e.eventBus,this.taskQueue=e.taskQueue,this.config}modifyConfig(e){return this.config=S(S({},this.config),e),this.config}}class _ extends E{constructor(e){super(e)}}},3821:(e,t,n)=>{"use strict";function i(){return e=>{}}function r(){return e=>{}}n.d(t,{Q:()=>i,v:()=>r})},4120:(e,t,n)=>{"use strict";n.d(t,{MU:()=>i,d$:()=>r,eG:()=>o,rn:()=>s});let i=function(e){return e.Low="low",e.Medium="medium",e.High="high",e.Critical="critical",e}({}),r=function(e){return e.Registration="registration",e.AttachMiddlewares="attach_middlewares",e.AttachEventListeners="attach_event_listeners",e.Activation="activation",e.Deactivation="deactivation",e}({}),o=function(e){return e.MiddlewareExecution="middleware_execution",e.EventListenerExecution="event_listener_execution",e}({}),s=function(e){return e.NotDisplayed="not_displayed",e.NotRefreshed="not_refreshed",e.RapidConsecutiveRefresh="rapid_consecutive_refresh",e}({})},5675:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});let i=function(e){return e.auctionRequested="auction_requested",e.auctionFinished="auction_finished",e.auctionSyncFinished="auction_sync_finished",e.adUnitDefineSlotRequested="ad_unit_define_slot_requested",e.adUnitDisplayRequested="ad_unit_display_requested",e.adUnitAdServerRefreshRequested="ad_unit_ad_server_refresh_requested",e.adUnitsBeforeApplyingAdServerRefresh="ad_unit_before_applying_ad_server_refresh",e.adUnitDestroyRequested="ad_unit_destroy_requested",e.adUnitDestroyed="ad_unit_destroyed",e.adUnitDisplayed="ad_unit_displayed",e.adUnitLoaded="ad_unit_loaded",e.adUnitsRemovedFromUsage="ad_units_removed_from_usage",e.adUnitAdditionalSlotCreated="ad_unit_additional_slot_created",e.adUnitRefreshRequested="ad_unit_refresh_requested",e.adSlotLoadedByAdServer="ad_slot_loaded_by_ad_server",e.publisherAdSlotsDetected="publisher_ad_slots_detected",e.initiallyDefinedAdSlots="initially_defined_ad_slots",e.adUnitEmptyRendered="ad_unit_empty_rendered",e.adUnitRenderedBidder="ad_unit_rendered_bidder",e.attachKeyValueRequested="attach_key_value_requested",e.attachKeyValueToAllAdUnitsRequested="attach_key_value_to_all_ad_units_requested",e.attachStickyRequested="attach_sticky_requested",e.clearOldKeyValuesAndAttachNewPairsRequested="clear_old_key_values_and_attach_new_pairs_requested",e.clearKeyValuesByKeyRequested="clear_key_value_by_key_requested",e.filterPrebidBiddersRequested="filter_prebid_bidders_requested",e.filterAmazonAdUnitsRequested="filter_amazon_ad_units_requested",e.adUnitsBlockedFromUsage="ad_unit_blocked_from_usage",e.auctionRequestedInstream="auction_requested_instream",e.auctionInstreamFinished="auction_instream_finished",e.rerunAuctionRequested="rerun_auction_requested",e.rerunAuctionInitiated="rerun_auction_initiated",e.adUnitRenderingDelayed="ad_unit_rendering_delayed",e.webRewardedRequested="web_rewarded_requested",e.headerBidderActivated="header_bidder_activated",e.headerBidderDeactivated="header_bidder_deactivated",e.headerBiddersReady="header_bidders_ready",e.headerBiddersNotReady="header_bidders_not_ready",e.rewardedAdsActivated="rewarded_ads_activated",e.rewardedAdsDeactivated="rewarded_ads_deactivated",e.nonHptoAdUnitsUnblockedFromUsage="non_hpto_ad_units_unblocked_from_usage",e.adUnitsUnblockedFromUsage="ad_units_unblocked_from_usage",e.completeAdComparisonRequested="complete_ad_comparison_requested",e.addImmutableElementId="add_immutable_element_id",e.buildAndExecuteVastUrlRequested="build_and_execute_vast_url_requested",e.adQualityVendorsReady="ad_quality_vendors_ready",e.adQualityVendorReady="ad_quality_vendor_ready",e.slotViewabilityChanged="slot_viewability_changed",e.outstreamRenderRequested="outstream_render_requested",e.setUserAudienceDataRequested="set_user_audience_data_requested",e.userAudienceDataUpdated="user_audience_data_updated",e.customAdUnitEmptyRendered="custom_rebid_ad_unit_empty_rendered",e.cloneAdUnitsRequested="clone_ad_units_requested",e.initialHeaderBiddingAuctionRequested="initial_header_bidding_auction_requested",e.videoAdError="video_ad_error",e.adUnitCustomPropertyProcessed="ad_unit_custom_property_processed",e.adServerAddCallbackToQueRequested="ad_server_add_callback_to_que_requested",e.includeGoogleTagSecureSignalProviderRequested="include_google_tag_secure_signal_provider_requested",e.setFirstPartyData="set_first_party_data",e.adSlotDefined="ad_slot_defined",e.attachKeyValuesToAll="attach_key_values_to_all",e.setIabTaxonomiesRequested="set_iab_taxonomies_requested",e.topSideOfViewportOccupied="top_side_of_viewport_occupied",e.bottomSideOfViewportOccupied="bottom_side_of_viewport_occupied",e.getConsentDataRequested="get_consent_data_requested",e.consentDataAvailable="consent_data_available",e.consentDataUpdated="consent_data_updated",e.logAnalyticsDataRequested="log_analytics_data_requested",e.attachPageLevelKeyValueRequested="attach_page_level_key_value_requested",e.dynamicBidAdjustmentsRequested="dynamic_bid_adjustments_requested",e.adhesiveDestroyed="adhesiveDestroyed",e.changeNativeTemplateForSlotsRequested="change_native_template_for_slots_requested",e.adRequested="ad_requested",e.bidsReceived="bids_received",e.bidUsed="bid_used",e.logProductDataRequested="log_product_data_requested",e.cloneProductDataRequested="clone_product_data_requested",e.outOfPageAdSlotDefined="out_of_page_ad_slot_defined",e.rewardedSlotReady="rewarded_slot_ready",e.rewardedSlotGranted="rewarded_slot_granted",e.rewardedSlotClosed="rewarded_slot_closed",e.recreateOutOfPageSlotRequested="recreate_out_of_page_slot_requested",e.adUnitTimeOnPageLimited="ad_unit_time_on_page_limited",e.productDataFormatUpdated="product_data_format_updated",e.initiateAdhesiveRequested="initiate_adhesive_requested",e.destroyAdhesiveRequested="destroy_adhesive_requested",e.skinAdRenderRequested="skin_ad_render_requested",e.disableAdRefreshRequested="disable_ad_refresh_requested",e.lazyLoadReinitializationRequested="lazy_load_reinitialization_requested",e.tcfApiNotFound="tcf_api_not_found",e.uspApiNotFound="usp_api_not_found",e.prebidAliasesSet="prebid_aliases_set",e.adUnitAdRequestFinished="ad_unit_ad_request_finished",e.amazonBidsReceived="amazon_bids_received",e.prebidAuctionTimeouts="prebid_auction_timeouts",e.prebidBidRendered="prebid_bid_rendered",e.prebidAuctionEnded="prebid_auction_ended",e.slotViewableStatusRequested="slot_viewable_status_requested",e.slotCroppableStatusRequested="slot_croppable_status_requested",e.pluginsActivationAllowed="plugins_activation_allowed",e.refreshEntriesForAuctionExpired="refresh_entries_for_auction_expired",e.fullScreenAdShown="full_screen_ad_shown",e.adUnitElementAdded="ad_unit_element_added",e.adUnitElementRemoved="ad_unit_element_removed",e.pluginErrorOccurred="plugin_error_occurred",e.eventHandlerErrorOccurred="event_handler_error_occurred",e.middlewareErrorOccurred="middleware_error_occurred",e.loggedErrorOccurred="logged_error_occurred",e.adUnitRefreshAnomalyDetected="ad_unit_refresh_anomaly_detected",e.propagationHasBeenStoppedForEvent="propagation_has_been_stopped_for_event",e.stylingElementsDestroyed="styling_elements_destroyed",e.auctionCloned="auction_cloned",e.notDisplayedAdUnitsQueuedForRefresh="not_displayed_ad_units_queued_for_refresh",e.adSlotResponseReceivedFromAdServer="ad_slot_response_received_from_ad_server",e}({})},8789:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});let i=function(e){return e[e.ClientLoggerConsoleInfo=1]="ClientLoggerConsoleInfo",e[e.LogImpressionDataInfo=2]="LogImpressionDataInfo",e[e.SmartReactDataInfo=3]="SmartReactDataInfo",e[e.LogImpressionAdUnitCodeNotFoundError=4]="LogImpressionAdUnitCodeNotFoundError",e[e.LogImpressionInvalidImpressionDataError=5]="LogImpressionInvalidImpressionDataError",e[e.LogImpressionInvalidImpressionFormatError=6]="LogImpressionInvalidImpressionFormatError",e[e.LogImpressionWhileParsingLogImpressionError=7]="LogImpressionWhileParsingLogImpressionError",e[e.LogImpressionNotFoundProviderIdError=8]="LogImpressionNotFoundProviderIdError",e[e.LazyLoadingAdUnitNotFoundWarn=9]="LazyLoadingAdUnitNotFoundWarn",e[e.GPTEmptyRenderedAdSlotWarn=10]="GPTEmptyRenderedAdSlotWarn",e[e.GPTTargetingNotImplementedForAdRefreshWarn=12]="GPTTargetingNotImplementedForAdRefreshWarn",e[e.GPTNoSlotsToDestroyWarn=13]="GPTNoSlotsToDestroyWarn",e[e.GPTAdSlotAlreadyDefinedByExternalScriptError=14]="GPTAdSlotAlreadyDefinedByExternalScriptError",e[e.GPTAdSlotAlreadyDefinedError=15]="GPTAdSlotAlreadyDefinedError",e[e.AdRefreshPluginCreationError=16]="AdRefreshPluginCreationError",e[e.AdhesiveGetCurrentThresholdError=17]="AdhesiveGetCurrentThresholdError",e[e.CustomScriptExecutionError=18]="CustomScriptExecutionError",e[e.PrebidRequestingBidsError=19]="PrebidRequestingBidsError",e[e.AmazonFetchingBidsError=20]="AmazonFetchingBidsError",e[e.AmazonMappingBidResponseError=21]="AmazonMappingBidResponseError",e[e.HeaderBiddingNotAllFinishedAuctionWarn=22]="HeaderBiddingNotAllFinishedAuctionWarn",e[e.SmartSlotCantFindContainerError=23]="SmartSlotCantFindContainerError",e[e.PluginManagerPluginNotRegisteredError=25]="PluginManagerPluginNotRegisteredError",e[e.GeoEdgeDocumentHeadNotPresentError=26]="GeoEdgeDocumentHeadNotPresentError",e[e.VideoRendererError=27]="VideoRendererError",e[e.GptTaskHandlerSetGlobalTargetingError=28]="GptTaskHandlerSetGlobalTargetingError",e[e.AdServerTaskHandlerSetAdUnitsTargetingError=29]="AdServerTaskHandlerSetAdUnitsTargetingError",e[e.MonitoringServiceAdUnitsDidNotFinishRequestForRefreshError=30]="MonitoringServiceAdUnitsDidNotFinishRequestForRefreshError",e[e.AmazonSandboxProcessingCommandError=33]="AmazonSandboxProcessingCommandError",e[e.SmartSlotParentNotFoundError=35]="SmartSlotParentNotFoundError",e[e.ErrorFetchingIvtData=36]="ErrorFetchingIvtData",e[e.GPTRefreshQueError=37]="GPTRefreshQueError",e[e.GPTFailedToAttachKeyValue=38]="GPTFailedToAttachKeyValue",e[e.MonetizationCallbackQueError=39]="MonetizationCallbackQueError",e[e.RewardedAdContainingElementDoesNotExistError=40]="RewardedAdContainingElementDoesNotExistError",e[e.RewardedAdContainingElementPositionError=41]="RewardedAdContainingElementPositionError",e[e.AdSlotWrapperElementNotFoundError=42]="AdSlotWrapperElementNotFoundError",e[e.AdhesiveContainerNotFound=43]="AdhesiveContainerNotFound",e[e.VideoAdError=44]="VideoAdError",e[e.RequestedCompletionOfAdComparisonGroupFailed=45]="RequestedCompletionOfAdComparisonGroupFailed",e[e.AmazonPluginCouldNotFindSplitUpAuctionsMainAuctionId=47]="AmazonPluginCouldNotFindSplitUpAuctionsMainAuctionId",e[e.VastUrlCallbackNotProvided=48]="VastUrlCallbackNotProvided",e[e.ConfiantDocumentHeadNotPresentError=49]="ConfiantDocumentHeadNotPresentError",e[e.ProvidedEmailIsInvalid=50]="ProvidedEmailIsInvalid",e[e.AmazonPublisherAudiencesTokenIsUndefined=51]="AmazonPublisherAudiencesTokenIsUndefined",e[e.AmazonPublisherAudiencesDisabled=52]="AmazonPublisherAudiencesDisabled",e[e.InvalidSideRailPosition=53]="InvalidSideRailPosition",e[e.ErrorFetchingFloorData=54]="ErrorFetchingFloorData",e[e.DynamicInsertionWarning=55]="DynamicInsertionWarning",e[e.InvalidTaxonomyId=56]="InvalidTaxonomyId",e[e.AdServerAdapterNotFound=57]="AdServerAdapterNotFound",e[e.PageLevelTargetingCannotBeSetAfterGoogletagEnableServices=58]="PageLevelTargetingCannotBeSetAfterGoogletagEnableServices",e[e.DisplayRequestedForUndefinedSlot=59]="DisplayRequestedForUndefinedSlot",e[e.GPTOutOfPageAdSlotDefinitionTypeNotSupportedError=60]="GPTOutOfPageAdSlotDefinitionTypeNotSupportedError",e[e.AdUnitElementStylingError=61]="AdUnitElementStylingError",e[e.TcfApiNotAvailableForCompliantCmpError=62]="TcfApiNotAvailableForCompliantCmpError",e[e.UspApiNotAvailableForCompliantCmpError=63]="UspApiNotAvailableForCompliantCmpError",e[e.MissingFactory=65]="MissingFactory",e[e.AdhesiveParentNotFound=66]="AdhesiveParentNotFound",e[e.ErrorFetchingDynamicBidAdjustments=67]="ErrorFetchingDynamicBidAdjustments",e[e.AdkaoraDidNotRender=68]="AdkaoraDidNotRender",e[e.LoadPluginDidNotFoundElement=69]="LoadPluginDidNotFoundElement",e[e.NoBidsReceivedForAdRequestError=74]="NoBidsReceivedForAdRequestError",e[e.IframeDocumentNotFound=75]="IframeDocumentNotFound",e[e.AmazonOrtbTooLong=78]="AmazonOrtbTooLong",e[e.LazyLoadingInitialAuctionSyncFinishedContainsMultipleAdUnitsError=79]="LazyLoadingInitialAuctionSyncFinishedContainsMultipleAdUnitsError",e[e.RewardedAdTimeoutError=80]="RewardedAdTimeoutError",e[e.RewardedAdClosed=81]="RewardedAdClosed",e[e.RewardedSlotMissing=82]="RewardedSlotMissing",e[e.RewardedSlotRequestedTooFast=83]="RewardedSlotRequestedTooFast",e[e.TagManagerPluginActivationScriptError=80]="TagManagerPluginActivationScriptError",e[e.TagManagerCouldNotInjectTag=81]="TagManagerCouldNotInjectTag",e[e.ErrorRenderingPrebidAd=82]="ErrorRenderingPrebidAd",e[e.CustomTargetingFunctionNotFound=83]="CustomTargetingFunctionNotFound",e[e.PublisherApiNotImplemented=84]="PublisherApiNotImplemented",e[e.PublisherApiCallbackNotAFunction=85]="PublisherApiCallbackNotAFunction",e[e.PublisherApiAdUnitElementIdNotString=86]="PublisherApiAdUnitElementIdNotString",e[e.NoAdServerEmptyRenderedAdSlotWarn=87]="NoAdServerEmptyRenderedAdSlotWarn",e[e.FailedToSendAnalyticsEvent=88]="FailedToSendAnalyticsEvent",e[e.LoadPluginDidNotFindConfiguration=89]="LoadPluginDidNotFindConfiguration",e[e.TrafficDataAnalyticsAdapterEndpointNotConfigured=90]="TrafficDataAnalyticsAdapterEndpointNotConfigured",e[e.TaxonomyCouldNotBeDecoded=91]="TaxonomyCouldNotBeDecoded",e[e.AdUnitRefreshAnomaly=92]="AdUnitRefreshAnomaly",e[e.PublisherApiAdUnitElementIdsNotArrayOfStrings=93]="PublisherApiAdUnitElementIdsNotArrayOfStrings",e}({})},2101:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});let i=function(e){return e[e.MonitoringServicePreMiddlewareHook=-1e6]="MonitoringServicePreMiddlewareHook",e[e.LazyLoadAuctionCombinatorMiddleware=400]="LazyLoadAuctionCombinatorMiddleware",e[e.DynamicInjectionAuctionRequestedMiddleware=500]="DynamicInjectionAuctionRequestedMiddleware",e[e.DynamicInjectionAuctionRequestedMiddlewareDecorator=550]="DynamicInjectionAuctionRequestedMiddlewareDecorator",e[e.HeaderBiddingManagerAuctionRequestedMiddleware=600]="HeaderBiddingManagerAuctionRequestedMiddleware",e[e.InvalidTrafficAuctionRequestedMiddleware=700]="InvalidTrafficAuctionRequestedMiddleware",e[e.PubxAuctionRequestedMiddleware=800]="PubxAuctionRequestedMiddleware",e[e.AssertiveYieldAuctionRequestedMiddleware=801]="AssertiveYieldAuctionRequestedMiddleware",e[e.IntroPageAuctionRequested=750]="IntroPageAuctionRequested",e[e.AdLoadAuctionRequestedMiddleware=900]="AdLoadAuctionRequestedMiddleware",e[e.SideRailPluginAuctionRequestedMiddleware=910]="SideRailPluginAuctionRequestedMiddleware",e[e.FakeSkinServiceAuctionRequestedMiddleware=950]="FakeSkinServiceAuctionRequestedMiddleware",e[e.AdComparisonAuctionRequestedMiddleware=1e3]="AdComparisonAuctionRequestedMiddleware",e[e.PadoAuctionRequestedMiddleware=1100]="PadoAuctionRequestedMiddleware",e[e.AdhesiveAuctionRequestedMiddleware=1500]="AdhesiveAuctionRequestedMiddleware",e[e.SmartSlotAuctionRequestedMiddleware=2e3]="SmartSlotAuctionRequestedMiddleware",e[e.BaseHeaderBidderPluginAuctionRequestedMiddleware=2500]="BaseHeaderBidderPluginAuctionRequestedMiddleware",e[e.SmartSlotAdUnitLoadedMiddleware=3e3]="SmartSlotAdUnitLoadedMiddleware",e[e.SmartSlotAdUnitDestroyedMiddleware=5e3]="SmartSlotAdUnitDestroyedMiddleware",e[e.SmartSlotAdUnitRenderedBidderMiddleware=6e3]="SmartSlotAdUnitRenderedBidderMiddleware",e[e.LazyLoadingAuctionSyncFinishedMiddleware=7900]="LazyLoadingAuctionSyncFinishedMiddleware",e[e.SmartSlotAuctionSyncFinishedMiddleware=8e3]="SmartSlotAuctionSyncFinishedMiddleware",e[e.AdComparisonAuctionSyncFinishedMiddleware=9e3]="AdComparisonAuctionSyncFinishedMiddleware",e[e.GptCompleteAdComparisonRequestedMiddleware=1e4]="GptCompleteAdComparisonRequestedMiddleware",e[e.SmartSlotClearOldKeyValuesAndAttachNewPairsRequestedMiddleware=11e3]="SmartSlotClearOldKeyValuesAndAttachNewPairsRequestedMiddleware",e[e.SmartSlotAttachKeyValueRequestedMiddleware=12e3]="SmartSlotAttachKeyValueRequestedMiddleware",e[e.InvalidTrafficAdUnitAdServerRefreshRequestedMiddleware=12250]="InvalidTrafficAdUnitAdServerRefreshRequestedMiddleware",e[e.PubxAdUnitAdServerRefreshRequestedMiddleware=12500]="PubxAdUnitAdServerRefreshRequestedMiddleware",e[e.IntroPageAdServerRefreshRequestedMiddleware=12750]="IntroPageAdServerRefreshRequestedMiddleware",e[e.AdhesiveCompanionAdServerRefreshRequestedMiddleware=12875]="AdhesiveCompanionAdServerRefreshRequestedMiddleware",e[e.AdQualityPluginAdUnitAdServerRefreshRequestedMiddleware=13e3]="AdQualityPluginAdUnitAdServerRefreshRequestedMiddleware",e[e.AdhesiveAdUnitAdServerRefreshRequestedMiddleware=13500]="AdhesiveAdUnitAdServerRefreshRequestedMiddleware",e[e.LazyLoadManagerPluginAdUnitAdditionalSlotCreatedMiddleware=14e3]="LazyLoadManagerPluginAdUnitAdditionalSlotCreatedMiddleware",e[e.SideRailPluginAdUnitAdditionalSlotCreatedMiddleware=14500]="SideRailPluginAdUnitAdditionalSlotCreatedMiddleware",e[e.BaseHeaderBidderPluginAdUnitAdditionalSlotCreatedMiddleware=15e3]="BaseHeaderBidderPluginAdUnitAdditionalSlotCreatedMiddleware",e[e.DynamicInsertionPluginAdditionalSlotCreatedMiddleware=16e3]="DynamicInsertionPluginAdditionalSlotCreatedMiddleware",e[e.MonitoringServicePostMiddlewareHook=1e6]="MonitoringServicePostMiddlewareHook",e}({})},9021:function(e,t,n){var i;e.exports=(i=i||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==n.g&&n.g.crypto&&(i=n.g.crypto),!i)try{i=n(477)}catch(e){}var r=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},d=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=d.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var a=0;a<r;a+=4)t[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=d.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new c.init(t,e)}}),l=s.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(n,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(n,t)}},h=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},g=a.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,o=i.sigBytes,s=this.blockSize,a=o/(4*s),d=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*d,o);if(d){for(var u=0;u<d;u+=s)this._doProcessBlock(r,u);n=r.splice(0,d),i.sigBytes-=l}return new c.init(n,l)},clone:function(){var e=d.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(a.Hasher=g.extend({cfg:d.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),i)},4636:function(e,t,n){var i;e.exports=(i=n(9021),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,s=e[t+0],d=e[t+1],h=e[t+2],g=e[t+3],f=e[t+4],m=e[t+5],v=e[t+6],b=e[t+7],y=e[t+8],A=e[t+9],w=e[t+10],S=e[t+11],I=e[t+12],E=e[t+13],_=e[t+14],x=e[t+15],P=o[0],T=o[1],O=o[2],C=o[3];P=c(P,T,O,C,s,7,a[0]),C=c(C,P,T,O,d,12,a[1]),O=c(O,C,P,T,h,17,a[2]),T=c(T,O,C,P,g,22,a[3]),P=c(P,T,O,C,f,7,a[4]),C=c(C,P,T,O,m,12,a[5]),O=c(O,C,P,T,v,17,a[6]),T=c(T,O,C,P,b,22,a[7]),P=c(P,T,O,C,y,7,a[8]),C=c(C,P,T,O,A,12,a[9]),O=c(O,C,P,T,w,17,a[10]),T=c(T,O,C,P,S,22,a[11]),P=c(P,T,O,C,I,7,a[12]),C=c(C,P,T,O,E,12,a[13]),O=c(O,C,P,T,_,17,a[14]),P=l(P,T=c(T,O,C,P,x,22,a[15]),O,C,d,5,a[16]),C=l(C,P,T,O,v,9,a[17]),O=l(O,C,P,T,S,14,a[18]),T=l(T,O,C,P,s,20,a[19]),P=l(P,T,O,C,m,5,a[20]),C=l(C,P,T,O,w,9,a[21]),O=l(O,C,P,T,x,14,a[22]),T=l(T,O,C,P,f,20,a[23]),P=l(P,T,O,C,A,5,a[24]),C=l(C,P,T,O,_,9,a[25]),O=l(O,C,P,T,g,14,a[26]),T=l(T,O,C,P,y,20,a[27]),P=l(P,T,O,C,E,5,a[28]),C=l(C,P,T,O,h,9,a[29]),O=l(O,C,P,T,b,14,a[30]),P=u(P,T=l(T,O,C,P,I,20,a[31]),O,C,m,4,a[32]),C=u(C,P,T,O,y,11,a[33]),O=u(O,C,P,T,S,16,a[34]),T=u(T,O,C,P,_,23,a[35]),P=u(P,T,O,C,d,4,a[36]),C=u(C,P,T,O,f,11,a[37]),O=u(O,C,P,T,b,16,a[38]),T=u(T,O,C,P,w,23,a[39]),P=u(P,T,O,C,E,4,a[40]),C=u(C,P,T,O,s,11,a[41]),O=u(O,C,P,T,g,16,a[42]),T=u(T,O,C,P,v,23,a[43]),P=u(P,T,O,C,A,4,a[44]),C=u(C,P,T,O,I,11,a[45]),O=u(O,C,P,T,x,16,a[46]),P=p(P,T=u(T,O,C,P,h,23,a[47]),O,C,s,6,a[48]),C=p(C,P,T,O,b,10,a[49]),O=p(O,C,P,T,_,15,a[50]),T=p(T,O,C,P,m,21,a[51]),P=p(P,T,O,C,I,6,a[52]),C=p(C,P,T,O,g,10,a[53]),O=p(O,C,P,T,w,15,a[54]),T=p(T,O,C,P,d,21,a[55]),P=p(P,T,O,C,y,6,a[56]),C=p(C,P,T,O,x,10,a[57]),O=p(O,C,P,T,v,15,a[58]),T=p(T,O,C,P,E,21,a[59]),P=p(P,T,O,C,f,6,a[60]),C=p(C,P,T,O,S,10,a[61]),O=p(O,C,P,T,h,15,a[62]),T=p(T,O,C,P,A,21,a[63]),o[0]=o[0]+P|0,o[1]=o[1]+T|0,o[2]=o[2]+O|0,o[3]=o[3]+C|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,d=a.words,c=0;c<4;c++){var l=d[c];d[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function l(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function u(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function p(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(d),t.HmacMD5=o._createHmacHelper(d)}(Math),i.MD5)},5471:function(e,t,n){var i,r,o,s,a,d,c,l;e.exports=(l=n(9021),r=(i=l).lib,o=r.WordArray,s=r.Hasher,a=i.algo,d=[],c=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=0;c<80;c++){if(c<16)d[c]=0|e[t+c];else{var l=d[c-3]^d[c-8]^d[c-14]^d[c-16];d[c]=l<<1|l>>>31}var u=(i<<5|i>>>27)+a+d[c];u+=c<20?1518500249+(r&o|~r&s):c<40?1859775393+(r^o^s):c<60?(r&o|r&s|o&s)-1894007588:(r^o^s)-899497514,a=s,s=o,o=r<<30|r>>>2,r=i,i=u}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=s._createHelper(c),i.HmacSHA1=s._createHmacHelper(c),l.SHA1)},3009:function(e,t,n){var i;e.exports=(i=n(9021),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,s=t.algo,a=[],d=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)t(i)&&(r<8&&(a[r]=n(e.pow(i,.5))),d[r]=n(e.pow(i,1/3)),r++),i++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6],p=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var g=c[h-15],f=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,m=c[h-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[h]=f+c[h-7]+v+c[h-16]}var b=i&r^i&o^r&o,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),A=p+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&u)+d[h]+c[h];p=u,u=l,l=a,a=s+A|0,s=o,o=r,r=i,i=A+(y+b)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),i.SHA256)},4744:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,n){return e.concat(t).map((function(e){return i(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function s(e,t){try{return t in e}catch(e){return!1}}function a(e,t,n){var r={};return n.isMergeableObject(e)&&o(e).forEach((function(t){r[t]=i(e[t],n)})),o(t).forEach((function(o){(function(e,t){return s(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(s(e,o)&&n.isMergeableObject(t[o])?r[o]=function(e,t){if(!t.customMerge)return d;var n=t.customMerge(e);return"function"==typeof n?n:d}(o,n)(e[o],t[o],n):r[o]=i(t[o],n))})),r}function d(e,n,o){(o=o||{}).arrayMerge=o.arrayMerge||r,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=i;var s=Array.isArray(n);return s===Array.isArray(e)?s?o.arrayMerge(e,n,o):a(e,n,o):i(n,o)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return d(e,n,t)}),{})};var c=d;e.exports=c},8389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var n=e(t);return t.add(n),n}},n=function(e){return function(t,n){return e.set(t,n),n}},i=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,o=2*r,s=function(e,t){return function(n){var s=t.get(n),a=void 0===s?n.size:s<o?s+1:0;if(!n.has(a))return e(n,a);if(n.size<r){for(;n.has(a);)a=Math.floor(Math.random()*o);return e(n,a)}if(n.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(a);)a=Math.floor(Math.random()*i);return e(n,a)}},a=new WeakMap,d=n(a),c=s(d,a),l=t(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(t)},328:(e,t,n)=>{n(8624),e.exports=self.fetch.bind(self)},6075:e=>{var t;self,t=()=>{return e={7629:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(9474),s=n(1687),a=n(8652),d=n(8160),c=n(3292),l=n(6354),u=n(8901),p=n(9708),h=n(6914),g=n(2294),f=n(6133),m=n(1152),v=n(8863),b=n(2036),y={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new g.Ids,this._preferences=null,this._refs=new f.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return i("function"==typeof p.describe,"Manifest functionality disabled"),p.describe(this)}allow(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.verifyFlat(t,"allow"),this._values(t,"_valids")}alter(e){i(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),i(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const n in e){const r=e[n];i("function"==typeof r,"Alteration adjuster for",n,"must be a function"),t.$_terms.alterations.push({target:n,adjuster:r})}return t.$_temp.ruleset=!1,t}artifact(e){return i(void 0!==e,"Artifact cannot be undefined"),i(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return i(!1===e||"string"==typeof e,"Invalid to value"),i(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return i(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return i(e,"Missing error"),i(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(void 0!==e,"Missing example"),d.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(i(!t,"Cannot combine options with description"),t=e.description,e=e.method),i("function"==typeof e,"Method must be a function"),i(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(i("string"==typeof e,"id must be a non-empty string"),i(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._values(t,"_invalids")}label(e){return i(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return i(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i(t.length,"Missing notes");for(const e of t)i(e&&"string"==typeof e,"Notes must be non-empty strings");return this._inner("notes",t)}only(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){i(e,"Missing preferences"),i(void 0===e.context,"Cannot override context"),i(void 0===e.externals,"Cannot override externals"),i(void 0===e.warnings,"Cannot override warnings"),i(void 0===e.debug,"Cannot override debug"),d.checkPreferences(e);const t=this.clone();return t._preferences=d.preferences(t._preferences,e),t}presence(e){return i(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"raw":void 0)}result(e){return i(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),n=void 0!==e&&!e;return t._preferences=d.preferences(t._preferences,{convert:n}),t}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"strip":void 0)}tag(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i(t.length,"Missing tags");for(const e of t)i(e&&"string"==typeof e,"Tags must be non-empty strings");return this._inner("tags",t)}unit(e){return i(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d.verifyFlat(t,"valid");const i=this.allow(...t);return i.$_setFlag("only",!!i._valids,{clone:!1}),i}when(e,t){const n=this.clone();n.$_terms.whens||(n.$_terms.whens=[]);const r=c.when(n,e,t);if(!["any","link"].includes(n.type)){const e=r.is?[r]:r.switch;for(const t of e)i(!t.then||"any"===t.then.type||t.then.type===n.type,"Cannot combine",n.type,"with",t.then&&t.then.type),i(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===n.type,"Cannot combine",n.type,"with",t.otherwise&&t.otherwise.type)}return n.$_terms.whens.push(r),n.$_mutateRebuild()}cache(e){i(!this._inRuleset(),"Cannot set caching inside a ruleset"),i(!this._cache,"Cannot override schema cache"),i(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||a.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){i(d.isSchema(e),"Invalid schema object"),i("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),i(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),i(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const n=e.clone();for(const e of Object.keys(t))"type"!==e&&(n[e]=t[e]);t=n}t._ids.concat(e._ids),t._refs.register(e,f.toSibling),t._preferences=t._preferences?d.preferences(t._preferences,e._preferences):e._preferences,t._valids=b.merge(t._valids,e._valids,e._invalids),t._invalids=b.merge(t._invalids,e._invalids,e._valids);for(const n of e._singleRules.keys())t._singleRules.has(n)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==n)),t._singleRules.delete(n));for(const n of e._rules)e._definition.rules[n.method].multi||t._singleRules.set(n.name,n),t._rules.push(n);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else s(t._flags,e._flags);for(const n in e.$_terms){const i=e.$_terms[n];i?t.$_terms[n]?t.$_terms[n]=t.$_terms[n].concat(i):t.$_terms[n]=i.slice():t.$_terms[n]||(t.$_terms[n]=i)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return i(!e.base,"Cannot extend type with another base"),u.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){i(!this._inRuleset(),"Cannot fork inside a ruleset");let n=this;for(let i of[].concat(e))i=Array.isArray(i)?i:i.split("."),n=n._ids.fork(i,t,n);return n.$_temp.ruleset=!1,n}rule(e){const t=this._definition;d.assertOptions(e,Object.keys(t.modifiers)),i(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const n=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;i(n>=0&&n<this._rules.length,"Cannot apply rules to empty ruleset");const o=this.clone();for(let s=n;s<o._rules.length;++s){const n=o._rules[s],a=r(n);for(const r in e)t.modifiers[r](a,e[r]),i(a.name===n.name,"Cannot change rule name");o._rules[s]=a,o._singleRules.get(a.name)===n&&o._singleRules.set(a.name,a)}return o.$_temp.ruleset=!1,o.$_mutateRebuild()}get ruleset(){i(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),i(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:n,adjuster:r}of this.$_terms.alterations)e.includes(n)&&(t=r(t),i(d.isSchema(t),"Alteration adjuster for",n,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(e,t){return v.entry(e,this,t)}validateAsync(e,t){return v.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),i(e&&"object"==typeof e,"Invalid options"),i(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)i("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const n=this._definition.rules[t.method],r=t.args;i(n,"Unknown rule",t.method);const o=this.clone();if(r){i(1===Object.keys(r).length||Object.keys(r).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in r){let s=r[e];if(n.argsByName){const a=n.argsByName.get(e);if(a.ref&&d.isResolvable(s))t._resolve.push(e),o.$_mutateRegister(s);else if(a.normalize&&(s=a.normalize(s),r[e]=s),a.assert){const t=d.validateArg(s,e,a);i(!t,t,"or reference")}}void 0!==s?r[e]=s:delete r[e]}}return n.multi||(o._ruleRemove(t.name,{clone:!1}),o._singleRules.set(t.name,t)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),n.priority?o._rules.unshift(t):o._rules.push(t),o}$_compile(e,t){return c.schema(this.$_root,e,t)}$_createError(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=!1!==o.flags?this._flags:{},a=o.messages?h.merge(this._definition.messages,o.messages):this._definition.messages;return new l.Report(e,t,n,s,a,i,r)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,n,i){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,t.snapshot();const r=!v.validate(e,this,t,n,i).errors;return t.restore(),r}$_modify(e){return d.assertOptions(e,["each","once","ref","schema"]),g.schema(this,e)||this}$_mutateRebuild(){return i(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,t)=>{let{source:n,name:i,path:r,key:o}=t;const s=this._definition[n][i]&&this._definition[n][i].register;!1!==s&&this.$_mutateRegister(e,{family:s,key:o})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e){let{family:t,key:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._refs.register(e,t),this._ids.register(e,{key:n})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const r=this._definition.flags[e]||{};if(o(t,r.default)&&(t=void 0),o(t,this._flags[e]))return this;const s=!1!==n.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this[e][d.symbols.parent].call(this,...n)}$_validate(e,t,n){return v.validate(e,this,t,n)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=r(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const n in t){const i=t[n];e.$_terms[n]=i.init}return e.$_mutateRebuild()}_default(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.assertOptions(n,"literal"),i(void 0!==t,"Missing",e,"value"),i("function"==typeof t||!n.literal,"Only function value supports literal option"),"function"==typeof t&&n.literal&&(t={[d.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,n){if(!this.$_terms.whens)return{schema:this};const i=[],r=[];for(let o=0;o<this.$_terms.whens.length;++o){const s=this.$_terms.whens[o];if(s.concat){i.push(s.concat),r.push(`${o}.concat`);continue}const a=s.ref?s.ref.resolve(e,t,n):e,d=s.is?[s]:s.switch,c=r.length;for(let c=0;c<d.length;++c){const{is:l,then:u,otherwise:p}=d[c],h=`${o}${s.switch?"."+c:""}`;if(l.$_match(a,t.nest(l,`${h}.is`),n)){if(u){const o=t.localize([...t.path,`${h}.then`],t.ancestors,t.schemas),{schema:s,id:a}=u._generate(e,o,n);i.push(s),r.push(`${h}.then${a?`(${a})`:""}`);break}}else if(p){const o=t.localize([...t.path,`${h}.otherwise`],t.ancestors,t.schemas),{schema:s,id:a}=p._generate(e,o,n);i.push(s),r.push(`${h}.otherwise${a?`(${a})`:""}`);break}}if(s.break&&r.length>c)break}const o=r.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",o),!o)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[o])return{schema:this.$_temp.whens[o],id:o};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,n));for(const e of i)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...i]),this.$_temp.whens[o]=s,{schema:s,id:o}}_inner(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const r=this.clone();return r.$_terms[e]&&!n.override||(r.$_terms[e]=[]),n.single?r.$_terms[e].push(t):r.$_terms[e].push(...t),r.$_temp.ruleset=!1,r}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(e))return this;const n=!1!==t.clone?this.clone():this;n._singleRules.delete(e);const i=[];for(let t=0;t<n._rules.length;++t){const r=n._rules[t];r.name!==e||r.keep?i.push(r):n._inRuleset()&&t<n.$_temp.ruleset&&--n.$_temp.ruleset}return n._rules=i,n}_values(e,t){d.verifyFlat(e,t.slice(1,-1));const n=this.clone(),r=e[0]===d.symbols.override;if(r&&(e=e.slice(1)),!n[t]&&e.length?n[t]=new b:r&&(n[t]=e.length?new b:null,n.$_mutateRebuild()),!n[t])return n;r&&n[t].override();for(const r of e){i(void 0!==r,"Cannot call allow/valid/invalid with undefined"),i(r!==d.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";n[e]&&(n[e].remove(r),n[e].length||(i("_valids"===t||!n._flags.only,"Setting invalid value",r,"leaves schema rejecting all values due to previous valid rule"),n[e]=null)),n[t].add(r,n._refs)}return n}}};y.Base.prototype[d.symbols.any]={version:d.version,compile:c.compile,root:"$_root"},y.Base.prototype.isImmutable=!0,y.Base.prototype.deny=y.Base.prototype.invalid,y.Base.prototype.disallow=y.Base.prototype.invalid,y.Base.prototype.equal=y.Base.prototype.valid,y.Base.prototype.exist=y.Base.prototype.required,y.Base.prototype.not=y.Base.prototype.invalid,y.Base.prototype.options=y.Base.prototype.prefs,y.Base.prototype.preferences=y.Base.prototype.prefs,e.exports=new y.Base},8652:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assertOptions(e,["max"]),i(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let n=this._map.get(e);if(n)return n.value=t,void this._list.first(n);n=this._list.unshift({key:e,value:t}),this._map.set(e,n),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),r(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:n}=e;return t.prev=n,n&&(n.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,n)=>{"use strict";const i=n(375),r=n(7916),o=n(5934);let s,a;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=o.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";i(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const r=Object.keys(e).filter((e=>!t.includes(e)));i(0===r.length,`${n} contain unknown keys: ${r}`)},t.checkPreferences=function(e){a=a||n(3378);const t=a.preferences.validate(e);if(t.error)throw new r([t.error.details[0].message])},t.compare=function(e,t,n){switch(n){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return d.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e&&e[t.symbols.any];return!!r&&(i(n.legacy||r.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,i){s=s||n(6914),e=e||{},i=i||{};const r=Object.assign({},e,i);return i.errors&&e.errors&&(r.errors=Object.assign({},e.errors,i.errors),r.errors.wrap=Object.assign({},e.errors.wrap,i.errors.wrap)),i.messages&&(r.messages=s.compile(i.messages,e.messages)),delete r[t.symbols.prefs],r},t.tryWithPath=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,n.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,n,i){let{assert:r,message:o}=i;if(t.isSchema(r)){const t=r.validate(e);if(!t.error)return;return t.error.message}if(!r(e))return n?`${n} ${o}`:o},t.verifyFlat=function(e,t){for(const n of e)i(!Array.isArray(n),"Method no longer accepts array arguments:",t)}},3292:(e,t,n)=>{"use strict";const i=n(375),r=n(8160),o=n(6133),s={};t.schema=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.assertOptions(n,["appendPath","override"]);try{return s.schema(e,t,n)}catch(e){throw n.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,t,n){i(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(i(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const o=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return!1!==n.override?t.valid(e.override,...r):t.valid(...r)};if(s.simple(t))return o(e,t);if("function"==typeof t)return e.custom(t);if(i("object"==typeof t,"Invalid schema content:",typeof t),r.isResolvable(t))return o(e,t);if(r.isSchema(t))return t;if(Array.isArray(t)){for(const n of t)if(!s.simple(n))return e.alternatives().try(...t);return o(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?o(e.date(),t):(i(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return o.isRef(e)?e:o.create(e,t)},t.compile=function(e,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.assertOptions(o,["legacy"]);const a=n&&n[r.symbols.any];if(a)return i(o.legacy||a.version===r.version,"Cannot mix different versions of joi schemas:",a.version,r.version),n;if("object"!=typeof n||!o.legacy)return t.schema(e,n,{appendPath:!0});const d=s.walk(n);return d?d.compile(d.root,n):t.schema(e,n,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[r.symbols.any];if(t)return{root:e[t.root],compile:t.compile};i(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const n=s.walk(e[t]);if(n)return n}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,n,a){if(void 0===a&&(i(n&&"object"==typeof n,"Missing options"),a=n,n=o.create(".")),Array.isArray(a)&&(a={switch:a}),r.assertOptions(a,["is","not","then","otherwise","switch","break"]),r.isSchema(n))return i(void 0===a.is,'"is" can not be used with a schema condition'),i(void 0===a.not,'"not" can not be used with a schema condition'),i(void 0===a.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:n,then:a.then,otherwise:a.otherwise,break:a.break});if(i(o.isRef(n)||"string"==typeof n,"Invalid condition:",n),i(void 0===a.not||void 0===a.is,'Cannot combine "is" with "not"'),void 0===a.switch){let d=a;void 0!==a.not&&(d={is:a.not,then:a.otherwise,otherwise:a.then,break:a.break});let c=void 0!==d.is?e.$_compile(d.is):e.$_root.invalid(null,!1,0,"").required();return i(void 0!==d.then||void 0!==d.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),i(void 0===d.break||void 0===d.then||void 0===d.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===a.is||o.isRef(a.is)||r.isSchema(a.is)||(c=c.required()),s.condition(e,{ref:t.ref(n),is:c,then:d.then,otherwise:d.otherwise,break:d.break})}i(Array.isArray(a.switch),'"switch" must be an array'),i(void 0===a.is,'Cannot combine "switch" with "is"'),i(void 0===a.not,'Cannot combine "switch" with "not"'),i(void 0===a.then,'Cannot combine "switch" with "then"');const d={ref:t.ref(n),switch:[],break:a.break};for(let t=0;t<a.switch.length;++t){const n=a.switch[t],s=t===a.switch.length-1;r.assertOptions(n,s?["is","then","otherwise"]:["is","then"]),i(void 0!==n.is,'Switch statement missing "is"'),i(void 0!==n.then,'Switch statement missing "then"');const c={is:e.$_compile(n.is),then:e.$_compile(n.then)};if(o.isRef(n.is)||r.isSchema(n.is)||(c.is=c.is.required()),s){i(void 0===a.otherwise||void 0===n.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==a.otherwise?a.otherwise:n.otherwise;void 0!==t&&(i(void 0===d.break,"Cannot specify both otherwise and break"),c.otherwise=e.$_compile(t))}d.switch.push(c)}return d},s.condition=function(e,t){for(const n of["then","otherwise"])void 0===t[n]?delete t[n]:t[n]=e.$_compile(t[n]);return t}},6354:(e,t,n)=>{"use strict";const i=n(5688),r=n(8160),o=n(3328);t.Report=class{constructor(e,n,i,r,o,s,a){if(this.code=e,this.flags=r,this.messages=o,this.path=s.path,this.prefs=a,this.state=s,this.value=n,this.message=null,this.template=null,this.local=i||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,n){return t.template(this.value,e,n||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const n of e)"object"!=typeof n&&("string"==typeof n?(t&&(t+="."),t+=n):t+=`[${n}]`);return t},t.template=function(e,t,n,i,s){if(!t)return;if(o.isTemplate(t))return"root"!==n?t:null;let a=s.errors.language;if(r.isResolvable(a)&&(a=a.resolve(e,i,s)),a&&t[a]){if(void 0!==t[a][n])return t[a][n];if(void 0!==t[a]["*"])return t[a]["*"]}return t[n]?t[n]:t["*"]},t.label=function(e,n,i,r){if(e.label)return e.label;if(!i.errors.label)return"";let o=n.path;return"key"===i.errors.label&&n.path.length>1&&(o=n.path.slice(-1)),t.path(o)||t.template(null,i.messages,"root",n,i)||r&&t.template(null,r,"root",n,i)||"value"},t.process=function(e,n,i){if(!e)return null;const{override:r,message:o,details:s}=t.details(e);if(r)return r;if(i.errors.stack)return new t.ValidationError(o,s,n);const a=Error.stackTraceLimit;Error.stackTraceLimit=0;const d=new t.ValidationError(o,s,n);return Error.stackTraceLimit=a,d},t.details=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];const i=[];for(const r of e){if(r instanceof Error){if(!1!==t.override)return{override:r};const e=r.toString();n.push(e),i.push({message:e,type:"override",context:{error:r}});continue}const e=r.toString();n.push(e),i.push({message:e,path:r.path.filter((e=>"object"!=typeof e)),type:r.code,context:r.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:i}},t.ValidationError=class extends Error{constructor(e,t,n){super(e),this._original=n,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=i.error},8901:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(8160),s=n(6914),a={};t.type=function(e,t){const n=Object.getPrototypeOf(e),d=r(n),c=e._assign(Object.create(d)),l=Object.assign({},t);delete l.base,d._definition=l;const u=n._definition||{};l.messages=s.merge(u.messages,l.messages),l.properties=Object.assign({},u.properties,l.properties),c.type=l.type,l.flags=Object.assign({},u.flags,l.flags);const p=Object.assign({},u.terms);if(l.terms)for(const e in l.terms){const t=l.terms[e];i(void 0===c.$_terms[e],"Invalid term override for",l.type,e),c.$_terms[e]=t.init,p[e]=t}l.terms=p,l.args||(l.args=u.args),l.prepare=a.prepare(l.prepare,u.prepare),l.coerce&&("function"==typeof l.coerce&&(l.coerce={method:l.coerce}),l.coerce.from&&!Array.isArray(l.coerce.from)&&(l.coerce={method:l.coerce.method,from:[].concat(l.coerce.from)})),l.coerce=a.coerce(l.coerce,u.coerce),l.validate=a.validate(l.validate,u.validate);const h=Object.assign({},u.rules);if(l.rules)for(const e in l.rules){const t=l.rules[e];i("object"==typeof t,"Invalid rule definition for",l.type,e);let n=t.method;if(void 0===n&&(n=function(){return this.$_addRule(e)}),n&&(i(!d[e],"Rule conflict in",l.type,e),d[e]=n),i(!h[e],"Rule conflict in",l.type,e),h[e]=t,t.alias){const e=[].concat(t.alias);for(const n of e)d[n]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),i(!t.argsByName.has(e.name),"Duplicated argument name",e.name),o.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}l.rules=h;const g=Object.assign({},u.modifiers);if(l.modifiers)for(const e in l.modifiers){i(!d[e],"Rule conflict in",l.type,e);const t=l.modifiers[e];i("function"==typeof t,"Invalid modifier definition for",l.type,e);const n=function(t){return this.rule({[e]:t})};d[e]=n,g[e]=t}if(l.modifiers=g,l.overrides){d._super=n,c.$_super={};for(const e in l.overrides)i(n[e],"Cannot override missing",e),l.overrides[e][o.symbols.parent]=n[e],c.$_super[e]=n[e].bind(c);Object.assign(d,l.overrides)}l.cast=Object.assign({},u.cast,l.cast);const f=Object.assign({},u.manifest,l.manifest);return f.build=a.build(l.manifest&&l.manifest.build,u.manifest&&u.manifest.build),l.manifest=f,l.rebuild=a.rebuild(l.rebuild,u.rebuild),c},a.build=function(e,t){return e&&t?function(n,i){return t(e(n,i),i)}:e||t},a.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(n,i){let r;if((!t.from||t.from.includes(typeof n))&&(r=t.method(n,i),r)){if(r.errors||void 0===r.value)return r;n=r.value}if(!e.from||e.from.includes(typeof n)){const t=e.method(n,i);if(t)return t}return r}}:e||t},a.prepare=function(e,t){return e&&t?function(n,i){const r=e(n,i);if(r){if(r.errors||void 0===r.value)return r;n=r.value}return t(n,i)||r}:e||t},a.rebuild=function(e,t){return e&&t?function(n){t(n),e(n)}:e||t},a.validate=function(e,t){return e&&t?function(n,i){const r=t(n,i);if(r){if(r.errors&&(!Array.isArray(r.errors)||r.errors.length))return r;n=r.value}return e(n,i)||r}:e||t}},5107:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(8652),s=n(8160),a=n(3292),d=n(6354),c=n(8901),l=n(9708),u=n(6133),p=n(3328),h=n(1152);let g;const f={types:{alternatives:n(4946),any:n(8068),array:n(546),boolean:n(4937),date:n(7500),function:n(390),link:n(8785),number:n(3832),object:n(8966),string:n(7417),symbol:n(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(f.types))};for(const t of e._types)e[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i(!n.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),f.generate(this,f.types[t],n)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(){return this.any()[t](...arguments)};Object.assign(e,f.methods);for(const t in f.aliases){const n=f.aliases[t];e[t]=e[n]}return e.x=e.expression,h.setup&&h.setup(e),e}};f.methods={ValidationError:d.ValidationError,version:s.version,cache:o.provider,assert(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];f.assert(e,t,!0,i)},attempt(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return f.assert(e,t,!1,i)},build(e){return i("function"==typeof l.build,"Manifest functionality disabled"),l.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return a.compile(this,e,t)},defaults(e){i("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const n of t._types){const r=e(t[n]());i(s.isSchema(r),"modifier must return a valid schema object"),t[n]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.generate(this,r,t)}}return t},expression(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new p(...t)},extend(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.verifyFlat(t,"extend"),g=g||n(3378),i(t.length,"You need to provide at least one extension"),this.assert(t,g.extensions);const o=Object.assign({},this);o._types=new Set(o._types);for(let e of t){"function"==typeof e&&(e=e(o)),this.assert(e,g.extension);const t=f.expandExtension(e,o);for(const e of t){i(void 0===o[e.type]||o._types.has(e.type),"Cannot override name",e.type);const t=e.base||this.any(),n=c.type(t,e);o._types.add(e.type),o[e.type]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return f.generate(this,n,t)}}}return o},isError:d.ValidationError.isError,isExpression:p.isTemplate,isRef:u.isRef,isSchema:s.isSchema,in(){return u.in(...arguments)},override:s.symbols.override,ref(){return u.create(...arguments)},types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in f.aliases)e[t]=this[t]();return e}},f.assert=function(e,t,n,i){const o=i[0]instanceof Error||"string"==typeof i[0]?i[0]:null,a=null!==o?i[1]:i[0],c=t.validate(e,s.preferences({errors:{stack:!0}},a||{}));let l=c.error;if(!l)return c.value;if(o instanceof Error)throw o;const u=n&&"function"==typeof l.annotate?l.annotate():l.message;throw l instanceof d.ValidationError==0&&(l=r(l)),l.message=o?`${o} ${u}`:u,l},f.generate=function(e,t,n){return i(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&n.length?t._definition.args(t,...n):t},f.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const n=[];for(const i of t._types)if(e.type.test(i)){const r=Object.assign({},e);r.type=i,r.base=t[i](),n.push(r)}return n},e.exports=f.root()},6914:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(3328);t.compile=function(e,t){if("string"==typeof e)return i(!t,"Cannot set single message string"),new o(e);if(o.isTemplate(e))return i(!t,"Cannot set single message template"),e;i("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?r(t):{};for(let n in e){const r=e[n];if("root"===n||o.isTemplate(r)){t[n]=r;continue}if("string"==typeof r){t[n]=new o(r);continue}i("object"==typeof r&&!Array.isArray(r),"Invalid message for",n);const s=n;for(n in t[s]=t[s]||{},r){const e=r[n];"root"===n||o.isTemplate(e)?t[s][n]=e:(i("string"==typeof e,"Invalid message for",n,"in",s),t[s][n]=new o(e))}}return t},t.decompile=function(e){const t={};for(let n in e){const i=e[n];if("root"===n){t.root=i;continue}if(o.isTemplate(i)){t[n]=i.describe({compact:!0});continue}const r=n;for(n in t[r]={},i){const e=i[n];"root"!==n?t[r][n]=e.describe({compact:!0}):t[r].root=e}}return t},t.merge=function(e,n){if(!e)return t.compile(n);if(!n)return e;if("string"==typeof n)return new o(n);if(o.isTemplate(n))return n;const s=r(e);for(let e in n){const t=n[e];if("root"===e||o.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new o(t);continue}i("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const r=e;for(e in s[r]=s[r]||{},t){const n=t[e];"root"===e||o.isTemplate(n)?s[r][e]=n:(i("string"==typeof n,"Invalid message for",e,"in",r),s[r][e]=new o(n))}}return s}},2294:(e,t,n)=>{"use strict";const i=n(375),r=n(8160),o=n(6133),s={};t.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,n]of e._byId.entries())i(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,n);for(const[t,n]of e._byKey.entries())i(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,n)}fork(e,t,n){const o=this._collect(e);o.push({schema:n});const a=o.shift();let d={id:a.id,schema:t(a.schema)};i(r.isSchema(d.schema),"adjuster function failed to return a joi schema type");for(const e of o)d={id:e.id,schema:s.fork(e.schema,d.id,d.schema)};return d.schema}labels(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e[0],i=this._get(n);if(!i)return[...t,...e].join(".");const r=e.slice(1);return t=[...t,i.schema._flags.label||n],r.length?i.schema._ids.labels(r,t):t.join(".")}reach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e[0],r=this._get(n);i(r,"Schema does not contain path",[...t,...e].join("."));const o=e.slice(1);return o.length?r.schema._ids.reach(o,[...t,n]):r.schema}register(e){let{key:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!r.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const n=e._flags.id;if(n){const t=this._byId.get(n);i(!t||t.schema===e,"Cannot add different schemas with the same id:",n),i(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,{schema:e,id:n})}t&&(i(!this._byKey.has(t),"Schema already contains key:",t),i(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=e[0],o=this._get(r);i(o,"Schema does not contain path",[...t,...e].join(".")),n=[o,...n];const s=e.slice(1);return s.length?o.schema._ids._collect(s,[...t,r],n):n}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(e,n,i){const r=t.schema(e,{each:(e,t)=>{let{key:r}=t;if(n===(e._flags.id||r))return i},ref:!1});return r?r.$_mutateRebuild():e},t.schema=function(e,t){let n;for(const i in e._flags){if("_"===i[0])continue;const r=s.scan(e._flags[i],{source:"flags",name:i},t);void 0!==r&&(n=n||e.clone(),n._flags[i]=r)}for(let i=0;i<e._rules.length;++i){const r=e._rules[i],o=s.scan(r.args,{source:"rules",name:r.name},t);if(void 0!==o){n=n||e.clone();const t=Object.assign({},r);t.args=o,n._rules[i]=t,n._singleRules.get(r.name)===r&&n._singleRules.set(r.name,t)}}for(const i in e.$_terms){if("_"===i[0])continue;const r=s.scan(e.$_terms[i],{source:"terms",name:i},t);void 0!==r&&(n=n||e.clone(),n.$_terms[i]=r)}return n},s.scan=function(e,t,n,i,a){const d=i||[];if(null===e||"object"!=typeof e)return;let c;if(Array.isArray(e)){for(let i=0;i<e.length;++i){const r="terms"===t.source&&"keys"===t.name&&e[i].key,o=s.scan(e[i],t,n,[i,...d],r);void 0!==o&&(c=c||e.slice(),c[i]=o)}return c}if(!1!==n.schema&&r.isSchema(e)||!1!==n.ref&&o.isRef(e)){const i=n.each(e,{...t,path:d,key:a});if(i===e)return;return i}for(const i in e){if("_"===i[0])continue;const r=s.scan(e[i],t,n,[i,...d],a);void 0!==r&&(c=c||Object.assign({},e),c[i]=r)}return c}},6133:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(9621),s=n(8160);let a;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i("string"==typeof e,"Invalid reference key:",e),s.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),i(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const n=Object.assign({},d.defaults,t);delete n.prefix;const r=n.separator,o=d.context(e,r,t.prefix);if(n.type=o.type,e=o.key,"value"===n.type)if(o.root&&(i(!r||e[0]!==r,"Cannot specify relative path with root prefix"),n.ancestor="root",e||(e=null)),r&&r===e)e=null,n.ancestor=0;else if(void 0!==n.ancestor)i(!r||!e||e[0]!==r,"Cannot combine prefix with ancestor option");else{const[t,i]=d.ancestor(e,r);i&&""===(e=e.slice(i))&&(e=null),n.ancestor=t}return n.path=r?null===e?[]:e.split(r):[e],new d.Ref(n)},t.in=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,{...n,in:!0})},t.isRef=function(e){return!!e&&!!e[s.symbols.ref]},d.Ref=class{constructor(e){i("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),i([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),i(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),i(!e.map||Array.isArray(e.map),"options.map must be an array"),i(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,e),i("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return i(!this.in||o.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(n.context,t,o):"local"===this.type?this._resolve(r,t,o):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,o):(i(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,o)):this._resolve(e,t,o)}_resolve(e,t,n){let i;if("value"===this.type&&t.mainstay.shadow&&!1!==n.shadow&&(i=t.mainstay.shadow.get(this.absolute(t))),void 0===i&&(i=o(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(i=this.adjust(i)),this.map){const e=this.map.get(i);void 0!==e&&(i=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,i),i}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},d.Ref.prototype[s.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},d.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new d.Ref(e)},d.context=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=e.trim(),n){const i=void 0===n.global?"$":n.global;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"global"};const r=void 0===n.local?"#":n.local;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"local"};const o=void 0===n.root?"/":n.root;if(o!==t&&e.startsWith(o))return{key:e.slice(o.length),type:"value",root:!0}}return{key:e,type:"value"}},d.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let n=2;for(;e[n]===t;)++n;return[n-1,n]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,i){if(e)if(i=void 0===i?t.toParent:i,Array.isArray(e))for(const t of e)this.register(t,i);else if(s.isSchema(e))for(const t of e._refs.refs)t.ancestor-i>=0&&this.refs.push({ancestor:t.ancestor-i,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-i>=0&&this.refs.push({ancestor:e.ancestor-i,root:e.root}),a=a||n(3328),a.isTemplate(e)&&this.register(e.refs(),i)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=r(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,n)=>{"use strict";const i=n(5107),r={};r.wrap=i.string().min(1).max(2).allow(!1),t.preferences=i.object({allowUnknown:i.boolean(),abortEarly:i.boolean(),artifacts:i.boolean(),cache:i.boolean(),context:i.object(),convert:i.boolean(),dateFormat:i.valid("date","iso","string","time","utc"),debug:i.boolean(),errors:{escapeHtml:i.boolean(),label:i.valid("path","key",!1),language:[i.string(),i.object().ref()],render:i.boolean(),stack:i.boolean(),wrap:{label:r.wrap,array:r.wrap,string:r.wrap}},externals:i.boolean(),messages:i.object(),noDefaults:i.boolean(),nonEnumerables:i.boolean(),presence:i.valid("required","optional","forbidden"),skipFunctions:i.boolean(),stripUnknown:i.object({arrays:i.boolean(),objects:i.boolean()}).or("arrays","objects").allow(!0,!1),warnings:i.boolean()}).strict(),r.nameRx=/^[a-zA-Z0-9]\w*$/,r.rule=i.object({alias:i.array().items(i.string().pattern(r.nameRx)).single(),args:i.array().items(i.string(),i.object({name:i.string().pattern(r.nameRx).required(),ref:i.boolean(),assert:i.alternatives([i.function(),i.object().schema()]).conditional("ref",{is:!0,then:i.required()}),normalize:i.function(),message:i.string().when("assert",{is:i.function(),then:i.required()})})),convert:i.boolean(),manifest:i.boolean(),method:i.function().allow(!1),multi:i.boolean(),validate:i.function()}),t.extension=i.object({type:i.alternatives([i.string(),i.object().regex()]).required(),args:i.function(),cast:i.object().pattern(r.nameRx,i.object({from:i.function().maxArity(1).required(),to:i.function().minArity(1).maxArity(2).required()})),base:i.object().schema().when("type",{is:i.object().regex(),then:i.forbidden()}),coerce:[i.function().maxArity(3),i.object({method:i.function().maxArity(3).required(),from:i.array().items(i.string()).single()})],flags:i.object().pattern(r.nameRx,i.object({setter:i.string(),default:i.any()})),manifest:{build:i.function().arity(2)},messages:[i.object(),i.string()],modifiers:i.object().pattern(r.nameRx,i.function().minArity(1).maxArity(2)),overrides:i.object().pattern(r.nameRx,i.function()),prepare:i.function().maxArity(3),rebuild:i.function().arity(1),rules:i.object().pattern(r.nameRx,r.rule),terms:i.object().pattern(r.nameRx,i.object({init:i.array().allow(null).required(),manifest:i.object().pattern(/.+/,[i.valid("schema","single"),i.object({mapped:i.object({from:i.string().required(),to:i.string().required()}).required()})])})),validate:i.function().maxArity(3)}).strict(),t.extensions=i.array().items(i.object(),i.function().arity(1)).strict(),r.desc={buffer:i.object({buffer:i.string()}),func:i.object({function:i.function().required(),options:{literal:!0}}),override:i.object({override:!0}),ref:i.object({ref:i.object({type:i.valid("value","global","local"),path:i.array().required(),separator:i.string().length(1).allow(!1),ancestor:i.number().min(0).integer().allow("root"),map:i.array().items(i.array().length(2)).min(1),adjust:i.function(),iterables:i.boolean(),in:i.boolean(),render:i.boolean()}).required()}),regex:i.object({regex:i.string().min(3)}),special:i.object({special:i.valid("deep").required()}),template:i.object({template:i.string().required(),options:i.object()}),value:i.object({value:i.alternatives([i.object(),i.array()]).required()})},r.desc.entity=i.alternatives([i.array().items(i.link("...")),i.boolean(),i.function(),i.number(),i.string(),r.desc.buffer,r.desc.func,r.desc.ref,r.desc.regex,r.desc.special,r.desc.template,r.desc.value,i.link("/")]),r.desc.values=i.array().items(null,i.boolean(),i.function(),i.number().allow(1/0,-1/0),i.string().allow(""),i.symbol(),r.desc.buffer,r.desc.func,r.desc.override,r.desc.ref,r.desc.regex,r.desc.template,r.desc.value),r.desc.messages=i.object().pattern(/.+/,[i.string(),r.desc.template,i.object().pattern(/.+/,[i.string(),r.desc.template])]),t.description=i.object({type:i.string().required(),flags:i.object({cast:i.string(),default:i.any(),description:i.string(),empty:i.link("/"),failover:r.desc.entity,id:i.string(),label:i.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:i.boolean(),unit:i.string()}).unknown(),preferences:{allowUnknown:i.boolean(),abortEarly:i.boolean(),artifacts:i.boolean(),cache:i.boolean(),convert:i.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:i.boolean(),label:["path","key"],language:[i.string(),r.desc.ref],wrap:{label:r.wrap,array:r.wrap}},externals:i.boolean(),messages:r.desc.messages,noDefaults:i.boolean(),nonEnumerables:i.boolean(),presence:["required","optional","forbidden"],skipFunctions:i.boolean(),stripUnknown:i.object({arrays:i.boolean(),objects:i.boolean()}).or("arrays","objects").allow(!0,!1),warnings:i.boolean()},allow:r.desc.values,invalid:r.desc.values,rules:i.array().min(1).items({name:i.string().required(),args:i.object().min(1),keep:i.boolean(),message:[i.string(),r.desc.messages],warn:i.boolean()}),keys:i.object().pattern(/.*/,i.link("/")),link:r.desc.ref}).pattern(/^[a-z]\w*$/,i.any())},493:(e,t,n)=>{"use strict";const i=n(8571),r=n(9621),o=n(8160),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,n){this.path=e,this.ancestors=t,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=new s.State(e,t,this);return n&&i.schemas&&(i.schemas=[s.schemas(n),...i.schemas]),i}nest(e,t){const n=new s.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[s.schemas(e),...n.schemas],n.debug=t,n}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=i(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return o.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,n){if(!e.length)return;if("strip"===n&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let i=this._values;for(let t=0;t<e.length;++t){const n=e[t];let r=i.get(n);r||(r=new Map,i.set(n,r)),i=r}i[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return r(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const n=e.slice(0,-1),i=e[e.length-1],o=r(this._values,n,{iterables:!0});t?o.set(i,t):o&&o.delete(i)}}},3328:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(5277),s=n(1447),a=n(8160),d=n(6354),c=n(6133),l={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=l.Template=class{constructor(e,t){i("string"==typeof e,"Template source must be a string"),i(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=r(t),this._parse()}_parse(){if(!this.source.includes("{"))return;const e=l.encode(this.source),t=l.split(e);let n=!1;const i=[],r=t.shift();r&&i.push(r);for(const e of t){const t="{"!==e[0],r=t?"}":"}}",o=e.indexOf(r);if(-1===o||"{"===e[1]){i.push(`{${l.decode(e)}`);continue}let s=e.slice(t?0:1,o);const a=":"===s[0];a&&(s=s.slice(1));const d=this._ref(l.decode(s),{raw:t,wrapped:a});i.push(d),"string"!=typeof d&&(n=!0);const c=e.slice(o+r.length);c&&i.push(l.decode(c))}n?this._template=i:this.rendered=i.join("")}static date(e,t){return l.dateFormat[t.dateFormat].call(e)}describe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),t}static build(e){return new l.Template(e.template,e.options)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[a.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,n,i){return this._template&&1===this._template.length?this._part(this._template[0],e,t,n,i,{}):this.render(e,t,n,i)}_part(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.ref?e.ref.resolve(...n):e.formula.evaluate(n)}render(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;const s=[];for(const a of this._template)if("string"==typeof a)s.push(a);else{const d=this._part(a,e,t,n,i,r),c=l.stringify(d,e,t,n,i,r);if(void 0!==c){const e=a.raw||!1===(r.errors&&r.errors.escapeHtml)?c:o(c);s.push(l.wrap(e,a.wrapped&&n.errors.wrap.label))}}return s.join("")}_ref(e,t){let{raw:n,wrapped:i}=t;const r=[],o=e=>{const t=c.create(e,this._settings);return r.push(t),e=>t.resolve(...e)};try{var a=new s.Parser(e,{reference:o,functions:l.functions,constants:l.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(a.single){if("reference"===a.single.type){const e=r[0];return{ref:e,raw:n,refs:r,wrapped:i||"local"===e.type&&"label"===e.key}}return l.stringify(a.single.value)}return{formula:a,raw:n,refs:r}}toString(){return this.source}},l.Template.prototype[a.symbols.template]=!0,l.Template.prototype.isImmutable=!0,l.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>l.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>l.closes.slice(0,t.length)))},l.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},l.split=function(e){const t=[];let n="";for(let i=0;i<e.length;++i){const r=e[i];if("{"===r){let r="";for(;i+1<e.length&&"{"===e[i+1];)r+="{",++i;t.push(n),n=r}else n+=r}return t.push(n),t},l.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},l.stringify=function(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=typeof e,a=i&&i.errors&&i.errors.wrap||{};let d=!1;if(c.isRef(e)&&e.render&&(d=e.in,e=e.resolve(t,n,i,r,{in:e.in,...o})),null===e)return"null";if("string"===s)return l.wrap(e,o.arrayItems&&a.string);if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return l.Template.date(e,i);if(e instanceof Map){const t=[];for(const[n,i]of e.entries())t.push(`${n.toString()} -> ${i.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const u=[];for(const s of e)u.push(l.stringify(s,t,n,i,r,{arrayItems:!0,...o}));return l.wrap(u.join(", "),!d&&a.array)},l.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},l.functions={if:(e,t,n)=>e?t:n,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,n,i,r,o]=this,s=o.messages;if(!s)return"";const a=d.template(t,s[0],e,n,i)||d.template(t,s[1],e,n,i);return a?a.render(t,n,i,r,o):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,n)=>{"use strict";const i=n(375),r=n(1687),o=n(8068),s=n(8160),a=n(3292),d=n(6354),c=n(6133),l={};e.exports=o.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:c.toSibling}},args(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 1===n.length&&Array.isArray(n[0])?e.try(...n[0]):e.try(...n)},validate(e,t){const{schema:n,error:i,state:o,prefs:s}=t;if(n._flags.match){const t=[],a=[];for(let i=0;i<n.$_terms.matches.length;++i){const r=n.$_terms.matches[i],d=o.nest(r.schema,`match.${i}`);d.snapshot();const c=r.schema.$_validate(e,d,s);c.errors?(a.push(c.errors),d.restore()):(t.push(c.value),d.commit())}if(0===t.length)return{errors:i("alternatives.any",{details:a.map((e=>d.details(e,{override:!1})))})};if("one"===n._flags.match)return 1===t.length?{value:t[0]}:{errors:i("alternatives.one")};if(t.length!==n.$_terms.matches.length)return{errors:i("alternatives.all",{details:a.map((e=>d.details(e,{override:!1})))})};const c=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema)));return c(n)?{value:t.reduce(((e,t)=>r(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const a=[];for(let t=0;t<n.$_terms.matches.length;++t){const i=n.$_terms.matches[t];if(i.schema){const n=o.nest(i.schema,`match.${t}`);n.snapshot();const r=i.schema.$_validate(e,n,s);if(!r.errors)return n.commit(),r;n.restore(),a.push({schema:i.schema,reports:r.errors});continue}const r=i.ref?i.ref.resolve(e,o,s):e,d=i.is?[i]:i.switch;for(let n=0;n<d.length;++n){const a=d[n],{is:c,then:l,otherwise:u}=a,p=`match.${t}${i.switch?"."+n:""}`;if(c.$_match(r,o.nest(c,`${p}.is`),s)){if(l)return l.$_validate(e,o.nest(l,`${p}.then`),s)}else if(u)return u.$_validate(e,o.nest(u,`${p}.otherwise`),s)}}return l.errors(a,t)},rules:{conditional:{method(e,t){i(!this._flags._endedSwitch,"Unreachable condition"),i(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),i(void 0===t.break,"Cannot use break option with alternatives conditional");const n=this.clone(),r=a.when(n,e,t),o=r.is?[r]:r.switch;for(const e of o)if(e.then&&e.otherwise){n.$_setFlag("_endedSwitch",!0,{clone:!1});break}return n.$_terms.matches.push(r),n.$_mutateRebuild()}},match:{method(e){if(i(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)i(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i(t.length,"Missing alternative schemas"),s.verifyFlat(t,"try"),i(!this._flags._endedSwitch,"Unreachable condition");const r=this.clone();for(const e of t)r.$_terms.matches.push({schema:r.$_compile(e)});return r.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,n)=>"is"!==n.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const n of t.matches){const{schema:t,ref:i,is:r,not:o,then:s,otherwise:a}=n;e=t?e.try(t):i?e.conditional(i,{is:r,then:s,not:o,otherwise:a,switch:n.switch}):e.conditional(r,{then:s,otherwise:a})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),l.errors=function(e,t){let{error:n,state:i}=t;if(!e.length)return{errors:n("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const r=new Set,o=[];for(const{reports:t,schema:s}of e){if(t.length>1)return l.unmatched(e,n);const a=t[0];if(a instanceof d.Report==0)return l.unmatched(e,n);if(a.state.path.length!==i.path.length){o.push({type:s.type,report:a});continue}if("any.only"===a.code){for(const e of a.local.valids)r.add(e);continue}const[c,u]=a.code.split(".");"base"===u?r.add(c):o.push({type:s.type,report:a})}return o.length?1===o.length?{errors:o[0].report}:l.unmatched(e,n):{errors:n("alternatives.types",{types:[...r]})}},l.unmatched=function(e,t){const n=[];for(const t of e)n.push(...t.reports);return{errors:t("alternatives.match",d.details(n,{override:!1}))}}},8068:(e,t,n)=>{"use strict";const i=n(375),r=n(7629),o=n(8160),s=n(6914);e.exports=r.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return i("function"==typeof e,"Method must be a function"),i(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,n){let{method:i}=n;try{return i(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){i(o.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return i(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate(e,t,n){let{code:i,local:r}=n;return t.error(i,r)},args:["code","local"],multi:!0}},modifiers:{keep(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.keep=t},message(e,t){e.message=s.compile(t)},warn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.warn=t}},manifest:{build(e,t){for(const n in t){const i=t[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const t of i)e=e[n.slice(0,-1)](t);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const t of i)e=e.shared(t)}else for(const t of i){const{ref:n,is:i,not:r,then:o,otherwise:s,concat:a}=t;e=a?e.concat(a):n?e.when(n,{is:i,not:r,then:o,otherwise:s,switch:t.switch,break:t.break}):e.when(i,{then:o,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:n}of i)t[e]=n;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,n)=>{"use strict";const i=n(375),r=n(9474),o=n(9621),s=n(8068),a=n(8160),d=n(3292),c={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,t){let{schema:n,state:i,prefs:r}=t;if(!Array.isArray(e))return;const o=n.$_getRule("sort");return o?c.sort(n,e,o.args.options,i,r):void 0}},validate(e,t){let{schema:n,error:i}=t;if(!Array.isArray(e)){if(n._flags.single){const t=[e];return t[a.symbols.arraySingle]=!0,{value:t}}return{errors:i("array.base")}}if(n.$_getRule("items")||n.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,t,n){let{state:i,prefs:r,error:o}=t,{schema:s}=n;const a=[e,...i.ancestors];for(let t=0;t<e.length;++t){const n=i.localize([...i.path,t],a,s);if(s.$_match(e[t],n,r))return e}const d=s._flags.label;return d?o("array.hasKnown",{patternLabel:d}):o("array.hasUnknown",null)},multi:!0},items:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.verifyFlat(t,"items");const i=this.$_addRule("items");for(let e=0;e<t.length;++e){const n=a.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});i.$_terms.items.push(n)}return i.$_mutateRebuild()},validate(e,t){let{schema:n,error:i,state:r,prefs:o,errorsArray:s}=t;const d=n.$_terms._requireds.slice(),l=n.$_terms.ordered.slice(),u=[...n.$_terms._inclusions,...d],p=!e[a.symbols.arraySingle];delete e[a.symbols.arraySingle];const h=s();let g=e.length;for(let t=0;t<g;++t){const s=e[t];let a=!1,f=!1;const m=p?t:new Number(t),v=[...r.path,m];if(!n._flags.sparse&&void 0===s){if(h.push(i("array.sparse",{key:m,path:v,pos:t,value:void 0},r.localize(v))),o.abortEarly)return h;l.shift();continue}const b=[e,...r.ancestors];for(const e of n.$_terms._exclusions)if(e.$_match(s,r.localize(v,b,e),o,{presence:"ignore"})){if(h.push(i("array.excludes",{pos:t,value:s},r.localize(v))),o.abortEarly)return h;a=!0,l.shift();break}if(a)continue;if(n.$_terms.ordered.length){if(l.length){const a=l.shift(),d=a.$_validate(s,r.localize(v,b,a),o);if(d.errors){if(h.push(...d.errors),o.abortEarly)return h}else if("strip"===a._flags.result)c.fastSplice(e,t),--t,--g;else{if(!n._flags.sparse&&void 0===d.value){if(h.push(i("array.sparse",{key:m,path:v,pos:t,value:void 0},r.localize(v))),o.abortEarly)return h;continue}e[t]=d.value}continue}if(!n.$_terms.items.length){if(h.push(i("array.orderedLength",{pos:t,limit:n.$_terms.ordered.length})),o.abortEarly)return h;break}}const y=[];let A=d.length;for(let a=0;a<A;++a){const l=r.localize(v,b,d[a]);l.snapshot();const u=d[a].$_validate(s,l,o);if(y[a]=u,!u.errors){if(l.commit(),e[t]=u.value,f=!0,c.fastSplice(d,a),--a,--A,!n._flags.sparse&&void 0===u.value&&(h.push(i("array.sparse",{key:m,path:v,pos:t,value:void 0},r.localize(v))),o.abortEarly))return h;break}l.restore()}if(f)continue;const w=o.stripUnknown&&!!o.stripUnknown.arrays||!1;A=u.length;for(const l of u){let u;const p=d.indexOf(l);if(-1!==p)u=y[p];else{const d=r.localize(v,b,l);if(d.snapshot(),u=l.$_validate(s,d,o),!u.errors){d.commit(),"strip"===l._flags.result?(c.fastSplice(e,t),--t,--g):n._flags.sparse||void 0!==u.value?e[t]=u.value:(h.push(i("array.sparse",{key:m,path:v,pos:t,value:void 0},r.localize(v))),a=!0),f=!0;break}d.restore()}if(1===A){if(w){c.fastSplice(e,t),--t,--g,f=!0;break}if(h.push(...u.errors),o.abortEarly)return h;a=!0;break}}if(!a&&(n.$_terms._inclusions.length||n.$_terms._requireds.length)&&!f){if(w){c.fastSplice(e,t),--t,--g;continue}if(h.push(i("array.includes",{pos:t,value:s},r.localize(v))),o.abortEarly)return h}}return d.length&&c.fillMissedErrors(n,h,d,e,r,o),l.length&&(c.fillOrderedErrors(n,h,l,e,r,o),h.length||c.fillDefault(l,e,r,o)),h.length?h:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,n,i){let{limit:r}=n,{name:o,operator:s,args:d}=i;return a.compare(e.length,r,s)?e:t.error("array."+o,{limit:d.limit,value:e})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.verifyFlat(t,"ordered");const i=this.$_addRule("items");for(let e=0;e<t.length;++e){const n=a.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});c.validateSingle(n,i),i.$_mutateRegister(n),i.$_terms.ordered.push(n)}return i.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return i(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=d.ref(e.by,{ancestor:0}),i(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,t,n){let{error:i,state:r,prefs:o,schema:s}=t,{options:a}=n;const{value:d,errors:l}=c.sort(s,e,a,r,o);if(l)return l;for(let t=0;t<e.length;++t)if(e[t]!==d[t])return i("array.sort",{order:a.order,by:a.by?a.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),a.assertOptions(t,["ignoreUndefined","separator"]);const n={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const i=a.default(t.separator,".");n.path=i?e.split(i):[e]}else n.comparator=e;return this.$_addRule(n)},validate(e,t,n,s){let{state:a,error:d,schema:c}=t,{comparator:l,options:u}=n,{comparator:p,path:h}=s;const g={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},f=p||r,m=u.ignoreUndefined;for(let t=0;t<e.length;++t){const n=h?o(e[t],h):e[t],r=p?g.custom:g[typeof n];if(i(r,"Failed to find unique map container for type",typeof n),r instanceof Map){const i=r.entries();let o;for(;!(o=i.next()).done;)if(f(o.value[0],n)){const n=a.localize([...a.path,t],[e,...a.ancestors]),i={pos:t,value:e[t],dupePos:o.value[1],dupeValue:e[o.value[1]]};return h&&(i.path=l),d("array.unique",i,n)}r.set(n,t)}else{if((!m||void 0!==n)&&void 0!==r[n]){const i={pos:t,value:e[t],dupePos:r[n],dupeValue:e[r[n]]};return h&&(i.path=l),d("array.unique",i,a.localize([...a.path,t],[e,...a.ancestors]))}r[n]=t}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)c.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)c.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,n,i,r,o){const s=[];let a=0;for(const e of n){const t=e._flags.label;t?s.push(t):++a}s.length?a?t.push(e.$_createError("array.includesRequiredBoth",i,{knownMisses:s,unknownMisses:a},r,o)):t.push(e.$_createError("array.includesRequiredKnowns",i,{knownMisses:s},r,o)):t.push(e.$_createError("array.includesRequiredUnknowns",i,{unknownMisses:a},r,o))},c.fillOrderedErrors=function(e,t,n,i,r,o){const s=[];for(const e of n)"required"===e._flags.presence&&s.push(e);s.length&&c.fillMissedErrors(e,t,s,i,r,o)},c.fillDefault=function(e,t,n,i){const r=[];let o=!0;for(let s=e.length-1;s>=0;--s){const a=e[s],d=[t,...n.ancestors],c=a.$_validate(void 0,n.localize(n.path,d,a),i).value;if(o){if(void 0===c)continue;o=!1}r.unshift(c)}r.length&&t.push(...r)},c.fastSplice=function(e,t){let n=t;for(;n<e.length;)e[n++]=e[n];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(i(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,n,i,r){const o="ascending"===n.order?1:-1,s=-1*o,a=o,d=(d,l)=>{let u=c.compare(d,l,s,a);if(null!==u)return u;if(n.by&&(d=n.by.resolve(d,i,r),l=n.by.resolve(l,i,r)),u=c.compare(d,l,s,a),null!==u)return u;const p=typeof d;if(p!==typeof l)throw e.$_createError("array.sort.mismatching",t,null,i,r);if("number"!==p&&"string"!==p)throw e.$_createError("array.sort.unsupported",t,{type:p},i,r);return"number"===p?(d-l)*o:d<l?s:a};try{return{value:t.slice().sort(d)}}catch(e){return{errors:e}}},c.compare=function(e,t,n,i){return e===t?0:void 0===e?1:void 0===t?-1:null===e?i:null===t?n:null}},4937:(e,t,n)=>{"use strict";const i=n(375),r=n(8068),o=n(8160),s=n(2036),a={isBool:function(e){return"boolean"==typeof e}};e.exports=r.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,t){let{schema:n}=t;if("boolean"!=typeof e){if("string"==typeof e){const t=n._flags.sensitive?e:e.toLowerCase();e="true"===t||"false"!==t&&e}return"boolean"!=typeof e&&(e=n.$_terms.truthy&&n.$_terms.truthy.has(e,null,null,!n._flags.sensitive)||(!n.$_terms.falsy||!n.$_terms.falsy.has(e,null,null,!n._flags.sensitive))&&e),{value:e}}},validate(e,t){let{error:n}=t;if("boolean"!=typeof e)return{value:e,errors:n("boolean.base")}},rules:{truthy:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.verifyFlat(t,"truthy");const r=this.clone();r.$_terms.truthy=r.$_terms.truthy||new s;for(let e=0;e<t.length;++e){const n=t[e];i(void 0!==n,"Cannot call truthy with undefined"),r.$_terms.truthy.add(n)}return r}},falsy:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.verifyFlat(t,"falsy");const r=this.clone();r.$_terms.falsy=r.$_terms.falsy||new s;for(let e=0;e<t.length;++e){const n=t[e];i(void 0!==n,"Cannot call falsy with undefined"),r.$_terms.falsy.add(n)}return r}},sensitive:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",e)}}},cast:{number:{from:a.isBool,to:(e,t)=>e?1:0},string:{from:a.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,n)=>{"use strict";const i=n(375),r=n(8068),o=n(8160),s=n(3328),a={isDate:function(e){return e instanceof Date}};e.exports=r.extend({type:"date",coerce:{from:["number","string"],method(e,t){let{schema:n}=t;return{value:a.parse(e,n._flags.format)||e}}},validate(e,t){let{schema:n,error:i,prefs:r}=t;if(e instanceof Date&&!isNaN(e.getTime()))return;const o=n._flags.format;return r.convert&&o&&"string"==typeof e?{value:e,errors:i("date.format",{format:o})}:{value:e,errors:i("date.base")}},rules:{compare:{method:!1,validate(e,t,n,i){let{date:r}=n,{name:s,operator:a,args:d}=i;const c="now"===r?Date.now():r.getTime();return o.compare(e.getTime(),c,a)?e:t.error("date."+s,{limit:d.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:a.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return i(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return i(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:a.isDate,to:(e,t)=>e.getTime()},string:{from:a.isDate,to(e,t){let{prefs:n}=t;return s.date(e,n)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),a.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return o.isIsoDate(e)?a.date(e.toString()):null;const n=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return a.date(1*e);if("unix"===t)return a.date(1e3*e);if("string"==typeof n)return null}return a.date(e)},a.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,n)=>{"use strict";const i=n(375),r=n(7824);e.exports=r.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return i(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate(e,t,n){let{n:i}=n;return e.length===i?e:t.error("function.arity",{n:i})}},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return i(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate(e,t,n){let{n:i}=n;return e.length>=i?e:t.error("function.minArity",{n:i})}},maxArity:{method(e){return i(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate(e,t,n){let{n:i}=n;return e.length<=i?e:t.error("function.maxArity",{n:i})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,n)=>{"use strict";const i=n(978),r=n(375),o=n(8571),s=n(3652),a=n(8068),d=n(8160),c=n(3292),l=n(6354),u=n(6133),p=n(3328),h={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=a.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,t){let{schema:n,error:i,state:r,prefs:o}=t;if(!e||typeof e!==n.$_property("typeof")||Array.isArray(e))return{value:e,errors:i("object.base",{type:n.$_property("typeof")})};if(!(n.$_terms.renames||n.$_terms.dependencies||n.$_terms.keys||n.$_terms.patterns||n.$_terms.externals))return;e=h.clone(e,o);const s=[];if(n.$_terms.renames&&!h.rename(n,e,r,o,s))return{value:e,errors:s};if(!n.$_terms.keys&&!n.$_terms.patterns&&!n.$_terms.dependencies)return{value:e,errors:s};const a=new Set(Object.keys(e));if(n.$_terms.keys){const t=[e,...r.ancestors];for(const i of n.$_terms.keys){const n=i.key,d=e[n];a.delete(n);const c=r.localize([...r.path,n],t,i),l=i.schema.$_validate(d,c,o);if(l.errors){if(o.abortEarly)return{value:e,errors:l.errors};void 0!==l.value&&(e[n]=l.value),s.push(...l.errors)}else"strip"===i.schema._flags.result||void 0===l.value&&void 0!==d?delete e[n]:void 0!==l.value&&(e[n]=l.value)}}if(a.size||n._flags._hasPatternMatch){const t=h.unknown(n,e,a,s,r,o);if(t)return t}if(n.$_terms.dependencies)for(const t of n.$_terms.dependencies){if(null!==t.key&&!1===h.isPresent(t.options)(t.key.resolve(e,r,o,null,{shadow:!1})))continue;const i=h.dependencies[t.rel](n,t,e,r,o);if(i){const t=n.$_createError(i.code,e,i.context,r,o);if(o.abortEarly)return{value:e,errors:t};s.push(t)}}return{value:e,errors:s}},rules:{and:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.verifyFlat(t,"and"),h.dependency(this,"and",null,t)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,n){p.isTemplate(e)||(e=c.ref(e)),r(void 0===n||"string"==typeof n,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const i=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:n}});return i.$_mutateRegister(e),i.$_mutateRegister(t),i},validate(e,t,n){let{error:i,prefs:r,state:o}=t,{subject:s,schema:a,message:d}=n;const c=s.resolve(e,o,r),l=u.isRef(s)?s.absolute(o):[];return a.$_match(c,o.localize(l,[e,...o.ancestors],a),r)?e:i("object.assert",{subject:s,message:d})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return r("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate(e,t,n){let{constructor:i,name:r}=n;return e instanceof i?e:t.error("object.instance",{type:r,value:e})},args:["constructor","name"]},keys:{method(e){r(void 0===e||"object"==typeof e,"Object schema must be a valid object"),r(!d.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new h.Keys;for(const n in e)d.tryWithPath((()=>t.$_terms.keys.push({key:n,schema:this.$_compile(e[n])})),n)}else t.$_terms.keys=new h.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,n,i){let{limit:r}=n,{name:o,operator:s,args:a}=i;return d.compare(Object.keys(e).length,r,s)?e:t.error("object."+o,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.verifyFlat(t,"nand"),h.dependency(this,"nand",null,t)}},or:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.verifyFlat(t,"or"),h.dependency(this,"or",null,t)}},oxor:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.dependency(this,"oxor",null,t)}},pattern:{method(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e instanceof RegExp;i||(e=this.$_compile(e,{appendPath:!0})),r(void 0!==t,"Invalid rule"),d.assertOptions(n,["fallthrough","matches"]),i&&r(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];const s={[i?"regex":"schema"]:e,rule:t};return n.matches&&(s.matches=this.$_compile(n.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),o.$_mutateRegister(s.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),n.fallthrough&&(s.fallthrough=!0),o.$_terms.patterns.push(s),o.$_mutateRegister(t),o}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>u.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),r("string"==typeof t||t instanceof p,"Invalid rename to argument"),r(t!==e,"Cannot rename key to same name:",e),d.assertOptions(n,["alias","ignoreUndefined","override","multiple"]);const o=this.clone();o.$_terms.renames=o.$_terms.renames||[];for(const t of o.$_terms.renames)r(t.from!==e,"Cannot rename the same key multiple times");return t instanceof p&&o.$_mutateRegister(t),o.$_terms.renames.push({from:e,to:t,options:i(h.renameDefaults,n)}),o}},schema:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:e}})},validate(e,t,n){let{type:i}=n;return!d.isSchema(e)||"any"!==i&&e.type!==i?t.error("object.schema",{type:i}):e}},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h.dependency(this,"with",e,t,n)}},without:{method(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h.dependency(this,"without",e,t,n)}},xor:{method(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.verifyFlat(t,"xor"),h.dependency(this,"xor",null,t)}}},overrides:{default(e,t){return void 0===e&&(e=d.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const n of e.$_terms.keys)d.tryWithPath((()=>t.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);e.$_terms.keys=new h.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:n,key:i=null,peers:r,options:o}of t.dependencies)e=h.dependency(e,n,i,r,o);if(t.patterns)for(const{regex:n,schema:i,rule:r,fallthrough:o,matches:s}of t.patterns)e=e.pattern(n||i,r,{fallthrough:o,matches:s});if(t.renames)for(const{from:n,to:i,options:r}of t.renames)e=e.rename(n,i,r);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),h.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return o(e,{shallow:!0});const n=Object.create(Object.getPrototypeOf(e));return Object.assign(n,e),n}const n=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(this,n)};return n.prototype=o(e.prototype),Object.defineProperty(n,"name",{value:e.name,writable:!1}),Object.defineProperty(n,"length",{value:e.length,writable:!1}),Object.assign(n,e),n},h.dependency=function(e,t,n,i,o){r(null===n||"string"==typeof n,t,"key must be a strings"),o||(o=i.length>1&&"object"==typeof i[i.length-1]?i.pop():{}),d.assertOptions(o,["separator","isPresent"]),i=[].concat(i);const s=d.default(o.separator,"."),a=[];for(const e of i)r("string"==typeof e,t,"peers must be strings"),a.push(c.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==n&&(n=c.ref(n,{separator:s,ancestor:0,prefix:!1}));const l=e.clone();return l.$_terms.dependencies=l.$_terms.dependencies||[],l.$_terms.dependencies.push(new h.Dependency(t,n,a,i,o)),l},h.dependencies={and(e,t,n,i,r){const o=[],s=[],a=t.peers.length,d=h.isPresent(t.options);for(const e of t.peers)!1===d(e.resolve(n,i,r,null,{shadow:!1}))?o.push(e.key):s.push(e.key);if(o.length!==a&&s.length!==a)return{code:"object.and",context:{present:s,presentWithLabels:h.keysToLabels(e,s),missing:o,missingWithLabels:h.keysToLabels(e,o)}}},nand(e,t,n,i,r){const o=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,i,r,null,{shadow:!1}))&&o.push(e.key);if(o.length!==t.peers.length)return;const a=t.paths[0],d=t.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:h.keysToLabels(e,a),peers:d,peersWithLabels:h.keysToLabels(e,d)}}},or(e,t,n,i,r){const o=h.isPresent(t.options);for(const e of t.peers)if(o(e.resolve(n,i,r,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)}}},oxor(e,t,n,i,r){const o=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,i,r,null,{shadow:!1}))&&o.push(e.key);if(!o.length||1===o.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return a.present=o,a.presentWithLabels=h.keysToLabels(e,o),{code:"object.oxor",context:a}},with(e,t,n,i,r){const o=h.isPresent(t.options);for(const s of t.peers)if(!1===o(s.resolve(n,i,r,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:h.keysToLabels(e,s.key)}}},without(e,t,n,i,r){const o=h.isPresent(t.options);for(const s of t.peers)if(o(s.resolve(n,i,r,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:h.keysToLabels(e,s.key)}}},xor(e,t,n,i,r){const o=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,i,r,null,{shadow:!1}))&&o.push(e.key);if(1===o.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return 0===o.length?{code:"object.missing",context:a}:(a.present=o,a.presentWithLabels=h.keysToLabels(e,o),{code:"object.xor",context:a})}},h.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},h.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},h.rename=function(e,t,n,i,r){const o={};for(const s of e.$_terms.renames){const a=[],d="string"!=typeof s.from;if(d)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const n=s.from.exec(e);n&&a.push({from:e,to:s.to,match:n})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||a.push(s);for(const c of a){const a=c.from;let l=c.to;if(l instanceof p&&(l=l.render(t,n,i,c.match)),a!==l){if(!s.options.multiple&&o[l]&&(r.push(e.$_createError("object.rename.multiple",t,{from:a,to:l,pattern:d},n,i)),i.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,l)&&!s.options.override&&!o[l]&&(r.push(e.$_createError("object.rename.override",t,{from:a,to:l,pattern:d},n,i)),i.abortEarly))return!1;void 0===t[a]?delete t[l]:t[l]=t[a],o[l]=!0,s.options.alias||delete t[a]}}}return!0},h.unknown=function(e,t,n,i,r,o){if(e.$_terms.patterns){let s=!1;const a=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),d=[t,...r.ancestors];for(const s of n){const c=t[s],l=[...r.path,s];for(let u=0;u<e.$_terms.patterns.length;++u){const p=e.$_terms.patterns[u];if(p.regex){const e=p.regex.test(s);if(r.mainstay.tracer.debug(r,"rule",`pattern.${u}`,e?"pass":"error"),!e)continue}else if(!p.schema.$_match(s,r.nest(p.schema,`pattern.${u}`),o))continue;n.delete(s);const h=r.localize(l,d,{schema:p.rule,key:s}),g=p.rule.$_validate(c,h,o);if(g.errors){if(o.abortEarly)return{value:t,errors:g.errors};i.push(...g.errors)}if(p.matches&&a[u].push(s),t[s]=g.value,!p.fallthrough)break}}if(s)for(let n=0;n<a.length;++n){const s=a[n];if(!s)continue;const c=e.$_terms.patterns[n].matches,u=r.localize(r.path,d,c),p=c.$_validate(s,u,o);if(p.errors){const n=l.details(p.errors,{override:!1});n.matches=s;const a=e.$_createError("object.pattern.match",t,n,r,o);if(o.abortEarly)return{value:t,errors:a};i.push(a)}}}if(n.size&&(e.$_terms.keys||e.$_terms.patterns)){if(o.stripUnknown&&!e._flags.unknown||o.skipFunctions){const e=!(!o.stripUnknown||!0!==o.stripUnknown&&!o.stripUnknown.objects);for(const i of n)e?(delete t[i],n.delete(i)):"function"==typeof t[i]&&n.delete(i)}if(!d.default(e._flags.unknown,o.allowUnknown))for(const s of n){const n=r.localize([...r.path,s],[]),a=e.$_createError("object.unknown",t[s],{child:s},n,o,{flags:!1});if(o.abortEarly)return{value:t,errors:a};i.push(a)}}},h.Dependency=class{constructor(e,t,n,i,r){this.rel=e,this.key=t,this.peers=n,this.paths=i,this.options=r}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},h.Keys=class extends Array{concat(e){const t=this.slice(),n=new Map;for(let e=0;e<t.length;++e)n.set(t[e].key,e);for(const i of e){const e=i.key,r=n.get(e);void 0!==r?t[r]={key:e,schema:t[r].schema.concat(i.schema)}:t.push(i)}return t}}},8785:(e,t,n)=>{"use strict";const i=n(375),r=n(8068),o=n(8160),s=n(3292),a=n(6354),d={};e.exports=r.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,t){let{schema:n,state:r,prefs:o}=t;i(n.$_terms.link,"Uninitialized link schema");const s=d.generate(n,e,r,o),a=n.$_terms.link[0].ref;return s.$_validate(e,r.nest(s,`link:${a.display}:${s.type}`),o)},generate:(e,t,n,i)=>d.generate(e,t,n,i),rules:{ref:{method(e){i(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),i("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),i("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",e)}}},overrides:{concat(e){i(this.$_terms.link,"Uninitialized link schema"),i(o.isSchema(e),"Invalid schema object"),i("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(i(t.link,"Invalid link description missing link"),e.ref(t.link))}}),d.generate=function(e,t,n,i){let r=n.mainstay.links.get(e);if(r)return r._generate(t,n,i).schema;const o=e.$_terms.link[0].ref,{perspective:s,path:a}=d.perspective(o,n);d.assert(s,"which is outside of schema boundaries",o,e,n,i);try{r=a.length?s.$_reach(a):s}catch(t){d.assert(!1,"to non-existing schema",o,e,n,i)}return d.assert("link"!==r.type,"which is another link",o,e,n,i),e._flags.relative||n.mainstay.links.set(e,r),r._generate(t,n,i).schema},d.perspective=function(e,t){if("local"===e.type){for(const{schema:n,key:i}of t.schemas){if((n._flags.id||i)===e.path[0])return{perspective:n,path:e.path.slice(1)};if(n.$_terms.shared)for(const t of n.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},d.assert=function(e,t,n,r,o,s){e||i(!1,`"${a.label(r._flags,o,s)}" contains link reference "${n.display}" ${t}`)}},3832:(e,t,n)=>{"use strict";const i=n(375),r=n(8068),o=n(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};e.exports=r.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,t){let{schema:n,error:i}=t;if(!e.match(s.numberRx))return;e=e.trim();const r={value:parseFloat(e)};if(0===r.value&&(r.value=0),!n._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(r.value)))return r.errors=i("number.unsafe"),r}else{const t=r.value.toString();if(t.match(/e/i))return r;if(t!==s.normalizeDecimal(e))return r.errors=i("number.unsafe"),r}return r}},validate(e,t){let{schema:n,error:i,prefs:r}=t;if(e===1/0||e===-1/0)return{value:e,errors:i("number.infinity")};if(!o.isNumber(e))return{value:e,errors:i("number.base")};const s={value:e};if(r.convert){const e=n.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);s.value=Math.round(s.value*t)/t}}return 0===s.value&&(s.value=0),!n._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(s.errors=i("number.unsafe")),s},rules:{compare:{method:!1,validate(e,t,n,i){let{limit:r}=n,{name:s,operator:a,args:d}=i;return o.compare(e,r,a)?e:t.error("number."+s,{limit:d.limit,value:e})},args:[{name:"limit",ref:!0,assert:o.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,t,n,i){let{base:r}=n;return e*(1/r)%1==0?e:t.error("number.multiple",{multiple:i.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return i(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,n){let{limit:i}=n;const r=e.toString().match(s.precisionRx);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)<=i?e:t.error("number.precision",{limit:i,value:e})},convert:!0},sign:{method(e){return i(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,t,n){let{sign:i}=n;return"negative"===i&&e<0||"positive"===i&&e>0?e:t.error(`number.${i}`)}},unsafe:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,n)=>{"use strict";const i=n(7824);e.exports=i.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,n)=>{"use strict";const i=n(375),r=n(5380),o=n(1745),s=n(9959),a=n(6064),d=n(9926),c=n(5752),l=n(8068),u=n(8160),p={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=l.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,t){let{schema:n,state:i,prefs:r}=t;const o=n.$_getRule("normalize");o&&(e=e.normalize(o.args.form));const s=n.$_getRule("case");s&&(e="upper"===s.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const a=n.$_getRule("trim");if(a&&a.args.enabled&&(e=e.trim()),n.$_terms.replacements)for(const t of n.$_terms.replacements)e=e.replace(t.pattern,t.replacement);const d=n.$_getRule("hex");if(d&&d.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),n.$_getRule("isoDate")){const t=p.isoDate(e);t&&(e=t)}if(n._flags.truncate){const t=n.$_getRule("max");if(t){let o=t.args.limit;if(u.isResolvable(o)&&(o=o.resolve(e,i,r),!u.limit(o)))return{value:e,errors:n.$_createError("any.ref",o,{ref:t.args.limit,arg:"limit",reason:"must be a positive integer"},i,r)};e=e.slice(0,o)}}return{value:e}}},validate(e,t){let{schema:n,error:i}=t;if("string"!=typeof e)return{value:e,errors:i("string.base")};if(""===e){const t=n.$_getRule("min");if(t&&0===t.args.limit)return;return{value:e,errors:i("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},i("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),i("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate(e,t,n){let{options:i}=n;return p.base64Regex[i.paddingRequired][i.urlSafe].test(e)?e:t.error("string.base64")}},case:{method(e){return i(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate(e,t,n){let{direction:i}=n;return"lower"===i&&e===e.toLocaleLowerCase()||"upper"===i&&e===e.toLocaleUpperCase()?e:t.error(`string.${i}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let n=e.length,i=0,r=1;for(;n--;){const t=e.charAt(n)*r;i+=t-9*(t>9),r^=3}return i>0&&i%10==0?e:t.error("string.creditCard")}},dataUri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},i("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,n){let{options:i}=n;const r=e.match(p.dataUriRegex);if(r){if(!r[2])return e;if("base64"!==r[2])return e;if(p.base64Regex[i.paddingRequired].false.test(r[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&u.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=p.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate(e,t,n,i){let{address:o}=i;return r.isValid(e,o)?e:t.error("string.domain")}},email:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),i(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=p.addressOptions(e),n=new RegExp(`\\s*[${e.separator?a(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:n,address:t})},validate(e,t,n,i){let{options:r}=n,{regex:s,address:a}=i;const d=r.multiple?e.split(s):[e],c=[];for(const e of d)o.isValid(e,a)||c.push(e);return c.length?t.error("string.email",{value:e,invalids:c}):e}},guid:{alias:"uuid",method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.assertOptions(e,["version","separator"]);let t="";if(e.version){const n=[].concat(e.version);i(n.length>=1,"version must have at least 1 valid version specified");const r=new Set;for(let e=0;e<n.length;++e){const o=n[e];i("string"==typeof o,"version at position "+e+" must be a string");const s=p.guidVersions[o.toLowerCase()];i(s,"version at position "+e+" must be one of "+Object.keys(p.guidVersions).join(", ")),i(!r.has(s),"version at position "+e+" must not be a duplicate"),t+=s,r.add(s)}}i(p.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const n=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,r=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${n})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:r})},validate(e,t,n,i){let{regex:r}=i;const o=r.exec(e);return o?p.guidBrackets[o[1]]!==o[o.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.assertOptions(e,["byteAligned"]),e={byteAligned:!1,...e},i("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate(e,t,n){let{options:i}=n;return p.hexRegex.test(e)?i.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>r.isValid(e,{minDomainSegments:1})||p.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.assertOptions(e,["cidr","version"]);const{cidr:t,versions:n,regex:i}=s.regex(e),r=e.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:r}},regex:i})},validate(e,t,n,i){let{options:r}=n,{regex:o}=i;return o.test(e)?e:r.version?t.error("string.ipVersion",{value:e,cidr:r.cidr,version:r.version}):t.error("string.ip",{value:e,cidr:r.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(e,t){let{error:n}=t;return p.isoDate(e)?e:n("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>p.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return p.length(this,"length",e,"=",t)},validate(e,t,n,i){let{limit:r,encoding:o}=n,{name:s,operator:a,args:d}=i;const c=!o&&e.length;return u.compare(c,r,a)?e:t.error("string."+s,{limit:d.limit,value:e,encoding:o})},args:[{name:"limit",ref:!0,assert:u.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return p.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return p.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return i(p.normalizationForms.includes(e),"normalization form must be one of "+p.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate(e,t,n){let{error:i}=t,{form:r}=n;return e===e.normalize(r)?e:i("string.normalize",{value:e,form:r})},convert:!0},pattern:{alias:"regex",method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(e instanceof RegExp,"regex must be a RegExp"),i(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),u.assertOptions(t,["invert","name"]);const n=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:n})},validate(e,t,n,i){let{regex:r,options:o}=n,{errorCode:s}=i;return r.test(e)^o.invert?e:t.error(s,{name:o.name,regex:r,value:e})},args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(a(e),"g")),i(e instanceof RegExp,"pattern must be a RegExp"),i("string"==typeof t,"replacement must be a String");const n=this.clone();return n.$_terms.replacements||(n.$_terms.replacements=[]),n.$_terms.replacements.push({pattern:e,replacement:t}),n}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate(e,t,n){let{enabled:i}=n;return i&&e!==e.trim()?t.error("string.trim"):e},convert:!0},truncate:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&u.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:n}=c.regex(e),i=e.domain?p.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:i,scheme:n})},validate(e,t,n,i){let{options:o}=n,{regex:s,domain:a,scheme:d}=i;if(["http:/","https:/"].includes(e))return t.error("string.uri");const c=s.exec(e);if(c){const n=c[1]||c[2];return!a||o.allowRelative&&!n||r.isValid(n,a)?e:t.error("string.domain",{value:n})}return o.relativeOnly?t.error("string.uriRelativeOnly"):o.scheme?t.error("string.uriCustomScheme",{scheme:d,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:n,replacement:i}of t.replacements)e=e.replace(n,i);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),p.addressOptions=function(e){if(!e)return e;if(i(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),i(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return i(p.tlds,"Built-in TLD list disabled"),Object.assign({},e,p.tlds);i("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),i(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),i(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),p.validateTlds(e.tlds.deny,"tlds.deny"),e;const n=e.tlds.allow;return n?!0===n?(i(p.tlds,"Built-in TLD list disabled"),Object.assign({},e,p.tlds)):(Array.isArray(n)&&(e=Object.assign({},e,{tlds:{allow:new Set(n)}})),i(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),p.validateTlds(e.tlds.allow,"tlds.allow"),e):e},p.validateTlds=function(e,t){for(const n of e)i(r.isValid(n,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},p.isoDate=function(e){if(!u.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},p.length=function(e,t,n,r,o){return i(!o||!1,"Invalid encoding:",o),e.$_addRule({name:t,method:"length",args:{limit:n,encoding:o},operator:r})}},8826:(e,t,n)=>{"use strict";const i=n(375),r=n(8068),o={};o.Map=class extends Map{slice(){return new o.Map(this)}},e.exports=r.extend({type:"symbol",terms:{map:{init:new o.Map}},coerce:{method(e,t){let{schema:n,error:i}=t;const r=n.$_terms.map.get(e);return r&&(e=r),n._flags.only&&"symbol"!=typeof e?{value:e,errors:i("symbol.map",{map:n.$_terms.map})}:{value:e}}},validate(e,t){let{error:n}=t;if("symbol"!=typeof e)return{value:e,errors:n("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),i(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),n=[];for(const r of e){i(r&&r[Symbol.iterator],"Entry must be an iterable");const[e,o]=r;i("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),i("symbol"==typeof o,"Value must be a Symbol"),t.$_terms.map.set(e,o),n.push(o)}return t.valid(...n)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(738),s=n(9621),a=n(8160),d=n(6354),c=n(493),l={result:Symbol("result")};t.entry=function(e,t,n){let r=a.defaults;n&&(i(void 0===n.warnings,"Cannot override warnings preference in synchronous validation"),i(void 0===n.artifacts,"Cannot override artifacts preference in synchronous validation"),r=a.preferences(a.defaults,n));const o=l.entry(e,t,r);i(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:o.value};return o.error&&(s.error=o.error),o.mainstay.warnings.length&&(s.warning=d.details(o.mainstay.warnings)),o.mainstay.debug&&(s.debug=o.mainstay.debug),o.mainstay.artifacts&&(s.artifacts=o.mainstay.artifacts),s},t.entryAsync=async function(e,t,n){let i=a.defaults;n&&(i=a.preferences(a.defaults,n));const r=l.entry(e,t,i),o=r.mainstay;if(r.error)throw o.debug&&(r.error.debug=o.debug),r.error;if(o.externals.length){let t=r.value;const c=[];for(const r of o.externals){const u=r.state.path,p="link"===r.schema.type?o.links.get(r.schema):null;let h,g,f=t;const m=u.length?[t]:[],v=u.length?s(e,u):e;if(u.length){h=u[u.length-1];let e=t;for(const t of u.slice(0,-1))e=e[t],m.unshift(e);g=m[0],f=g[h]}try{const e=(e,t)=>(p||r.schema).$_createError(e,f,t,r.state,i),s=await r.method(f,{schema:r.schema,linked:p,state:r.state,prefs:n,original:v,error:e,errorsArray:l.errorsArray,warn:(e,t)=>o.warnings.push((p||r.schema).$_createError(e,f,t,r.state,i)),message:(e,t)=>(p||r.schema).$_createError("external",f,t,r.state,i,{messages:e})});if(void 0===s||s===f)continue;if(s instanceof d.Report){if(o.tracer.log(r.schema,r.state,"rule","external","error"),c.push(s),i.abortEarly)break;continue}if(Array.isArray(s)&&s[a.symbols.errors]){if(o.tracer.log(r.schema,r.state,"rule","external","error"),c.push(...s),i.abortEarly)break;continue}g?(o.tracer.value(r.state,"rule",f,s,"external"),g[h]=s):(o.tracer.value(r.state,"rule",t,s,"external"),t=s)}catch(e){throw i.errors.label&&(e.message+=` (${r.label})`),e}}if(r.value=t,c.length)throw r.error=d.process(c,e,i),o.debug&&(r.error.debug=o.debug),r.error}if(!i.warnings&&!i.debug&&!i.artifacts)return r.value;const c={value:r.value};return o.warnings.length&&(c.warning=d.details(o.warnings)),o.debug&&(c.debug=o.debug),o.artifacts&&(c.artifacts=o.artifacts),c},l.Mainstay=class{constructor(e,t,n){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=n,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},l.entry=function(e,n,i){const{tracer:r,cleanup:o}=l.tracer(n,i),s=i.debug?[]:null,a=n._ids._schemaChain?new Map:null,u=new l.Mainstay(r,s,a),p=n._ids._schemaChain?[{schema:n}]:null,h=new c([],[],{mainstay:u,schemas:p}),g=t.validate(e,n,h,i);o&&n.$_root.untrace();const f=d.process(g.errors,e,i);return{value:g.value,error:f,mainstay:u}},l.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(i(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:l.ignore}},t.validate=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.$_terms.whens&&(t=t._generate(e,n,i).schema),t._preferences&&(i=l.prefs(t,i)),t._cache&&i.cache){const i=t._cache.get(e);if(n.mainstay.tracer.debug(n,"validate","cached",!!i),i)return i}const o=(r,o,s)=>t.$_createError(r,e,o,s||n,i),s={original:e,prefs:i,schema:t,state:n,error:o,errorsArray:l.errorsArray,warn:(e,t,i)=>n.mainstay.warnings.push(o(e,t,i)),message:(r,o)=>t.$_createError("custom",e,o,n,i,{messages:r})};n.mainstay.tracer.entry(t,n);const d=t._definition;if(d.prepare&&void 0!==e&&i.convert){const t=d.prepare(e,s);if(t){if(n.mainstay.tracer.value(n,"prepare",e,t.value),t.errors)return l.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(d.coerce&&void 0!==e&&i.convert&&(!d.coerce.from||d.coerce.from.includes(typeof e))){const t=d.coerce.method(e,s);if(t){if(n.mainstay.tracer.value(n,"coerced",e,t.value),t.errors)return l.finalize(t.value,[].concat(t.errors),s);e=t.value}}const c=t._flags.empty;c&&c.$_match(l.trim(e,t),n.nest(c),a.defaults)&&(n.mainstay.tracer.value(n,"empty",e,void 0),e=void 0);const u=r.presence||t._flags.presence||(t._flags._endedSwitch?null:i.presence);if(void 0===e){if("forbidden"===u)return l.finalize(e,null,s);if("required"===u)return l.finalize(e,[t.$_createError("any.required",e,null,n,i)],s);if("optional"===u){if(t._flags.default!==a.symbols.deepDefault)return l.finalize(e,null,s);n.mainstay.tracer.value(n,"default",e,{}),e={}}}else if("forbidden"===u)return l.finalize(e,[t.$_createError("any.unknown",e,null,n,i)],s);const p=[];if(t._valids){const r=t._valids.get(e,n,i,t._flags.insensitive);if(r)return i.convert&&(n.mainstay.tracer.value(n,"valids",e,r.value),e=r.value),n.mainstay.tracer.filter(t,n,"valid",r),l.finalize(e,null,s);if(t._flags.only){const r=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},n,i);if(i.abortEarly)return l.finalize(e,[r],s);p.push(r)}}if(t._invalids){const r=t._invalids.get(e,n,i,t._flags.insensitive);if(r){n.mainstay.tracer.filter(t,n,"invalid",r);const o=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},n,i);if(i.abortEarly)return l.finalize(e,[o],s);p.push(o)}}if(d.validate){const t=d.validate(e,s);if(t&&(n.mainstay.tracer.value(n,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return p.push(t.errors),l.finalize(e,p,s);if(t.errors.length)return p.push(...t.errors),l.finalize(e,p,s)}}return t._rules.length?l.rules(e,p,s):l.finalize(e,p,s)},l.rules=function(e,t,n){const{schema:i,state:r,prefs:o}=n;for(const s of i._rules){const d=i._definition.rules[s.method];if(d.convert&&o.convert){r.mainstay.tracer.log(i,r,"rule",s.name,"full");continue}let c,u=s.args;if(s._resolve.length){u=Object.assign({},u);for(const t of s._resolve){const n=d.argsByName.get(t),s=u[t].resolve(e,r,o),l=n.normalize?n.normalize(s):s,p=a.validateArg(l,null,n);if(p){c=i.$_createError("any.ref",s,{arg:t,ref:u[t],reason:p},r,o);break}u[t]=l}}c=c||d.validate(e,n,u,s);const p=l.rule(c,s);if(p.errors){if(r.mainstay.tracer.log(i,r,"rule",s.name,"error"),s.warn){r.mainstay.warnings.push(...p.errors);continue}if(o.abortEarly)return l.finalize(e,p.errors,n);t.push(...p.errors)}else r.mainstay.tracer.log(i,r,"rule",s.name,"pass"),r.mainstay.tracer.value(r,"rule",e,p.value,s.name),e=p.value}return l.finalize(e,t,n)},l.rule=function(e,t){return e instanceof d.Report?(l.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[a.symbols.errors]?(e.forEach((e=>l.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},l.error=function(e,t){return t.message&&e._setTemplate(t.message),e},l.finalize=function(e,t,n){t=t||[];const{schema:r,state:o,prefs:s}=n;if(t.length){const i=l.default("failover",void 0,t,n);void 0!==i&&(o.mainstay.tracer.value(o,"failover",e,i),e=i,t=[])}if(t.length&&r._flags.error)if("function"==typeof r._flags.error){t=r._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)i(e instanceof Error||e instanceof d.Report,"error() must return an Error object")}else t=[r._flags.error];if(void 0===e){const i=l.default("default",e,t,n);o.mainstay.tracer.value(o,"default",e,i),e=i}if(r._flags.cast&&void 0!==e){const t=r._definition.cast[r._flags.cast];if(t.from(e)){const i=t.to(e,n);o.mainstay.tracer.value(o,"cast",e,i,r._flags.cast),e=i}}if(r.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of r.$_terms.externals)o.mainstay.externals.push({method:e,schema:r,state:o,label:d.label(r._flags,o,s)});const a={value:e,errors:t.length?t:null};return r._flags.result&&(a.value="strip"===r._flags.result?void 0:n.original,o.mainstay.tracer.value(o,r._flags.result,e,a.value),o.shadow(e,r._flags.result)),r._cache&&!1!==s.cache&&!r._refs.length&&r._cache.set(n.original,a),void 0===e||a.errors||void 0===r._flags.artifact||(o.mainstay.artifacts=o.mainstay.artifacts||new Map,o.mainstay.artifacts.has(r._flags.artifact)||o.mainstay.artifacts.set(r._flags.artifact,[]),o.mainstay.artifacts.get(r._flags.artifact).push(o.path)),a},l.prefs=function(e,t){const n=t===a.defaults;return n&&e._preferences[a.symbols.prefs]?e._preferences[a.symbols.prefs]:(t=a.preferences(t,e._preferences),n&&(e._preferences[a.symbols.prefs]=t),t)},l.default=function(e,t,n,i){const{schema:o,state:s,prefs:d}=i,c=o._flags[e];if(d.noDefaults||void 0===c)return t;if(s.mainstay.tracer.log(o,s,"rule",e,"full"),!c)return c;if("function"==typeof c){const a=c.length?[r(s.ancestors[0]),i]:[];try{return c(...a)}catch(t){return void n.push(o.$_createError(`any.${e}`,null,{error:t},s,d))}}return"object"!=typeof c?c:c[a.symbols.literal]?c.literal:a.isResolvable(c)?c.resolve(t,s,d):r(c)},l.trim=function(e,t){if("string"!=typeof e)return e;const n=t.$_getRule("trim");return n&&n.args.enabled?e.trim():e},l.ignore={active:!1,debug:o,entry:o,filter:o,log:o,resolve:o,value:o},l.errorsArray=function(){const e=[];return e[a.symbols.errors]=!0,e}},2036:(e,t,n)=>{"use strict";const i=n(375),r=n(9474),o=n(8160),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){o.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,n){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const n of[...t._values,...t._refs])e.add(n)}if(n)for(const t of[...n._values,...n._refs])e.remove(t);return e.length?e:null}remove(e){o.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,n,i){return!!this.get(e,t,n,i)}get(e,t,n,i){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&i){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(r(t,e))return{value:t};if(t)for(const o of this._refs){const s=o.resolve(e,t,n,null,{in:!0});if(void 0===s)continue;const a=o.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of a)if(typeof t==typeof e)if(i&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:o}}else if(r(t,e))return{value:t,ref:o}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){i(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[o.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const n of e)"string"==typeof n&&t.set(n.toLowerCase(),n);return t}},978:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(1687),s=n(9621),a={};e.exports=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i(e&&"object"==typeof e,"Invalid defaults value: must be an object"),i(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),i("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return a.applyToDefaultsWithShallow(e,t,n);const s=r(e);if(!0===t)return s;const d=void 0!==n.nullOverride&&n.nullOverride;return o(s,t,{nullOverride:d,mergeArrays:!1})},a.applyToDefaultsWithShallow=function(e,t,n){const d=n.shallow;i(Array.isArray(d),"Invalid keys");const c=new Map,l=!0===t?null:new Set;for(let n of d){n=Array.isArray(n)?n:n.split(".");const i=s(e,n);i&&"object"==typeof i?c.set(i,l&&s(t,n)||i):l&&l.add(n)}const u=r(e,{},c);if(!l)return u;for(const e of l)a.reachCopy(u,t,e);const p=void 0!==n.nullOverride&&n.nullOverride;return o(u,t,{nullOverride:p,mergeArrays:!1})},a.reachCopy=function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const i=t;let r=e;for(let e=0;e<n.length-1;++e){const t=n[e];"object"!=typeof r[t]&&(r[t]={}),r=r[t]}r[n[n.length-1]]=i}},375:(e,t,n)=>{"use strict";const i=n(7916);e.exports=function(e){if(!e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(1===n.length&&n[0]instanceof Error)throw n[0];throw new i(n)}}},8571:(e,t,n)=>{"use strict";const i=n(9621),r=n(4277),o=n(7043),s={needsProtoHack:new Set([r.set,r.map,r.weakSet,r.weakMap])};e.exports=s.clone=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof e||null===e)return e;let i=s.clone,a=n;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);i=e=>e}else if(a){const t=a.get(e);if(t)return t}else a=new Map;const d=r.getInternalProto(e);if(d===r.buffer)return!1;if(d===r.date)return new Date(e.getTime());if(d===r.regex)return new RegExp(e);const c=s.base(e,d,t);if(c===e)return e;if(a&&a.set(e,c),d===r.set)for(const n of e)c.add(i(n,t,a));else if(d===r.map)for(const[n,r]of e)c.set(n,i(r,t,a));const l=o.keys(e,t);for(const n of l){if("__proto__"===n)continue;if(d===r.array&&"length"===n){c.length=e.length;continue}const o=Object.getOwnPropertyDescriptor(e,n);o?o.get||o.set?Object.defineProperty(c,n,o):o.enumerable?c[n]=i(e[n],t,a):Object.defineProperty(c,n,{enumerable:!1,writable:!0,configurable:!0,value:i(e[n],t,a)}):Object.defineProperty(c,n,{enumerable:!0,writable:!0,configurable:!0,value:i(e[n],t,a)})}return c},s.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const r=new Map;for(const t of n){const n=i(e,t);"object"!=typeof n&&"function"!=typeof n||r.set(n,n)}return s.clone(e,t,r)},s.base=function(e,t,n){if(!1===n.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===r.array?[]:{};const i=Object.getPrototypeOf(e);if(i&&i.isImmutable)return e;if(t===r.array){const e=[];return i!==t&&Object.setPrototypeOf(e,i),e}if(s.needsProtoHack.has(t)){const e=new i.constructor;return i!==t&&Object.setPrototypeOf(e,i),e}return Object.create(i)}},9474:(e,t,n)=>{"use strict";const i=n(4277),r={mismatched:null};e.exports=function(e,t,n){return n=Object.assign({prototype:!0},n),!!r.isDeepEqual(e,t,n,[])},r.isDeepEqual=function(e,t,n,o){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!n.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const a=r.getSharedType(e,t,!!n.prototype);switch(a){case i.buffer:return!1;case i.promise:return e===t;case i.regex:return e.toString()===t.toString();case r.mismatched:return!1}for(let n=o.length-1;n>=0;--n)if(o[n].isSame(e,t))return!0;o.push(new r.SeenEntry(e,t));try{return!!r.isDeepEqualObj(a,e,t,n,o)}finally{o.pop()}},r.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?r.mismatched:i.getInternalProto(e);const o=i.getInternalProto(e);return o!==i.getInternalProto(t)?r.mismatched:o},r.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},r.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},r.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},r.isDeepEqualObj=function(e,t,n,o,s){const{isDeepEqual:a,valueOf:d,hasOwnEnumerableProperty:c}=r,{keys:l,getOwnPropertySymbols:u}=Object;if(e===i.array){if(!o.part){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!a(t[e],n[e],o,s))return!1;return!0}for(const e of t)for(const t of n)if(a(e,t,o,s))return!0}else if(e===i.set){if(t.size!==n.size)return!1;if(!r.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const i of e)if(a(n,i,o,s)){e.delete(i),t=!0;break}if(!t)return!1}}}else if(e===i.map){if(t.size!==n.size)return!1;for(const[e,i]of Map.prototype.entries.call(t)){if(void 0===i&&!Map.prototype.has.call(n,e))return!1;if(!a(i,Map.prototype.get.call(n,e),o,s))return!1}}else if(e===i.error&&(t.name!==n.name||t.message!==n.message))return!1;const p=d(t),h=d(n);if((t!==p||n!==h)&&!a(p,h,o,s))return!1;const g=l(t);if(!o.part&&g.length!==l(n).length&&!o.skip)return!1;let f=0;for(const e of g)if(o.skip&&o.skip.includes(e))void 0===n[e]&&++f;else{if(!c(n,e))return!1;if(!a(t[e],n[e],o,s))return!1}if(!o.part&&g.length-f!==l(n).length)return!1;if(!1!==o.symbols){const e=u(t),i=new Set(u(n));for(const r of e){if(!o.skip||!o.skip.includes(r))if(c(t,r)){if(!c(n,r))return!1;if(!a(t[r],n[r],o,s))return!1}else if(c(n,r))return!1;i.delete(r)}for(const e of i)if(c(n,e))return!1}return!0},r.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,n)=>{"use strict";const i=n(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:i(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";const t={};e.exports=function(e){if(!e)return"";let n="";for(let i=0;i<e.length;++i){const r=e.charCodeAt(i);t.isSafe(r)?n+=e[i]:n+=t.escapeHtmlChar(r)}return n},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,n)=>{"use strict";const i=n(375),r=n(8571),o=n(7043),s={};e.exports=s.merge=function(e,t,n){if(i(e&&"object"==typeof e,"Invalid target value: must be an object"),i(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){i(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let i=0;i<t.length;++i)e.push(r(t[i],{symbols:n.symbols}));return e}const a=o.keys(t,n);for(let i=0;i<a.length;++i){const o=a[i];if("__proto__"===o||!Object.prototype.propertyIsEnumerable.call(t,o))continue;const d=t[o];if(d&&"object"==typeof d){if(e[o]===d)continue;!e[o]||"object"!=typeof e[o]||Array.isArray(e[o])!==Array.isArray(d)||d instanceof Date||d instanceof RegExp?e[o]=r(d,{symbols:n.symbols}):s.merge(e[o],d,n)}else(null!=d||n.nullOverride)&&(e[o]=d)}return e}},9621:(e,t,n)=>{"use strict";const i=n(375),r={};e.exports=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const o=Array.isArray(t);i(!o||!n.separator,"Separator option is not valid for array-based chain");const s=o?t:t.split(n.separator||".");let a=e;for(let e=0;e<s.length;++e){let o=s[e];const d=n.iterables&&r.iterables(a);if(Array.isArray(a)||"set"===d){const e=Number(o);Number.isInteger(e)&&(o=e<0?a.length+e:e)}if(!a||"function"==typeof a&&!1===n.functions||!d&&void 0===a[o]){i(!n.strict||e+1===s.length,"Missing segment",o,"in reach path ",t),i("object"==typeof a||!0===n.functions||"function"!=typeof a,"Invalid segment",o,"in reach path ",t),a=n.default;break}a=d?"set"===d?[...a][o]:a.get(o):a[o]}return a},r.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(){try{return JSON.stringify(...arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";const n={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const i=Object.prototype.toString.call(e);return n.typeMap.get(i)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,n)=>{"use strict";const i=n(375),r={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const n=[].concat((t=t||{}).before||[]),r=[].concat(t.after||[]),o=t.group||"?",s=t.sort||0;i(!n.includes(o),`Item cannot come before itself: ${o}`),i(!n.includes("?"),"Item cannot come before unassociated items"),i(!r.includes(o),`Item cannot come after itself: ${o}`),i(!r.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:n,after:r,group:o,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();i(e,"item","?"!==o?`added into group ${o}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(r.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return i(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return i(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),n=Object.create(null);for(const i of this._items){const r=i.seq,o=i.group;n[o]=n[o]||[],n[o].push(r),e[r]=i.before;for(const e of i.after)t[e]=t[e]||[],t[e].push(r)}for(const t in e){const i=[];for(const r in e[t]){const o=e[t][r];n[o]=n[o]||[],i.push(...n[o])}e[t]=i}for(const i in t)if(n[i])for(const r of n[i])e[r].push(...t[i]);const i={};for(const t in e){const n=e[t];for(const e of n)i[e]=i[e]||[],i[e].push(t)}const r={},o=[];for(let e=0;e<this._items.length;++e){let t=e;if(i[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===r[e])continue;i[e]||(i[e]=[]);const n=i[e].length;let o=0;for(let t=0;t<n;++t)r[i[e][t]]&&++o;if(o===n){t=e;break}}}null!==t&&(r[t]=!0,o.push(t))}if(o.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of o){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},r.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,n)=>{"use strict";const i=n(443),r=n(2178),o={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:i.URL||URL};t.analyze=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return r.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return r.code("DOMAIN_TOO_LONG");if(o.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return r.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(o.domainControlRx.test(e))return r.code("DOMAIN_INVALID_CHARS");e=o.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const n=t.minDomainSegments||o.minDomainSegments,i=e.split(".");if(i.length<n)return r.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&i.length>t.maxDomainSegments)return r.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=i[i.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return r.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<i.length;++e){const t=i[e];if(!t.length)return r.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return r.code("DOMAIN_LONG_SEGMENT");if(e<i.length-1){if(!o.domainSegmentRx.test(t))return r.code("DOMAIN_INVALID_CHARS")}else if(!o.tldSegmentRx.test(t))return r.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,n){return!t.analyze(e,n)},o.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new o.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,n)=>{"use strict";const i=n(9848),r=n(5380),o=n(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(i.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return o.code("EMPTY_STRING");const n=!s.nonAsciiRx.test(e);if(!n){if(!1===t.allowUnicode)return o.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const i=e.split("@");if(2!==i.length)return i.length>2?o.code("MULTIPLE_AT_CHAR"):o.code("MISSING_AT_CHAR");const[a,d]=i;if(!a)return o.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return o.code("ADDRESS_TOO_LONG");if(s.encoder.encode(a).length>64)return o.code("LOCAL_TOO_LONG")}return s.local(a,n)||r.analyze(d,t)},s.local=function(e,t){const n=e.split(".");for(const e of n){if(!e.length)return o.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return o.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return o.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,n)=>{"use strict";const i=n(375),r=n(5752);t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";i(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),i(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let n=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),i(n.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<n.length;++e)i("string"==typeof n[e],"options.version must only contain strings"),n[e]=n[e].toLowerCase(),i(["ipv4","ipv6","ipvfuture"].includes(n[e]),"options.version contains unknown version "+n[e]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const o=`(?:${n.map((e=>{if("forbidden"===t)return r.ip[e];const n=`\\/${"ipv4"===e?r.ip.v4Cidr:r.ip.v6Cidr}`;return"required"===t?`${r.ip[e]}${n}`:`${r.ip[e]}(?:${n})?`})).join("|")})`,s=new RegExp(`^${o}$`);return{cidr:t,versions:n,regex:s,raw:o}}},5752:(e,t,n)=>{"use strict";const i=n(375),r=n(6064),o={generate:function(){const e={},t="\\dA-Fa-f",n="["+t+"]",i="\\w-\\.~",r="!\\$&'\\(\\)\\*\\+,;=",o="%"+t,s=i+o+r+":@",a="["+s+"]",d="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+d+"\\.){3}"+d;const c=n+"{1,4}",l="(?:"+c+":"+c+"|"+e.ipv4address+")",u="(?:"+c+":){6}"+l,p="::(?:"+c+":){5}"+l,h="(?:"+c+")?::(?:"+c+":){4}"+l,g="(?:(?:"+c+":){0,1}"+c+")?::(?:"+c+":){3}"+l,f="(?:(?:"+c+":){0,2}"+c+")?::(?:"+c+":){2}"+l,m="(?:(?:"+c+":){0,3}"+c+")?::"+c+":"+l,v="(?:(?:"+c+":){0,4}"+c+")?::"+l,b="(?:(?:"+c+":){0,5}"+c+")?::"+c,y="(?:(?:"+c+":){0,6}"+c+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+u+"|"+p+"|"+h+"|"+g+"|"+f+"|"+m+"|"+v+"|"+b+"|"+y+")",e.ipvFuture="v"+n+"+\\.["+i+r+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const A="["+i+o+r+":]*",w="["+i+o+r+"]{1,255}",S="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+w+")",I="(?:"+A+"@)?"+S+"(?::\\d*)?",E="(?:"+A+"@)?("+S+")(?::\\d*)?",_=a+"*",x=a+"+",P="(?:\\/"+_+")*",T="\\/(?:"+x+P+")?",O=x+P,C="["+i+o+r+"@]+"+P,R="(?:\\/\\/\\/"+_+P+")";return e.hierPart="(?:(?:\\/\\/"+I+P+")|"+T+"|"+O+"|"+R+")",e.hierPartCapture="(?:(?:\\/\\/"+E+P+")|"+T+"|"+O+")",e.relativeRef="(?:(?:\\/\\/"+I+P+")|"+T+"|"+C+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+E+P+")|"+T+"|"+C+"|)",e.query="["+s+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+s+"\\/\\?]*",e}};o.rfc3986=o.generate(),t.ip={v4Cidr:o.rfc3986.ipv4Cidr,v6Cidr:o.rfc3986.ipv6Cidr,ipv4:o.rfc3986.ipv4address,ipv6:o.rfc3986.ipv6address,ipvfuture:o.rfc3986.ipvFuture},o.createRegex=function(e){const t=o.rfc3986,n="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return o.wrap(s+n);let a="";if(e.scheme){i(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(e.scheme);i(n.length>=1,"scheme must have at least 1 scheme specified");const o=[];for(let e=0;e<n.length;++e){const s=n[e];i(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?o.push(s.source.toString()):(i(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),o.push(r(s)))}a=o.join("|")}const d="(?:"+(a?"(?:"+a+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",c=e.allowRelative?"(?:"+d+"|"+s+")":d;return o.wrap(c+n,a)},o.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},o.uriRegex=o.createRegex({}),t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?o.createRegex(e):o.uriRegex}},1447:(e,t)=>{"use strict";const n={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t[n.settings]&&t.constants)for(const e in t.constants){const n=t.constants[e];if(null!==n&&!["boolean","number","string"].includes(typeof n))throw new Error(`Formula constant ${e} contains invalid ${typeof n} value type`)}this.settings=t[n.settings]?t:Object.assign({[n.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let i=[],r="",o=0,s=!1;const a=e=>{if(o)throw new Error("Formula missing closing parenthesis");const a=i.length?i[i.length-1]:null;if(s||r||e){if(a&&"reference"===a.type&&")"===e)return a.type="function",a.value=this._subFormula(r,a.value),void(r="");if(")"===e){const e=new t.Parser(r,this.settings);i.push({type:"segment",value:e})}else if(s){if("]"===s)return i.push({type:"reference",value:r}),void(r="");i.push({type:"literal",value:r})}else if(n.operatorCharacters.includes(r))a&&"operator"===a.type&&n.operators.includes(a.value+r)?a.value+=r:i.push({type:"operator",value:r});else if(r.match(n.numberRx))i.push({type:"constant",value:parseFloat(r)});else if(void 0!==this.settings.constants[r])i.push({type:"constant",value:this.settings.constants[r]});else{if(!r.match(n.tokenRx))throw new Error(`Formula contains invalid token: ${r}`);i.push({type:"reference",value:r})}r=""}};for(const t of e)s?t===s?(a(),s=!1):r+=t:o?"("===t?(r+=t,++o):")"===t?(--o,o?r+=t:a(t)):r+=t:t in n.literals?s=n.literals[t]:"("===t?(a(),++o):n.operatorCharacters.includes(t)?(a(),r=t,a()):" "!==t?r+=t:a();a(),i=i.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==i[t-1].type?e:{type:"operator",value:"n"}));let d=!1;for(const e of i){if("operator"===e.type){if(n.operatorsPrefix.includes(e.value))continue;if(!d)throw new Error("Formula contains an operator in invalid position");if(!n.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(d)throw new Error("Formula missing expected operator");d=!d}if(!d)throw new Error("Formula contains invalid trailing operator");1===i.length&&["reference","literal","constant"].includes(i[0].type)&&(this.single={type:"reference"===i[0].type?"reference":"value",value:i[0].value}),this._parts=i.map((e=>{if("operator"===e.type)return n.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):n.reference(e.value)}))}_subFormula(e,i){const r=this.settings.functions[i];if("function"!=typeof r)throw new Error(`Formula contains unknown function ${i}`);let o=[];if(e){let t="",r=0,s=!1;const a=()=>{if(!t)throw new Error(`Formula contains function ${i} with invalid arguments ${e}`);o.push(t),t=""};for(let i=0;i<e.length;++i){const o=e[i];s?(t+=o,o===s&&(s=!1)):o in n.literals&&!r?(t+=o,s=n.literals[o]):","!==o||r?(t+=o,"("===o?++r:")"===o&&--r):a()}a()}return o=o.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const n of o)t.push(n.evaluate(e));return r.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let i=t.length-2;i>=0;--i){const r=t[i];if(r&&"operator"===r.type){const o=t[i+1];t.splice(i+1,1);const s=n.evaluate(o,e);t[i]=n.single(r.value,s)}}return n.operatorsOrder.forEach((i=>{for(let r=1;r<t.length-1;)if(i.includes(t[r])){const i=t[r],o=n.evaluate(t[r-1],e),s=n.evaluate(t[r+1],e);t.splice(r,2);const a=n.calculate(i,o,s);t[r-1]=0===a?0:a}else r+=2})),n.evaluate(t[0],e)}},t.Parser.prototype[n.symbol]=!0,n.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},n.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[n.symbol]?e.evaluate(t):e},n.single=function(e,t){if("!"===e)return!t;const n=-t;return 0===n?0:n},n.calculate=function(e,t,i){if("??"===e)return n.exists(t)?t:i;if("string"==typeof t||"string"==typeof i){if("+"===e)return(t=n.exists(t)?t:"")+(n.exists(i)?i:"")}else switch(e){case"^":return Math.pow(t,i);case"*":return t*i;case"/":return t/i;case"%":return t%i;case"+":return t+i;case"-":return t-i}switch(e){case"<":return t<i;case"<=":return t<=i;case">":return t>i;case">=":return t>=i;case"==":return t===i;case"!=":return t!==i;case"&&":return t&&i;case"||":return t||i}return null},n.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports={version:"17.9.2"}}},t={},function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(5107);var e,t},e.exports=t()},1201:function(e){var t;e.exports=(t=function(){this.listeners={},this.registerListener=function(t,n,i){var r=t.constructor.name;i=this.validateNumber(i||"any"),"Array"!==r&&(t=[t]),t.forEach((function(t){if("String"!==t.constructor.name)throw new Error("Only `String` and array of `String` are accepted for the event names!");e.listeners[t]=e.listeners[t]||[],e.listeners[t].push({callback:n,number:i})}))},this.validateNumber=function(e){var t=e.constructor.name;if("Number"===t)return e;if("String"===t&&"any"===e.toLowerCase())return"any";throw new Error("Only `Number` and `any` are accepted in the number of possible executions!")},this.toBeRemoved=function(e){var t=e.number;return e.execution=e.execution||0,e.execution++,!("any"===t||e.execution<t)};var e=this;return{on:function(t,n){e.registerListener.bind(e)(t,n,"any")},once:function(t,n){e.registerListener.bind(e)(t,n,1)},exactly:function(t,n,i){e.registerListener.bind(e)(n,i,t)},die:function(t){delete e.listeners[t]},off:function(e){this.die(e)},detach:function(t,n){if(void 0===n)return e.listeners[t]=[],!0;for(var i in e.listeners[t])if(e.listeners[t].hasOwnProperty(i)&&e.listeners[t][i].callback===n)return e.listeners[t].splice(i,1),this.detach(t,n);return!0},detachAll:function(){for(var t in e.listeners)e.listeners.hasOwnProperty(t)&&this.detach(t)},emit:function(t,n){var i=[];for(var r in e.listeners)if(e.listeners.hasOwnProperty(r)&&(r===t&&Array.prototype.push.apply(i,e.listeners[r]),r.indexOf("*")>=0)){var o=r.replace(/\*\*/,"([^.]+.?)+");o=o.replace(/\*/g,"[^.]+");var s=t.match(o);s&&t===s[0]&&Array.prototype.push.apply(i,e.listeners[r])}var a=arguments;n=n||this,i.forEach((function(i,r){var o=i.callback;i.number,n&&(o=o.bind(n));var s=[];Object.keys(a).map((function(e){e>1&&s.push(a[e])})),e.toBeRemoved(i)&&e.listeners[t].splice(r,1),o.apply(null,s)}))}}},t),e.exports.default=e.exports},3591:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],d="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function o(){n&&(n=!1,e()),i&&d()}function a(){s(o)}function d(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(a,t);r=e}return d}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},p=b(0,0,0,0);function h(e){return parseFloat(e)||0}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+h(e["border-"+n+"-width"])}),0)}function f(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return p;var i=u(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=h(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=h(i.width),d=h(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=g(i,"left","right")+o),Math.round(d+s)!==n&&(d-=g(i,"top","bottom")+s)),!function(e){return e===u(e).document.documentElement}(e)){var c=Math.round(a+o)-t,l=Math.round(d+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(l)&&(d-=l)}return b(r.left,r.top,a,d)}var m="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return r?m(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):f(e):p}function b(e,t,n,i){return{x:e,y:t,width:n,height:i}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),A=function(e,t){var n,i,r,o,s,a,d,c=(i=(n=t).x,r=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,d=Object.create(a.prototype),l(d,{x:i,y:r,width:o,height:s,top:r,right:i+o,bottom:s+r,left:i}),d);l(this,{target:e,contentRect:c})},w=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new A(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!=typeof WeakMap?new WeakMap:new i,I=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),i=new w(t,n,this);S.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){I.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}));const E=void 0!==o.ResizeObserver?o.ResizeObserver:I},3904:(e,t,n)=>{const i=Symbol("SemVer ANY");class r{static get ANY(){return i}constructor(e,t){if(t=o(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=i}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return d(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,t).test(this.value):""===e.operator?""===e.value||new u(this.value,t).test(e.semver):(!(t=o(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(d(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(d(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=r;const o=n(8587),{safeRe:s,t:a}=n(9718),d=n(4492),c=n(7272),l=n(3908),u=n(8311)},8311:(e,t,n)=>{const i=/\s+/g;class r{constructor(e,t){if(t=s(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(i," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&m))+":"+e,n=o.get(t);if(n)return n;const i=this.options.loose,r=i?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];e=e.replace(r,C(this.options.includePrerelease)),d("hyphen replace",e),e=e.replace(l[u.COMPARATORTRIM],p),d("comparator trim",e),e=e.replace(l[u.TILDETRIM],h),d("tilde trim",e),e=e.replace(l[u.CARETTRIM],g),d("caret trim",e);let s=e.split(" ").map((e=>A(e,this.options))).join(" ").split(/\s+/).map((e=>O(e,this.options)));i&&(s=s.filter((e=>(d("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE]))))),d("range list",s);const c=new Map,b=s.map((e=>new a(e,this.options)));for(const e of b){if(v(e))return[e];c.set(e.value,e)}c.size>1&&c.has("")&&c.delete("");const y=[...c.values()];return o.set(t,y),y}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>y(n,t)&&e.set.some((e=>y(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const o=new(n(8794)),s=n(8587),a=n(3904),d=n(7272),c=n(3908),{safeRe:l,t:u,comparatorTrimReplace:p,tildeTrimReplace:h,caretTrimReplace:g}=n(9718),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:m}=n(6874),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let n=!0;const i=e.slice();let r=i.pop();for(;n&&i.length;)n=i.every((e=>r.intersects(e,t))),r=i.pop();return n},A=(e,t)=>(d("comp",e,t),e=E(e,t),d("caret",e),e=S(e,t),d("tildes",e),e=x(e,t),d("xrange",e),e=T(e,t),d("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,S=(e,t)=>e.trim().split(/\s+/).map((e=>I(e,t))).join(" "),I=(e,t)=>{const n=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(n,((t,n,i,r,o)=>{let s;return d("tilde",e,t,n,i,r,o),w(n)?s="":w(i)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:w(r)?s=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(d("replaceTilde pr",o),s=`>=${n}.${i}.${r}-${o} <${n}.${+i+1}.0-0`):s=`>=${n}.${i}.${r} <${n}.${+i+1}.0-0`,d("tilde return",s),s}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{d("caret",e,t);const n=t.loose?l[u.CARETLOOSE]:l[u.CARET],i=t.includePrerelease?"-0":"";return e.replace(n,((t,n,r,o,s)=>{let a;return d("caret",e,t,n,r,o,s),w(n)?a="":w(r)?a=`>=${n}.0.0${i} <${+n+1}.0.0-0`:w(o)?a="0"===n?`>=${n}.${r}.0${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.0${i} <${+n+1}.0.0-0`:s?(d("replaceCaret pr",s),a="0"===n?"0"===r?`>=${n}.${r}.${o}-${s} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}-${s} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o}-${s} <${+n+1}.0.0-0`):(d("no pr"),a="0"===n?"0"===r?`>=${n}.${r}.${o}${i} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o} <${+n+1}.0.0-0`),d("caret return",a),a}))},x=(e,t)=>(d("replaceXRanges",e,t),e.split(/\s+/).map((e=>P(e,t))).join(" ")),P=(e,t)=>{e=e.trim();const n=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(n,((n,i,r,o,s,a)=>{d("xRange",e,n,i,r,o,s,a);const c=w(r),l=c||w(o),u=l||w(s),p=u;return"="===i&&p&&(i=""),a=t.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&p?(l&&(o=0),s=0,">"===i?(i=">=",l?(r=+r+1,o=0,s=0):(o=+o+1,s=0)):"<="===i&&(i="<",l?r=+r+1:o=+o+1),"<"===i&&(a="-0"),n=`${i+r}.${o}.${s}${a}`):l?n=`>=${r}.0.0${a} <${+r+1}.0.0-0`:u&&(n=`>=${r}.${o}.0${a} <${r}.${+o+1}.0-0`),d("xRange return",n),n}))},T=(e,t)=>(d("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),O=(e,t)=>(d("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),C=e=>(t,n,i,r,o,s,a,d,c,l,u,p)=>`${n=w(i)?"":w(r)?`>=${i}.0.0${e?"-0":""}`:w(o)?`>=${i}.${r}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${d=w(c)?"":w(l)?`<${+c+1}.0.0-0`:w(u)?`<${c}.${+l+1}.0-0`:p?`<=${c}.${l}.${u}-${p}`:e?`<${c}.${l}.${+u+1}-0`:`<=${d}`}`.trim(),R=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(d(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},3908:(e,t,n)=>{const i=n(7272),{MAX_LENGTH:r,MAX_SAFE_INTEGER:o}=n(6874),{safeRe:s,t:a}=n(9718),d=n(8587),{compareIdentifiers:c}=n(1123);class l{constructor(e,t){if(t=d(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return c(n,r)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(i("build compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return c(n,r)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===n&&(i=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},7414:(e,t,n)=>{const i=n(144);e.exports=(e,t)=>{const n=i(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},4492:(e,t,n)=>{const i=n(4641),r=n(3999),o=n(5580),s=n(4089),a=n(7059),d=n(5200);e.exports=(e,t,n,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return i(e,n,c);case"!=":return r(e,n,c);case">":return o(e,n,c);case">=":return s(e,n,c);case"<":return a(e,n,c);case"<=":return d(e,n,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},6170:(e,t,n)=>{const i=n(3908),r=n(144),{safeRe:o,t:s}=n(9718);e.exports=(e,t)=>{if(e instanceof i)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const i=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let r;for(;(r=i.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),i.lastIndex=r.index+r[1].length+r[2].length;i.lastIndex=-1}else n=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===n)return null;const a=n[2],d=n[3]||"0",c=n[4]||"0",l=t.includePrerelease&&n[5]?`-${n[5]}`:"",u=t.includePrerelease&&n[6]?`+${n[6]}`:"";return r(`${a}.${d}.${c}${l}${u}`,t)}},909:(e,t,n)=>{const i=n(3908);e.exports=(e,t,n)=>{const r=new i(e,n),o=new i(t,n);return r.compare(o)||r.compareBuild(o)}},1763:(e,t,n)=>{const i=n(560);e.exports=(e,t)=>i(e,t,!0)},560:(e,t,n)=>{const i=n(3908);e.exports=(e,t,n)=>new i(e,n).compare(new i(t,n))},1832:(e,t,n)=>{const i=n(144);e.exports=(e,t)=>{const n=i(e,null,!0),r=i(t,null,!0),o=n.compare(r);if(0===o)return null;const s=o>0,a=s?n:r,d=s?r:n,c=!!a.prerelease.length;if(!!d.prerelease.length&&!c)return d.patch||d.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=c?"pre":"";return n.major!==r.major?l+"major":n.minor!==r.minor?l+"minor":n.patch!==r.patch?l+"patch":"prerelease"}},4641:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>0===i(e,t,n)},5580:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>i(e,t,n)>0},4089:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>i(e,t,n)>=0},3007:(e,t,n)=>{const i=n(3908);e.exports=(e,t,n,r,o)=>{"string"==typeof n&&(o=r,r=n,n=void 0);try{return new i(e instanceof i?e.version:e,n).inc(t,r,o).version}catch(e){return null}}},7059:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>i(e,t,n)<0},5200:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>i(e,t,n)<=0},2938:(e,t,n)=>{const i=n(3908);e.exports=(e,t)=>new i(e,t).major},6254:(e,t,n)=>{const i=n(3908);e.exports=(e,t)=>new i(e,t).minor},3999:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>0!==i(e,t,n)},144:(e,t,n)=>{const i=n(3908);e.exports=(e,t,n=!1)=>{if(e instanceof i)return e;try{return new i(e,t)}catch(e){if(!n)return null;throw e}}},4493:(e,t,n)=>{const i=n(3908);e.exports=(e,t)=>new i(e,t).patch},1729:(e,t,n)=>{const i=n(144);e.exports=(e,t)=>{const n=i(e,t);return n&&n.prerelease.length?n.prerelease:null}},9970:(e,t,n)=>{const i=n(560);e.exports=(e,t,n)=>i(t,e,n)},4277:(e,t,n)=>{const i=n(909);e.exports=(e,t)=>e.sort(((e,n)=>i(n,e,t)))},7638:(e,t,n)=>{const i=n(8311);e.exports=(e,t,n)=>{try{t=new i(t,n)}catch(e){return!1}return t.test(e)}},3927:(e,t,n)=>{const i=n(909);e.exports=(e,t)=>e.sort(((e,n)=>i(e,n,t)))},6953:(e,t,n)=>{const i=n(144);e.exports=(e,t)=>{const n=i(e,t);return n?n.version:null}},9589:(e,t,n)=>{const i=n(9718),r=n(6874),o=n(3908),s=n(1123),a=n(144),d=n(6953),c=n(7414),l=n(3007),u=n(1832),p=n(2938),h=n(6254),g=n(4493),f=n(1729),m=n(560),v=n(9970),b=n(1763),y=n(909),A=n(3927),w=n(4277),S=n(5580),I=n(7059),E=n(4641),_=n(3999),x=n(4089),P=n(5200),T=n(4492),O=n(6170),C=n(3904),R=n(8311),U=n(7638),k=n(7631),D=n(9628),B=n(270),j=n(1261),N=n(3874),L=n(7075),M=n(5571),z=n(5342),F=n(6780),q=n(2525),H=n(5032);e.exports={parse:a,valid:d,clean:c,inc:l,diff:u,major:p,minor:h,patch:g,prerelease:f,compare:m,rcompare:v,compareLoose:b,compareBuild:y,sort:A,rsort:w,gt:S,lt:I,eq:E,neq:_,gte:x,lte:P,cmp:T,coerce:O,Comparator:C,Range:R,satisfies:U,toComparators:k,maxSatisfying:D,minSatisfying:B,minVersion:j,validRange:N,outside:L,gtr:M,ltr:z,intersects:F,simplifyRange:q,subset:H,SemVer:o,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},1123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const i=t.test(e),r=t.test(n);return i&&r&&(e=+e,n=+n),e===n?0:i&&!r?-1:r&&!i?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},9718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:o}=n(6874),s=n(7272),a=(t=e.exports={}).re=[],d=t.safeRe=[],c=t.src=[],l=t.t={};let u=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",o],[p,r]],g=(e,t,n)=>{const i=(e=>{for(const[t,n]of h)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),r=u++;s(e,r,t),l[e]=r,c[r]=t,a[r]=new RegExp(t,n?"g":void 0),d[r]=new RegExp(i,n?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),g("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${p}+`),g("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),g("FULL",`^${c[l.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),g("LOOSE",`^${c[l.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),g("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),g("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?`+`(?:${c[l.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[l.COERCE],!0),g("COERCERTLFULL",c[l.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},5571:(e,t,n)=>{const i=n(7075);e.exports=(e,t,n)=>i(e,t,">",n)},6780:(e,t,n)=>{const i=n(8311);e.exports=(e,t,n)=>(e=new i(e,n),t=new i(t,n),e.intersects(t,n))},5342:(e,t,n)=>{const i=n(7075);e.exports=(e,t,n)=>i(e,t,"<",n)},9628:(e,t,n)=>{const i=n(3908),r=n(8311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new r(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new i(o,n)))})),o}},270:(e,t,n)=>{const i=n(3908),r=n(8311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new r(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new i(o,n)))})),o}},1261:(e,t,n)=>{const i=n(3908),r=n(8311),o=n(5580);e.exports=(e,t)=>{e=new r(e,t);let n=new i("0.0.0");if(e.test(n))return n;if(n=new i("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let s=null;r.forEach((e=>{const t=new i(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},7075:(e,t,n)=>{const i=n(3908),r=n(3904),{ANY:o}=r,s=n(8311),a=n(7638),d=n(5580),c=n(7059),l=n(5200),u=n(4089);e.exports=(e,t,n,p)=>{let h,g,f,m,v;switch(e=new i(e,p),t=new s(t,p),n){case">":h=d,g=l,f=c,m=">",v=">=";break;case"<":h=c,g=u,f=d,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let n=0;n<t.set.length;++n){const i=t.set[n];let s=null,a=null;if(i.forEach((e=>{e.semver===o&&(e=new r(">=0.0.0")),s=s||e,a=a||e,h(e.semver,s.semver,p)?s=e:f(e.semver,a.semver,p)&&(a=e)})),s.operator===m||s.operator===v)return!1;if((!a.operator||a.operator===m)&&g(e,a.semver))return!1;if(a.operator===v&&f(e,a.semver))return!1}return!0}},2525:(e,t,n)=>{const i=n(7638),r=n(560);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const d=e.sort(((e,t)=>r(e,t,n)));for(const e of d){i(e,t,n)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null)}s&&o.push([s,null]);const c=[];for(const[e,t]of o)e===t?c.push(e):t||e!==d[0]?t?e===d[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");const l=c.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return l.length<u.length?l:t}},5032:(e,t,n)=>{const i=n(8311),r=n(3904),{ANY:o}=r,s=n(7638),a=n(560),d=[new r(">=0.0.0-0")],c=[new r(">=0.0.0")],l=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?d:c}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=c}const i=new Set;let r,l,h,g,f,m,v;for(const t of e)">"===t.operator||">="===t.operator?r=u(r,t,n):"<"===t.operator||"<="===t.operator?l=p(l,t,n):i.add(t.semver);if(i.size>1)return null;if(r&&l){if(h=a(r.semver,l.semver,n),h>0)return null;if(0===h&&(">="!==r.operator||"<="!==l.operator))return null}for(const e of i){if(r&&!s(e,String(r),n))return null;if(l&&!s(e,String(l),n))return null;for(const i of t)if(!s(e,String(i),n))return!1;return!0}let b=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver,y=!(!r||n.includePrerelease||!r.semver.prerelease.length)&&r.semver;b&&1===b.prerelease.length&&"<"===l.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,r)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(g=u(r,e,n),g===e&&g!==r)return!1}else if(">="===r.operator&&!s(r.semver,String(e),n))return!1;if(l)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(f=p(l,e,n),f===e&&f!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),n))return!1;if(!e.operator&&(l||r)&&0!==h)return!1}return!(r&&m&&!l&&0!==h)&&(!(l&&v&&!r&&0!==h)&&(!y&&!b))},u=(e,t,n)=>{if(!e)return t;const i=a(e.semver,t.semver,n);return i>0?e:i<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,n)=>{if(!e)return t;const i=a(e.semver,t.semver,n);return i<0?e:i>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new i(e,n),t=new i(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=l(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0}},7631:(e,t,n)=>{const i=n(8311);e.exports=(e,t)=>new i(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},3874:(e,t,n)=>{const i=n(8311);e.exports=(e,t)=>{try{return new i(e,t).range||"*"}catch(e){return null}}},8624:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DOMException:()=>w,Headers:()=>l,Request:()=>v,Response:()=>y,fetch:()=>S});var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==i&&i,r={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function h(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=u(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(h)}),this.text=function(){var e,t,n,i=u(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=p(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=a(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=d(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),c(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),c(e)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),m.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function y(e,t){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},f.call(v.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];y.redirect=function(e,t){if(-1===A.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})};var w=i.DOMException;try{new w}catch(e){(w=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function S(e,t){return new Promise((function(n,o){var s=new v(e,t);if(s.signal&&s.signal.aborted)return o(new w("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout((function(){n(new y(r,i))}),0)},a.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){o(new w("Aborted","AbortError"))}),0)},a.open(s.method,function(e){try{return""===e&&i.location.href?i.location.href:e}catch(t){return e}}(s.url),!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&(r.blob?a.responseType="blob":r.arrayBuffer&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof l?s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,d(t.headers[e]))})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}S.polyfill=!0,i.fetch||(i.fetch=S,i.Headers=l,i.Request=v,i.Response=y)},2111:e=>{o.SYNC=1,o.ASYNC=2,o.QUEUE=4;var t="fun-hooks",n=Object.freeze({ready:0}),i=new WeakMap;function r(e,t){return Array.prototype.slice.call(e,t)}function o(e){var s,a={},d=[];function c(e,t){return"function"==typeof e?h.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?h.apply(null,arguments):"object"==typeof e?l.apply(null,arguments):void 0}function l(e,t,n){var i=!0;void 0===t&&(t=Object.getOwnPropertyNames(e).filter((e=>!e.match(/^_/))),i=!1);var r={},o=["constructor"];do{t.forEach((function(t){var i=t.match(/(?:(sync|async):)?(.+)/),s=i[1]||"sync",a=i[2];if(!r[a]&&"function"==typeof e[a]&&-1===o.indexOf(a)){var d=e[a];r[a]=e[a]=h(s,d,n?[n,a]:void 0)}})),e=Object.getPrototypeOf(e)}while(i&&e);return r}function u(e){var n=Array.isArray(e)?e:e.split(".");return n.reduce((function(i,r,o){var a=i[r],c=!1;return a||(o===n.length-1?(s||d.push((function(){c||console.warn(t+": referenced '"+e+"' but it was never created")})),i[r]=p((function(e){i[r]=e,c=!0}))):i[r]={})}),a)}function p(e){var t=[],n=[],r=function(){},o={before:function(e,n){return a.call(this,t,"before",e,n)},after:function(e,t){return a.call(this,n,"after",e,t)},getHooks:function(e){var i=t.concat(n);"object"==typeof e&&(i=i.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{Object.assign(i,{remove:function(){return i.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return i},removeAll:function(){return this.getHooks().remove()}},s={install:function(i,o,s){this.type=i,r=s,s(t,n),e&&e(o)}};return i.set(o.after,s),o;function a(e,i,o,s){var a={hook:o,type:i,priority:s||10,remove:function(){var i=e.indexOf(a);-1!==i&&(e.splice(i,1),r(t,n))}};return e.push(a),e.sort((function(e,t){return t.priority-e.priority})),r(t,n),this}}function h(n,a,c){var l=a.after&&i.get(a.after);if(l){if(l.type!==n)throw t+": recreated hookable with different type";return a}var h,g=c?u(c):p(),f={get:function(e,t){return g[t]||Reflect.get.apply(Reflect,arguments)}};s||d.push(v);var m=new Proxy(a,f);return i.get(m.after).install(n,m,(function(e,t){var i,o=[];e.length||t.length?(e.forEach(s),i=o.push(void 0)-1,t.forEach(s),h=function(e,t,s){var a,d=o.slice(),c=0,l="async"===n&&"function"==typeof s[s.length-1]&&s.pop();function u(e){"sync"===n?a=e:l&&l.apply(null,arguments)}function p(e){if(d[c]){var i=r(arguments);return p.bail=u,i.unshift(p),d[c++].apply(t,i)}"sync"===n?a=e:l&&l.apply(null,arguments)}return d[i]=function(){var i=r(arguments,1);"async"===n&&l&&(delete p.bail,i.push(p));var o=e.apply(t,i);"sync"===n&&p(o)},p.apply(null,s),a}):h=void 0;function s(e){o.push(e.hook)}v()})),m;function v(){!s&&("sync"!==n||e.ready&o.SYNC)&&("async"!==n||e.ready&o.ASYNC)?"sync"!==n&&e.ready&o.QUEUE?f.apply=function(){var e=arguments;d.push((function(){m.apply(e[1],e[2])}))}:f.apply=function(){throw t+": hooked function not ready"}:f.apply=h}}return(e=Object.assign({},n,e)).ready?c.ready=function(){s=!0,function(e){for(var t;t=e.shift();)t()}(d)}:s=!0,c.get=u,c}e.exports=o},477:()=>{},5561:()=>{},5305:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},7780:(e,t,n)=>{var i=n(851);function r(){var t,n,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function d(e,r,o,s){var a=r&&r.prototype instanceof l?r:l,d=Object.create(a.prototype);return i(d,"_invoke",function(e,i,r){var o,s,a,d=0,l=r||[],u=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return o=e,s=0,a=t,p.n=n,c}};function h(e,i){for(s=e,a=i,n=0;!u&&d&&!r&&n<l.length;n++){var r,o=l[n],h=p.p,g=o[2];e>3?(r=g===i)&&(a=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=h&&((r=e<2&&h<o[1])?(s=0,p.v=i,p.n=o[1]):h<g&&(r=e<3||o[0]>i||i>g)&&(o[4]=e,o[5]=i,p.n=g,s=0))}if(r||e>1)return c;throw u=!0,i}return function(r,l,g){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&h(l,g),s=l,a=g;(n=s<2?t:a)||!u;){o||(s?s<3?(s>1&&(p.n=-1),h(s,a)):p.n=a:p.v=a);try{if(d=2,o){if(s||(r="next"),n=o[r]){if(!(n=n.call(o,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,s<2&&(s=0)}else 1===s&&(n=o.return)&&n.call(o),s<2&&(a=TypeError("The iterator does not provide a '"+r+"' method"),s=1);o=t}else if((n=(u=p.n<0)?a:e.call(i,p))!==c)break}catch(e){o=t,s=1,a=e}finally{d=1}}return{value:n,done:u}}}(e,o,s),!0),d}var c={};function l(){}function u(){}function p(){}n=Object.getPrototypeOf;var h=[][s]?n(n([][s]())):(i(n={},s,(function(){return this})),n),g=p.prototype=l.prototype=Object.create(h);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e}return u.prototype=p,i(g,"constructor",p),i(p,"constructor",u),u.displayName="GeneratorFunction",i(p,a,"GeneratorFunction"),i(g),i(g,a,"Generator"),i(g,s,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),(e.exports=r=function(){return{w:d,m:f}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},2354:(e,t,n)=>{var i=n(6386);e.exports=function(e,t,n,r,o){var s=i(e,t,n,r,o);return s.next().then((function(e){return e.done?e.value:s.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},6386:(e,t,n)=>{var i=n(7780),r=n(3672);e.exports=function(e,t,n,o,s){return new r(i().w(e,t,n,o),s||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},3672:(e,t,n)=>{var i=n(5305),r=n(851);e.exports=function e(t,n){function o(e,r,s,a){try{var d=t[e](r),c=d.value;return c instanceof i?n.resolve(c.v).then((function(e){o("next",e,s,a)}),(function(e){o("throw",e,s,a)})):n.resolve(c).then((function(e){d.value=e,s(d)}),(function(e){return o("throw",e,s,a)}))}catch(e){a(e)}}var s;this.next||(r(e.prototype),r(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),r(this,"_invoke",(function(e,t,i){function r(){return new n((function(t,n){o(e,i,t,n)}))}return s=s?s.then(r,r):r()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},851:e=>{function t(n,i,r,o){var s=Object.defineProperty;try{s({},"",{})}catch(n){s=0}e.exports=t=function(e,n,i,r){function o(n,i){t(e,n,(function(e){return this._invoke(n,i,e)}))}n?s?s(e,n,{value:i,enumerable:!r,configurable:!r,writable:!r}):e[n]=i:(o("next",0),o("throw",1),o("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i,r,o)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5436:e=>{e.exports=function(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},8338:(e,t,n)=>{var i=n(5305),r=n(7780),o=n(2354),s=n(6386),a=n(3672),d=n(5436),c=n(6190);function l(){"use strict";var t=r(),n=t.m(l),u=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))}var h={throw:1,return:2,break:3,continue:3};function g(e){var t,n;return function(i){t||(t={stop:function(){return n(i.a,2)},catch:function(){return i.v},abrupt:function(e,t){return n(i.a,h[e],t)},delegateYield:function(e,r,o){return t.resultName=r,n(i.d,c(e),o)},finish:function(e){return n(i.f,e)}},n=function(e,n,r){i.p=t.prev,i.n=t.next;try{return e(n,r)}finally{t.next=i.n}}),t.resultName&&(t[t.resultName]=i.v,t.resultName=void 0),t.sent=i.v,t.next=i.n;try{return e.call(this,t)}finally{i.p=t.prev,i.n=t.next}}}return(e.exports=l=function(){return{wrap:function(e,n,i,r){return t.w(g(e),n,i,r&&r.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new i(e,t)},AsyncIterator:a,async:function(e,t,n,i,r){return(p(t)?s:o)(g(e),t,n,i,r)},keys:d,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports},6190:(e,t,n)=>{var i=n(3361).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(i(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},3361:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},865:(e,t,n)=>{var i=n(8338)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(3815),t=__webpack_require__(329);!function(){const e=(0,t.Ge)().bundleRedirect||localStorage.getItem("bundleRedirect");if(e&&!window.owBundleRedirected){const t=document.createElement("script");t.async=!0,t.src=e,document.head.appendChild(t),window.owBundleRedirected=!0;const n=window.onerror;throw window.onerror=()=>!0,window.setTimeout((()=>{window.onerror=n}),0),new Error("Bundle has been redirected")}}(),(async()=>{await(0,e.Ay)(Array.from(e.Ay.forLoading)),__webpack_require__(8716),__webpack_require__(6305),__webpack_require__(9439),__webpack_require__(5444),__webpack_require__(672),__webpack_require__(3137),__webpack_require__(1102),__webpack_require__(9659),__webpack_require__(3767),__webpack_require__(9789),__webpack_require__(2969),__webpack_require__(5764),__webpack_require__(7954),__webpack_require__(8917),__webpack_require__(9687),__webpack_require__(8901),__webpack_require__(8647),__webpack_require__(4714),__webpack_require__(9986),__webpack_require__(8841),__webpack_require__(5991),__webpack_require__(9564),__webpack_require__(6988),__webpack_require__(2216),__webpack_require__(9490)})()})()})();